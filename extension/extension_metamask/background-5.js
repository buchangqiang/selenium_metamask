LavaPack.loadBundle([[1660,{"../errors":1657,"./_stream_duplex":1658,"./internal/streams/async_iterator":1663,"./internal/streams/buffer_list":1664,"./internal/streams/destroy":1665,"./internal/streams/from":1667,"./internal/streams/state":1669,"./internal/streams/stream":1670,_process:5294,buffer:2028,events:2029,inherits:4329,"string_decoder/":5755,util:2027},function(){with(this)return function(){"use strict";return function(e,t,r){(function(r){(function(){var n;t.exports=C,C.ReadableState=S;e("events").EventEmitter;var i=function(e,t){return e.listeners(t).length},s=e("./internal/streams/stream"),o=e("buffer").Buffer,a=global.Uint8Array||function(){};var c,u=e("util");c=u&&u.debuglog?u.debuglog("stream"):function(){};var l,d,f,h=e("./internal/streams/buffer_list"),p=e("./internal/streams/destroy"),m=e("./internal/streams/state").getHighWaterMark,g=e("../errors").codes,y=g.ERR_INVALID_ARG_TYPE,b=g.ERR_STREAM_PUSH_AFTER_EOF,_=g.ERR_METHOD_NOT_IMPLEMENTED,w=g.ERR_STREAM_UNSHIFT_AFTER_END_EVENT;e("inherits")(C,s);var v=p.errorOrDestroy,E=["error","close","destroy","pause","resume"];function S(t,r,i){n=n||e("./_stream_duplex"),t=t||{},"boolean"!=typeof i&&(i=r instanceof n),this.objectMode=!!t.objectMode,i&&(this.objectMode=this.objectMode||!!t.readableObjectMode),this.highWaterMark=m(this,t,"readableHighWaterMark",i),this.buffer=new h,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.paused=!0,this.emitClose=!1!==t.emitClose,this.autoDestroy=!!t.autoDestroy,this.destroyed=!1,this.defaultEncoding=t.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,t.encoding&&(l||(l=e("string_decoder/").StringDecoder),this.decoder=new l(t.encoding),this.encoding=t.encoding)}function C(t){if(n=n||e("./_stream_duplex"),!(this instanceof C))return new C(t);var r=this instanceof n;this._readableState=new S(t,this,r),this.readable=!0,t&&("function"==typeof t.read&&(this._read=t.read),"function"==typeof t.destroy&&(this._destroy=t.destroy)),s.call(this)}function k(e,t,r,n,i){c("readableAddChunk",t);var s,u=e._readableState;if(null===t)u.reading=!1,function(e,t){if(c("onEofChunk"),t.ended)return;if(t.decoder){var r=t.decoder.end();r&&r.length&&(t.buffer.push(r),t.length+=t.objectMode?1:r.length)}t.ended=!0,t.sync?R(e):(t.needReadable=!1,t.emittedReadable||(t.emittedReadable=!0,j(e)))}(e,u);else if(i||(s=function(e,t){var r;n=t,o.isBuffer(n)||n instanceof a||"string"==typeof t||t===undefined||e.objectMode||(r=new y("chunk",["string","Buffer","Uint8Array"],t));var n;return r}(u,t)),s)v(e,s);else if(u.objectMode||t&&t.length>0)if("string"==typeof t||u.objectMode||Object.getPrototypeOf(t)===o.prototype||(t=function(e){return o.from(e)}(t)),n)u.endEmitted?v(e,new w):I(e,u,t,!0);else if(u.ended)v(e,new b);else{if(u.destroyed)return!1;u.reading=!1,u.decoder&&!r?(t=u.decoder.write(t),u.objectMode||0!==t.length?I(e,u,t,!1):x(e,u)):I(e,u,t,!1)}else n||(u.reading=!1,x(e,u));return!u.ended&&(u.length<u.highWaterMark||0===u.length)}function I(e,t,r,n){t.flowing&&0===t.length&&!t.sync?(t.awaitDrain=0,e.emit("data",r)):(t.length+=t.objectMode?1:r.length,n?t.buffer.unshift(r):t.buffer.push(r),t.needReadable&&R(e)),x(e,t)}Object.defineProperty(C.prototype,"destroyed",{enumerable:!1,get:function(){return this._readableState!==undefined&&this._readableState.destroyed},set:function(e){this._readableState&&(this._readableState.destroyed=e)}}),C.prototype.destroy=p.destroy,C.prototype._undestroy=p.undestroy,C.prototype._destroy=function(e,t){t(e)},C.prototype.push=function(e,t){var r,n=this._readableState;return n.objectMode?r=!0:"string"==typeof e&&((t=t||n.defaultEncoding)!==n.encoding&&(e=o.from(e,t),t=""),r=!0),k(this,e,t,!1,r)},C.prototype.unshift=function(e){return k(this,e,null,!0,!1)},C.prototype.isPaused=function(){return!1===this._readableState.flowing},C.prototype.setEncoding=function(t){l||(l=e("string_decoder/").StringDecoder);var r=new l(t);this._readableState.decoder=r,this._readableState.encoding=this._readableState.decoder.encoding;for(var n=this._readableState.buffer.head,i="";null!==n;)i+=r.write(n.data),n=n.next;return this._readableState.buffer.clear(),""!==i&&this._readableState.buffer.push(i),this._readableState.length=i.length,this};var T=1073741824;function A(e,t){return e<=0||0===t.length&&t.ended?0:t.objectMode?1:e!=e?t.flowing&&t.length?t.buffer.head.data.length:t.length:(e>t.highWaterMark&&(t.highWaterMark=function(e){return e>=T?e=T:(e--,e|=e>>>1,e|=e>>>2,e|=e>>>4,e|=e>>>8,e|=e>>>16,e++),e}(e)),e<=t.length?e:t.ended?t.length:(t.needReadable=!0,0))}function R(e){var t=e._readableState;c("emitReadable",t.needReadable,t.emittedReadable),t.needReadable=!1,t.emittedReadable||(c("emitReadable",t.flowing),t.emittedReadable=!0,r.nextTick(j,e))}function j(e){var t=e._readableState;c("emitReadable_",t.destroyed,t.length,t.ended),t.destroyed||!t.length&&!t.ended||(e.emit("readable"),t.emittedReadable=!1),t.needReadable=!t.flowing&&!t.ended&&t.length<=t.highWaterMark,D(e)}function x(e,t){t.readingMore||(t.readingMore=!0,r.nextTick(N,e,t))}function N(e,t){for(;!t.reading&&!t.ended&&(t.length<t.highWaterMark||t.flowing&&0===t.length);){var r=t.length;if(c("maybeReadMore read 0"),e.read(0),r===t.length)break}t.readingMore=!1}function P(e){var t=e._readableState;t.readableListening=e.listenerCount("readable")>0,t.resumeScheduled&&!t.paused?t.flowing=!0:e.listenerCount("data")>0&&e.resume()}function L(e){c("readable nexttick read 0"),e.read(0)}function O(e,t){c("resume",t.reading),t.reading||e.read(0),t.resumeScheduled=!1,e.emit("resume"),D(e),t.flowing&&!t.reading&&e.read(0)}function D(e){var t=e._readableState;for(c("flow",t.flowing);t.flowing&&null!==e.read(););}function B(e,t){return 0===t.length?null:(t.objectMode?r=t.buffer.shift():!e||e>=t.length?(r=t.decoder?t.buffer.join(""):1===t.buffer.length?t.buffer.first():t.buffer.concat(t.length),t.buffer.clear()):r=t.buffer.consume(e,t.decoder),r);var r}function M(e){var t=e._readableState;c("endReadable",t.endEmitted),t.endEmitted||(t.ended=!0,r.nextTick(U,t,e))}function U(e,t){if(c("endReadableNT",e.endEmitted,e.length),!e.endEmitted&&0===e.length&&(e.endEmitted=!0,t.readable=!1,t.emit("end"),e.autoDestroy)){var r=t._writableState;(!r||r.autoDestroy&&r.finished)&&t.destroy()}}function F(e,t){for(var r=0,n=e.length;r<n;r++)if(e[r]===t)return r;return-1}C.prototype.read=function(e){c("read",e),e=parseInt(e,10);var t=this._readableState,r=e;if(0!==e&&(t.emittedReadable=!1),0===e&&t.needReadable&&((0!==t.highWaterMark?t.length>=t.highWaterMark:t.length>0)||t.ended))return c("read: emitReadable",t.length,t.ended),0===t.length&&t.ended?M(this):R(this),null;if(0===(e=A(e,t))&&t.ended)return 0===t.length&&M(this),null;var n,i=t.needReadable;return c("need readable",i),(0===t.length||t.length-e<t.highWaterMark)&&c("length less than watermark",i=!0),t.ended||t.reading?c("reading or ended",i=!1):i&&(c("do read"),t.reading=!0,t.sync=!0,0===t.length&&(t.needReadable=!0),this._read(t.highWaterMark),t.sync=!1,t.reading||(e=A(r,t))),null===(n=e>0?B(e,t):null)?(t.needReadable=t.length<=t.highWaterMark,e=0):(t.length-=e,t.awaitDrain=0),0===t.length&&(t.ended||(t.needReadable=!0),r!==e&&t.ended&&M(this)),null!==n&&this.emit("data",n),n},C.prototype._read=function(e){v(this,new _("_read()"))},C.prototype.pipe=function(e,t){var n=this,s=this._readableState;switch(s.pipesCount){case 0:s.pipes=e;break;case 1:s.pipes=[s.pipes,e];break;default:s.pipes.push(e)}s.pipesCount+=1,c("pipe count=%d opts=%j",s.pipesCount,t);var o=(!t||!1!==t.end)&&e!==r.stdout&&e!==r.stderr?u:g;function a(t,r){c("onunpipe"),t===n&&r&&!1===r.hasUnpiped&&(r.hasUnpiped=!0,c("cleanup"),e.removeListener("close",p),e.removeListener("finish",m),e.removeListener("drain",l),e.removeListener("error",h),e.removeListener("unpipe",a),n.removeListener("end",u),n.removeListener("end",g),n.removeListener("data",f),d=!0,!s.awaitDrain||e._writableState&&!e._writableState.needDrain||l())}function u(){c("onend"),e.end()}s.endEmitted?r.nextTick(o):n.once("end",o),e.on("unpipe",a);var l=function(e){return function(){var t=e._readableState;c("pipeOnDrain",t.awaitDrain),t.awaitDrain&&t.awaitDrain--,0===t.awaitDrain&&i(e,"data")&&(t.flowing=!0,D(e))}}(n);e.on("drain",l);var d=!1;function f(t){c("ondata");var r=e.write(t);c("dest.write",r),!1===r&&((1===s.pipesCount&&s.pipes===e||s.pipesCount>1&&-1!==F(s.pipes,e))&&!d&&(c("false write response, pause",s.awaitDrain),s.awaitDrain++),n.pause())}function h(t){c("onerror",t),g(),e.removeListener("error",h),0===i(e,"error")&&v(e,t)}function p(){e.removeListener("finish",m),g()}function m(){c("onfinish"),e.removeListener("close",p),g()}function g(){c("unpipe"),n.unpipe(e)}return n.on("data",f),function(e,t,r){if("function"==typeof e.prependListener)return e.prependListener(t,r);e._events&&e._events[t]?Array.isArray(e._events[t])?e._events[t].unshift(r):e._events[t]=[r,e._events[t]]:e.on(t,r)}(e,"error",h),e.once("close",p),e.once("finish",m),e.emit("pipe",n),s.flowing||(c("pipe resume"),n.resume()),e},C.prototype.unpipe=function(e){var t=this._readableState,r={hasUnpiped:!1};if(0===t.pipesCount)return this;if(1===t.pipesCount)return e&&e!==t.pipes||(e||(e=t.pipes),t.pipes=null,t.pipesCount=0,t.flowing=!1,e&&e.emit("unpipe",this,r)),this;if(!e){var n=t.pipes,i=t.pipesCount;t.pipes=null,t.pipesCount=0,t.flowing=!1;for(var s=0;s<i;s++)n[s].emit("unpipe",this,{hasUnpiped:!1});return this}var o=F(t.pipes,e);return-1===o||(t.pipes.splice(o,1),t.pipesCount-=1,1===t.pipesCount&&(t.pipes=t.pipes[0]),e.emit("unpipe",this,r)),this},C.prototype.on=function(e,t){var n=s.prototype.on.call(this,e,t),i=this._readableState;return"data"===e?(i.readableListening=this.listenerCount("readable")>0,!1!==i.flowing&&this.resume()):"readable"===e&&(i.endEmitted||i.readableListening||(i.readableListening=i.needReadable=!0,i.flowing=!1,i.emittedReadable=!1,c("on readable",i.length,i.reading),i.length?R(this):i.reading||r.nextTick(L,this))),n},C.prototype.addListener=C.prototype.on,C.prototype.removeListener=function(e,t){var n=s.prototype.removeListener.call(this,e,t);return"readable"===e&&r.nextTick(P,this),n},C.prototype.removeAllListeners=function(e){var t=s.prototype.removeAllListeners.apply(this,arguments);return"readable"!==e&&e!==undefined||r.nextTick(P,this),t},C.prototype.resume=function(){var e=this._readableState;return e.flowing||(c("resume"),e.flowing=!e.readableListening,function(e,t){t.resumeScheduled||(t.resumeScheduled=!0,r.nextTick(O,e,t))}(this,e)),e.paused=!1,this},C.prototype.pause=function(){return c("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(c("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState.paused=!0,this},C.prototype.wrap=function(e){var t=this,r=this._readableState,n=!1;for(var i in e.on("end",(function(){if(c("wrapped end"),r.decoder&&!r.ended){var e=r.decoder.end();e&&e.length&&t.push(e)}t.push(null)})),e.on("data",(function(i){(c("wrapped data"),r.decoder&&(i=r.decoder.write(i)),!r.objectMode||null!==i&&i!==undefined)&&((r.objectMode||i&&i.length)&&(t.push(i)||(n=!0,e.pause())))})),e)this[i]===undefined&&"function"==typeof e[i]&&(this[i]=function(t){return function(){return e[t].apply(e,arguments)}}(i));for(var s=0;s<E.length;s++)e.on(E[s],this.emit.bind(this,E[s]));return this._read=function(t){c("wrapped _read",t),n&&(n=!1,e.resume())},this},"function"==typeof Symbol&&(C.prototype[Symbol.asyncIterator]=function(){return d===undefined&&(d=e("./internal/streams/async_iterator")),d(this)}),Object.defineProperty(C.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),Object.defineProperty(C.prototype,"readableBuffer",{enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}}),Object.defineProperty(C.prototype,"readableFlowing",{enumerable:!1,get:function(){return this._readableState.flowing},set:function(e){this._readableState&&(this._readableState.flowing=e)}}),C._fromList=B,Object.defineProperty(C.prototype,"readableLength",{enumerable:!1,get:function(){return this._readableState.length}}),"function"==typeof Symbol&&(C.from=function(t,r){return f===undefined&&(f=e("./internal/streams/from")),f(C,t,r)})}).call(this)}).call(this,e("_process"))}}},{package:"readable-stream",file:"/home/circleci/project/node_modules/async-iterator-to-stream/node_modules/readable-stream/lib/_stream_readable.js"}],[4390,{"./utils/apply-default-options":4394,"./utils/to-mfs-path":4401,"err-code":2299,"ipfs-unixfs-exporter":4433},function(){with(this)return function(){"use strict";return function(e,t,r){const n=e("ipfs-unixfs-exporter"),i=e("./utils/apply-default-options"),s=e("./utils/to-mfs-path"),o=e("err-code"),a={offset:0,length:Infinity};t.exports=e=>function(t,r={}){return r=i(r,a),{[Symbol.asyncIterator]:async function*(){const i=await s(e,t),a=await n(i.mfsPath,e.ipld);if("file"!==a.unixfs.type)throw o(new Error(`${t} was not a file`),"ERR_NOT_FILE");if(!a.content)throw o(new Error(`Could not load content stream from ${t}`),"ERR_NO_CONTENT");for await(const e of a.content({offset:r.offset,length:r.length}))yield e}}}}}},{package:"ipfs-mfs",file:"/home/circleci/project/node_modules/ipfs-mfs/src/core/read.js"}],[4387,{"./utils/apply-default-options":4394,"./utils/constants":4395,"./utils/to-mfs-path":4401,"ipfs-unixfs-exporter":4433},function(){with(this)return function(){"use strict";return function(e,t,r){const n=e("ipfs-unixfs-exporter"),i=e("./utils/apply-default-options"),s=e("./utils/to-mfs-path"),{FILE_SEPARATOR:o,FILE_TYPES:a}=e("./utils/constants"),c={},u=e=>{let t=0,r=e.node.size||e.node.length;return e.unixfs&&(r=e.unixfs.fileSize(),t=a[e.unixfs.type]),{cid:e.cid,name:e.name,type:t,size:r}};t.exports=e=>async function*(t=o,r={}){"object"!=typeof t||t instanceof String||(r=t,t=o),r=i(r,c);const a=await s(e,t),l=await n(a.mfsPath,e.ipld);if(l.unixfs&&l.unixfs.type.includes("directory"))for await(const e of l.content(r))yield u(e);else yield u(l)}}}},{package:"ipfs-mfs",file:"/home/circleci/project/node_modules/ipfs-mfs/src/core/ls.js"}],[4389,{"./cp":4384,"./rm":4391,"./utils/apply-default-options":4394,"./utils/to-sources":4404},function(){with(this)return function(){"use strict";return function(e,t,r){const n=e("./utils/apply-default-options"),i=e("./utils/to-sources"),s=e("./cp"),o=e("./rm"),a={parents:!1,recursive:!1,flush:!0,format:"dag-pb",hashAlg:"sha2-256",shardSplitThreshold:1e3};t.exports=e=>async function(...t){Array.isArray(t[0])&&(t=t[0].concat(t.slice(1)));const{sources:r}=await i(e,t),c=n(t,a),u=r.map((e=>e.path)).concat(c),l=r.slice(0,-1).map((e=>e.path)).concat(Object.assign(c,{recursive:!0}));await s(e).apply(null,u),await o(e).apply(null,l)}}}},{package:"ipfs-mfs",file:"/home/circleci/project/node_modules/ipfs-mfs/src/core/mv.js"}],[4392,{"./utils/apply-default-options":4394,"./utils/to-mfs-path":4401,debug:2197,"err-code":2299,"ipfs-unixfs-exporter":4433},function(){with(this)return function(){"use strict";return function(e,t,r){const n=e("./utils/apply-default-options"),i=e("./utils/to-mfs-path"),s=e("ipfs-unixfs-exporter"),o=e("debug")("ipfs:mfs:stat"),a=e("err-code"),c={withLocal:!1};t.exports=e=>async function(t,r){r=n(r,c),o(`Fetching stats for ${t}`);const{type:l,cid:d,mfsPath:f}=await i(e,t);let h,p="ipfs"===l&&d?d:f;try{h=await s(p,e.ipld)}catch(e){if("ERR_NOT_FOUND"===e.code)throw a(new Error(`${t} does not exist`),"ERR_NOT_FOUND");throw e}if(!u[h.cid.codec])throw new Error(`Cannot stat codec ${h.cid.codec}`);return u[h.cid.codec](h,r)};const u={raw:e=>({cid:e.cid,size:e.node.length,cumulativeSize:e.node.length,blocks:0,type:"file",local:undefined,sizeLocal:undefined,withLocality:!1}),"dag-pb":e=>{let t=e.node.Links.length,r=e.node.size,n=e.node.size,i=null;return e.unixfs&&(r=e.unixfs.fileSize(),i=e.unixfs.type,i.includes("directory")&&(r=0,n=e.node.size),"file"===i&&(t=e.unixfs.blockSizes.length)),{cid:e.cid,size:r,cumulativeSize:n,blocks:t,type:i,local:undefined,sizeLocal:undefined,withLocality:!1}},"dag-cbor":e=>({cid:e.cid,local:undefined,sizeLocal:undefined,withLocality:!1})}}}},{package:"ipfs-mfs",file:"/home/circleci/project/node_modules/ipfs-mfs/src/core/stat.js"}],[4385,{"./stat":4392,"./utils/apply-default-options":4394,"./utils/constants":4395},function(){with(this)return function(){"use strict";return function(e,t,r){const n=e("./utils/apply-default-options"),i=e("./stat"),{FILE_SEPARATOR:s}=e("./utils/constants"),o={};t.exports=e=>async function(t=s,r=o){r=n(r,o),await i(e)(t,r)}}}},{package:"ipfs-mfs",file:"/home/circleci/project/node_modules/ipfs-mfs/src/core/flush.js"}],[4388,{"./utils/add-link":4393,"./utils/apply-default-options":4394,"./utils/constants":4395,"./utils/create-node":4397,"./utils/to-path-components":4402,"./utils/update-mfs-root":4406,"./utils/update-tree":4407,"./utils/with-mfs-root":4408,debug:2197,"err-code":2299,"ipfs-unixfs-exporter":4433},function(){with(this)return function(){"use strict";return function(e,t,r){const n=e("err-code"),i=e("debug")("ipfs:mfs:mkdir"),s=e("ipfs-unixfs-exporter"),o=e("./utils/create-node"),a=e("./utils/to-path-components"),c=e("./utils/update-mfs-root"),u=e("./utils/update-tree"),l=e("./utils/add-link"),d=e("./utils/with-mfs-root"),f=e("./utils/apply-default-options"),{FILE_SEPARATOR:h}=e("./utils/constants"),p={parents:!1,hashAlg:"sha2-256",cidVersion:0,shardSplitThreshold:1e3,format:"dag-pb",flush:!0};t.exports=e=>async function(t,r){if(r=f(r,p),!t)throw new Error("no path given to Mkdir");if((t=t.trim())===h){if(r.parents)return;throw n(new Error(`cannot create directory '${h}': Already exists`),"ERR_INVALID_PATH")}if(t.substring(0,1)!==h)throw n(new Error("paths must start with a leading /"),"ERR_INVALID_PATH");i(`Creating ${t}`);const l=a(t);if("ipfs"===l[0])throw n(new Error("path cannot have the prefix 'ipfs'"),"ERR_INVALID_PATH");let g,y=await d(e),b=[];const _=await o(e,"directory",r);for(let t=0;t<=l.length;t++){const o=l.slice(0,t),a=`/ipfs/${y}/${o.join("/")}`;try{if(g=await s(a,e.ipld),i(`${a} existed`),i(`${a} had children ${g.node.Links.map((e=>e.Name))}`),t===l.length){if(r.parents)return;throw n(new Error("file already exists"),"ERR_ALREADY_EXISTS")}b.push({name:g.name,cid:g.cid})}catch(i){if("ERR_NOT_FOUND"!==i.code)throw i;if(t<l.length&&!r.parents)throw n(new Error(`Intermediate directory path ${a} does not exist, use the -p flag to create it`),"ERR_NOT_FOUND");await m(e,o[o.length-1],_,b[b.length-1],b,r)}}const w=await u(e,b,r);await c(e,w)};const m=async(e,t,r,n,s,o)=>{i(`Adding empty dir called ${t} to ${n.cid}`);const a=await l(e,{parent:n.node,parentCid:n.cid,size:r.node.size,cid:r.cid,name:t,format:o.format,hashAlg:o.hashAlg,cidVersion:o.cidVersion});s[s.length-1].cid=a.cid,s.push({name:t,cid:r.cid})}}}},{package:"ipfs-mfs",file:"/home/circleci/project/node_modules/ipfs-mfs/src/core/mkdir.js"}],[4391,{"./utils/apply-default-options":4394,"./utils/constants":4395,"./utils/remove-link":4399,"./utils/to-mfs-path":4401,"./utils/to-sources":4404,"./utils/to-trail":4405,"./utils/update-mfs-root":4406,"./utils/update-tree":4407,"err-code":2299},function(){with(this)return function(){"use strict";return function(e,t,r){const n=e("err-code"),i=e("./utils/update-tree"),s=e("./utils/update-mfs-root"),o=e("./utils/to-sources"),a=e("./utils/remove-link"),c=e("./utils/to-mfs-path"),u=e("./utils/to-trail"),l=e("./utils/apply-default-options"),{FILE_SEPARATOR:d}=e("./utils/constants"),f={recursive:!1,cidVersion:0,hashAlg:"sha2-256",format:"dag-pb",flush:!0};t.exports=e=>async function(){const t=Array.from(arguments),{sources:r}=await o(e,t,f),i=l(t,f);if(!r.length)throw n(new Error("Please supply at least one path to remove"),"ERR_INVALID_PARAMS");r.forEach((e=>{if(e.path===d)throw n(new Error("Cannot delete root"),"ERR_INVALID_PARAMS")}));for(const t of r)await h(e,t.path,i)};const h=async(e,t,r)=>{const o=await c(e,t),l=await u(e,o.mfsPath,r),d=l.pop(),f=l[l.length-1];if(!f)throw n(new Error(`${t} does not exist`),"ERR_NOT_FOUND");if("directory"===d.type&&!r.recursive)throw n(new Error(`${t} is a directory, use -r to remove directories`),"ERR_WAS_DIR");const{cid:h}=await a(e,{parentCid:f.cid,name:d.name,format:r.format,hashAlg:r.hashAlg,cidVersion:r.cidVersion,flush:r.flush});f.cid=h;const p=await i(e,l,r);await s(e,p)}}}},{package:"ipfs-mfs",file:"/home/circleci/project/node_modules/ipfs-mfs/src/core/rm.js"}],[4409,{"./mkdir":4388,"./stat":4392,"./utils/add-link":4393,"./utils/apply-default-options":4394,"./utils/constants":4395,"./utils/create-lock":4396,"./utils/to-async-iterator":4400,"./utils/to-mfs-path":4401,"./utils/to-path-components":4402,"./utils/to-trail":4405,"./utils/update-mfs-root":4406,"./utils/update-tree":4407,"async-iterator-last":1654,buffer:2028,debug:2197,"err-code":2299,"ipfs-unixfs-importer":4458},function(){with(this)return function(){"use strict";return function(e,t,r){(function(r){(function(){const n=e("debug")("ipfs:mfs:write"),i=e("ipfs-unixfs-importer"),s=e("./stat"),o=e("./mkdir"),a=e("./utils/add-link"),c=e("./utils/apply-default-options"),u=e("./utils/create-lock"),l=e("./utils/to-async-iterator"),d=e("./utils/to-mfs-path"),f=e("./utils/to-path-components"),h=e("./utils/to-trail"),p=e("./utils/update-tree"),m=e("./utils/update-mfs-root"),g=e("err-code"),{MAX_CHUNK_SIZE:y}=e("./utils/constants"),b=e("async-iterator-last"),_={offset:0,length:undefined,create:!1,truncate:!1,rawLeaves:!1,reduceSingleLeafToSelf:!1,cidVersion:0,hashAlg:"sha2-256",format:"dag-pb",parents:!1,progress:()=>{},strategy:"trickle",flush:!0,leafType:"raw",shardSplitThreshold:1e3};t.exports=e=>async function(t,r,i){let s,o,a;if(n("Hello world, writing",t,r,i),i=c(i,_),n("Reading source, destination and parent"),await u().readLock((async()=>{s=await l(r,i),o=await d(e,t),a=await d(e,o.mfsDirectory)}))(),n("Read source, destination and parent"),!i.parents&&!a.exists)throw g(new Error("directory does not exist"),"ERR_NO_EXIST");if(!i.create&&!o.exists)throw g(new Error("file does not exist"),"ERR_NO_EXIST");return w(e,t,s,o,i)};const w=async(e,t,r,n,i)=>{const c=await v(e,r,n,i);await u().writeLock((async()=>{const r=f(t),n=r.pop();let u=!1;try{await s(e)(`/${r.join("/")}`,i),u=!0}catch(e){if("ERR_NOT_FOUND"!==e.code)throw e}u||await o(e)(`/${r.join("/")}`,i);const l=await d(e,t),y=await h(e,l.mfsDirectory,i),b=y[y.length-1];if(!b.type.includes("directory"))throw g(new Error(`cannot write to ${b.name}: Not a directory`),"ERR_NOT_A_DIRECTORY");const _=await e.ipld.get(b.cid),w=await a(e,{parent:_,name:n,cid:c.cid,size:c.size,flush:i.flush,shardSplitThreshold:i.shardSplitThreshold,format:i.format,hashAlg:i.hashAlg,cidVersion:i.cidVersion});b.cid=w.cid;const v=await p(e,y,i);await m(e,v)}))()},v=async(e,t,r,s)=>{r.exists?n(`Overwriting file ${r.cid} offset ${s.offset} length ${s.length}`):n(`Writing file offset ${s.offset} length ${s.length}`);const o=[];s.offset>0&&(r.unixfs&&r.unixfs.fileSize()>s.offset?(n(`Writing first ${s.offset} bytes of original file`),o.push((()=>r.content({offset:0,length:s.offset})))):(n(`Writing zeros for first ${s.offset} bytes`),o.push(S(s.offset)))),o.push(E(t,s.length));const a=k(C(o),(e=>{if(r.unixfs&&!s.truncate){const t=r.unixfs.fileSize();if(t>e)return n(`Writing last ${t-e} of ${t} bytes from original file starting at offset ${e}`),r.content({offset:e});n("Not writing last bytes from original file")}return{[Symbol.asyncIterator]:async function*(){}}}));let c=await b(i([{content:a}],e.ipld,{progress:s.progress,hashAlg:s.hashAlg,cidVersion:s.cidVersion,strategy:s.strategy,rawLeaves:s.rawLeaves,reduceSingleLeafToSelf:s.reduceSingleLeafToSelf,leafType:s.leafType}));return n(`Wrote ${c.cid}`),{cid:c.cid,size:c.size}},E=(e,t)=>async function*(){let r=0;for await(const n of e){if(r+=n.length,r>t)return void(yield n.slice(0,t-r));yield n}},S=(e,t=y)=>{const n=r.alloc(t,0),i={[Symbol.asyncIterator]:async function*(){for(;;)yield n.slice()}};return E(i,e)},C=async function*(e){for(let t=0;t<e.length;t++)for await(const r of e[t]())yield r},k=async function*(e,t){let r=0;for await(const t of e)r+=t.length,yield t;for await(const e of t(r))r+=e.length,yield e}}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"ipfs-mfs",file:"/home/circleci/project/node_modules/ipfs-mfs/src/core/write.js"}],[4384,{"./mkdir":4388,"./utils/add-link":4393,"./utils/apply-default-options":4394,"./utils/to-mfs-path":4401,"./utils/to-sources-and-destination":4403,"./utils/to-trail":4405,"./utils/update-mfs-root":4406,"./utils/update-tree":4407,debug:2197,"err-code":2299},function(){with(this)return function(){"use strict";return function(e,t,r){const n=e("./mkdir"),i=e("debug")("ipfs:mfs:cp"),s=e("err-code"),o=e("./utils/update-tree"),a=e("./utils/update-mfs-root"),c=e("./utils/add-link"),u=e("./utils/apply-default-options"),l=e("./utils/to-mfs-path"),d=e("./utils/to-sources-and-destination"),f=e("./utils/to-trail"),h={parents:!1,flush:!0,format:"dag-pb",hashAlg:"sha2-256",cidVersion:0,shardSplitThreshold:1e3};t.exports=e=>async function(...t){const r=u(t,h);let{sources:o,destination:a}=await d(e,t);if(!o.length)throw s(new Error("Please supply at least one source"),"ERR_INVALID_PARAMS");if(!a)throw s(new Error("Please supply a destination"),"ERR_INVALID_PARAMS");r.parents=r.p||r.parents;const c=o.find((e=>!e.exists));if(c)throw s(new Error(`${c.path} does not exist`),"ERR_INVALID_PARAMS");const y=p(a);if(a.exists){if(i("Destination exists"),1===o.length&&!y)throw s(new Error("directory already has entry by that name"),"ERR_ALREADY_EXISTS")}else if(i("Destination does not exist"),o.length>1){if(!r.parents)throw s(new Error("destination did not exist, pass -p to create intermediate directories"),"ERR_INVALID_PARAMS");await n(e)(a.path,r),a=await l(e,a.path)}const b=p(a)?a.mfsPath:a.mfsDirectory,_=await f(e,b,r);if(1===o.length){const t=o.pop(),n=y?t.name:a.name;return i(`Only one source, copying to destination ${y?"directory":"file"} ${n}`),m(e,t,n,_,r)}return i("Multiple sources, wrapping in a directory"),g(e,o,a,_,r)};const p=e=>e.unixfs&&e.unixfs.type&&e.unixfs.type.includes("directory"),m=async(e,t,r,n,i)=>{let s=n.pop();s=await y(e,t,r,s,i),n.push(s);const c=await o(e,n,i);await a(e,c)},g=async(e,t,r,n,i)=>{for(let n=0;n<t.length;n++){const s=t[n];r=await y(e,s,s.name,r,i)}n[n.length-1]=r;const s=await o(e,n,i);await a(e,s)},y=async(e,t,r,n,i)=>{const s=await e.repo.blocks.get(t.cid),{node:o,cid:a}=await c(e,{parentCid:n.cid,size:s.data.length,cid:t.cid,name:r,format:i.format,hashAlg:i.hashAlg,cidVersion:i.cidVersion});return n.node=o,n.cid=a,n.size=o.size,n}}}},{package:"ipfs-mfs",file:"/home/circleci/project/node_modules/ipfs-mfs/src/core/cp.js"}],[4396,{mortice:5078},function(){with(this)return function(){"use strict";return function(e,t,r){const n=e("mortice");let i;t.exports=e=>{if(i)return i;const t=n({singleProcess:e});return i={readLock:e=>(...r)=>t.readLock((()=>e.apply(null,r))),writeLock:e=>(...r)=>t.writeLock((()=>e.apply(null,r)))},i}}}},{package:"ipfs-mfs",file:"/home/circleci/project/node_modules/ipfs-mfs/src/core/utils/create-lock.js"}],[1274,{"@metamask/controllers":1236},function(){with(this)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.SubjectMetadataController=void 0;const n=e("@metamask/controllers"),i={subjectMetadata:{persist:!0,anonymous:!1}},s={subjectMetadata:{}};class o extends n.BaseControllerV2{constructor({messenger:e,subjectCacheLimit:t,state:r={}}){if(!Number.isInteger(t)||t<1)throw new Error(`subjectCacheLimit must be a positive integer. Received: "${t}"`);const n=t=>e.call("PermissionController:hasPermissions",t);super({name:"SubjectMetadataController",metadata:i,messenger:e,state:Object.assign({},o.getTrimmedState(r,n))}),this.subjectHasPermissions=n,this.subjectCacheLimit=t,this.subjectsWithoutPermissionsEcounteredSinceStartup=new Set}clearState(){this.subjectsWithoutPermissionsEcounteredSinceStartup.clear(),this.update((e=>Object.assign({},s)))}addSubjectMetadata(e){const{origin:t}=e,r=Object.assign(Object.assign({},e),{extensionId:e.extensionId||null,iconUrl:e.iconUrl||null});let n=null;if(this.subjectsWithoutPermissionsEcounteredSinceStartup.size>=this.subjectCacheLimit){const e=this.subjectsWithoutPermissionsEcounteredSinceStartup.values().next().value;this.subjectsWithoutPermissionsEcounteredSinceStartup.delete(e),this.subjectHasPermissions(e)||(n=e)}this.subjectsWithoutPermissionsEcounteredSinceStartup.add(t),this.update((e=>{e.subjectMetadata[t]=r,"string"==typeof n&&delete e.subjectMetadata[n]}))}trimMetadataState(){this.update((e=>o.getTrimmedState(e,this.subjectHasPermissions)))}static getTrimmedState(e,t){const{subjectMetadata:r={}}=e;return{subjectMetadata:Object.keys(r).reduce(((e,n)=>(t(n)&&(e[n]=r[n]),e)),{})}}}r.SubjectMetadataController=o}}},{package:"@metamask/snap-controllers",file:"/home/circleci/project/node_modules/@metamask/rpc-methods/node_modules/@metamask/snap-controllers/dist/subject-metadata/SubjectMetadataController.js"}],[1265,{},function(){with(this)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.MethodNames=void 0,function(e){e.requestPermissions="wallet_requestPermissions",e.getPermissions="wallet_getPermissions"}(r.MethodNames||(r.MethodNames={}))}}},{package:"@metamask/snap-controllers",file:"/home/circleci/project/node_modules/@metamask/rpc-methods/node_modules/@metamask/snap-controllers/dist/permissions/utils.js"}],[1257,{nanoid:1306},function(){with(this)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.findCaveat=r.constructPermission=void 0;const n=e("nanoid");r.constructPermission=function(e){const{caveats:t=null,invoker:r,target:i}=e;return{id:n.nanoid(),parentCapability:i,invoker:r,caveats:t,date:(new Date).getTime()}},r.findCaveat=function(e,t){var r;return null===(r=e.caveats)||void 0===r?void 0:r.find((e=>e.type===t))}}}},{package:"@metamask/snap-controllers",file:"/home/circleci/project/node_modules/@metamask/rpc-methods/node_modules/@metamask/snap-controllers/dist/permissions/Permission.js"}],[1256,{"./errors":1259},function(){with(this)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.decorateWithCaveats=void 0;const n=e("./errors");r.decorateWithCaveats=function(e,t,r){const{caveats:i}=t;if(!i)return e;let s=async t=>e(t);for(const e of i){const t=r[e.type];if(!t)throw new n.UnrecognizedCaveatTypeError(e.type);s=t.decorator(s,e)}return s}}}},{package:"@metamask/snap-controllers",file:"/home/circleci/project/node_modules/@metamask/rpc-methods/node_modules/@metamask/snap-controllers/dist/permissions/Caveat.js"}],[1258,{"../utils":1276,"./Caveat":1256,"./Permission":1257,"./errors":1259,"./permission-middleware":1261,"./utils":1265,"@metamask/controllers":1236,"deep-freeze-strict":2201,immer:4327,nanoid:1306},function(){with(this)return function(){"use strict";return function(e,t,r){var n=this&&this.__rest||function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(n=Object.getOwnPropertySymbols(e);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(r[n[i]]=e[n[i]])}return r},i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(r,"__esModule",{value:!0}),r.PermissionController=r.CaveatMutatorOperation=void 0;const s=e("@metamask/controllers"),o=i(e("deep-freeze-strict")),a=e("immer"),c=e("nanoid"),u=e("../utils"),l=e("./Caveat"),d=e("./Permission"),f=e("./errors"),h=e("./utils"),p=e("./permission-middleware"),m="PermissionController";var g;!function(e){e[e.noop=0]="noop",e[e.updateValue=1]="updateValue",e[e.deleteCaveat=2]="deleteCaveat",e[e.revokePermission=3]="revokePermission"}(g=r.CaveatMutatorOperation||(r.CaveatMutatorOperation={}));class y extends s.BaseControllerV2{constructor(e){const{caveatSpecifications:t,permissionSpecifications:r,unrestrictedMethods:n,messenger:i,state:s={}}=e;super({name:m,metadata:{subjects:{anonymous:!0,persist:!0}},messenger:i,state:Object.assign(Object.assign({},{subjects:{}}),s)}),this._unrestrictedMethods=new Set(n),this._caveatSpecifications=o.default(Object.assign({},t)),this.validatePermissionSpecifications(r,this._caveatSpecifications),this._permissionSpecifications=o.default(Object.assign({},r)),this.registerMessageHandlers(),this.createPermissionMiddleware=p.getPermissionMiddlewareFactory({executeRestrictedMethod:this._executeRestrictedMethod.bind(this),getRestrictedMethod:this.getRestrictedMethod.bind(this),isUnrestrictedMethod:this.unrestrictedMethods.has.bind(this.unrestrictedMethods)})}get unrestrictedMethods(){return this._unrestrictedMethods}getPermissionSpecification(e){return this._permissionSpecifications[e]}getCaveatSpecification(e){return this._caveatSpecifications[e]}validatePermissionSpecifications(e,t){Object.entries(e).forEach((([e,{targetKey:r,allowedCaveats:n}])=>{if(!e||/_$/u.test(e)||/[^_]\*$/u.test(e))throw new Error(`Invalid permission target key: "${e}"`);if(e!==r)throw new Error(`Invalid permission specification: key "${e}" must match specification.target value "${r}".`);n&&n.forEach((e=>{if(!u.hasProperty(t,e))throw new f.UnrecognizedCaveatTypeError(e)}))}))}registerMessageHandlers(){this.messagingSystem.registerActionHandler(`${m}:clearPermissions`,(()=>this.clearState())),this.messagingSystem.registerActionHandler(`${m}:getSubjectNames`,(()=>this.getSubjectNames())),this.messagingSystem.registerActionHandler(`${m}:hasPermissions`,(e=>this.hasPermissions(e)))}clearState(){this.update((e=>Object.assign({},{subjects:{}})))}getRestrictedMethod(e,t){const r=this.getTargetKey(e);if(!r){const r=f.methodNotFound({method:e});throw t&&(r.data={origin:t}),r}return this.getPermissionSpecification(r).methodImplementation}getSubjectNames(){return Object.keys(this.state.subjects)}getPermission(e,t){var r;return null===(r=this.state.subjects[e])||void 0===r?void 0:r.permissions[t]}getPermissions(e){var t;return null===(t=this.state.subjects[e])||void 0===t?void 0:t.permissions}hasPermission(e,t){return Boolean(this.getPermission(e,t))}hasPermissions(e){return Boolean(this.state.subjects[e])}revokeAllPermissions(e){this.update((t=>{if(!t.subjects[e])throw new f.UnrecognizedSubjectError(e);delete t.subjects[e]}))}revokePermission(e,t){this.revokePermissions({[e]:[t]})}revokePermissions(e){this.update((t=>{Object.keys(e).forEach((r=>{if(!u.hasProperty(t.subjects,r))throw new f.UnrecognizedSubjectError(r);e[r].forEach((e=>{const{permissions:n}=t.subjects[r];if(!u.hasProperty(n,e))throw new f.PermissionDoesNotExistError(r,e);this.deletePermission(t.subjects,r,e)}))}))}))}revokePermissionForAllSubjects(e){0!==this.getSubjectNames().length&&this.update((t=>{Object.entries(t.subjects).forEach((([r,n])=>{const{permissions:i}=n;u.hasProperty(i,e)&&this.deletePermission(t.subjects,r,e)}))}))}deletePermission(e,t,r){const{permissions:n}=e[t];Object.keys(n).length>1?delete n[r]:delete e[t]}hasCaveat(e,t,r){return Boolean(this.getCaveat(e,t,r))}getCaveat(e,t,r){const n=this.getPermission(e,t);if(!n)throw new f.PermissionDoesNotExistError(e,t);return d.findCaveat(n,r)}addCaveat(e,t,r,n){if(this.hasCaveat(e,t,r))throw new f.CaveatAlreadyExistsError(e,t,r);this.setCaveat(e,t,r,n)}updateCaveat(e,t,r,n){if(!this.hasCaveat(e,t,r))throw new f.CaveatDoesNotExistError(e,t,r);this.setCaveat(e,t,r,n)}setCaveat(e,t,r,n){this.update((i=>{const s=i.subjects[e];if(!s)throw new f.UnrecognizedSubjectError(e);const o=s.permissions[t];if(!o)throw new f.PermissionDoesNotExistError(e,t);const a={type:r,value:n};if(this.validateCaveat(a,e,t),o.caveats){const e=o.caveats.findIndex((e=>e.type===a.type));-1===e?o.caveats.push(a):o.caveats.splice(e,1,a)}else o.caveats=[a];this.validateModifiedPermission(o,e,t)}))}updatePermissionsByCaveat(e,t){0!==Object.keys(this.state.subjects).length&&this.update((r=>{Object.values(r.subjects).forEach((n=>{Object.values(n.permissions).forEach((i=>{const{caveats:s}=i,o=null==s?void 0:s.find((({type:t})=>t===e));if(!o)return;const a=t(o.value);switch(a.operation){case g.noop:break;case g.updateValue:o.value=a.value,this.validateCaveat(o,n.origin,i.parentCapability);break;case g.deleteCaveat:this.deleteCaveat(i,e,n.origin,i.parentCapability);break;case g.revokePermission:this.deletePermission(r.subjects,n.origin,i.parentCapability);break;default:throw new Error(`Unrecognized mutation result: "${a.operation}"`)}}))}))}))}removeCaveat(e,t,r){this.update((n=>{var i;const s=null===(i=n.subjects[e])||void 0===i?void 0:i.permissions[t];if(!s)throw new f.PermissionDoesNotExistError(e,t);if(!s.caveats)throw new f.CaveatDoesNotExistError(e,t,r);this.deleteCaveat(s,r,e,t)}))}deleteCaveat(e,t,r,n){if(!e.caveats)throw new f.CaveatDoesNotExistError(r,n,t);const i=e.caveats.findIndex((e=>e.type===t));if(-1===i)throw new f.CaveatDoesNotExistError(r,n,t);1===e.caveats.length?e.caveats=null:e.caveats.splice(i,1),this.validateModifiedPermission(e,r,n)}validateModifiedPermission(e,t,r){const n=this.getTargetKey(e.parentCapability);if(!n)throw new Error(`Fatal: Existing permission target key "${n}" has no specification.`);this.validatePermission(this.getPermissionSpecification(n),e,t,r)}getTargetKey(e){if(u.hasProperty(this._permissionSpecifications,e))return e;const t={};for(const e of Object.keys(this._permissionSpecifications)){const r=e.match(/(.+)\*$/u);r&&(t[r[1]]=!0)}const r=e.split("_");let n="";for(;r.length>0&&!u.hasProperty(this._permissionSpecifications,n)&&!t[n];)n+=`${r.shift()}_`;return t[n]?`${n}*`:undefined}grantPermissions({approvedPermissions:e,requestData:t,preserveExistingPermissions:r=!0,subject:n}){const{origin:i}=n;if(!i||"string"!=typeof i)throw new f.InvalidSubjectIdentifierError(i);const s=r?Object.assign({},this.getPermissions(i)):{};for(const[r,n]of Object.entries(e)){const e=this.getTargetKey(r);if(!e)throw f.methodNotFound({method:r});if(n.parentCapability!==undefined&&r!==n.parentCapability)throw new f.InvalidApprovedPermissionError(i,r,n);const o=r,a=this.getPermissionSpecification(e),c={caveats:this.constructCaveats(i,o,n.caveats),invoker:i,target:o};let u;a.factory?(u=a.factory(c,t),this.validatePermission(a,u,i,o)):(u=d.constructPermission(c),this.validatePermission(a,u,i,o,{invokePermissionValidator:!0,performCaveatValidation:!1})),s[o]=u}return this.setValidatedPermissions(i,s),s}validatePermission(e,t,r,n,{invokePermissionValidator:i,performCaveatValidation:s}={invokePermissionValidator:!0,performCaveatValidation:!0}){const{allowedCaveats:o,validator:a}=e;if(u.hasProperty(t,"caveats")){const{caveats:e}=t;if(null!==e&&!(Array.isArray(e)&&e.length>0))throw new f.InvalidCaveatsPropertyError(r,n,e);const i=new Set;null==e||e.forEach((e=>{if(s&&this.validateCaveat(e,r,n),!(null==o?void 0:o.includes(e.type)))throw new f.ForbiddenCaveatError(e.type,r,n);if(i.has(e.type))throw new f.DuplicateCaveatError(e.type,r,n);i.add(e.type)}))}i&&a&&a(t,r,n)}setValidatedPermissions(e,t){this.update((r=>{r.subjects[e]||(r.subjects[e]={origin:e,permissions:{}}),r.subjects[e].permissions=a.castDraft(t)}))}constructCaveats(e,t,r){const n=null==r?void 0:r.map((r=>{this.validateCaveat(r,e,t);const{type:n,value:i}=r;return{type:n,value:i}}));return n&&u.isNonEmptyArray(n)?n:undefined}validateCaveat(e,t,r){var n;if(!u.isPlainObject(e))throw new f.InvalidCaveatError(e,t,r);if(2!==Object.keys(e).length)throw new f.InvalidCaveatFieldsError(e,t,r);if("string"!=typeof e.type)throw new f.InvalidCaveatTypeError(e,t,r);const i=this.getCaveatSpecification(e.type);if(!i)throw new f.UnrecognizedCaveatTypeError(e.type,t,r);if(!u.hasProperty(e,"value")||e.value===undefined)throw new f.CaveatMissingValueError(e,t,r);if(!u.isValidJson(e.value))throw new f.CaveatInvalidJsonError(e,t,r);null===(n=i.validator)||void 0===n||n.call(i,e,t,r)}async requestPermissions(e,t,r={}){const{origin:i}=e,{id:s=c.nanoid(),preserveExistingPermissions:o=!0}=r;this.validateRequestedPermissions(i,t);const a={id:s,origin:i},u={metadata:a,permissions:t},l=await this.requestUserApproval(u),{permissions:d}=l,f=n(l,["permissions"]);return[this.grantPermissions({subject:e,approvedPermissions:d,preserveExistingPermissions:o,requestData:f}),a]}validateRequestedPermissions(e,t){if(!u.isPlainObject(t))throw f.invalidParams({message:`Requested permissions for origin "${e}" is not a plain object.`,data:{origin:e,requestedPermissions:t}});if(0===Object.keys(t).length)throw f.invalidParams({message:`Permissions request for origin "${e}" contains no permissions.`,data:{requestedPermissions:t}});for(const r of Object.keys(t)){const n=t[r],i=this.getTargetKey(r);if(!i)throw f.methodNotFound({method:r,data:{origin:e,requestedPermissions:t}});if(!u.isPlainObject(n)||n.parentCapability!==undefined&&r!==n.parentCapability)throw f.invalidParams({message:`Permissions request for origin "${e}" contains invalid requested permission(s).`,data:{origin:e,requestedPermissions:t}});this.validatePermission(this.getPermissionSpecification(i),n,e,r,{invokePermissionValidator:!1,performCaveatValidation:!0})}}async requestUserApproval(e){const{origin:t,id:r}=e.metadata,n=await this.messagingSystem.call("ApprovalController:addRequest",{id:r,origin:t,requestData:e,type:h.MethodNames.requestPermissions},!0);return this.validateApprovedPermissions(n,{id:r,origin:t}),n}validateApprovedPermissions(e,t){const{id:r,origin:n}=t;if(!u.isPlainObject(e)||!u.isPlainObject(e.metadata))throw f.internalError(`Approved permissions request for subject "${n}" is invalid.`,{data:{approvedRequest:e}});const{metadata:{id:i,origin:s},permissions:o}=e;if(i!==r)throw f.internalError(`Approved permissions request for subject "${n}" mutated its id.`,{originalId:r,mutatedId:i});if(s!==n)throw f.internalError(`Approved permissions request for subject "${n}" mutated its origin.`,{originalOrigin:n,mutatedOrigin:s});try{this.validateRequestedPermissions(n,o)}catch(e){throw f.internalError(`Invalid approved permissions request: ${e.message}`,e.data)}}async acceptPermissionsRequest(e){const{id:t}=e.metadata;if(!this.hasApprovalRequest({id:t}))throw new f.PermissionsRequestNotFoundError(t);if(0!==Object.keys(e.permissions).length)try{this.messagingSystem.call("ApprovalController:acceptRequest",t,e)}catch(e){throw this._rejectPermissionsRequest(t,e),e}else this._rejectPermissionsRequest(t,f.invalidParams({message:"Must request at least one permission."}))}async rejectPermissionsRequest(e){if(!this.hasApprovalRequest({id:e}))throw new f.PermissionsRequestNotFoundError(e);this._rejectPermissionsRequest(e,f.userRejectedRequest())}hasApprovalRequest(e){return this.messagingSystem.call("ApprovalController:hasRequest",e)}_rejectPermissionsRequest(e,t){return this.messagingSystem.call("ApprovalController:rejectRequest",e,t)}async executeRestrictedMethod(e,t,r){const n=this.getRestrictedMethod(t,e),i=await this._executeRestrictedMethod(n,{origin:e},t,r);if(i===undefined)throw new Error(`Internal request for method "${t}" as origin "${e}" returned no result.`);return i}_executeRestrictedMethod(e,t,r,n=[]){const{origin:i}=t,s=this.getPermission(i,r);if(!s)throw f.unauthorized({data:{origin:i,method:r}});return l.decorateWithCaveats(e,s,this._caveatSpecifications)({method:r,params:n,context:{origin:i}})}}r.PermissionController=y}}},{package:"@metamask/snap-controllers",file:"/home/circleci/project/node_modules/@metamask/rpc-methods/node_modules/@metamask/snap-controllers/dist/permissions/PermissionController.js"}],[1263,{"./getPermissions":1262,"./requestPermissions":1264},function(){with(this)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.handlers=void 0;const n=e("./requestPermissions"),i=e("./getPermissions");r.handlers=[n.requestPermissionsHandler,i.getPermissionsHandler]}}},{package:"@metamask/snap-controllers",file:"/home/circleci/project/node_modules/@metamask/rpc-methods/node_modules/@metamask/snap-controllers/dist/permissions/rpc-methods/index.js"}],[1268,{},function(){with(this)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0})}}},{package:"@metamask/snap-controllers",file:"/home/circleci/project/node_modules/@metamask/rpc-methods/node_modules/@metamask/snap-controllers/dist/services/ExecutionEnvironmentService.js"}],[1269,{"@metamask/object-multiplex":1176,"@metamask/obs-store":1253,"@metamask/post-message-stream":1190,"@metamask/snap-workers":1278,"json-rpc-engine":4650,"json-rpc-middleware-stream":1305,nanoid:1306,pump:5393},function(){with(this)return function(){"use strict";return function(e,t,r){var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(r,"__esModule",{value:!0}),r.WebWorkerExecutionEnvironmentService=void 0;const i=e("nanoid"),s=n(e("pump")),o=e("@metamask/obs-store"),a=n(e("@metamask/object-multiplex")),c=e("@metamask/post-message-stream"),u=e("@metamask/snap-workers"),l=e("json-rpc-middleware-stream"),d=e("json-rpc-engine");r.WebWorkerExecutionEnvironmentService=class{constructor({setupSnapProvider:e,workerUrl:t,messenger:r,unresponsivePollingInterval:n=5e3,unresponsiveTimeout:i=3e4}){this.workerUrl=t,this.setupSnapProvider=e,this.store=new o.ObservableStore({workers:{}}),this.workers=new Map,this.snapToWorkerMap=new Map,this.workerToSnapMap=new Map,this._snapRpcHooks=new Map,this._messenger=r,this._unresponsivePollingInterval=n,this._unresponsiveTimeout=i,this._timeoutForUnresponsiveMap=new Map}_setWorker(e,t){this.workers.set(e,t);const r=Object.assign(Object.assign({},this.store.getState().workers),{[e]:t});this.store.updateState({workers:r})}_deleteWorker(e){this.workers.delete(e);const t=Object.assign({},this.store.getState().workers);delete t[e],this.store.updateState({workers:t})}async _command(e,t){if("object"!=typeof t)throw new Error("Must send object.");const r=this.workers.get(e);if(!r)throw new Error(`Worker with id ${e} not found.`);console.log("Parent: Sending Command",t);const n=await r.rpcEngine.handle(t);if(n.error)throw new Error(n.error.message);return n.result}async terminateAllSnaps(){for(const e of this.workers.keys())this.terminate(e);this._snapRpcHooks.clear()}async terminateSnap(e){const t=this.snapToWorkerMap.get(e);t&&this.terminate(t),this._removeSnapHooks(e)}terminate(e){const t=this.workers.get(e);if(!t)throw new Error(`Worker with id "${e}" not found.`);if(!this._getSnapForWorker(e))throw new Error(`Failed to find a snap for worker with id "${e}".`);Object.values(t.streams).forEach((e=>{try{!e.destroyed&&e.destroy(),e.removeAllListeners()}catch(e){console.log("Error while destroying stream",e)}})),t.worker.terminate(),this._removeSnapAndWorkerMapping(e),this._deleteWorker(e),clearTimeout(this._timeoutForUnresponsiveMap.get(e)),this._timeoutForUnresponsiveMap.delete(e),console.log(`worker:${e} terminated`)}async getRpcMessageHandler(e){return this._snapRpcHooks.get(e)}_removeSnapHooks(e){this._snapRpcHooks.delete(e)}_createSnapHooks(e,t){this._snapRpcHooks.set(e,(async(r,n)=>await this._command(t,{id:i.nanoid(),jsonrpc:"2.0",method:"snapRpc",params:{origin:r,request:n,target:e}})))}async executeSnap(e){if(this.snapToWorkerMap.has(e.snapName))throw new Error(`Snap "${e.snapName}" is already being executed.`);const t=await this._initWorker();this._mapSnapAndWorker(e.snapName,t.id),this.setupSnapProvider(e.snapName,t.streams.rpc);const r=await this._command(t.id,{jsonrpc:"2.0",method:"executeSnap",params:e,id:i.nanoid()});return this._pollForWorkerStatus(e.snapName),this._createSnapHooks(e.snapName,t.id),r}_pollForWorkerStatus(e){const t=this._getWorkerForSnap(e);if(!t)throw new Error("no worker id found for snap");const r=setTimeout((async()=>{this._getWorkerStatus(t).then((()=>{this._pollForWorkerStatus(e)})).catch((()=>{this._messenger.publish("ServiceMessenger:unresponsive",e)}))}),this._unresponsivePollingInterval);this._timeoutForUnresponsiveMap.set(e,r)}async _getWorkerStatus(e){let t,r;const n=new Promise(((e,n)=>{t=e,r=n})),s=setTimeout((()=>{r(new Error("ping request timed out"))}),this._unresponsiveTimeout);return Promise.race([this._command(e,{jsonrpc:"2.0",method:"ping",params:[],id:i.nanoid()}).then((()=>{clearTimeout(s),t()})),n])}_mapSnapAndWorker(e,t){this.snapToWorkerMap.set(e,t),this.workerToSnapMap.set(t,e)}_getWorkerForSnap(e){return this.snapToWorkerMap.get(e)}_getSnapForWorker(e){return this.workerToSnapMap.get(e)}_removeSnapAndWorkerMapping(e){const t=this.workerToSnapMap.get(e);if(!t)throw new Error(`worker:${e} has no mapped snap.`);this.workerToSnapMap.delete(e),this.snapToWorkerMap.delete(t)}async _initWorker(){const e=i.nanoid(),t=new Worker(this.workerUrl,{name:e});t.addEventListener("error",(t=>{if(this._messenger){const r=this.workerToSnapMap.get(e);r&&this._messenger.publish("ServiceMessenger:unhandledError",r,{code:t.error.code,message:t.error.message,data:t.error.data})}}),{once:!0});const r=this._initWorkerStreams(t,e),n=new d.JsonRpcEngine,o=l.createStreamMiddleware();s.default(o.stream,r.command,o.stream),n.push(o.middleware);const a={id:e,streams:r,rpcEngine:n,worker:t};return this._setWorker(e,a),await this._command(e,{jsonrpc:"2.0",method:"ping",id:i.nanoid()}),a}_initWorkerStreams(e,t){const r=new c.WorkerParentPostMessageStream({worker:e}),n=function(e,t){const r=new a.default;return s.default(e,r,e,(e=>{e&&(t?console.error(`${t} stream failure.`,e):console.error(e))})),r}(r,`Worker:${t}`);return{command:n.createStream(u.SNAP_STREAM_NAMES.COMMAND),rpc:n.createStream(u.SNAP_STREAM_NAMES.JSON_RPC),_connection:r}}}}}},{package:"@metamask/snap-controllers",file:"/home/circleci/project/node_modules/@metamask/rpc-methods/node_modules/@metamask/snap-controllers/dist/services/WebWorkerExecutionEnvironmentService.js"}],[1266,{"@metamask/obs-store":1253,"@metamask/safe-event-emitter":1309,"eth-rpc-errors":2399,nanoid:1306},function(){with(this)return function(){"use strict";return function(e,t,r){var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(r,"__esModule",{value:!0}),r.ExternalResourceController=void 0;const i=e("@metamask/obs-store"),s=n(e("@metamask/safe-event-emitter")),o=e("eth-rpc-errors"),a=e("nanoid"),c=e=>`Not authorized to access resource with id "${e}".`;class u extends s.default{constructor({storageKey:e,requiredFields:t,initialResources:r}){super(),this.requiredFields=t,this.storageKey=e,this.store=new i.ObservableStore(((e,t)=>({[e]:t}))(e,r))}getResources(){return Object.assign({},this.store.getState()[this.storageKey])}setResources(e){this.store.updateState({[this.storageKey]:e})}clearResources(){this.setResources({})}deleteResourcesFor(e){const t=this.getResources(),r=Object.entries(t).reduce(((t,[r,n])=>(n.fromDomain!==e&&(t[r]=n),t)),{});this.setResources(r)}get(e,t){const r=this.getResources()[t];if(r&&r.fromDomain!==e)throw o.ethErrors.provider.unauthorized({message:c(t)});return r?Object.assign({},r):null}getAllResources(e){return Object.values(this.getResources()).filter((t=>t.fromDomain===e))}add(e,t){const r=this.processNewResource(e,t),{id:n}=r,i=this.getResources();if(i[n])throw new Error(`Resource with id "${n}" already exists.`);return i[n]=r,this.setResources(i),r.id}update(e,t){const{id:r}=t,n=this.getResources(),i=n[r];if(!i)throw o.ethErrors.rpc.resourceNotFound({message:`Resource with id "${r}" not found.`});if(i.fromDomain!==e)throw o.ethErrors.provider.unauthorized({message:c(r)});return n[r]=this.processNewResource(e,Object.assign(Object.assign({},n[r]),t)),this.setResources(n),r}processNewResource(e,t){return this.requiredFields.forEach((r=>{if(!(r in t))throw o.ethErrors.rpc.invalidParams(`Resource from "${e}" missing required field: ${r}`)})),Object.assign(Object.assign({},t),{fromDomain:e,id:t.id||a.nanoid()})}delete(e,t){const r=this.getResources(),n=r[t];if(!n)throw o.ethErrors.rpc.invalidParams({message:`Resource with id "${t}" not found.`});if(n.fromDomain!==e)throw o.ethErrors.provider.unauthorized({message:c(t)});return delete r[t],this.setResources(r),null}handleRpcRequest(e,t,r){if(!e||"string"!=typeof e)throw new Error("Invalid fromDomain.");switch(t){case"get":return this.get(e,r);case"getAll":return this.getAllResources(e);case"add":return this.add(e,r);case"update":return this.update(e,r);case"delete":return this.delete(e,r);default:throw o.ethErrors.rpc.methodNotFound({message:`Not an asset method: ${t}`})}}}r.ExternalResourceController=u}}},{package:"@metamask/snap-controllers",file:"/home/circleci/project/node_modules/@metamask/rpc-methods/node_modules/@metamask/snap-controllers/dist/resource/ExternalResourceController.js"}],[1271,{"../utils":1276,"./inlineSnaps":1273,"@metamask/controllers":1236,"eth-rpc-errors":2399,nanoid:1306},function(){with(this)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.SnapController=r.SnapStatusEvent=r.SnapStatus=r.SNAP_PREFIX_REGEX=r.SNAP_PREFIX=r.controllerName=void 0;const n=e("eth-rpc-errors"),i=e("@metamask/controllers"),s=e("nanoid"),o=e("../utils"),a=e("./inlineSnaps");r.controllerName="SnapController",r.SNAP_PREFIX="wallet_snap_",r.SNAP_PREFIX_REGEX=new RegExp(`^${r.SNAP_PREFIX}`,"u");const c=new Set(["initialPermissions","name","permissionName"]),u={snapErrors:{},inlineSnapIsRunning:!1,snaps:{},snapStates:{}};var l,d;!function(e){e.installing="installing",e.running="running",e.stopped="stopped",e.crashed="crashed"}(l=r.SnapStatus||(r.SnapStatus={})),function(e){e.start="start",e.stop="stop",e.crash="crash"}(d=r.SnapStatusEvent||(r.SnapStatusEvent={}));const f=e=>e.enabled,h={initial:l.installing,states:{[l.installing]:{on:{[d.start]:{target:l.running,cond:f}}},[l.running]:{on:{[d.stop]:l.stopped,[d.crash]:l.crashed}},[l.stopped]:{on:{[d.start]:{target:l.running,cond:f}}},[l.crashed]:{on:{[d.start]:{target:l.running,cond:f}}}}};class p extends i.BaseControllerV2{constructor({removeAllPermissionsFor:e,closeAllConnections:t,requestPermissions:r,getPermissions:n,terminateSnap:i,terminateAllSnaps:s,hasPermission:o,executeSnap:a,getRpcMessageHandler:c,messenger:d,state:f,maxIdleTime:h=3e4,idleTimeCheckInterval:p=5e3,maxRequestTime:m=6e4}){super({messenger:d,metadata:{snapErrors:{persist:!1,anonymous:!1},inlineSnapIsRunning:{persist:!1,anonymous:!1},snapStates:{persist:!0,anonymous:!1},snaps:{persist:e=>Object.values(e).map((e=>Object.assign(Object.assign({},e),{status:l.stopped}))).reduce(((e,t)=>(e[t.name]=t,e)),{}),anonymous:!1}},name:"SnapController",state:Object.assign(Object.assign({},u),f)}),this._removeAllPermissionsFor=e,this._closeAllConnections=t,this._requestPermissions=r,this._getPermissions=n,this._hasPermission=o,this._terminateSnap=i,this._terminateAllSnaps=s,this._executeSnap=a,this._getRpcMessageHandler=c,this._onUnhandledSnapError=this._onUnhandledSnapError.bind(this),this._onUnresponsiveSnap=this._onUnresponsiveSnap.bind(this),this.messagingSystem.subscribe("ServiceMessenger:unhandledError",this._onUnhandledSnapError),this.messagingSystem.subscribe("ServiceMessenger:unresponsive",this._onUnresponsiveSnap),this._snapsBeingAdded=new Map,this._maxIdleTime=h,this._maxRequestTime=m,this._idleTimeCheckInterval=p,this._pollForLastRequestStatus(),this._lastRequestMap=new Map,this._rpcHandlerMap=new Map}_pollForLastRequestStatus(){this._timeoutForLastRequestStatus=setTimeout((async()=>{this._stopSnapsLastRequestPastMax(),this._pollForLastRequestStatus()}),this._idleTimeCheckInterval)}_stopSnapsLastRequestPastMax(){this._lastRequestMap.forEach((async(e,t)=>{this._maxIdleTime&&o.timeSince(e)>this._maxIdleTime&&this.stopSnap(t)}))}_onUnresponsiveSnap(e){this._transitionSnapState(e,d.crash),this._stopSnap(e,!1),this.addSnapError({code:-32001,message:"Snap Unresponsive",data:{snapName:e}})}_onUnhandledSnapError(e,t){this._transitionSnapState(e,d.crash),this._stopSnap(e,!1),this.addSnapError(t)}_transitionSnapState(e,t){var r;const n=this.state.snaps[e].status;let i=null!==(r=h.states[n].on[t])&&void 0!==r?r:n;if(i.cond){if(!1===i.cond(this.state.snaps[e]))throw new Error(`Condition failed for state transition "${e}" with event "${t}".`)}i.target&&(i=i.target),i!==n&&this.update((t=>{t.snaps[e].status=i}))}async runExistingSnaps(){const{snaps:e}=this.state;Object.keys(e).length>0?(console.log("Starting existing snaps...",e),await Promise.all(Object.values(e).map((async({name:e,sourceCode:t})=>{console.log(`Starting: ${e}`);try{await this._startSnap({snapName:e,sourceCode:t})}catch(t){console.warn(`Failed to start "${e}", deleting it.`,t),this.removeSnap(e)}})))):console.log("No existing snaps to run.")}async startSnap(e){const t=this.get(e);if(!t)throw new Error(`Snap "${e}" not found.`);if(!1===this.state.snaps[e].enabled)throw new Error(`Snap "${e}" is disabled.`);await this._startSnap({snapName:e,sourceCode:t.sourceCode})}enableSnap(e){this.update((t=>{t.snaps[e].enabled=!0}))}disableSnap(e){this.stopSnap(e),this.update((t=>{t.snaps[e].enabled=!1}))}stopSnap(e){if(!this.get(e))throw new Error(`Snap "${e}" not found.`);if(!this.isRunning(e))throw new Error(`Snap "${e}" already stopped.`);this._stopSnap(e),console.log(`Snap "${e}" stopped.`)}_stopSnap(e,t=!0){this._lastRequestMap.delete(e),this._closeAllConnections(e),this._terminateSnap(e),t&&this._transitionSnapState(e,d.stop)}isRunning(e){const t=this.get(e);if(!t)throw new Error(`Snap "${e}" not found.`);return t.status===l.running}has(e){return e in this.state.snaps}get(e){return this.state.snaps[e]}getSerializable(e){const t=this.get(e);return t?Object.keys(t).reduce(((e,r)=>(c.has(r)&&(e[r]=t[r]),e)),{}):null}async updateSnapState(e,t){this.update((r=>{r.snapStates[e]=t}))}async addSnapError(e){this.update((t=>{const r=s.nanoid();t.snapErrors[r]=Object.assign(Object.assign({},e),{internalID:r})}))}async removeSnapError(e){this.update((t=>{delete t.snapErrors[e]}))}async clearSnapErrors(){this.update((e=>{e.snapErrors={}}))}async getSnapState(e){return this.state.snapStates[e]}clearState(){const e=Object.keys(this.state.snaps);e.forEach((e=>{this._closeAllConnections(e)})),this._terminateAllSnaps(),this._removeAllPermissionsFor(e),this.update((e=>{e.inlineSnapIsRunning=!1,e.snaps={},e.snapStates={}}))}removeSnap(e){this.removeSnaps([e])}removeSnaps(e){if(!Array.isArray(e))throw new Error("Expected array of snap names.");this.update((t=>{e.forEach((e=>{this._stopSnap(e,!1),this._rpcHandlerMap.delete(e),delete t.snaps[e],delete t.snapStates[e]}))})),this._removeAllPermissionsFor(e)}getPermittedSnaps(e){return this._getPermissions(e).reduce(((e,t)=>{if(t.parentCapability.startsWith(r.SNAP_PREFIX)){const i=t.parentCapability.replace(r.SNAP_PREFIX_REGEX,""),s=this.getSerializable(i);e[i]=s||{error:n.serializeError(new Error("Snap permitted but not installed."))}}return e}),{})}async installSnaps(e,t){const i={};return await Promise.all(Object.keys(t).map((async t=>{const s=r.SNAP_PREFIX+t;this._hasPermission(e,s)?i[t]=Object.assign({},await this.processRequestedSnap(t)):i[t]={error:n.ethErrors.provider.unauthorized(`Not authorized to install snap '${t}'. Request the permission for the snap before attempting to install it.`)}}))),i}async processRequestedSnap(e){if(this.get(e))return this.getSerializable(e);try{const{sourceCode:t}=await this.add({name:e,manifestUrl:e});return await this.authorize(e),await this._startSnap({snapName:e,sourceCode:t}),this.getSerializable(e)}catch(e){return console.error("Error when adding snap.",e),{error:n.serializeError(e)}}}add(e){const{name:t}=e;if(!t||"string"!=typeof t)throw new Error(`Invalid snap name: ${t}`);if(!(e&&("manifestUrl"in e||"manifest"in e&&"sourceCode"in e)))throw new Error(`Invalid add snap args for snap "${t}".`);return this._snapsBeingAdded.has(t)||(console.log(`Adding snap: ${t}`),this._snapsBeingAdded.set(t,this._add(e))),this._snapsBeingAdded.get(t)}async _startSnap(e){const{snapName:t}=e;if(this.isRunning(t))throw new Error(`Snap "${t}" is already started.`);const r=await this._executeSnap(e);return this._transitionSnapState(t,d.start),r}async _add(e){var t;const{name:n}=e;let i,s;if("manifestUrl"in e){const t=e.manifestUrl||n;[i,s]=await this._fetchSnap(n,t)}else i=e.manifest,s=e.sourceCode;if("string"!=typeof s||0===s.length)throw new Error(`Invalid source code for snap "${n}".`);const o=null===(t=null==i?void 0:i.web3Wallet)||void 0===t?void 0:t.initialPermissions;if(!o||"object"!=typeof o||Array.isArray(o))throw new Error(`Invalid initial permissions for snap "${n}".`);let a={initialPermissions:o,name:n,permissionName:r.SNAP_PREFIX+n,sourceCode:s,version:i.version,enabled:!0,status:h.initial};const c=this.state.snaps;return c[n]&&(a=Object.assign(Object.assign({},c[n]),a)),this.update((e=>{e.snaps[n]=a})),a}async _fetchSnap(e,t){try{console.log(`Fetching snap manifest from: ${t}`);const e=await fetch(t),r=await e.json();console.log("Destructuring snap: ",r);const{web3Wallet:{bundle:n}}=r;console.log(`Fetching snap source code from: ${n.url}`);const i=await fetch(n.url);return[r,await i.text()]}catch(t){throw new Error(`Problem fetching snap "${e}": ${t.message}`)}}async authorize(e){console.log(`Authorizing snap: ${e}`);const t=this.state.snaps[e],{initialPermissions:r}=t;if(0===Object.keys(r).length)return[];if(null===r)return[];try{return(await this._requestPermissions(e,r)).map((e=>e.parentCapability))}finally{this._snapsBeingAdded.delete(e)}}runInlineSnap(e="IDLE"){this._startSnap({snapName:"inlineSnap",sourceCode:a.INLINE_SNAPS[e]}),this.update((e=>{e.inlineSnapIsRunning=!0}))}removeInlineSnap(){this.update((e=>{e.inlineSnapIsRunning=!1})),this.removeSnap("inlineSnap")}destroy(){super.destroy(),this._timeoutForLastRequestStatus&&clearTimeout(this._timeoutForLastRequestStatus),this.messagingSystem.unsubscribe("ServiceMessenger:unhandledError",this._onUnhandledSnapError),this.messagingSystem.unsubscribe("ServiceMessenger:unresponsive",this._onUnresponsiveSnap)}async getRpcMessageHandler(e){const t=this._rpcHandlerMap.get(e);if(t)return t;const r=async(t,r)=>{let n,i=await this._getRpcMessageHandler(e);if(!1===this.state.snaps[e].enabled)throw new Error(`Snap "${e}" is disabled.`);if(this.state.snaps[e].status===l.installing)throw new Error(`Snap "${e}" has not been started yet.`);if(i||!1!==this.isRunning(e)||(await this.startSnap(e),i=await this._getRpcMessageHandler(e)),!i)throw new Error(`Snap execution service returned no RPC handler for running snap "${e}".`);this._recordSnapRpcRequest(e);const s=new Promise(((t,r)=>{n=setTimeout((()=>{this._stopSnap(e),r(new Error("The request timed out."))}),this._maxRequestTime)})),o=await Promise.race([i(t,r),s]);return clearTimeout(n),o};return this._rpcHandlerMap.set(e,r),r}_recordSnapRpcRequest(e){this._lastRequestMap.set(e,Date.now())}}r.SnapController=p}}},{package:"@metamask/snap-controllers",file:"/home/circleci/project/node_modules/@metamask/rpc-methods/node_modules/@metamask/snap-controllers/dist/snaps/SnapController.js"}],[1154,{"./constants":1148,buffer:2028},function(){with(this)return function(){"use strict";return function(e,t,r){(function(t){(function(){Object.defineProperty(r,"__esModule",{value:!0}),r.isValidBase64StringKey=r.isValidHexStringKey=r.isValidBufferKey=r.bufferToBase64String=r.hexStringToBuffer=r.base64StringToBuffer=r.isValidHexString=r.stripHexPrefix=r.isHardened=r.isValidBIP32Index=r.validateBIP32Index=r.getUnhardenedBIP32NodeToken=r.getHardenedBIP32NodeToken=r.getBIP44CoinTypeToAddressPathTuple=r.getBIP44ChangePathString=r.getBIP44CoinTypePathString=void 0;const n=e("./constants");function i(e){return o(e),`${s(e)}'`}function s(e){return o(e),`bip32:${e}`}function o(e){if(!a(e))throw new Error("Invalid BIP-32 index: Must be a non-negative integer.")}function a(e){return Number.isInteger(e)&&e>=0}function c(e){return e.replace(/^0x/iu,"")}function u(e){return/^(?:0x)?[a-f0-9]+$/iu.test(e)}r.getBIP44CoinTypePathString=function(e){return`m / ${n.BIP44PurposeNodeToken} / ${s(e)}'`},r.getBIP44ChangePathString=function(e,t){return`${e} / ${i(t.account||0)} / ${s(t.change||0)}`},r.getBIP44CoinTypeToAddressPathTuple=function({account:e=0,change:t=0,address_index:r}){return[i(e),s(t),s(r)]},r.getHardenedBIP32NodeToken=i,r.getUnhardenedBIP32NodeToken=s,r.validateBIP32Index=o,r.isValidBIP32Index=a,r.isHardened=function(e){return e.endsWith("'")},r.stripHexPrefix=c,r.isValidHexString=u,r.base64StringToBuffer=function(e){return t.from(e,"base64")},r.hexStringToBuffer=function(e){return t.from(c(e),"hex")},r.bufferToBase64String=function(e){return e.toString("base64")},r.isValidBufferKey=function(e){if(e.length!==n.BUFFER_KEY_LENGTH)return!1;for(const t of e)if(0!==t)return!0;return!1},r.isValidHexStringKey=function(e){if(!u(e))return!1;const t=c(e);return t.length===n.HEXADECIMAL_KEY_LENGTH&&!/^0+$/iu.test(t)},r.isValidBase64StringKey=function(e){return t=e,!!n.BASE_64_REGEX.test(t)&&(e.length===n.BASE_64_KEY_LENGTH&&e!==n.BASE_64_ZERO);var t}}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"@metamask/key-tree",file:"/home/circleci/project/node_modules/@metamask/key-tree/dist/utils.js"}],[1149,{"../../../is-buffer/index.js":4611,"./constants":1148,"./derivers":1152},function(){with(this)return function(){"use strict";return function(e,t,r){(function(t){(function(){Object.defineProperty(r,"__esModule",{value:!0}),r.validatePathSegment=r.deriveKeyFromPath=void 0;const n=e("./constants"),i=e("./derivers");function s(e,t,r){if(0===e.length)throw new Error("Invalid HD path segment: The segment must not be empty.");if(e.length-1>n.MAX_BIP_44_DEPTH)throw new Error("Invalid HD path segment: The segment cannot exceed a 0-indexed depth of 5.");let i=!1;if(e.forEach(((e,t)=>{if(0===t){if(i=n.BIP_39_PATH_REGEX.test(e),!i&&!n.BIP_32_PATH_REGEX.test(e))throw o()}else if(!n.BIP_32_PATH_REGEX.test(e))throw o()})),r===n.MIN_BIP_44_DEPTH&&(!i||1!==e.length))throw new Error(`Invalid HD path segment: The segment must consist of a single BIP-39 node for depths of ${n.MIN_BIP_44_DEPTH}. Received: "${e}"`);if(!t&&!i)throw new Error("Invalid derivation parameters: Must specify parent key if the first node of the path segment is not a BIP-39 node.");if(t&&i)throw new Error("Invalid derivation parameters: May not specify parent key if the path segment starts with a BIP-39 node.")}function o(){throw new Error("Invalid HD path segment: The path segment is malformed.")}r.deriveKeyFromPath=function(e,r,n){if(r&&!t.isBuffer(r))throw new Error("Parent key must be a Buffer if specified.");s(e,Boolean(r),n);let o=r;return e.forEach((e=>{const[t,r]=e.split(":");if(!function(e){return e in i.derivers}(t))throw new Error(`Unknown derivation type: "${t}"`);const n=i.derivers[t].deriveChildKey(r,o);o=n})),o},r.validatePathSegment=s}).call(this)}).call(this,{isBuffer:e("../../../is-buffer/index.js")})}}},{package:"@metamask/key-tree",file:"/home/circleci/project/node_modules/@metamask/key-tree/dist/derivation.js"}],[1382,{"bn.js":1371,buffer:2028,"js-sha3":1394,"number-to-bn":5175},function(){with(this)return function(){"use strict";return function(e,t,r){(function(r){(function(){var n=e("bn.js"),i=e("number-to-bn"),s=e("js-sha3").keccak_256;function o(e){for(var t=e,r=t[0];t.length>0&&"0"===r.toString();)r=(t=t.slice(1))[0];return t}function a(e){var t=e.toString(16);return t.length%2&&(t="0"+t),o(new r(t,"hex"))}function c(e,t){return!("string"!=typeof e||!e.match(/^0x[0-9A-Fa-f]*$/))&&(!t||e.length===2+2*t)}function u(e,t){var n=e;if(!r.isBuffer(n)){if(!c(n)){var i=new Error(t?"[ethjs-abi] invalid "+t:"[ethjs-abi] invalid hex or buffer, must be a prefixed alphanumeric even length hex string");throw i.reason="[ethjs-abi] invalid hex string, hex must be prefixed and alphanumeric (e.g. 0x023..)",i.value=n,i}(n=n.substring(2)).length%2&&(n="0"+n),n=new r(n,"hex")}return n}function l(e,t){return{encode:function(n){var s=n;return"object"==typeof s&&s.toString&&(s.toTwos||s.dividedToIntegerBy)&&(s=s.toString(10).split(".")[0]),"string"!=typeof s&&"number"!=typeof s||(s=String(s).split(".")[0]),s=(s=i(s)).toTwos(8*e).maskn(8*e),t&&(s=s.fromTwos(8*e).toTwos(256)),s.toArrayLike(r,"be",32)},decode:function(r,i){var s=32-e,o=new n(r.slice(i+s,i+32));return o=t?o.fromTwos(8*e):o.maskn(8*e),{consumed:32,value:new n(o.toString(10))}}}}var d=l(32,!1),f={encode:function(e){return d.encode(e?1:0)},decode:function(e,t){var r=d.decode(e,t);return{consumed:r.consumed,value:!r.value.isZero()}}};function h(e){return{encode:function(e){var t=e;if(32===(t=u(t)).length)return t;var n=new r(32);return n.fill(0),t.copy(n),n},decode:function(t,r){if(0!==t.length&&t.length<r+32)throw new Error("[ethjs-abi] while decoding fixed bytes, invalid bytes data length: "+e);return{consumed:32,value:"0x"+t.slice(r,r+e).toString("hex")}}}}var p={encode:function(e){var t=e,n=new r(32);if(!c(t,20))throw new Error("[ethjs-abi] while encoding address, invalid address value, not alphanumeric 20 byte hex string");return t=u(t),n.fill(0),t.copy(n,12),n},decode:function(e,t){if(0===e.length)return{consumed:32,value:"0x"};if(0!==e.length&&e.length<t+32)throw new Error("[ethjs-abi] while decoding address data, invalid address data, invalid byte length "+e.length);return{consumed:32,value:"0x"+e.slice(t+12,t+32).toString("hex")}}};function m(e){var t=parseInt(32*Math.ceil(e.length/32)),n=new r(t-e.length);return n.fill(0),r.concat([d.encode(e.length),e,n])}function g(e,t){if(0!==e.length&&e.length<t+32)throw new Error("[ethjs-abi] while decoding dynamic bytes data, invalid bytes length: "+e.length+" should be less than "+(t+32));var r=d.decode(e,t).value;if(r=r.toNumber(),0!==e.length&&e.length<t+32+r)throw new Error("[ethjs-abi] while decoding dynamic bytes data, invalid bytes length: "+e.length+" should be less than "+(t+32+r));return{consumed:parseInt(32+32*Math.ceil(r/32),10),value:e.slice(t+32,t+32+r)}}var y={encode:function(e){return m(u(e))},decode:function(e,t){var r=g(e,t);return r.value="0x"+r.value.toString("hex"),r},dynamic:!0},b={encode:function(e){return m(new r(e,"utf8"))},decode:function(e,t){var r=g(e,t);return r.value=r.value.toString("utf8"),r},dynamic:!0};function _(e,t){return{encode:function(n){var i=new r(0),s=t;if(!Array.isArray(n))throw new Error("[ethjs-abi] while encoding array, invalid array data, not type Object (Array)");if(-1===s&&(s=n.length,i=d.encode(s)),s!==n.length)throw new Error("[ethjs-abi] while encoding array, size mismatch array length "+s+" does not equal "+n.length);return n.forEach((function(t){i=r.concat([i,e.encode(t)])})),i},decode:function(r,n){var i,s=t,o=n,a=0;-1===s&&(s=(i=d.decode(r,o)).value.toNumber(),a+=i.consumed,o+=i.consumed);for(var c=[],u=0;u<s;u++){var l=e.decode(r,o);a+=l.consumed,o+=l.consumed,c.push(l.value)}return{consumed:a,value:c}},dynamic:-1===t}}var w=new RegExp(/^((u?int|bytes)([0-9]*)|(address|bool|string)|(\[([0-9]*)\]))/);t.exports={BN:n,bnToBuffer:a,isHexString:c,hexOrBuffer:u,hexlify:function(e){return"number"==typeof e?"0x"+a(new n(e)).toString("hex"):e.mod||e.modulo?"0x"+a(e).toString("hex"):"0x"+u(e).toString("hex")},stripZeros:o,keccak256:s,getKeys:function(e,t,r){var n=[];if(!Array.isArray(e))throw new Error("[ethjs-abi] while getting keys, invalid params value "+JSON.stringify(e));for(var i=0;i<e.length;i++){var s=e[i][t];if(r&&!s)s="";else if("string"!=typeof s)throw new Error("[ethjs-abi] while getKeys found invalid ABI data structure, type value not string");n.push(s)}return n},numberToBN:i,coderNumber:l,uint256Coder:d,coderBoolean:f,coderFixedBytes:h,coderAddress:p,coderDynamicBytes:y,coderString:b,coderArray:_,paramTypePart:w,getParamCoder:function(e){for(var t=e,r=null,n="[ethjs-abi] while getting param coder (getParamCoder) type value "+JSON.stringify(t)+" is either invalid or unsupported by ethjs-abi.";t;){var i=t.match(w);if(!i)throw new Error(n);t=t.substring(i[0].length);var s=i[2]||i[4]||i[5];switch(s){case"int":case"uint":if(r)throw new Error(n);var o=parseInt(i[3]||256);if(0===o||o>256||o%8!=0)throw new Error("[ethjs-abi] while getting param coder for type "+t+", invalid "+s+"<N> width: "+t);r=l(o/8,"int"===s);break;case"bool":if(r)throw new Error(n);r=f;break;case"string":if(r)throw new Error(n);r=b;break;case"bytes":if(r)throw new Error(n);if(i[3]){var a=parseInt(i[3]);if(0===a||a>32)throw new Error("[ethjs-abi] while getting param coder for prefix bytes, invalid type "+t+", size "+a+" should be 0 or greater than 32");r=h(a)}else r=y;break;case"address":if(r)throw new Error(n);r=p;break;case"[]":if(!r||r.dynamic)throw new Error(n);r=_(r,-1);break;default:if(!r||r.dynamic)throw new Error(n);r=_(r,parseInt(i[6]))}}if(!r)throw new Error(n);return r}}}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"ethjs-abi",file:"/home/circleci/project/node_modules/@metamask/snap-controllers/node_modules/ethjs-abi/lib/utils/index.js"}],[1388,{buffer:2028,"is-hex-prefixed":4617,"strip-hex-prefix":5757},function(){with(this)return function(){"use strict";return function(e,t,r){(function(r){(function(){var n=e("is-hex-prefixed"),i=e("strip-hex-prefix");function s(e){var t=e;if("string"!=typeof t)throw new Error("[ethjs-util] while padding to even, value must be string, is currently "+typeof t+", while padToEven.");return t.length%2&&(t="0"+t),t}function o(e){return"0x"+s(e.toString(16))}t.exports={arrayContainsArray:function(e,t,r){if(!0!==Array.isArray(e))throw new Error("[ethjs-util] method arrayContainsArray requires input 'superset' to be an array got type '"+typeof e+"'");if(!0!==Array.isArray(t))throw new Error("[ethjs-util] method arrayContainsArray requires input 'subset' to be an array got type '"+typeof t+"'");return t[Boolean(r)?"some":"every"]((function(t){return e.indexOf(t)>=0}))},intToBuffer:function(e){var t=o(e);return r.from(t.slice(2),"hex")},getBinarySize:function(e){if("string"!=typeof e)throw new Error("[ethjs-util] while getting binary size, method getBinarySize requires input 'str' to be type String, got '"+typeof e+"'.");return r.byteLength(e,"utf8")},isHexPrefixed:n,stripHexPrefix:i,padToEven:s,intToHex:o,fromAscii:function(e){for(var t="",r=0;r<e.length;r++){var n=e.charCodeAt(r).toString(16);t+=n.length<2?"0"+n:n}return"0x"+t},fromUtf8:function(e){return"0x"+s(new r(e,"utf8").toString("hex")).replace(/^0+|0+$/g,"")},toAscii:function(e){var t="",r=0,n=e.length;for("0x"===e.substring(0,2)&&(r=2);r<n;r+=2){var i=parseInt(e.substr(r,2),16);t+=String.fromCharCode(i)}return t},toUtf8:function(e){return new r(s(i(e).replace(/^0+|0+$/g,"")),"hex").toString("utf8")},getKeys:function(e,t,r){if(!Array.isArray(e))throw new Error("[ethjs-util] method getKeys expecting type Array as 'params' input, got '"+typeof e+"'");if("string"!=typeof t)throw new Error("[ethjs-util] method getKeys expecting type String for input 'key' got '"+typeof t+"'.");for(var n=[],i=0;i<e.length;i++){var s=e[i][t];if(r&&!s)s="";else if("string"!=typeof s)throw new Error("invalid abi");n.push(s)}return n},isHexString:function(e,t){return!("string"!=typeof e||!e.match(/^0x[0-9A-Fa-f]*$/))&&(!t||e.length===2+2*t)}}}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"ethjs-util",file:"/home/circleci/project/node_modules/@metamask/snap-controllers/node_modules/ethjs-contract/node_modules/ethjs-util/lib/index.js"}],[1386,{"./utils/index.js":1387,buffer:2028},function(){with(this)return function(){"use strict";return function(e,t,r){(function(r){(function(){var n=e("./utils/index.js"),i=n.uint256Coder,s=(n.coderBoolean,n.coderFixedBytes,n.coderAddress,n.coderDynamicBytes,n.coderString,n.coderArray,n.paramTypePart,n.getParamCoder);function o(){}function a(e,t){if(e.length!==t.length)throw new Error("[ethjs-abi] while encoding params, types/values mismatch, Your contract requires "+e.length+" types (arguments), and you passed in "+t.length);var n=[];function o(e){return parseInt(32*Math.ceil(e/32))}e.forEach((function(e,r){var i=s(e);n.push({dynamic:i.dynamic,value:i.encode(t[r])})}));var a=0,c=0;n.forEach((function(e){e.dynamic?(a+=32,c+=o(e.value.length)):a+=o(e.value.length)}));var u=0,l=a,d=new r(a+c);return n.forEach((function(e,t){e.dynamic?(i.encode(l).copy(d,u),u+=32,e.value.copy(d,l),l+=o(e.value.length)):(e.value.copy(d,u),u+=o(e.value.length))})),"0x"+d.toString("hex")}function c(e,t,r){var a=!(arguments.length>3&&arguments[3]!==undefined)||arguments[3];arguments.length<3&&(r=t,t=e,e=[]),r=n.hexOrBuffer(r);var c=new o,u=0;return t.forEach((function(t,n){var o=s(t);if(o.dynamic){var l=i.decode(r,u),d=o.decode(r,l.value.toNumber());u+=l.consumed}else{d=o.decode(r,u);u+=d.consumed}a&&(c[n]=d.value),e[n]&&(c[e[n]]=d.value)})),c}function u(e,t){var i=e.name+"("+n.getKeys(e.inputs,"type").join(",")+")";return""+("0x"+new r(n.keccak256(i),"hex").slice(0,4).toString("hex"))+a(n.getKeys(e.inputs,"type"),t).substring(2)}function l(e){var t=e.name+"("+n.getKeys(e.inputs,"type").join(",")+")";return"0x"+n.keccak256(t)}function d(e,t,i){var o=!(arguments.length>3&&arguments[3]!==undefined)||arguments[3],a=e.inputs.filter((function(e){return!e.indexed})),u=n.getKeys(a,"name",!0),l=n.getKeys(a,"type"),d=c(u,l,n.hexOrBuffer(t),o),f=e.anonymous?0:1;return e.inputs.filter((function(e){return e.indexed})).map((function(e,t){var n=new r(i[t+f].slice(2),"hex"),o=s(e.type);d[e.name]=o.decode(n,0).value})),d._eventName=e.name,d}function f(e,t){var r=!(arguments.length>2&&arguments[2]!==undefined)||arguments[2];if(e&&t.topics[0]===l(e))return d(e,t.data,t.topics,r)}t.exports={encodeParams:a,decodeParams:c,encodeMethod:u,decodeMethod:function(e,t){return c(n.getKeys(e.outputs,"name",!0),n.getKeys(e.outputs,"type"),n.hexOrBuffer(t))},encodeEvent:function(e,t){return u(e,t)},decodeEvent:d,decodeLogItem:f,logDecoder:function(e){var t=!(arguments.length>1&&arguments[1]!==undefined)||arguments[1],r={};return e.filter((function(e){return"event"===e.type})).map((function(e){r[l(e)]=e})),function(e){return e.map((function(e){return f(r[e.topics[0]],e,t)})).filter((function(e){return e}))}},eventSignature:l}}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"ethjs-abi",file:"/home/circleci/project/node_modules/@metamask/snap-controllers/node_modules/ethjs-contract/node_modules/ethjs-abi/lib/index.js"}],[1383,{"./has-tx-object":1384,"babel-runtime/core-js/json/stringify":1763,"babel-runtime/core-js/object/assign":1764,"babel-runtime/helpers/asyncToGenerator":1772,"babel-runtime/regenerator":1889,"ethjs-abi":1386,"ethjs-filter":2511,"ethjs-util":1388,"js-sha3":1394,"promise-to-callback":5296},function(){with(this)return function(){"use strict";return function(e,t,r){var n=a(e("babel-runtime/regenerator")),i=a(e("babel-runtime/core-js/json/stringify")),s=a(e("babel-runtime/helpers/asyncToGenerator")),o=a(e("babel-runtime/core-js/object/assign"));function a(e){return e&&e.__esModule?e:{default:e}}var c=e("ethjs-abi"),u=e("ethjs-filter"),l=e("ethjs-util").getKeys,d=e("js-sha3").keccak_256,f=e("./has-tx-object"),h=e("promise-to-callback");function p(e){return e.filter((function(e){return("function"===e.type||"event"===e.type)&&e.name.length>0}))}t.exports=function(){var e=(a=(0,s.default)(n.default.mark((function e(t){var s,a,u,l,d,h=t.methodObject,p=t.methodArgs;return n.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s="call",a={},f(p)&&(a=p.pop()),(u=(0,o.default)({},r.defaultTxObject,a,{to:r.address})).data=c.encodeMethod(h,p),!1===h.constant&&(s="sendTransaction"),e.next=8,r.query[s](u);case 8:if(l=e.sent,"call"!==s){e.next=19;break}return e.prev=10,d=c.decodeMethod(h,l),e.abrupt("return",d);case 15:throw e.prev=15,e.t0=e.catch(10),new Error("[ethjs-contract] while formatting incoming raw call data "+(0,i.default)(l)+" "+e.t0);case 19:return e.abrupt("return",l);case 20:case"end":return e.stop()}}),e,this,[[10,15]])}))),function(e){return a.apply(this,arguments)}),t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{},r=this;var a;function m(e){return function(){var t=[].slice.call(arguments),n=l(e.inputs,"type",!1),i="0x"+d(e.name+"("+n.join(",")+")"),s=[i],a=(0,o.default)({},t[0])||{},u=(0,o.default)({},t[0]||{},{to:r.address,topics:s}),f=(0,o.default)({},a,{decoder:function(t){return c.decodeEvent(e,t,s)},defaultFilterObject:u});return new r.filters.Filter(f)}}function g(t){return function(){var r=void 0,n=[].slice.call(arguments);"function"==typeof n[n.length-1]&&(r=n.pop());var i=e({methodObject:t,methodArgs:n});return r?h(i)(r):i}}r.abi=t.contractABI||[],r.query=t.query,r.address=t.address||"0x",r.bytecode=t.contractBytecode||"0x",r.defaultTxObject=t.contractDefaultTxObject||{},r.filters=new u(r.query),p(r.abi).forEach((function(e){"function"===e.type?r[e.name]=g(e):"event"===e.type&&(r[e.name]=m(e))}))}}}},{package:"ethjs-contract",file:"/home/circleci/project/node_modules/@metamask/snap-controllers/node_modules/ethjs-contract/lib/contract.js"}],[1384,{"babel-runtime/core-js/object/keys":1767},function(){with(this)return function(){"use strict";return function(e,t,r){var n,i=e("babel-runtime/core-js/object/keys"),s=(n=i)&&n.__esModule?n:{default:n};var o=["from","to","data","value","gasPrice","gas"];t.exports=function(e){if(!Array.isArray(e)||0===e.length)return!1;var t=e[e.length-1];if(!t)return!1;if("object"!=typeof t)return!1;if(0===(0,s.default)(t).length)return!0;var r=(0,s.default)(t);if(o.some((function(e){return r.includes(e)})))return!0;return!1}}}},{package:"ethjs-contract",file:"/home/circleci/project/node_modules/@metamask/snap-controllers/node_modules/ethjs-contract/lib/has-tx-object.js"}],[1198,{events:2029},function(){with(this)return function(){"use strict";return function(e,t,r){t.exports=e("events").EventEmitter}}},{package:"readable-stream",file:"/home/circleci/project/node_modules/@metamask/post-message-stream/node_modules/readable-stream/lib/internal/streams/stream-browser.js"}],[1197,{"process-nextick-args":5293},function(){with(this)return function(){"use strict";return function(e,t,r){var n=e("process-nextick-args");function i(e,t){e.emit("error",t)}t.exports={destroy:function(e,t){var r=this,s=this._readableState&&this._readableState.destroyed,o=this._writableState&&this._writableState.destroyed;s||o?t?t(e):!e||this._writableState&&this._writableState.errorEmitted||n(i,this,e):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(e||null,(function(e){!t&&e?(n(i,r,e),r._writableState&&(r._writableState.errorEmitted=!0)):t&&t(e)})))},undestroy:function(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)}}}}},{package:"readable-stream",file:"/home/circleci/project/node_modules/@metamask/post-message-stream/node_modules/readable-stream/lib/internal/streams/destroy.js"}],[1200,{buffer:2028},function(){with(this)return function(){"use strict";return function(e,t,r){var n=e("buffer"),i=n.Buffer;function s(e,t){for(var r in e)t[r]=e[r]}function o(e,t,r){return i(e,t,r)}i.from&&i.alloc&&i.allocUnsafe&&i.allocUnsafeSlow?t.exports=n:(s(n,r),r.Buffer=o),s(i,o),o.from=function(e,t,r){if("number"==typeof e)throw new TypeError("Argument must not be a number");return i(e,t,r)},o.alloc=function(e,t,r){if("number"!=typeof e)throw new TypeError("Argument must be a number");var n=i(e);return t!==undefined?"string"==typeof r?n.fill(t,r):n.fill(t):n.fill(0),n},o.allocUnsafe=function(e){if("number"!=typeof e)throw new TypeError("Argument must be a number");return i(e)},o.allocUnsafeSlow=function(e){if("number"!=typeof e)throw new TypeError("Argument must be a number");return n.SlowBuffer(e)}}}},{package:"safe-buffer",file:"/home/circleci/project/node_modules/@metamask/post-message-stream/node_modules/safe-buffer/index.js"}],[5293,{_process:5294},function(){with(this)return function(){"use strict";return function(e,t,r){(function(e){(function(){!e.version||0===e.version.indexOf("v0.")||0===e.version.indexOf("v1.")&&0!==e.version.indexOf("v1.8.")?t.exports=function(t,r,n,i){if("function"!=typeof t)throw new TypeError('"callback" argument must be a function');var s,o,a=arguments.length;switch(a){case 0:case 1:return e.nextTick(t);case 2:return e.nextTick((function(){t.call(null,r)}));case 3:return e.nextTick((function(){t.call(null,r,n)}));case 4:return e.nextTick((function(){t.call(null,r,n,i)}));default:for(s=new Array(a-1),o=0;o<s.length;)s[o++]=arguments[o];return e.nextTick((function(){t.apply(null,s)}))}}:t.exports=e.nextTick}).call(this)}).call(this,e("_process"))}}},{package:"process-nextick-args",file:"/home/circleci/project/node_modules/process-nextick-args/index.js"}],[1196,{"safe-buffer":1200},function(){with(this)return function(){"use strict";return function(e,t,r){var n=e("safe-buffer").Buffer;t.exports=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.head=null,this.tail=null,this.length=0}return e.prototype.push=function(e){var t={data:e,next:null};this.length>0?this.tail.next=t:this.head=t,this.tail=t,++this.length},e.prototype.unshift=function(e){var t={data:e,next:this.head};0===this.length&&(this.tail=t),this.head=t,++this.length},e.prototype.shift=function(){if(0!==this.length){var e=this.head.data;return 1===this.length?this.head=this.tail=null:this.head=this.head.next,--this.length,e}},e.prototype.clear=function(){this.head=this.tail=null,this.length=0},e.prototype.join=function(e){if(0===this.length)return"";for(var t=this.head,r=""+t.data;t=t.next;)r+=e+t.data;return r},e.prototype.concat=function(e){if(0===this.length)return n.alloc(0);if(1===this.length)return this.head.data;for(var t,r,i,s=n.allocUnsafe(e>>>0),o=this.head,a=0;o;)t=o.data,r=s,i=a,t.copy(r,i),a+=o.data.length,o=o.next;return s},e}()}}},{package:"readable-stream",file:"/home/circleci/project/node_modules/@metamask/post-message-stream/node_modules/readable-stream/lib/internal/streams/BufferList.js"}],[1201,{"safe-buffer":1200},function(){with(this)return function(){"use strict";return function(e,t,r){var n=e("safe-buffer").Buffer,i=n.isEncoding||function(e){switch((e=""+e)&&e.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function s(e){var t;switch(this.encoding=function(e){var t=function(e){if(!e)return"utf8";for(var t;;)switch(e){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return e;default:if(t)return;e=(""+e).toLowerCase(),t=!0}}(e);if("string"!=typeof t&&(n.isEncoding===i||!i(e)))throw new Error("Unknown encoding: "+e);return t||e}(e),this.encoding){case"utf16le":this.text=c,this.end=u,t=4;break;case"utf8":this.fillLast=a,t=4;break;case"base64":this.text=l,this.end=d,t=3;break;default:return this.write=f,void(this.end=h)}this.lastNeed=0,this.lastTotal=0,this.lastChar=n.allocUnsafe(t)}function o(e){return e<=127?0:e>>5==6?2:e>>4==14?3:e>>3==30?4:-1}function a(e){var t=this.lastTotal-this.lastNeed,r=function(e,t,r){if(128!=(192&t[0]))return e.lastNeed=0,"�".repeat(r);if(e.lastNeed>1&&t.length>1){if(128!=(192&t[1]))return e.lastNeed=1,"�".repeat(r+1);if(e.lastNeed>2&&t.length>2&&128!=(192&t[2]))return e.lastNeed=2,"�".repeat(r+2)}}(this,e,t);return r!==undefined?r:this.lastNeed<=e.length?(e.copy(this.lastChar,t,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):(e.copy(this.lastChar,t,0,e.length),void(this.lastNeed-=e.length))}function c(e,t){if((e.length-t)%2==0){var r=e.toString("utf16le",t);if(r){var n=r.charCodeAt(r.length-1);if(n>=55296&&n<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=e[e.length-2],this.lastChar[1]=e[e.length-1],r.slice(0,-1)}return r}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=e[e.length-1],e.toString("utf16le",t,e.length-1)}function u(e){var t=e&&e.length?this.write(e):"";if(this.lastNeed){var r=this.lastTotal-this.lastNeed;return t+this.lastChar.toString("utf16le",0,r)}return t}function l(e,t){var r=(e.length-t)%3;return 0===r?e.toString("base64",t):(this.lastNeed=3-r,this.lastTotal=3,1===r?this.lastChar[0]=e[e.length-1]:(this.lastChar[0]=e[e.length-2],this.lastChar[1]=e[e.length-1]),e.toString("base64",t,e.length-r))}function d(e){var t=e&&e.length?this.write(e):"";return this.lastNeed?t+this.lastChar.toString("base64",0,3-this.lastNeed):t}function f(e){return e.toString(this.encoding)}function h(e){return e&&e.length?this.write(e):""}r.StringDecoder=s,s.prototype.write=function(e){if(0===e.length)return"";var t,r;if(this.lastNeed){if((t=this.fillLast(e))===undefined)return"";r=this.lastNeed,this.lastNeed=0}else r=0;return r<e.length?t?t+this.text(e,r):this.text(e,r):t||""},s.prototype.end=function(e){var t=e&&e.length?this.write(e):"";return this.lastNeed?t+"�".repeat(this.lastTotal-this.lastNeed):t},s.prototype.text=function(e,t){var r=function(e,t,r){var n=t.length-1;if(n<r)return 0;var i=o(t[n]);if(i>=0)return i>0&&(e.lastNeed=i-1),i;if(--n<r)return 0;if((i=o(t[n]))>=0)return i>0&&(e.lastNeed=i-2),i;if(--n<r)return 0;if((i=o(t[n]))>=0)return i>0&&(2===i?i=0:e.lastNeed=i-3),i;return 0}(this,e,t);if(!this.lastNeed)return e.toString("utf8",t);this.lastTotal=r;var n=e.length-(r-this.lastNeed);return e.copy(this.lastChar,0,n),e.toString("utf8",t,n)},s.prototype.fillLast=function(e){if(this.lastNeed<=e.length)return e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,e.length),this.lastNeed-=e.length}}}},{package:"string_decoder",file:"/home/circleci/project/node_modules/@metamask/post-message-stream/node_modules/string_decoder/lib/string_decoder.js"}],[2300,{prr:5315},function(){with(this)return function(){"use strict";return function(e,t,r){var n=e("prr");function i(e,t,r){t&&"string"!=typeof t&&(t=t.message||t.name),n(this,{type:e,name:e,cause:"string"!=typeof t?t:r,message:t},"ewr")}function s(e,t){Error.call(this),Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor),i.call(this,"CustomError",e,t)}s.prototype=new Error,t.exports=function(e){var t=function(t,r){return function(e,t,r){var n=function(r,s){i.call(this,t,r,s),"FilesystemError"==t&&(this.code=this.cause.code,this.path=this.cause.path,this.errno=this.cause.errno,this.message=(e.errno[this.cause.errno]?e.errno[this.cause.errno].description:this.cause.message)+(this.cause.path?" ["+this.cause.path+"]":"")),Error.call(this),Error.captureStackTrace&&Error.captureStackTrace(this,n)};return n.prototype=r?new r:new s,n}(e,t,r)};return{CustomError:s,FilesystemError:t("FilesystemError"),createError:t}}}}},{package:"errno",file:"/home/circleci/project/node_modules/errno/custom.js"}],[4719,{"../../../errors":4710},function(){with(this)return function(){"use strict";return function(e,t,r){var n=e("../../../errors").codes.ERR_STREAM_PREMATURE_CLOSE;function i(){}t.exports=function e(t,r,s){if("function"==typeof r)return e(t,null,r);r||(r={}),s=function(e){var t=!1;return function(){if(!t){t=!0;for(var r=arguments.length,n=new Array(r),i=0;i<r;i++)n[i]=arguments[i];e.apply(this,n)}}}(s||i);var o=r.readable||!1!==r.readable&&t.readable,a=r.writable||!1!==r.writable&&t.writable,c=function(){t.writable||l()},u=t._writableState&&t._writableState.finished,l=function(){a=!1,u=!0,o||s.call(t)},d=t._readableState&&t._readableState.endEmitted,f=function(){o=!1,d=!0,a||s.call(t)},h=function(e){s.call(t,e)},p=function(){var e;return o&&!d?(t._readableState&&t._readableState.ended||(e=new n),s.call(t,e)):a&&!u?(t._writableState&&t._writableState.ended||(e=new n),s.call(t,e)):void 0},m=function(){t.req.on("finish",l)};return!function(e){return e.setHeader&&"function"==typeof e.abort}(t)?a&&!t._writableState&&(t.on("end",c),t.on("close",c)):(t.on("complete",l),t.on("abort",p),t.req?m():t.on("request",m)),t.on("end",f),t.on("finish",l),!1!==r.error&&t.on("error",h),t.on("close",p),function(){t.removeListener("complete",l),t.removeListener("abort",p),t.removeListener("request",m),t.req&&t.req.removeListener("finish",l),t.removeListener("end",c),t.removeListener("close",c),t.removeListener("finish",l),t.removeListener("end",f),t.removeListener("error",h),t.removeListener("close",p)}}}}},{package:"readable-stream",file:"/home/circleci/project/node_modules/level-iterator-stream/node_modules/readable-stream/lib/internal/streams/end-of-stream.js"}],[4721,{"../../../errors":4710,"./end-of-stream":4719},function(){with(this)return function(){"use strict";return function(e,t,r){var n;var i=e("../../../errors").codes,s=i.ERR_MISSING_ARGS,o=i.ERR_STREAM_DESTROYED;function a(e){if(e)throw e}function c(t,r,i,s){s=function(e){var t=!1;return function(){t||(t=!0,e.apply(void 0,arguments))}}(s);var a=!1;t.on("close",(function(){a=!0})),n===undefined&&(n=e("./end-of-stream")),n(t,{readable:r,writable:i},(function(e){if(e)return s(e);a=!0,s()}));var c=!1;return function(e){if(!a&&!c)return c=!0,function(e){return e.setHeader&&"function"==typeof e.abort}(t)?t.abort():"function"==typeof t.destroy?t.destroy():void s(e||new o("pipe"))}}function u(e){e()}function l(e,t){return e.pipe(t)}function d(e){return e.length?"function"!=typeof e[e.length-1]?a:e.pop():a}t.exports=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];var n,i=d(t);if(Array.isArray(t[0])&&(t=t[0]),t.length<2)throw new s("streams");var o=t.map((function(e,r){var s=r<t.length-1;return c(e,s,r>0,(function(e){n||(n=e),e&&o.forEach(u),s||(o.forEach(u),i(n))}))}));return t.reduce(l)}}}},{package:"readable-stream",file:"/home/circleci/project/node_modules/level-iterator-stream/node_modules/readable-stream/lib/internal/streams/pipeline.js"}],[4715,{"../errors":4710,"./_stream_duplex":4711,"./internal/streams/destroy":4718,"./internal/streams/state":4722,"./internal/streams/stream":4723,_process:5294,buffer:2028,inherits:4329,"util-deprecate":5845},function(){with(this)return function(){"use strict";return function(e,t,r){(function(r){(function(){function n(e){var t=this;this.next=null,this.entry=null,this.finish=function(){!function(e,t,r){var n=e.entry;e.entry=null;for(;n;){var i=n.callback;t.pendingcb--,i(r),n=n.next}t.corkedRequestsFree.next=e}(t,e)}}var i;t.exports=C,C.WritableState=S;var s={deprecate:e("util-deprecate")},o=e("./internal/streams/stream"),a=e("buffer").Buffer,c=global.Uint8Array||function(){};var u,l=e("./internal/streams/destroy"),d=e("./internal/streams/state").getHighWaterMark,f=e("../errors").codes,h=f.ERR_INVALID_ARG_TYPE,p=f.ERR_METHOD_NOT_IMPLEMENTED,m=f.ERR_MULTIPLE_CALLBACK,g=f.ERR_STREAM_CANNOT_PIPE,y=f.ERR_STREAM_DESTROYED,b=f.ERR_STREAM_NULL_VALUES,_=f.ERR_STREAM_WRITE_AFTER_END,w=f.ERR_UNKNOWN_ENCODING,v=l.errorOrDestroy;function E(){}function S(t,s,o){i=i||e("./_stream_duplex"),t=t||{},"boolean"!=typeof o&&(o=s instanceof i),this.objectMode=!!t.objectMode,o&&(this.objectMode=this.objectMode||!!t.writableObjectMode),this.highWaterMark=d(this,t,"writableHighWaterMark",o),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var a=!1===t.decodeStrings;this.decodeStrings=!a,this.defaultEncoding=t.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(e){!function(e,t){var n=e._writableState,i=n.sync,s=n.writecb;if("function"!=typeof s)throw new m;if(function(e){e.writing=!1,e.writecb=null,e.length-=e.writelen,e.writelen=0}(n),t)!function(e,t,n,i,s){--t.pendingcb,n?(r.nextTick(s,i),r.nextTick(j,e,t),e._writableState.errorEmitted=!0,v(e,i)):(s(i),e._writableState.errorEmitted=!0,v(e,i),j(e,t))}(e,n,i,t,s);else{var o=A(n)||e.destroyed;o||n.corked||n.bufferProcessing||!n.bufferedRequest||T(e,n),i?r.nextTick(I,e,n,o,s):I(e,n,o,s)}}(s,e)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=!1!==t.emitClose,this.autoDestroy=!!t.autoDestroy,this.bufferedRequestCount=0,this.corkedRequestsFree=new n(this)}function C(t){var r=this instanceof(i=i||e("./_stream_duplex"));if(!r&&!u.call(C,this))return new C(t);this._writableState=new S(t,this,r),this.writable=!0,t&&("function"==typeof t.write&&(this._write=t.write),"function"==typeof t.writev&&(this._writev=t.writev),"function"==typeof t.destroy&&(this._destroy=t.destroy),"function"==typeof t.final&&(this._final=t.final)),o.call(this)}function k(e,t,r,n,i,s,o){t.writelen=n,t.writecb=o,t.writing=!0,t.sync=!0,t.destroyed?t.onwrite(new y("write")):r?e._writev(i,t.onwrite):e._write(i,s,t.onwrite),t.sync=!1}function I(e,t,r,n){r||function(e,t){0===t.length&&t.needDrain&&(t.needDrain=!1,e.emit("drain"))}(e,t),t.pendingcb--,n(),j(e,t)}function T(e,t){t.bufferProcessing=!0;var r=t.bufferedRequest;if(e._writev&&r&&r.next){var i=t.bufferedRequestCount,s=new Array(i),o=t.corkedRequestsFree;o.entry=r;for(var a=0,c=!0;r;)s[a]=r,r.isBuf||(c=!1),r=r.next,a+=1;s.allBuffers=c,k(e,t,!0,t.length,s,"",o.finish),t.pendingcb++,t.lastBufferedRequest=null,o.next?(t.corkedRequestsFree=o.next,o.next=null):t.corkedRequestsFree=new n(t),t.bufferedRequestCount=0}else{for(;r;){var u=r.chunk,l=r.encoding,d=r.callback;if(k(e,t,!1,t.objectMode?1:u.length,u,l,d),r=r.next,t.bufferedRequestCount--,t.writing)break}null===r&&(t.lastBufferedRequest=null)}t.bufferedRequest=r,t.bufferProcessing=!1}function A(e){return e.ending&&0===e.length&&null===e.bufferedRequest&&!e.finished&&!e.writing}function R(e,t){e._final((function(r){t.pendingcb--,r&&v(e,r),t.prefinished=!0,e.emit("prefinish"),j(e,t)}))}function j(e,t){var n=A(t);if(n&&(function(e,t){t.prefinished||t.finalCalled||("function"!=typeof e._final||t.destroyed?(t.prefinished=!0,e.emit("prefinish")):(t.pendingcb++,t.finalCalled=!0,r.nextTick(R,e,t)))}(e,t),0===t.pendingcb&&(t.finished=!0,e.emit("finish"),t.autoDestroy))){var i=e._readableState;(!i||i.autoDestroy&&i.endEmitted)&&e.destroy()}return n}e("inherits")(C,o),S.prototype.getBuffer=function(){for(var e=this.bufferedRequest,t=[];e;)t.push(e),e=e.next;return t},function(){try{Object.defineProperty(S.prototype,"buffer",{get:s.deprecate((function(){return this.getBuffer()}),"_writableState.buffer is deprecated. Use _writableState.getBuffer "+"instead.","DEP0003")})}catch(e){}}(),"function"==typeof Symbol&&Symbol.hasInstance&&"function"==typeof Function.prototype[Symbol.hasInstance]?(u=Function.prototype[Symbol.hasInstance],Object.defineProperty(C,Symbol.hasInstance,{value:function(e){return!!u.call(this,e)||this===C&&(e&&e._writableState instanceof S)}})):u=function(e){return e instanceof this},C.prototype.pipe=function(){v(this,new g)},C.prototype.write=function(e,t,n){var i,s=this._writableState,o=!1,u=!s.objectMode&&(i=e,a.isBuffer(i)||i instanceof c);return u&&!a.isBuffer(e)&&(e=function(e){return a.from(e)}(e)),"function"==typeof t&&(n=t,t=null),u?t="buffer":t||(t=s.defaultEncoding),"function"!=typeof n&&(n=E),s.ending?function(e,t){var n=new _;v(e,n),r.nextTick(t,n)}(this,n):(u||function(e,t,n,i){var s;return null===n?s=new b:"string"==typeof n||t.objectMode||(s=new h("chunk",["string","Buffer"],n)),!s||(v(e,s),r.nextTick(i,s),!1)}(this,s,e,n))&&(s.pendingcb++,o=function(e,t,r,n,i,s){if(!r){var o=function(e,t,r){e.objectMode||!1===e.decodeStrings||"string"!=typeof t||(t=a.from(t,r));return t}(t,n,i);n!==o&&(r=!0,i="buffer",n=o)}var c=t.objectMode?1:n.length;t.length+=c;var u=t.length<t.highWaterMark;u||(t.needDrain=!0);if(t.writing||t.corked){var l=t.lastBufferedRequest;t.lastBufferedRequest={chunk:n,encoding:i,isBuf:r,callback:s,next:null},l?l.next=t.lastBufferedRequest:t.bufferedRequest=t.lastBufferedRequest,t.bufferedRequestCount+=1}else k(e,t,!1,c,n,i,s);return u}(this,s,u,e,t,n)),o},C.prototype.cork=function(){this._writableState.corked++},C.prototype.uncork=function(){var e=this._writableState;e.corked&&(e.corked--,e.writing||e.corked||e.bufferProcessing||!e.bufferedRequest||T(this,e))},C.prototype.setDefaultEncoding=function(e){if("string"==typeof e&&(e=e.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((e+"").toLowerCase())>-1))throw new w(e);return this._writableState.defaultEncoding=e,this},Object.defineProperty(C.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(C.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),C.prototype._write=function(e,t,r){r(new p("_write()"))},C.prototype._writev=null,C.prototype.end=function(e,t,n){var i=this._writableState;return"function"==typeof e?(n=e,e=null,t=null):"function"==typeof t&&(n=t,t=null),null!==e&&e!==undefined&&this.write(e,t),i.corked&&(i.corked=1,this.uncork()),i.ending||function(e,t,n){t.ending=!0,j(e,t),n&&(t.finished?r.nextTick(n):e.once("finish",n));t.ended=!0,e.writable=!1}(this,i,n),this},Object.defineProperty(C.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(C.prototype,"destroyed",{enumerable:!1,get:function(){return this._writableState!==undefined&&this._writableState.destroyed},set:function(e){this._writableState&&(this._writableState.destroyed=e)}}),C.prototype.destroy=l.destroy,C.prototype._undestroy=l.undestroy,C.prototype._destroy=function(e,t){t(e)}}).call(this)}).call(this,e("_process"))}}},{package:"readable-stream",file:"/home/circleci/project/node_modules/level-iterator-stream/node_modules/readable-stream/lib/_stream_writable.js"}],[4711,{"./_stream_readable":4713,"./_stream_writable":4715,_process:5294,inherits:4329},function(){with(this)return function(){"use strict";return function(e,t,r){(function(r){(function(){var n=Object.keys||function(e){var t=[];for(var r in e)t.push(r);return t};t.exports=u;var i=e("./_stream_readable"),s=e("./_stream_writable");e("inherits")(u,i);for(var o=n(s.prototype),a=0;a<o.length;a++){var c=o[a];u.prototype[c]||(u.prototype[c]=s.prototype[c])}function u(e){if(!(this instanceof u))return new u(e);i.call(this,e),s.call(this,e),this.allowHalfOpen=!0,e&&(!1===e.readable&&(this.readable=!1),!1===e.writable&&(this.writable=!1),!1===e.allowHalfOpen&&(this.allowHalfOpen=!1,this.once("end",l)))}function l(){this._writableState.ended||r.nextTick(d,this)}function d(e){e.end()}Object.defineProperty(u.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(u.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(u.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(u.prototype,"destroyed",{enumerable:!1,get:function(){return this._readableState!==undefined&&this._writableState!==undefined&&(this._readableState.destroyed&&this._writableState.destroyed)},set:function(e){this._readableState!==undefined&&this._writableState!==undefined&&(this._readableState.destroyed=e,this._writableState.destroyed=e)}})}).call(this)}).call(this,e("_process"))}}},{package:"readable-stream",file:"/home/circleci/project/node_modules/level-iterator-stream/node_modules/readable-stream/lib/_stream_duplex.js"}],[4714,{"../errors":4710,"./_stream_duplex":4711,inherits:4329},function(){with(this)return function(){"use strict";return function(e,t,r){t.exports=l;var n=e("../errors").codes,i=n.ERR_METHOD_NOT_IMPLEMENTED,s=n.ERR_MULTIPLE_CALLBACK,o=n.ERR_TRANSFORM_ALREADY_TRANSFORMING,a=n.ERR_TRANSFORM_WITH_LENGTH_0,c=e("./_stream_duplex");function u(e,t){var r=this._transformState;r.transforming=!1;var n=r.writecb;if(null===n)return this.emit("error",new s);r.writechunk=null,r.writecb=null,null!=t&&this.push(t),n(e);var i=this._readableState;i.reading=!1,(i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}function l(e){if(!(this instanceof l))return new l(e);c.call(this,e),this._transformState={afterTransform:u.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,e&&("function"==typeof e.transform&&(this._transform=e.transform),"function"==typeof e.flush&&(this._flush=e.flush)),this.on("prefinish",d)}function d(){var e=this;"function"!=typeof this._flush||this._readableState.destroyed?f(this,null,null):this._flush((function(t,r){f(e,t,r)}))}function f(e,t,r){if(t)return e.emit("error",t);if(null!=r&&e.push(r),e._writableState.length)throw new a;if(e._transformState.transforming)throw new o;return e.push(null)}e("inherits")(l,c),l.prototype.push=function(e,t){return this._transformState.needTransform=!1,c.prototype.push.call(this,e,t)},l.prototype._transform=function(e,t,r){r(new i("_transform()"))},l.prototype._write=function(e,t,r){var n=this._transformState;if(n.writecb=r,n.writechunk=e,n.writeencoding=t,!n.transforming){var i=this._readableState;(n.needTransform||i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}},l.prototype._read=function(e){var t=this._transformState;null===t.writechunk||t.transforming?t.needTransform=!0:(t.transforming=!0,this._transform(t.writechunk,t.writeencoding,t.afterTransform))},l.prototype._destroy=function(e,t){c.prototype._destroy.call(this,e,(function(e){t(e)}))}}}},{package:"readable-stream",file:"/home/circleci/project/node_modules/level-iterator-stream/node_modules/readable-stream/lib/_stream_transform.js"}],[4712,{"./_stream_transform":4714,inherits:4329},function(){with(this)return function(){"use strict";return function(e,t,r){t.exports=i;var n=e("./_stream_transform");function i(e){if(!(this instanceof i))return new i(e);n.call(this,e)}e("inherits")(i,n),i.prototype._transform=function(e,t,r){r(null,e)}}}},{package:"readable-stream",file:"/home/circleci/project/node_modules/level-iterator-stream/node_modules/readable-stream/lib/_stream_passthrough.js"}],[4713,{"../errors":4710,"./_stream_duplex":4711,"./internal/streams/async_iterator":4716,"./internal/streams/buffer_list":4717,"./internal/streams/destroy":4718,"./internal/streams/from":4720,"./internal/streams/state":4722,"./internal/streams/stream":4723,_process:5294,buffer:2028,events:2029,inherits:4329,"string_decoder/":5755,util:2027},function(){with(this)return function(){"use strict";return function(e,t,r){(function(r){(function(){var n;t.exports=C,C.ReadableState=S;e("events").EventEmitter;var i=function(e,t){return e.listeners(t).length},s=e("./internal/streams/stream"),o=e("buffer").Buffer,a=global.Uint8Array||function(){};var c,u=e("util");c=u&&u.debuglog?u.debuglog("stream"):function(){};var l,d,f,h=e("./internal/streams/buffer_list"),p=e("./internal/streams/destroy"),m=e("./internal/streams/state").getHighWaterMark,g=e("../errors").codes,y=g.ERR_INVALID_ARG_TYPE,b=g.ERR_STREAM_PUSH_AFTER_EOF,_=g.ERR_METHOD_NOT_IMPLEMENTED,w=g.ERR_STREAM_UNSHIFT_AFTER_END_EVENT;e("inherits")(C,s);var v=p.errorOrDestroy,E=["error","close","destroy","pause","resume"];function S(t,r,i){n=n||e("./_stream_duplex"),t=t||{},"boolean"!=typeof i&&(i=r instanceof n),this.objectMode=!!t.objectMode,i&&(this.objectMode=this.objectMode||!!t.readableObjectMode),this.highWaterMark=m(this,t,"readableHighWaterMark",i),this.buffer=new h,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.paused=!0,this.emitClose=!1!==t.emitClose,this.autoDestroy=!!t.autoDestroy,this.destroyed=!1,this.defaultEncoding=t.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,t.encoding&&(l||(l=e("string_decoder/").StringDecoder),this.decoder=new l(t.encoding),this.encoding=t.encoding)}function C(t){if(n=n||e("./_stream_duplex"),!(this instanceof C))return new C(t);var r=this instanceof n;this._readableState=new S(t,this,r),this.readable=!0,t&&("function"==typeof t.read&&(this._read=t.read),"function"==typeof t.destroy&&(this._destroy=t.destroy)),s.call(this)}function k(e,t,r,n,i){c("readableAddChunk",t);var s,u=e._readableState;if(null===t)u.reading=!1,function(e,t){if(c("onEofChunk"),t.ended)return;if(t.decoder){var r=t.decoder.end();r&&r.length&&(t.buffer.push(r),t.length+=t.objectMode?1:r.length)}t.ended=!0,t.sync?R(e):(t.needReadable=!1,t.emittedReadable||(t.emittedReadable=!0,j(e)))}(e,u);else if(i||(s=function(e,t){var r;n=t,o.isBuffer(n)||n instanceof a||"string"==typeof t||t===undefined||e.objectMode||(r=new y("chunk",["string","Buffer","Uint8Array"],t));var n;return r}(u,t)),s)v(e,s);else if(u.objectMode||t&&t.length>0)if("string"==typeof t||u.objectMode||Object.getPrototypeOf(t)===o.prototype||(t=function(e){return o.from(e)}(t)),n)u.endEmitted?v(e,new w):I(e,u,t,!0);else if(u.ended)v(e,new b);else{if(u.destroyed)return!1;u.reading=!1,u.decoder&&!r?(t=u.decoder.write(t),u.objectMode||0!==t.length?I(e,u,t,!1):x(e,u)):I(e,u,t,!1)}else n||(u.reading=!1,x(e,u));return!u.ended&&(u.length<u.highWaterMark||0===u.length)}function I(e,t,r,n){t.flowing&&0===t.length&&!t.sync?(t.awaitDrain=0,e.emit("data",r)):(t.length+=t.objectMode?1:r.length,n?t.buffer.unshift(r):t.buffer.push(r),t.needReadable&&R(e)),x(e,t)}Object.defineProperty(C.prototype,"destroyed",{enumerable:!1,get:function(){return this._readableState!==undefined&&this._readableState.destroyed},set:function(e){this._readableState&&(this._readableState.destroyed=e)}}),C.prototype.destroy=p.destroy,C.prototype._undestroy=p.undestroy,C.prototype._destroy=function(e,t){t(e)},C.prototype.push=function(e,t){var r,n=this._readableState;return n.objectMode?r=!0:"string"==typeof e&&((t=t||n.defaultEncoding)!==n.encoding&&(e=o.from(e,t),t=""),r=!0),k(this,e,t,!1,r)},C.prototype.unshift=function(e){return k(this,e,null,!0,!1)},C.prototype.isPaused=function(){return!1===this._readableState.flowing},C.prototype.setEncoding=function(t){l||(l=e("string_decoder/").StringDecoder);var r=new l(t);this._readableState.decoder=r,this._readableState.encoding=this._readableState.decoder.encoding;for(var n=this._readableState.buffer.head,i="";null!==n;)i+=r.write(n.data),n=n.next;return this._readableState.buffer.clear(),""!==i&&this._readableState.buffer.push(i),this._readableState.length=i.length,this};var T=1073741824;function A(e,t){return e<=0||0===t.length&&t.ended?0:t.objectMode?1:e!=e?t.flowing&&t.length?t.buffer.head.data.length:t.length:(e>t.highWaterMark&&(t.highWaterMark=function(e){return e>=T?e=T:(e--,e|=e>>>1,e|=e>>>2,e|=e>>>4,e|=e>>>8,e|=e>>>16,e++),e}(e)),e<=t.length?e:t.ended?t.length:(t.needReadable=!0,0))}function R(e){var t=e._readableState;c("emitReadable",t.needReadable,t.emittedReadable),t.needReadable=!1,t.emittedReadable||(c("emitReadable",t.flowing),t.emittedReadable=!0,r.nextTick(j,e))}function j(e){var t=e._readableState;c("emitReadable_",t.destroyed,t.length,t.ended),t.destroyed||!t.length&&!t.ended||(e.emit("readable"),t.emittedReadable=!1),t.needReadable=!t.flowing&&!t.ended&&t.length<=t.highWaterMark,D(e)}function x(e,t){t.readingMore||(t.readingMore=!0,r.nextTick(N,e,t))}function N(e,t){for(;!t.reading&&!t.ended&&(t.length<t.highWaterMark||t.flowing&&0===t.length);){var r=t.length;if(c("maybeReadMore read 0"),e.read(0),r===t.length)break}t.readingMore=!1}function P(e){var t=e._readableState;t.readableListening=e.listenerCount("readable")>0,t.resumeScheduled&&!t.paused?t.flowing=!0:e.listenerCount("data")>0&&e.resume()}function L(e){c("readable nexttick read 0"),e.read(0)}function O(e,t){c("resume",t.reading),t.reading||e.read(0),t.resumeScheduled=!1,e.emit("resume"),D(e),t.flowing&&!t.reading&&e.read(0)}function D(e){var t=e._readableState;for(c("flow",t.flowing);t.flowing&&null!==e.read(););}function B(e,t){return 0===t.length?null:(t.objectMode?r=t.buffer.shift():!e||e>=t.length?(r=t.decoder?t.buffer.join(""):1===t.buffer.length?t.buffer.first():t.buffer.concat(t.length),t.buffer.clear()):r=t.buffer.consume(e,t.decoder),r);var r}function M(e){var t=e._readableState;c("endReadable",t.endEmitted),t.endEmitted||(t.ended=!0,r.nextTick(U,t,e))}function U(e,t){if(c("endReadableNT",e.endEmitted,e.length),!e.endEmitted&&0===e.length&&(e.endEmitted=!0,t.readable=!1,t.emit("end"),e.autoDestroy)){var r=t._writableState;(!r||r.autoDestroy&&r.finished)&&t.destroy()}}function F(e,t){for(var r=0,n=e.length;r<n;r++)if(e[r]===t)return r;return-1}C.prototype.read=function(e){c("read",e),e=parseInt(e,10);var t=this._readableState,r=e;if(0!==e&&(t.emittedReadable=!1),0===e&&t.needReadable&&((0!==t.highWaterMark?t.length>=t.highWaterMark:t.length>0)||t.ended))return c("read: emitReadable",t.length,t.ended),0===t.length&&t.ended?M(this):R(this),null;if(0===(e=A(e,t))&&t.ended)return 0===t.length&&M(this),null;var n,i=t.needReadable;return c("need readable",i),(0===t.length||t.length-e<t.highWaterMark)&&c("length less than watermark",i=!0),t.ended||t.reading?c("reading or ended",i=!1):i&&(c("do read"),t.reading=!0,t.sync=!0,0===t.length&&(t.needReadable=!0),this._read(t.highWaterMark),t.sync=!1,t.reading||(e=A(r,t))),null===(n=e>0?B(e,t):null)?(t.needReadable=t.length<=t.highWaterMark,e=0):(t.length-=e,t.awaitDrain=0),0===t.length&&(t.ended||(t.needReadable=!0),r!==e&&t.ended&&M(this)),null!==n&&this.emit("data",n),n},C.prototype._read=function(e){v(this,new _("_read()"))},C.prototype.pipe=function(e,t){var n=this,s=this._readableState;switch(s.pipesCount){case 0:s.pipes=e;break;case 1:s.pipes=[s.pipes,e];break;default:s.pipes.push(e)}s.pipesCount+=1,c("pipe count=%d opts=%j",s.pipesCount,t);var o=(!t||!1!==t.end)&&e!==r.stdout&&e!==r.stderr?u:g;function a(t,r){c("onunpipe"),t===n&&r&&!1===r.hasUnpiped&&(r.hasUnpiped=!0,c("cleanup"),e.removeListener("close",p),e.removeListener("finish",m),e.removeListener("drain",l),e.removeListener("error",h),e.removeListener("unpipe",a),n.removeListener("end",u),n.removeListener("end",g),n.removeListener("data",f),d=!0,!s.awaitDrain||e._writableState&&!e._writableState.needDrain||l())}function u(){c("onend"),e.end()}s.endEmitted?r.nextTick(o):n.once("end",o),e.on("unpipe",a);var l=function(e){return function(){var t=e._readableState;c("pipeOnDrain",t.awaitDrain),t.awaitDrain&&t.awaitDrain--,0===t.awaitDrain&&i(e,"data")&&(t.flowing=!0,D(e))}}(n);e.on("drain",l);var d=!1;function f(t){c("ondata");var r=e.write(t);c("dest.write",r),!1===r&&((1===s.pipesCount&&s.pipes===e||s.pipesCount>1&&-1!==F(s.pipes,e))&&!d&&(c("false write response, pause",s.awaitDrain),s.awaitDrain++),n.pause())}function h(t){c("onerror",t),g(),e.removeListener("error",h),0===i(e,"error")&&v(e,t)}function p(){e.removeListener("finish",m),g()}function m(){c("onfinish"),e.removeListener("close",p),g()}function g(){c("unpipe"),n.unpipe(e)}return n.on("data",f),function(e,t,r){if("function"==typeof e.prependListener)return e.prependListener(t,r);e._events&&e._events[t]?Array.isArray(e._events[t])?e._events[t].unshift(r):e._events[t]=[r,e._events[t]]:e.on(t,r)}(e,"error",h),e.once("close",p),e.once("finish",m),e.emit("pipe",n),s.flowing||(c("pipe resume"),n.resume()),e},C.prototype.unpipe=function(e){var t=this._readableState,r={hasUnpiped:!1};if(0===t.pipesCount)return this;if(1===t.pipesCount)return e&&e!==t.pipes||(e||(e=t.pipes),t.pipes=null,t.pipesCount=0,t.flowing=!1,e&&e.emit("unpipe",this,r)),this;if(!e){var n=t.pipes,i=t.pipesCount;t.pipes=null,t.pipesCount=0,t.flowing=!1;for(var s=0;s<i;s++)n[s].emit("unpipe",this,{hasUnpiped:!1});return this}var o=F(t.pipes,e);return-1===o||(t.pipes.splice(o,1),t.pipesCount-=1,1===t.pipesCount&&(t.pipes=t.pipes[0]),e.emit("unpipe",this,r)),this},C.prototype.on=function(e,t){var n=s.prototype.on.call(this,e,t),i=this._readableState;return"data"===e?(i.readableListening=this.listenerCount("readable")>0,!1!==i.flowing&&this.resume()):"readable"===e&&(i.endEmitted||i.readableListening||(i.readableListening=i.needReadable=!0,i.flowing=!1,i.emittedReadable=!1,c("on readable",i.length,i.reading),i.length?R(this):i.reading||r.nextTick(L,this))),n},C.prototype.addListener=C.prototype.on,C.prototype.removeListener=function(e,t){var n=s.prototype.removeListener.call(this,e,t);return"readable"===e&&r.nextTick(P,this),n},C.prototype.removeAllListeners=function(e){var t=s.prototype.removeAllListeners.apply(this,arguments);return"readable"!==e&&e!==undefined||r.nextTick(P,this),t},C.prototype.resume=function(){var e=this._readableState;return e.flowing||(c("resume"),e.flowing=!e.readableListening,function(e,t){t.resumeScheduled||(t.resumeScheduled=!0,r.nextTick(O,e,t))}(this,e)),e.paused=!1,this},C.prototype.pause=function(){return c("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(c("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState.paused=!0,this},C.prototype.wrap=function(e){var t=this,r=this._readableState,n=!1;for(var i in e.on("end",(function(){if(c("wrapped end"),r.decoder&&!r.ended){var e=r.decoder.end();e&&e.length&&t.push(e)}t.push(null)})),e.on("data",(function(i){(c("wrapped data"),r.decoder&&(i=r.decoder.write(i)),!r.objectMode||null!==i&&i!==undefined)&&((r.objectMode||i&&i.length)&&(t.push(i)||(n=!0,e.pause())))})),e)this[i]===undefined&&"function"==typeof e[i]&&(this[i]=function(t){return function(){return e[t].apply(e,arguments)}}(i));for(var s=0;s<E.length;s++)e.on(E[s],this.emit.bind(this,E[s]));return this._read=function(t){c("wrapped _read",t),n&&(n=!1,e.resume())},this},"function"==typeof Symbol&&(C.prototype[Symbol.asyncIterator]=function(){return d===undefined&&(d=e("./internal/streams/async_iterator")),d(this)}),Object.defineProperty(C.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),Object.defineProperty(C.prototype,"readableBuffer",{enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}}),Object.defineProperty(C.prototype,"readableFlowing",{enumerable:!1,get:function(){return this._readableState.flowing},set:function(e){this._readableState&&(this._readableState.flowing=e)}}),C._fromList=B,Object.defineProperty(C.prototype,"readableLength",{enumerable:!1,get:function(){return this._readableState.length}}),"function"==typeof Symbol&&(C.from=function(t,r){return f===undefined&&(f=e("./internal/streams/from")),f(C,t,r)})}).call(this)}).call(this,e("_process"))}}},{package:"readable-stream",file:"/home/circleci/project/node_modules/level-iterator-stream/node_modules/readable-stream/lib/_stream_readable.js"}],[1688,{},function(){with(this)return function(){"use strict";return function(e,t,r){function n(){this.head=this.tail=null,this.length=0}function i(e,t){e.length=1,e.head=e.tail=t}Object.defineProperty(r,"__esModule",{value:!0}),r.default=n,n.prototype.removeLink=function(e){return e.prev?e.prev.next=e.next:this.head=e.next,e.next?e.next.prev=e.prev:this.tail=e.prev,e.prev=e.next=null,this.length-=1,e},n.prototype.empty=function(){for(;this.head;)this.shift();return this},n.prototype.insertAfter=function(e,t){t.prev=e,t.next=e.next,e.next?e.next.prev=t:this.tail=t,e.next=t,this.length+=1},n.prototype.insertBefore=function(e,t){t.prev=e.prev,t.next=e,e.prev?e.prev.next=t:this.head=t,e.prev=t,this.length+=1},n.prototype.unshift=function(e){this.head?this.insertBefore(this.head,e):i(this,e)},n.prototype.push=function(e){this.tail?this.insertAfter(this.tail,e):i(this,e)},n.prototype.shift=function(){return this.head&&this.removeLink(this.head)},n.prototype.pop=function(){return this.tail&&this.removeLink(this.tail)},n.prototype.toArray=function(){for(var e=Array(this.length),t=this.head,r=0;r<this.length;r++)e[r]=t.data,t=t.next;return e},n.prototype.remove=function(e){for(var t=this.head;t;){var r=t.next;e(t)&&this.removeLink(t),t=r}return this},t.exports=r.default}}},{package:"async",file:"/home/circleci/project/node_modules/async/internal/DoublyLinkedList.js"}],[2180,{},function(){with(this)return function(){"use strict";return function(e,t,r){t.exports="This is a repository of IPLD objects. Each IPLD object is in a single file,\nnamed <base32 encoding of cid>.data. Where <base32 encoding of cid> is the\n\"base32\" encoding of the CID (as specified in\nhttps://github.com/multiformats/multibase) without the 'B' prefix.\nAll the object files are placed in a tree of directories, based on a\nfunction of the CID. This is a form of sharding similar to\nthe objects directory in git repositories. Previously, we used\nprefixes, we now use the next-to-last two charters.\n    func NextToLast(base32cid string) {\n      nextToLastLen := 2\n      offset := len(base32cid) - nextToLastLen - 1\n      return str[offset : offset+nextToLastLen]\n    }\nFor example, an object with a base58 CIDv1 of\n    zb2rhYSxw4ZjuzgCnWSt19Q94ERaeFhu9uSqRgjSdx9bsgM6f\nhas a base32 CIDv1 of\n    BAFKREIA22FLID5AJ2KU7URG47MDLROZIH6YF2KALU2PWEFPVI37YLKRSCA\nand will be placed at\n    SC/AFKREIA22FLID5AJ2KU7URG47MDLROZIH6YF2KALU2PWEFPVI37YLKRSCA.data\nwith 'SC' being the last-to-next two characters and the 'B' at the\nbeginning of the CIDv1 string is the multibase prefix that is not\nstored in the filename.\n"}}},{package:"datastore-core",file:"/home/circleci/project/node_modules/datastore-core/src/shard-readme.js"}],[5334,{},function(){with(this)return function(){"use strict";return function(e,t,r){t.exports=function(e){var t,r,n=!!e,i=(e||[]).map(o),s=0;function o(e){return{ready:!1,reading:!1,ended:!1,read:e,data:null}}function a(){if(r){!function(){var e=i.length;for(;e--;)i[e].ended&&i.splice(e,1)}();var e=i.length,o=r;if(0===e&&(t||n))return r=null,void o(t||!0);for(var a=0;a<e;a++){var c=i[(s+a)%e];if(c.ready&&!c.ended){var u=c.data;return c.ready=!1,c.data=null,s++,r=null,o(null,u)}}}}function c(){for(var e=i.length;e--;)!function(r){if(e>i.length)throw new Error("this should never happen");if(!(r.reading||r.ended||r.ready)){r.reading=!0;var n=!0;r.read(t,(function e(i,s){r.data=s,r.ready=!0,r.reading=!1,!0===i||t?r.ended=!0:i&&(t=r.ended=i),t&&!i&&r.read(t,e),n||a()})),n=!1}}(i[e]);a()}function u(e,n){t=t||e,r=n,c()}return u.add=function(e){if(!e)return n=!0,c();i.push(o(e)),c()},u.cap=function(e){u.add(null)},u}}}},{package:"pull-many",file:"/home/circleci/project/node_modules/pull-many/index.js"}],[1695,{"./wrapAsync":1710,"lodash/_arrayMap":4943,"lodash/_baseProperty":4962,"lodash/isArrayLike":5039,"lodash/noop":5053},function(){with(this)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=function(e,t,r,n){((0,i.default)(t)?u:l)(e,t,(0,a.default)(r),n||o.default)};var n=c(e("lodash/_arrayMap")),i=c(e("lodash/isArrayLike")),s=c(e("lodash/_baseProperty")),o=c(e("lodash/noop")),a=c(e("./wrapAsync"));function c(e){return e&&e.__esModule?e:{default:e}}function u(e,t,r,n){var i=new Array(t.length);e(t,(function(e,t,n){r(e,(function(e,r){i[t]=!!r,n(e)}))}),(function(e){if(e)return n(e);for(var r=[],s=0;s<t.length;s++)i[s]&&r.push(t[s]);n(null,r)}))}function l(e,t,r,i){var o=[];e(t,(function(e,t,n){r(e,(function(r,i){r?n(r):(i&&o.push({index:t,value:e}),n())}))}),(function(e){e?i(e):i(null,(0,n.default)(o.sort((function(e,t){return e.index-t.index})),(0,s.default)("value")))}))}t.exports=r.default}}},{package:"async",file:"/home/circleci/project/node_modules/async/internal/filter.js"}],[2190,{_process:5294,"abstract-leveldown":2187,buffer:2028,"idb-readable-stream":4313,ltgt:5065,stream:5734,util:2033,xtend:6007},function(){with(this)return function(){"use strict";return function(e,t,r){(function(r,n){(function(){var i=e("util"),s=e("abstract-leveldown").AbstractIterator,o=e("ltgt"),a=e("idb-readable-stream"),c=e("stream"),u=e("xtend"),l=c.Writable;function d(e,t){if(this._db=e._db,this._idbOpts=e._idbOpts,s.call(this,e),this._options=u({snapshot:!0},this._idbOpts,t),this._limit=this._options.limit,null!=this._limit&&-1!==this._limit||(this._limit=Infinity),"number"!=typeof this._limit)throw new TypeError("options.limit must be a number");0!==this._limit&&(this._count=0,this._startCursor(this._options))}t.exports=d,i.inherits(d,s),d.prototype._startCursor=function(e){e=u(this._options,e);var t=this,r=null,n=o.lowerBound(e),i=o.upperBound(e),s=o.lowerBoundExclusive(e),c=o.upperBoundExclusive(e),d=e.reverse?"prev":"next";if(n&&("binary"!==e.keyEncoding||Array.isArray(n)||(n=Array.prototype.slice.call(n))),i&&("binary"!==e.keyEncoding||Array.isArray(i)||(i=Array.prototype.slice.call(i))),n&&i)try{r=IDBKeyRange.bound(n,i,s,c)}catch(e){return void(this._keyRangeError=!0)}else n?r=IDBKeyRange.lowerBound(n,s):i&&(r=IDBKeyRange.upperBound(i,c));this._reader=a(this._db,this._idbOpts.storeName,u(e,{range:r,direction:d})),this._reader.on("error",(function(e){var r=t._callback;t._callback=!1,r?r(e):t._readNext=function(t){t(e)}})),this._reader.pipe(new l({objectMode:!0,write:function(e,r,n){if(t._count++>=t._limit)return t._reader.pause(),t._reader.unpipe(this),n(),void this.end();var i=t._callback;t._callback=!1,i?t._processItem(e,(function(e,t,r){n(e),i(e,t,r)})):t._readNext=function(r){t._processItem(e,(function(e,t,i){n(e),r(e,t,i)}))}}})).on("finish",(function(){var e=t._callback;t._callback=!1,e?e():t._readNext=function(e){e()}}))},d.prototype._processItem=function(e,t){if("function"!=typeof t)throw new TypeError("cb must be a function");var r=e.key,i=e.value;if(i instanceof Uint8Array&&(i=new n(i)),"binary"===this._options.keyEncoding&&Array.isArray(r)&&(r=new n(r)),"binary"!==this._options.valueEncoding||n.isBuffer(i)||(i=new n(i)),this._options.keyAsBuffer&&!n.isBuffer(r))if(null==r)r=new n(0);else if("string"==typeof r)r=new n(r);else if("boolean"==typeof r)r=new n(String(r));else if("number"==typeof r)r=new n(String(r));else if(Array.isArray(r))r=new n(String(r));else{if(!(r instanceof Uint8Array))throw new TypeError("can't coerce `"+r.constructor.name+"` into a Buffer");r=new n(r)}if(this._options.valueAsBuffer&&!n.isBuffer(i))if(null==i)i=new n(0);else if("string"==typeof i)i=new n(i);else if("boolean"==typeof i)i=new n(String(i));else if("number"==typeof i)i=new n(String(i));else if(Array.isArray(i))i=new n(String(i));else{if(!(i instanceof Uint8Array))throw new TypeError("can't coerce `"+i.constructor.name+"` into a Buffer");i=new n(i)}t(null,r,i)},d.prototype._next=function(e){if(this._callback)throw new Error("callback already exists");if(this._keyRangeError||0===this._limit)e();else{var t=this._readNext;this._readNext=!1,t?r.nextTick((function(){t(e)})):this._callback=e}}}).call(this)}).call(this,e("_process"),e("buffer").Buffer)}}},{package:"level-js",file:"/home/circleci/project/node_modules/datastore-level/node_modules/level-js/iterator.js"}],[2187,{"./abstract-chained-batch":2184,"./abstract-iterator":2185,"./abstract-leveldown":2186,"./is-leveldown":2188},function(){with(this)return function(){"use strict";return function(e,t,r){r.AbstractLevelDOWN=e("./abstract-leveldown"),r.AbstractIterator=e("./abstract-iterator"),r.AbstractChainedBatch=e("./abstract-chained-batch"),r.isLevelDOWN=e("./is-leveldown")}}},{package:"abstract-leveldown",file:"/home/circleci/project/node_modules/datastore-level/node_modules/abstract-leveldown/index.js"}],[4706,{"./lib/encodings":4707},function(){with(this)return function(){"use strict";return function(e,t,r){var n=e("./lib/encodings");function i(e){if(!(this instanceof i))return new i(e);this.opts=e||{},this.encodings=n}t.exports=i,i.prototype._encoding=function(e){return"string"==typeof e&&(e=n[e]),e||(e=n.id),e},i.prototype._keyEncoding=function(e,t){return this._encoding(t&&t.keyEncoding||e&&e.keyEncoding||this.opts.keyEncoding)},i.prototype._valueEncoding=function(e,t){return this._encoding(t&&(t.valueEncoding||t.encoding)||e&&(e.valueEncoding||e.encoding)||this.opts.valueEncoding||this.opts.encoding)},i.prototype.encodeKey=function(e,t,r){return this._keyEncoding(t,r).encode(e)},i.prototype.encodeValue=function(e,t,r){return this._valueEncoding(t,r).encode(e)},i.prototype.decodeKey=function(e,t){return this._keyEncoding(t).decode(e)},i.prototype.decodeValue=function(e,t){return this._valueEncoding(t).decode(e)},i.prototype.encodeBatch=function(e,t){var r=this;return e.map((function(e){var n={type:e.type,key:r.encodeKey(e.key,t,e)};return r.keyAsBuffer(t,e)&&(n.keyEncoding="binary"),e.prefix&&(n.prefix=e.prefix),"value"in e&&(n.value=r.encodeValue(e.value,t,e),r.valueAsBuffer(t,e)&&(n.valueEncoding="binary")),n}))};var s=["lt","gt","lte","gte","start","end"];i.prototype.encodeLtgt=function(e){var t=this,r={};return Object.keys(e).forEach((function(n){r[n]=s.indexOf(n)>-1?t.encodeKey(e[n],e):e[n]})),r},i.prototype.createStreamDecoder=function(e){var t=this;return e.keys&&e.values?function(r,n){return{key:t.decodeKey(r,e),value:t.decodeValue(n,e)}}:e.keys?function(r){return t.decodeKey(r,e)}:e.values?function(r,n){return t.decodeValue(n,e)}:function(){}},i.prototype.keyAsBuffer=function(e){return this._keyEncoding(e).buffer},i.prototype.valueAsBuffer=function(e){return this._valueEncoding(e).buffer}}}},{package:"level-codec",file:"/home/circleci/project/node_modules/level-codec/index.js"}],[2279,{"./abstract-chained-batch":2276,"./abstract-iterator":2277,"./abstract-leveldown":2278},function(){with(this)return function(){"use strict";return function(e,t,r){r.AbstractLevelDOWN=e("./abstract-leveldown"),r.AbstractIterator=e("./abstract-iterator"),r.AbstractChainedBatch=e("./abstract-chained-batch")}}},{package:"abstract-leveldown",file:"/home/circleci/project/node_modules/encoding-down/node_modules/abstract-leveldown/index.js"}],[4757,{_process:5294,buffer:2028},function(){with(this)return function(){"use strict";return function(e,t,r){(function(e,t){(function(){r.toCallback=t=>function(r,n){let i;try{i=t(r)}catch(t){return void e.nextTick(n,t)}e.nextTick(n,null,i)},r.toBuf=(e,r)=>n=>{let i=e(n,r);return t.from(i,"hex")},r.fromString=(e,r)=>n=>{const i=t.isBuffer(n)?n.toString():n;return e(i,r)},r.fromNumberTo32BitBuf=(e,r)=>n=>{let i=e(n,r);const s=new Array(4);for(let e=0;e<4;e++)s[e]=255&i,i>>=8;return t.from(s)}}).call(this)}).call(this,e("_process"),e("buffer").Buffer)}}},{package:"multihashing-async",file:"/home/circleci/project/node_modules/libp2p-crypto/node_modules/multihashing-async/src/utils.js"}],[4754,{buffer:2028,nodeify:5171},function(){with(this)return function(){"use strict";return function(e,t,r){(function(r){(function(){const n=e("nodeify"),i=function(){if(self.crypto)return self.crypto.subtle||self.crypto.webkitSubtle;if(self.msCrypto)return self.msCrypto.subtle}();function s(e){if(!i)throw new Error("Please use a browser with webcrypto support and ensure the code has been delivered securely via HTTPS/TLS and run within a Secure Context");return(t,s)=>{const o=i.digest({name:e},t);if("function"!=typeof o.then)return o.onerror=()=>{s(new Error(`hashing data using ${e}`))},void(o.oncomplete=e=>{s(null,e.target.result)});n(o.then((e=>r.from(new Uint8Array(e)))),s)}}t.exports={sha1:function(e,t){s("SHA-1")(e,t)},sha2256:function(e,t){s("SHA-256")(e,t)},sha2512:function(e,t){s("SHA-512")(e,t)}}}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"multihashing-async",file:"/home/circleci/project/node_modules/libp2p-crypto/node_modules/multihashing-async/src/crypto-sha1-2-browser.js"}],[4753,{"./utils":4757,blakejs:1981,buffer:2028},function(){with(this)return function(){"use strict";return function(e,t,r){(function(r){(function(){const n=e("blakejs"),i=e("./utils").toCallback,s={init:n.blake2bInit,update:n.blake2bUpdate,digest:n.blake2bFinal},o={init:n.blake2sInit,update:n.blake2sUpdate,digest:n.blake2sFinal},a=(e,t)=>i((n=>{const i=t.init(e,null);return t.update(i,n),r.from(t.digest(i))}));t.exports=e=>{for(let t=0;t<64;t++)e[45569+t]=a(t+1,s);for(let t=0;t<32;t++)e[45633+t]=a(t+1,o)}}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"multihashing-async",file:"/home/circleci/project/node_modules/libp2p-crypto/node_modules/multihashing-async/src/blake.js"}],[5307,{},function(){with(this)return function(){"use strict";return function(e,t,r){t.exports=function(e){var t,r=function(e){return e.trim()};return e.replace(/([;,{}()=:[\]<>]|\/\*|\*\/)/g," $1 ").split(/\n/).map(r).filter(Boolean).map((function(e){var t=e.indexOf("//");return t>-1?e.slice(0,t):e})).map(r).filter(Boolean).join("\n").split(/\s+|\n+/gm).filter((t=!1,function(e){return"/*"===e?(t=!0,!1):"*/"===e?(t=!1,!1):!t}))}}}},{package:"protocol-buffers-schema",file:"/home/circleci/project/node_modules/protocol-buffers-schema/tokenize.js"}],[5313,{},function(){with(this)return function(){"use strict";return function(e,t,r){r.defined=function(e){return null!==e&&e!==undefined&&("number"!=typeof e||!isNaN(e))}}}},{package:"protons",file:"/home/circleci/project/node_modules/protons/src/compile/utils.js"}],[5677,{varint:5868},function(){with(this)return function(){"use strict";return function(e,t,r){var n=e("varint");r.encode=function e(t,r,i){t=t>=0?2*t:-2*t-1;var s=n.encode(t,r,i);return e.bytes=n.encode.bytes,s},r.decode=function e(t,r){var i=n.decode(t,r);return e.bytes=n.decode.bytes,1&i?(i+1)/-2:i/2},r.encodingLength=function(e){return n.encodingLength(e>=0?2*e:-2*e-1)}}}},{package:"signed-varint",file:"/home/circleci/project/node_modules/signed-varint/index.js"}],[1639,{"./der":1638},function(){with(this)return function(){"use strict";return function(e,t,r){const n=r;n._reverse=function(e){const t={};return Object.keys(e).forEach((function(r){(0|r)==r&&(r|=0);const n=e[r];t[n]=r})),t},n.der=e("./der")}}},{package:"asn1.js",file:"/home/circleci/project/node_modules/asn1.js/lib/asn1/constants/index.js"}],[1633,{"./decoders":1641,"./encoders":1644,inherits:4329},function(){with(this)return function(){"use strict";return function(e,t,r){const n=e("./encoders"),i=e("./decoders"),s=e("inherits");function o(e,t){this.name=e,this.body=t,this.decoders={},this.encoders={}}r.define=function(e,t){return new o(e,t)},o.prototype._createNamed=function(e){const t=this.name;function r(e){this._initNamed(e,t)}return s(r,e),r.prototype._initNamed=function(t,r){e.call(this,t,r)},new r(this)},o.prototype._getDecoder=function(e){return e=e||"der",this.decoders.hasOwnProperty(e)||(this.decoders[e]=this._createNamed(i[e])),this.decoders[e]},o.prototype.decode=function(e,t,r){return this._getDecoder(t).decode(e,r)},o.prototype._getEncoder=function(e){return e=e||"der",this.encoders.hasOwnProperty(e)||(this.encoders[e]=this._createNamed(n[e])),this.encoders[e]},o.prototype.encode=function(e,t,r){return this._getEncoder(t).encode(e,r)}}}},{package:"asn1.js",file:"/home/circleci/project/node_modules/asn1.js/lib/asn1/api.js"}],[1635,{"./buffer":1634,"./node":1636,"./reporter":1637},function(){with(this)return function(){"use strict";return function(e,t,r){const n=r;n.Reporter=e("./reporter").Reporter,n.DecoderBuffer=e("./buffer").DecoderBuffer,n.EncoderBuffer=e("./buffer").EncoderBuffer,n.Node=e("./node")}}},{package:"asn1.js",file:"/home/circleci/project/node_modules/asn1.js/lib/asn1/base/index.js"}],[1644,{"./der":1643,"./pem":1645},function(){with(this)return function(){"use strict";return function(e,t,r){const n=r;n.der=e("./der"),n.pem=e("./pem")}}},{package:"asn1.js",file:"/home/circleci/project/node_modules/asn1.js/lib/asn1/encoders/index.js"}],[1641,{"./der":1640,"./pem":1642},function(){with(this)return function(){"use strict";return function(e,t,r){const n=r;n.der=e("./der"),n.pem=e("./pem")}}},{package:"asn1.js",file:"/home/circleci/project/node_modules/asn1.js/lib/asn1/decoders/index.js"}],[4750,{_process:5294,buffer:2028},function(){with(this)return function(){"use strict";return function(e,t,r){(function(e,t){(function(){r.toCallback=t=>function(r,n){let i;try{i=t(r)}catch(t){return void e.nextTick(n,t)}e.nextTick(n,null,i)},r.toBuf=(e,r)=>n=>{let i=e(n,r);return t.from(i,"hex")},r.fromString=(e,r)=>n=>{const i=t.isBuffer(n)?n.toString():n;return e(i,r)},r.fromNumberTo32BitBuf=(e,r)=>n=>{let i=e(n,r);const s=new Array(4);for(let e=0;e<4;e++)s[e]=255&i,i>>=8;return t.from(s)}}).call(this)}).call(this,e("_process"),e("buffer").Buffer)}}},{package:"multihashing-async",file:"/home/circleci/project/node_modules/libp2p-crypto/node_modules/libp2p-crypto-secp256k1/node_modules/multihashing-async/src/utils.js"}],[4746,{"./utils":4750,blakejs:1981,buffer:2028},function(){with(this)return function(){"use strict";return function(e,t,r){(function(r){(function(){const n=e("blakejs"),i=e("./utils").toCallback,s={init:n.blake2bInit,update:n.blake2bUpdate,digest:n.blake2bFinal},o={init:n.blake2sInit,update:n.blake2sUpdate,digest:n.blake2sFinal},a=(e,t)=>i((n=>{const i=t.init(e,null);return t.update(i,n),r.from(t.digest(i))}));t.exports=e=>{for(let t=0;t<64;t++)e[45569+t]=a(t+1,s);for(let t=0;t<32;t++)e[45633+t]=a(t+1,o)}}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"multihashing-async",file:"/home/circleci/project/node_modules/libp2p-crypto/node_modules/libp2p-crypto-secp256k1/node_modules/multihashing-async/src/blake.js"}],[4747,{buffer:2028,nodeify:5171},function(){with(this)return function(){"use strict";return function(e,t,r){(function(r){(function(){const n=e("nodeify"),i=function(){if(self.crypto)return self.crypto.subtle||self.crypto.webkitSubtle;if(self.msCrypto)return self.msCrypto.subtle}();function s(e){if(!i)throw new Error("Please use a browser with webcrypto support and ensure the code has been delivered securely via HTTPS/TLS and run within a Secure Context");return(t,s)=>{const o=i.digest({name:e},t);if("function"!=typeof o.then)return o.onerror=()=>{s(new Error(`hashing data using ${e}`))},void(o.oncomplete=e=>{s(null,e.target.result)});n(o.then((e=>r.from(new Uint8Array(e)))),s)}}t.exports={sha1:function(e,t){s("SHA-1")(e,t)},sha2256:function(e,t){s("SHA-256")(e,t)},sha2512:function(e,t){s("SHA-512")(e,t)}}}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"multihashing-async",file:"/home/circleci/project/node_modules/libp2p-crypto/node_modules/libp2p-crypto-secp256k1/node_modules/multihashing-async/src/crypto-sha1-2-browser.js"}],[4761,{"./assert":4759,"./der":4760,"./messages.json":4768},function(){with(this)return function(){"use strict";return function(e,t,r){var n=e("./assert"),i=e("./der"),s=e("./messages.json");function o(e,t){return e===undefined?t:(n.isBoolean(e,s.COMPRESSED_TYPE_INVALID),e)}t.exports=function(e){return{privateKeyVerify:function(t){return n.isBuffer(t,s.EC_PRIVATE_KEY_TYPE_INVALID),32===t.length&&e.privateKeyVerify(t)},privateKeyExport:function(t,r){n.isBuffer(t,s.EC_PRIVATE_KEY_TYPE_INVALID),n.isBufferLength(t,32,s.EC_PRIVATE_KEY_LENGTH_INVALID),r=o(r,!0);var a=e.privateKeyExport(t,r);return i.privateKeyExport(t,a,r)},privateKeyImport:function(t){if(n.isBuffer(t,s.EC_PRIVATE_KEY_TYPE_INVALID),(t=i.privateKeyImport(t))&&32===t.length&&e.privateKeyVerify(t))return t;throw new Error(s.EC_PRIVATE_KEY_IMPORT_DER_FAIL)},privateKeyNegate:function(t){return n.isBuffer(t,s.EC_PRIVATE_KEY_TYPE_INVALID),n.isBufferLength(t,32,s.EC_PRIVATE_KEY_LENGTH_INVALID),e.privateKeyNegate(t)},privateKeyModInverse:function(t){return n.isBuffer(t,s.EC_PRIVATE_KEY_TYPE_INVALID),n.isBufferLength(t,32,s.EC_PRIVATE_KEY_LENGTH_INVALID),e.privateKeyModInverse(t)},privateKeyTweakAdd:function(t,r){return n.isBuffer(t,s.EC_PRIVATE_KEY_TYPE_INVALID),n.isBufferLength(t,32,s.EC_PRIVATE_KEY_LENGTH_INVALID),n.isBuffer(r,s.TWEAK_TYPE_INVALID),n.isBufferLength(r,32,s.TWEAK_LENGTH_INVALID),e.privateKeyTweakAdd(t,r)},privateKeyTweakMul:function(t,r){return n.isBuffer(t,s.EC_PRIVATE_KEY_TYPE_INVALID),n.isBufferLength(t,32,s.EC_PRIVATE_KEY_LENGTH_INVALID),n.isBuffer(r,s.TWEAK_TYPE_INVALID),n.isBufferLength(r,32,s.TWEAK_LENGTH_INVALID),e.privateKeyTweakMul(t,r)},publicKeyCreate:function(t,r){return n.isBuffer(t,s.EC_PRIVATE_KEY_TYPE_INVALID),n.isBufferLength(t,32,s.EC_PRIVATE_KEY_LENGTH_INVALID),r=o(r,!0),e.publicKeyCreate(t,r)},publicKeyConvert:function(t,r){return n.isBuffer(t,s.EC_PUBLIC_KEY_TYPE_INVALID),n.isBufferLength2(t,33,65,s.EC_PUBLIC_KEY_LENGTH_INVALID),r=o(r,!0),e.publicKeyConvert(t,r)},publicKeyVerify:function(t){return n.isBuffer(t,s.EC_PUBLIC_KEY_TYPE_INVALID),e.publicKeyVerify(t)},publicKeyTweakAdd:function(t,r,i){return n.isBuffer(t,s.EC_PUBLIC_KEY_TYPE_INVALID),n.isBufferLength2(t,33,65,s.EC_PUBLIC_KEY_LENGTH_INVALID),n.isBuffer(r,s.TWEAK_TYPE_INVALID),n.isBufferLength(r,32,s.TWEAK_LENGTH_INVALID),i=o(i,!0),e.publicKeyTweakAdd(t,r,i)},publicKeyTweakMul:function(t,r,i){return n.isBuffer(t,s.EC_PUBLIC_KEY_TYPE_INVALID),n.isBufferLength2(t,33,65,s.EC_PUBLIC_KEY_LENGTH_INVALID),n.isBuffer(r,s.TWEAK_TYPE_INVALID),n.isBufferLength(r,32,s.TWEAK_LENGTH_INVALID),i=o(i,!0),e.publicKeyTweakMul(t,r,i)},publicKeyCombine:function(t,r){n.isArray(t,s.EC_PUBLIC_KEYS_TYPE_INVALID),n.isLengthGTZero(t,s.EC_PUBLIC_KEYS_LENGTH_INVALID);for(var i=0;i<t.length;++i)n.isBuffer(t[i],s.EC_PUBLIC_KEY_TYPE_INVALID),n.isBufferLength2(t[i],33,65,s.EC_PUBLIC_KEY_LENGTH_INVALID);return r=o(r,!0),e.publicKeyCombine(t,r)},signatureNormalize:function(t){return n.isBuffer(t,s.ECDSA_SIGNATURE_TYPE_INVALID),n.isBufferLength(t,64,s.ECDSA_SIGNATURE_LENGTH_INVALID),e.signatureNormalize(t)},signatureExport:function(t){n.isBuffer(t,s.ECDSA_SIGNATURE_TYPE_INVALID),n.isBufferLength(t,64,s.ECDSA_SIGNATURE_LENGTH_INVALID);var r=e.signatureExport(t);return i.signatureExport(r)},signatureImport:function(t){n.isBuffer(t,s.ECDSA_SIGNATURE_TYPE_INVALID),n.isLengthGTZero(t,s.ECDSA_SIGNATURE_LENGTH_INVALID);var r=i.signatureImport(t);if(r)return e.signatureImport(r);throw new Error(s.ECDSA_SIGNATURE_PARSE_DER_FAIL)},signatureImportLax:function(t){n.isBuffer(t,s.ECDSA_SIGNATURE_TYPE_INVALID),n.isLengthGTZero(t,s.ECDSA_SIGNATURE_LENGTH_INVALID);var r=i.signatureImportLax(t);if(r)return e.signatureImport(r);throw new Error(s.ECDSA_SIGNATURE_PARSE_DER_FAIL)},sign:function(t,r,i){n.isBuffer(t,s.MSG32_TYPE_INVALID),n.isBufferLength(t,32,s.MSG32_LENGTH_INVALID),n.isBuffer(r,s.EC_PRIVATE_KEY_TYPE_INVALID),n.isBufferLength(r,32,s.EC_PRIVATE_KEY_LENGTH_INVALID);var o=null,a=null;return i!==undefined&&(n.isObject(i,s.OPTIONS_TYPE_INVALID),i.data!==undefined&&(n.isBuffer(i.data,s.OPTIONS_DATA_TYPE_INVALID),n.isBufferLength(i.data,32,s.OPTIONS_DATA_LENGTH_INVALID),o=i.data),i.noncefn!==undefined&&(n.isFunction(i.noncefn,s.OPTIONS_NONCEFN_TYPE_INVALID),a=i.noncefn)),e.sign(t,r,a,o)},verify:function(t,r,i){return n.isBuffer(t,s.MSG32_TYPE_INVALID),n.isBufferLength(t,32,s.MSG32_LENGTH_INVALID),n.isBuffer(r,s.ECDSA_SIGNATURE_TYPE_INVALID),n.isBufferLength(r,64,s.ECDSA_SIGNATURE_LENGTH_INVALID),n.isBuffer(i,s.EC_PUBLIC_KEY_TYPE_INVALID),n.isBufferLength2(i,33,65,s.EC_PUBLIC_KEY_LENGTH_INVALID),e.verify(t,r,i)},recover:function(t,r,i,a){return n.isBuffer(t,s.MSG32_TYPE_INVALID),n.isBufferLength(t,32,s.MSG32_LENGTH_INVALID),n.isBuffer(r,s.ECDSA_SIGNATURE_TYPE_INVALID),n.isBufferLength(r,64,s.ECDSA_SIGNATURE_LENGTH_INVALID),n.isNumber(i,s.RECOVERY_ID_TYPE_INVALID),n.isNumberInInterval(i,-1,4,s.RECOVERY_ID_VALUE_INVALID),a=o(a,!0),e.recover(t,r,i,a)},ecdh:function(t,r){return n.isBuffer(t,s.EC_PUBLIC_KEY_TYPE_INVALID),n.isBufferLength2(t,33,65,s.EC_PUBLIC_KEY_LENGTH_INVALID),n.isBuffer(r,s.EC_PRIVATE_KEY_TYPE_INVALID),n.isBufferLength(r,32,s.EC_PRIVATE_KEY_LENGTH_INVALID),e.ecdh(t,r)},ecdhUnsafe:function(t,r,i){return n.isBuffer(t,s.EC_PUBLIC_KEY_TYPE_INVALID),n.isBufferLength2(t,33,65,s.EC_PUBLIC_KEY_LENGTH_INVALID),n.isBuffer(r,s.EC_PRIVATE_KEY_TYPE_INVALID),n.isBufferLength(r,32,s.EC_PRIVATE_KEY_LENGTH_INVALID),i=o(i,!0),e.ecdhUnsafe(t,r,i)}}}}}},{package:"secp256k1",file:"/home/circleci/project/node_modules/libp2p-crypto/node_modules/secp256k1/lib/index.js"}],[4767,{"../messages.json":4768,"./bn":4762,"./ecpoint":4765,"./ecpointg":4766,"create-hash":2129,"drbg.js/hmac":2256,"safe-buffer":5597},function(){with(this)return function(){"use strict";return function(e,t,r){var n=e("safe-buffer").Buffer,i=e("create-hash"),s=e("drbg.js/hmac"),o=e("../messages.json"),a=e("./bn"),c=e("./ecpoint"),u=e("./ecpointg");r.privateKeyVerify=function(e){var t=a.fromBuffer(e);return!(t.isOverflow()||t.isZero())},r.privateKeyExport=function(e,t){var r=a.fromBuffer(e);if(r.isOverflow()||r.isZero())throw new Error(o.EC_PRIVATE_KEY_EXPORT_DER_FAIL);return u.mul(r).toPublicKey(t)},r.privateKeyNegate=function(e){var t=a.fromBuffer(e);return t.isZero()?n.alloc(32):(t.ucmp(a.n)>0&&t.isub(a.n),a.n.sub(t).toBuffer())},r.privateKeyModInverse=function(e){var t=a.fromBuffer(e);if(t.isOverflow()||t.isZero())throw new Error(o.EC_PRIVATE_KEY_RANGE_INVALID);return t.uinvm().toBuffer()},r.privateKeyTweakAdd=function(e,t){var r=a.fromBuffer(t);if(r.isOverflow())throw new Error(o.EC_PRIVATE_KEY_TWEAK_ADD_FAIL);if(r.iadd(a.fromBuffer(e)),r.isOverflow()&&r.isub(a.n),r.isZero())throw new Error(o.EC_PRIVATE_KEY_TWEAK_ADD_FAIL);return r.toBuffer()},r.privateKeyTweakMul=function(e,t){var r=a.fromBuffer(t);if(r.isOverflow()||r.isZero())throw new Error(o.EC_PRIVATE_KEY_TWEAK_MUL_FAIL);var n=a.fromBuffer(e);return r.umul(n).ureduce().toBuffer()},r.publicKeyCreate=function(e,t){var r=a.fromBuffer(e);if(r.isOverflow()||r.isZero())throw new Error(o.EC_PUBLIC_KEY_CREATE_FAIL);return u.mul(r).toPublicKey(t)},r.publicKeyConvert=function(e,t){var r=c.fromPublicKey(e);if(null===r)throw new Error(o.EC_PUBLIC_KEY_PARSE_FAIL);return r.toPublicKey(t)},r.publicKeyVerify=function(e){return null!==c.fromPublicKey(e)},r.publicKeyTweakAdd=function(e,t,r){var n=c.fromPublicKey(e);if(null===n)throw new Error(o.EC_PUBLIC_KEY_PARSE_FAIL);if((t=a.fromBuffer(t)).isOverflow())throw new Error(o.EC_PUBLIC_KEY_TWEAK_ADD_FAIL);var i=u.mul(t).add(n);if(i.inf)throw new Error(o.EC_PUBLIC_KEY_TWEAK_ADD_FAIL);return i.toPublicKey(r)},r.publicKeyTweakMul=function(e,t,r){var n=c.fromPublicKey(e);if(null===n)throw new Error(o.EC_PUBLIC_KEY_PARSE_FAIL);if((t=a.fromBuffer(t)).isOverflow()||t.isZero())throw new Error(o.EC_PUBLIC_KEY_TWEAK_MUL_FAIL);return n.mul(t).toPublicKey(r)},r.publicKeyCombine=function(e,t){for(var r=new Array(e.length),n=0;n<e.length;++n)if(r[n]=c.fromPublicKey(e[n]),null===r[n])throw new Error(o.EC_PUBLIC_KEY_PARSE_FAIL);for(var i=r[0],s=1;s<r.length;++s)i=i.add(r[s]);if(i.inf)throw new Error(o.EC_PUBLIC_KEY_COMBINE_FAIL);return i.toPublicKey(t)},r.signatureNormalize=function(e){var t=a.fromBuffer(e.slice(0,32)),r=a.fromBuffer(e.slice(32,64));if(t.isOverflow()||r.isOverflow())throw new Error(o.ECDSA_SIGNATURE_PARSE_FAIL);var i=n.from(e);return r.isHigh()&&a.n.sub(r).toBuffer().copy(i,32),i},r.signatureExport=function(e){var t=e.slice(0,32),r=e.slice(32,64);if(a.fromBuffer(t).isOverflow()||a.fromBuffer(r).isOverflow())throw new Error(o.ECDSA_SIGNATURE_PARSE_FAIL);return{r:t,s:r}},r.signatureImport=function(e){var t=a.fromBuffer(e.r);t.isOverflow()&&(t=a.fromNumber(0));var r=a.fromBuffer(e.s);return r.isOverflow()&&(r=a.fromNumber(0)),n.concat([t.toBuffer(),r.toBuffer()])},r.sign=function(e,t,r,i){var c=a.fromBuffer(t);if(c.isOverflow()||c.isZero())throw new Error(o.ECDSA_SIGN_FAIL);if(null===r){var l=new s("sha256",t,e,i);r=function(){return l.generate(32)}}for(var d=a.fromBuffer(e),f=0;;++f){var h=r(e,t,null,i,f);if(!n.isBuffer(h)||32!==h.length)throw new Error(o.ECDSA_SIGN_FAIL);var p=a.fromBuffer(h);if(!p.isOverflow()&&!p.isZero()){var m=u.mul(p),g=m.x.fireduce();if(!g.isZero()){var y=p.uinvm().umul(g.umul(c).ureduce().iadd(d).fireduce()).ureduce();if(!y.isZero()){var b=(0!==m.x.ucmp(g)?2:0)|(m.y.isOdd()?1:0);return y.isHigh()&&(y=a.n.sub(y),b^=1),{signature:n.concat([g.toBuffer(),y.toBuffer()]),recovery:b}}}}}},r.verify=function(e,t,r){var n=a.fromBuffer(t.slice(0,32)),i=a.fromBuffer(t.slice(32,64));if(n.isOverflow()||i.isOverflow())throw new Error(o.ECDSA_SIGNATURE_PARSE_FAIL);if(i.isHigh()||n.isZero()||i.isZero())return!1;var s=c.fromPublicKey(r);if(null===s)throw new Error(o.EC_PUBLIC_KEY_PARSE_FAIL);var l=i.uinvm(),d=l.umul(a.fromBuffer(e)).ureduce(),f=l.umul(n).ureduce(),h=u.mulAdd(d,s,f);if(h.inf)return!1;var p=h.z.redSqr();return 0===n.redMul(p).ucmp(h.x)||!(n.ucmp(a.psn)>=0)&&0===n.iadd(a.psn).redMul(p).ucmp(h.x)},r.recover=function(e,t,r,i){var s=a.fromBuffer(t.slice(0,32)),l=a.fromBuffer(t.slice(32,64));if(s.isOverflow()||l.isOverflow())throw new Error(o.ECDSA_SIGNATURE_PARSE_FAIL);do{if(s.isZero()||l.isZero())break;var d=s;if(r>>1){if(d.ucmp(a.psn)>=0)break;d=s.add(a.n)}var f=n.concat([n.from([2+(1&r)]),d.toBuffer()]),h=c.fromPublicKey(f);if(null===h)break;var p=s.uinvm(),m=a.n.sub(a.fromBuffer(e)).umul(p).ureduce(),g=l.umul(p).ureduce();return c.fromECJPoint(u.mulAdd(m,h,g)).toPublicKey(i)}while(0);throw new Error(o.ECDSA_RECOVER_FAIL)},r.ecdh=function(e,t){var n=r.ecdhUnsafe(e,t,!0);return i("sha256").update(n).digest()},r.ecdhUnsafe=function(e,t,r){var n=c.fromPublicKey(e);if(null===n)throw new Error(o.EC_PUBLIC_KEY_PARSE_FAIL);var i=a.fromBuffer(t);if(i.isOverflow()||i.isZero())throw new Error(o.ECDH_FAIL);return n.mul(i).toPublicKey(r)}}}},{package:"secp256k1",file:"/home/circleci/project/node_modules/libp2p-crypto/node_modules/secp256k1/lib/js/index.js"}],[5130,{},function(){with(this)return function(){"use strict";return function(e,t,r){!function(e,n){var i={version:"3.0.0",x86:{},x64:{},inputValidation:!0};function s(e){if(!Array.isArray(e)&&!ArrayBuffer.isView(e))return!1;for(var t=0;t<e.length;t++)if(!Number.isInteger(e[t])||e[t]<0||e[t]>255)return!1;return!0}function o(e,t){return(65535&e)*t+(((e>>>16)*t&65535)<<16)}function a(e,t){return e<<t|e>>>32-t}function c(e){return e=o(e^=e>>>16,2246822507),e=o(e^=e>>>13,3266489909),e^=e>>>16}function u(e,t){e=[e[0]>>>16,65535&e[0],e[1]>>>16,65535&e[1]],t=[t[0]>>>16,65535&t[0],t[1]>>>16,65535&t[1]];var r=[0,0,0,0];return r[3]+=e[3]+t[3],r[2]+=r[3]>>>16,r[3]&=65535,r[2]+=e[2]+t[2],r[1]+=r[2]>>>16,r[2]&=65535,r[1]+=e[1]+t[1],r[0]+=r[1]>>>16,r[1]&=65535,r[0]+=e[0]+t[0],r[0]&=65535,[r[0]<<16|r[1],r[2]<<16|r[3]]}function l(e,t){e=[e[0]>>>16,65535&e[0],e[1]>>>16,65535&e[1]],t=[t[0]>>>16,65535&t[0],t[1]>>>16,65535&t[1]];var r=[0,0,0,0];return r[3]+=e[3]*t[3],r[2]+=r[3]>>>16,r[3]&=65535,r[2]+=e[2]*t[3],r[1]+=r[2]>>>16,r[2]&=65535,r[2]+=e[3]*t[2],r[1]+=r[2]>>>16,r[2]&=65535,r[1]+=e[1]*t[3],r[0]+=r[1]>>>16,r[1]&=65535,r[1]+=e[2]*t[2],r[0]+=r[1]>>>16,r[1]&=65535,r[1]+=e[3]*t[1],r[0]+=r[1]>>>16,r[1]&=65535,r[0]+=e[0]*t[3]+e[1]*t[2]+e[2]*t[1]+e[3]*t[0],r[0]&=65535,[r[0]<<16|r[1],r[2]<<16|r[3]]}function d(e,t){return 32===(t%=64)?[e[1],e[0]]:t<32?[e[0]<<t|e[1]>>>32-t,e[1]<<t|e[0]>>>32-t]:(t-=32,[e[1]<<t|e[0]>>>32-t,e[0]<<t|e[1]>>>32-t])}function f(e,t){return 0===(t%=64)?e:t<32?[e[0]<<t|e[1]>>>32-t,e[1]<<t]:[e[1]<<t-32,0]}function h(e,t){return[e[0]^t[0],e[1]^t[1]]}function p(e){return e=h(e,[0,e[0]>>>1]),e=h(e=l(e,[4283543511,3981806797]),[0,e[0]>>>1]),e=h(e=l(e,[3301882366,444984403]),[0,e[0]>>>1])}i.x86.hash32=function(e,t){if(i.inputValidation&&!s(e))return n;t=t||0;for(var r=e.length%4,u=e.length-r,l=t,d=0,f=3432918353,h=461845907,p=0;p<u;p+=4)d=o(d=e[p]|e[p+1]<<8|e[p+2]<<16|e[p+3]<<24,f),d=o(d=a(d,15),h),l=o(l=a(l^=d,13),5)+3864292196;switch(d=0,r){case 3:d^=e[p+2]<<16;case 2:d^=e[p+1]<<8;case 1:d=o(d^=e[p],f),l^=d=o(d=a(d,15),h)}return(l=c(l^=e.length))>>>0},i.x86.hash128=function(e,t){if(i.inputValidation&&!s(e))return n;t=t||0;for(var r=e.length%16,u=e.length-r,l=t,d=t,f=t,h=t,p=0,m=0,g=0,y=0,b=597399067,_=2869860233,w=951274213,v=2716044179,E=0;E<u;E+=16)p=e[E]|e[E+1]<<8|e[E+2]<<16|e[E+3]<<24,m=e[E+4]|e[E+5]<<8|e[E+6]<<16|e[E+7]<<24,g=e[E+8]|e[E+9]<<8|e[E+10]<<16|e[E+11]<<24,y=e[E+12]|e[E+13]<<8|e[E+14]<<16|e[E+15]<<24,p=a(p=o(p,b),15),l=a(l^=p=o(p,_),19),l=o(l+=d,5)+1444728091,m=a(m=o(m,_),16),d=a(d^=m=o(m,w),17),d=o(d+=f,5)+197830471,g=a(g=o(g,w),17),f=a(f^=g=o(g,v),15),f=o(f+=h,5)+2530024501,y=a(y=o(y,v),18),h=a(h^=y=o(y,b),13),h=o(h+=l,5)+850148119;switch(p=0,m=0,g=0,y=0,r){case 15:y^=e[E+14]<<16;case 14:y^=e[E+13]<<8;case 13:y=o(y^=e[E+12],v),h^=y=o(y=a(y,18),b);case 12:g^=e[E+11]<<24;case 11:g^=e[E+10]<<16;case 10:g^=e[E+9]<<8;case 9:g=o(g^=e[E+8],w),f^=g=o(g=a(g,17),v);case 8:m^=e[E+7]<<24;case 7:m^=e[E+6]<<16;case 6:m^=e[E+5]<<8;case 5:m=o(m^=e[E+4],_),d^=m=o(m=a(m,16),w);case 4:p^=e[E+3]<<24;case 3:p^=e[E+2]<<16;case 2:p^=e[E+1]<<8;case 1:p=o(p^=e[E],b),l^=p=o(p=a(p,15),_)}return l^=e.length,l+=d^=e.length,l+=f^=e.length,d+=l+=h^=e.length,f+=l,h+=l,l=c(l),l+=d=c(d),l+=f=c(f),d+=l+=h=c(h),f+=l,h+=l,("00000000"+(l>>>0).toString(16)).slice(-8)+("00000000"+(d>>>0).toString(16)).slice(-8)+("00000000"+(f>>>0).toString(16)).slice(-8)+("00000000"+(h>>>0).toString(16)).slice(-8)},i.x64.hash128=function(e,t){if(i.inputValidation&&!s(e))return n;t=t||0;for(var r=e.length%16,o=e.length-r,a=[0,t],c=[0,t],m=[0,0],g=[0,0],y=[2277735313,289559509],b=[1291169091,658871167],_=0;_<o;_+=16)m=[e[_+4]|e[_+5]<<8|e[_+6]<<16|e[_+7]<<24,e[_]|e[_+1]<<8|e[_+2]<<16|e[_+3]<<24],g=[e[_+12]|e[_+13]<<8|e[_+14]<<16|e[_+15]<<24,e[_+8]|e[_+9]<<8|e[_+10]<<16|e[_+11]<<24],m=d(m=l(m,y),31),a=u(a=d(a=h(a,m=l(m,b)),27),c),a=u(l(a,[0,5]),[0,1390208809]),g=d(g=l(g,b),33),c=u(c=d(c=h(c,g=l(g,y)),31),a),c=u(l(c,[0,5]),[0,944331445]);switch(m=[0,0],g=[0,0],r){case 15:g=h(g,f([0,e[_+14]],48));case 14:g=h(g,f([0,e[_+13]],40));case 13:g=h(g,f([0,e[_+12]],32));case 12:g=h(g,f([0,e[_+11]],24));case 11:g=h(g,f([0,e[_+10]],16));case 10:g=h(g,f([0,e[_+9]],8));case 9:g=l(g=h(g,[0,e[_+8]]),b),c=h(c,g=l(g=d(g,33),y));case 8:m=h(m,f([0,e[_+7]],56));case 7:m=h(m,f([0,e[_+6]],48));case 6:m=h(m,f([0,e[_+5]],40));case 5:m=h(m,f([0,e[_+4]],32));case 4:m=h(m,f([0,e[_+3]],24));case 3:m=h(m,f([0,e[_+2]],16));case 2:m=h(m,f([0,e[_+1]],8));case 1:m=l(m=h(m,[0,e[_]]),y),a=h(a,m=l(m=d(m,31),b))}return a=u(a=h(a,[0,e.length]),c=h(c,[0,e.length])),c=u(c,a),a=u(a=p(a),c=p(c)),c=u(c,a),("00000000"+(a[0]>>>0).toString(16)).slice(-8)+("00000000"+(a[1]>>>0).toString(16)).slice(-8)+("00000000"+(c[0]>>>0).toString(16)).slice(-8)+("00000000"+(c[1]>>>0).toString(16)).slice(-8)},void 0!==r?(void 0!==t&&t.exports&&(r=t.exports=i),r.murmurHash3=i):"function"==typeof define&&define.amd?define([],(function(){return i})):(i._murmurHash3=e.murmurHash3,i.noConflict=function(){return e.murmurHash3=i._murmurHash3,i._murmurHash3=n,i.noConflict=n,i},e.murmurHash3=i)}(this)}}},{package:"murmurhash3js-revisited",file:"/home/circleci/project/node_modules/murmurhash3js-revisited/lib/murmurHash3js.js"}],[1982,{buffer:2028},function(){with(this)return function(){"use strict";return function(e,t,r){(function(e){(function(){function r(e){return(4294967296+e).toString(16).substring(1)}t.exports={normalizeInput:function(t){var r;if(t instanceof Uint8Array)r=t;else if(t instanceof e)r=new Uint8Array(t);else{if("string"!=typeof t)throw new Error("Input must be an string, Buffer or Uint8Array");r=new Uint8Array(e.from(t,"utf8"))}return r},toHex:function(e){return Array.prototype.map.call(e,(function(e){return(e<16?"0":"")+e.toString(16)})).join("")},debugPrint:function(e,t,n){for(var i="\n"+e+" = ",s=0;s<t.length;s+=2){if(32===n)i+=r(t[s]).toUpperCase(),i+=" ",i+=r(t[s+1]).toUpperCase();else{if(64!==n)throw new Error("Invalid size "+n);i+=r(t[s+1]).toUpperCase(),i+=r(t[s]).toUpperCase()}s%6==4?i+="\n"+new Array(e.length+4).join(" "):s<t.length-2&&(i+=" ")}console.log(i)},testSpeed:function(e,t,r){for(var n=(new Date).getTime(),i=new Uint8Array(t),s=0;s<t;s++)i[s]=s%256;var o=(new Date).getTime();for(console.log("Generated random input in "+(o-n)+"ms"),n=o,s=0;s<r;s++){var a=e(i),c=(new Date).getTime(),u=c-n;n=c,console.log("Hashed in "+u+"ms: "+a.substring(0,20)+"..."),console.log(Math.round(t/(1<<20)/(u/1e3)*100)/100+" MB PER SECOND")}}}}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"blakejs",file:"/home/circleci/project/node_modules/blakejs/util.js"}],[4333,{},function(){with(this)return function(){"use strict";return function(e,t,r){var n="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof window.msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto);if(n){var i=new Uint8Array(16);t.exports=function(){return n(i),i}}else{var s=new Array(16);t.exports=function(){for(var e,t=0;t<16;t++)0==(3&t)&&(e=4294967296*Math.random()),s[t]=e>>>((3&t)<<3)&255;return s}}}}},{package:"uuid",file:"/home/circleci/project/node_modules/interface-datastore/node_modules/uuid/lib/rng-browser.js"}],[4332,{},function(){with(this)return function(){"use strict";return function(e,t,r){for(var n=[],i=0;i<256;++i)n[i]=(i+256).toString(16).substr(1);t.exports=function(e,t){var r=t||0,i=n;return[i[e[r++]],i[e[r++]],i[e[r++]],i[e[r++]],"-",i[e[r++]],i[e[r++]],"-",i[e[r++]],i[e[r++]],"-",i[e[r++]],i[e[r++]],"-",i[e[r++]],i[e[r++]],i[e[r++]],i[e[r++]],i[e[r++]],i[e[r++]]].join("")}}}},{package:"uuid",file:"/home/circleci/project/node_modules/interface-datastore/node_modules/uuid/lib/bytesToUuid.js"}],[2193,{"err-code":2299,multibase:5093},function(){with(this)return function(){"use strict";return function(e,t,r){const n=e("multibase"),i=e("err-code"),s="/record/";t.exports.encodeBase32=e=>n.encode("base32",e).slice(1),t.exports.keyToTopic=e=>`/record/${n.encode("base64url",e).slice(1).toString()}`,t.exports.topicToKey=e=>{if(e.substring(0,s.length)!==s)throw i(new Error("topic received is not from a record"),"ERR_TOPIC_IS_NOT_FROM_RECORD_NAMESPACE");const t=`u${e.substring(s.length)}`;return n.decode(t).toString()}}}},{package:"datastore-pubsub",file:"/home/circleci/project/node_modules/datastore-pubsub/src/utils.js"}],[5825,{"./lib/truncate":5826,"utf8-byte-length/browser":5843},function(){with(this)return function(){"use strict";return function(e,t,r){var n=e("./lib/truncate"),i=e("utf8-byte-length/browser");t.exports=n.bind(null,i)}}},{package:"truncate-utf8-bytes",file:"/home/circleci/project/node_modules/truncate-utf8-bytes/browser.js"}],[1678,{"./internal/createTester":1690,"./internal/doParallel":1692,"./internal/findGetResult":1696,"lodash/identity":5035},function(){with(this)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0});var n=a(e("lodash/identity")),i=a(e("./internal/createTester")),s=a(e("./internal/doParallel")),o=a(e("./internal/findGetResult"));function a(e){return e&&e.__esModule?e:{default:e}}r.default=(0,s.default)((0,i.default)(n.default,o.default)),t.exports=r.default}}},{package:"async",file:"/home/circleci/project/node_modules/async/detect.js"}],[5157,{"./aes":5140,"./asn1":5141,"./des":5145,"./forge":5146,"./oids":5152,"./pem":5155,"./pkcs7asn1":5158,"./random":5162,"./util":5168,"./x509":5169},function(){with(this)return function(){"use strict";return function(e,t,r){var n=e("./forge");e("./aes"),e("./asn1"),e("./des"),e("./oids"),e("./pem"),e("./pkcs7asn1"),e("./random"),e("./util"),e("./x509");var i=n.asn1,s=t.exports=n.pkcs7=n.pkcs7||{};function o(e){var t={},r=[];if(!i.validate(e,s.asn1.recipientInfoValidator,t,r)){var o=new Error("Cannot read PKCS#7 RecipientInfo. "+"ASN.1 object is not an PKCS#7 RecipientInfo.");throw o.errors=r,o}return{version:t.version.charCodeAt(0),issuer:n.pki.RDNAttributesAsArray(t.issuer),serialNumber:n.util.createBuffer(t.serial).toHex(),encryptedContent:{algorithm:i.derToOid(t.encAlgorithm),parameter:t.encParameter?t.encParameter.value:undefined,content:t.encKey}}}function a(e){for(var t,r=[],s=0;s<e.length;++s)r.push((t=e[s],i.create(i.Class.UNIVERSAL,i.Type.SEQUENCE,!0,[i.create(i.Class.UNIVERSAL,i.Type.INTEGER,!1,i.integerToDer(t.version).getBytes()),i.create(i.Class.UNIVERSAL,i.Type.SEQUENCE,!0,[n.pki.distinguishedNameToAsn1({attributes:t.issuer}),i.create(i.Class.UNIVERSAL,i.Type.INTEGER,!1,n.util.hexToBytes(t.serialNumber))]),i.create(i.Class.UNIVERSAL,i.Type.SEQUENCE,!0,[i.create(i.Class.UNIVERSAL,i.Type.OID,!1,i.oidToDer(t.encryptedContent.algorithm).getBytes()),i.create(i.Class.UNIVERSAL,i.Type.NULL,!1,"")]),i.create(i.Class.UNIVERSAL,i.Type.OCTETSTRING,!1,t.encryptedContent.content)])));return r}function c(e){var t=i.create(i.Class.UNIVERSAL,i.Type.SEQUENCE,!0,[i.create(i.Class.UNIVERSAL,i.Type.INTEGER,!1,i.integerToDer(e.version).getBytes()),i.create(i.Class.UNIVERSAL,i.Type.SEQUENCE,!0,[n.pki.distinguishedNameToAsn1({attributes:e.issuer}),i.create(i.Class.UNIVERSAL,i.Type.INTEGER,!1,n.util.hexToBytes(e.serialNumber))]),i.create(i.Class.UNIVERSAL,i.Type.SEQUENCE,!0,[i.create(i.Class.UNIVERSAL,i.Type.OID,!1,i.oidToDer(e.digestAlgorithm).getBytes()),i.create(i.Class.UNIVERSAL,i.Type.NULL,!1,"")])]);if(e.authenticatedAttributesAsn1&&t.value.push(e.authenticatedAttributesAsn1),t.value.push(i.create(i.Class.UNIVERSAL,i.Type.SEQUENCE,!0,[i.create(i.Class.UNIVERSAL,i.Type.OID,!1,i.oidToDer(e.signatureAlgorithm).getBytes()),i.create(i.Class.UNIVERSAL,i.Type.NULL,!1,"")])),t.value.push(i.create(i.Class.UNIVERSAL,i.Type.OCTETSTRING,!1,e.signature)),e.unauthenticatedAttributes.length>0){for(var r=i.create(i.Class.CONTEXT_SPECIFIC,1,!0,[]),s=0;s<e.unauthenticatedAttributes.length;++s){var o=e.unauthenticatedAttributes[s];r.values.push(u(o))}t.value.push(r)}return t}function u(e){var t;if(e.type===n.pki.oids.contentType)t=i.create(i.Class.UNIVERSAL,i.Type.OID,!1,i.oidToDer(e.value).getBytes());else if(e.type===n.pki.oids.messageDigest)t=i.create(i.Class.UNIVERSAL,i.Type.OCTETSTRING,!1,e.value.bytes());else if(e.type===n.pki.oids.signingTime){var r=new Date("1950-01-01T00:00:00Z"),s=new Date("2050-01-01T00:00:00Z"),o=e.value;if("string"==typeof o){var a=Date.parse(o);o=isNaN(a)?13===o.length?i.utcTimeToDate(o):i.generalizedTimeToDate(o):new Date(a)}t=o>=r&&o<s?i.create(i.Class.UNIVERSAL,i.Type.UTCTIME,!1,i.dateToUtcTime(o)):i.create(i.Class.UNIVERSAL,i.Type.GENERALIZEDTIME,!1,i.dateToGeneralizedTime(o))}return i.create(i.Class.UNIVERSAL,i.Type.SEQUENCE,!0,[i.create(i.Class.UNIVERSAL,i.Type.OID,!1,i.oidToDer(e.type).getBytes()),i.create(i.Class.UNIVERSAL,i.Type.SET,!0,[t])])}function l(e,t,r){var s={};if(!i.validate(t,r,s,[])){var o=new Error("Cannot read PKCS#7 message. "+"ASN.1 object is not a supported PKCS#7 message.");throw o.errors=o,o}if(i.derToOid(s.contentType)!==n.pki.oids.data)throw new Error("Unsupported PKCS#7 message. "+"Only wrapped ContentType Data supported.");if(s.encryptedContent){var a="";if(n.util.isArray(s.encryptedContent))for(var c=0;c<s.encryptedContent.length;++c){if(s.encryptedContent[c].type!==i.Type.OCTETSTRING)throw new Error("Malformed PKCS#7 message, expecting encrypted "+"content constructed of only OCTET STRING objects.");a+=s.encryptedContent[c].value}else a=s.encryptedContent;e.encryptedContent={algorithm:i.derToOid(s.encAlgorithm),parameter:n.util.createBuffer(s.encParameter.value),content:n.util.createBuffer(a)}}if(s.content){a="";if(n.util.isArray(s.content))for(c=0;c<s.content.length;++c){if(s.content[c].type!==i.Type.OCTETSTRING)throw new Error("Malformed PKCS#7 message, expecting "+"content constructed of only OCTET STRING objects.");a+=s.content[c].value}else a=s.content;e.content=n.util.createBuffer(a)}return e.version=s.version.charCodeAt(0),e.rawCapture=s,s}function d(e){if(e.encryptedContent.key===undefined)throw new Error("Symmetric key not available.");if(e.content===undefined){var t;switch(e.encryptedContent.algorithm){case n.pki.oids["aes128-CBC"]:case n.pki.oids["aes192-CBC"]:case n.pki.oids["aes256-CBC"]:t=n.aes.createDecryptionCipher(e.encryptedContent.key);break;case n.pki.oids.desCBC:case n.pki.oids["des-EDE3-CBC"]:t=n.des.createDecryptionCipher(e.encryptedContent.key);break;default:throw new Error("Unsupported symmetric cipher, OID "+e.encryptedContent.algorithm)}if(t.start(e.encryptedContent.parameter),t.update(e.encryptedContent.content),!t.finish())throw new Error("Symmetric decryption failed.");e.content=t.output}}s.messageFromPem=function(e){var t=n.pem.decode(e)[0];if("PKCS7"!==t.type){var r=new Error("Could not convert PKCS#7 message from PEM; PEM "+'header type is not "PKCS#7".');throw r.headerType=t.type,r}if(t.procType&&"ENCRYPTED"===t.procType.type)throw new Error("Could not convert PKCS#7 message from PEM; PEM is encrypted.");var o=i.fromDer(t.body);return s.messageFromAsn1(o)},s.messageToPem=function(e,t){var r={type:"PKCS7",body:i.toDer(e.toAsn1()).getBytes()};return n.pem.encode(r,{maxline:t})},s.messageFromAsn1=function(e){var t={},r=[];if(!i.validate(e,s.asn1.contentInfoValidator,t,r)){var o=new Error("Cannot read PKCS#7 message. "+"ASN.1 object is not an PKCS#7 ContentInfo.");throw o.errors=r,o}var a,c=i.derToOid(t.contentType);switch(c){case n.pki.oids.envelopedData:a=s.createEnvelopedData();break;case n.pki.oids.encryptedData:a=s.createEncryptedData();break;case n.pki.oids.signedData:a=s.createSignedData();break;default:throw new Error("Cannot read PKCS#7 message. ContentType with OID "+c+" is not (yet) supported.")}return a.fromAsn1(t.content.value[0]),a},s.createSignedData=function(){var e=null;return e={type:n.pki.oids.signedData,version:1,certificates:[],crls:[],signers:[],digestAlgorithmIdentifiers:[],contentInfo:null,signerInfos:[],fromAsn1:function(t){if(l(e,t,s.asn1.signedDataValidator),e.certificates=[],e.crls=[],e.digestAlgorithmIdentifiers=[],e.contentInfo=null,e.signerInfos=[],e.rawCapture.certificates)for(var r=e.rawCapture.certificates.value,i=0;i<r.length;++i)e.certificates.push(n.pki.certificateFromAsn1(r[i]))},toAsn1:function(){e.contentInfo||e.sign();for(var t=[],r=0;r<e.certificates.length;++r)t.push(n.pki.certificateToAsn1(e.certificates[r]));var s=[],o=i.create(i.Class.CONTEXT_SPECIFIC,0,!0,[i.create(i.Class.UNIVERSAL,i.Type.SEQUENCE,!0,[i.create(i.Class.UNIVERSAL,i.Type.INTEGER,!1,i.integerToDer(e.version).getBytes()),i.create(i.Class.UNIVERSAL,i.Type.SET,!0,e.digestAlgorithmIdentifiers),e.contentInfo])]);return t.length>0&&o.value[0].value.push(i.create(i.Class.CONTEXT_SPECIFIC,0,!0,t)),s.length>0&&o.value[0].value.push(i.create(i.Class.CONTEXT_SPECIFIC,1,!0,s)),o.value[0].value.push(i.create(i.Class.UNIVERSAL,i.Type.SET,!0,e.signerInfos)),i.create(i.Class.UNIVERSAL,i.Type.SEQUENCE,!0,[i.create(i.Class.UNIVERSAL,i.Type.OID,!1,i.oidToDer(e.type).getBytes()),o])},addSigner:function(t){var r=t.issuer,i=t.serialNumber;if(t.certificate){var s=t.certificate;"string"==typeof s&&(s=n.pki.certificateFromPem(s)),r=s.issuer.attributes,i=s.serialNumber}var o=t.key;if(!o)throw new Error("Could not add PKCS#7 signer; no private key specified.");"string"==typeof o&&(o=n.pki.privateKeyFromPem(o));var a=t.digestAlgorithm||n.pki.oids.sha1;switch(a){case n.pki.oids.sha1:case n.pki.oids.sha256:case n.pki.oids.sha384:case n.pki.oids.sha512:case n.pki.oids.md5:break;default:throw new Error("Could not add PKCS#7 signer; unknown message digest algorithm: "+a)}var c=t.authenticatedAttributes||[];if(c.length>0){for(var u=!1,l=!1,d=0;d<c.length;++d){var f=c[d];if(u||f.type!==n.pki.oids.contentType){if(l||f.type!==n.pki.oids.messageDigest);else if(l=!0,u)break}else if(u=!0,l)break}if(!u||!l)throw new Error("Invalid signer.authenticatedAttributes. If "+"signer.authenticatedAttributes is specified, then it must "+"contain at least two attributes, PKCS #9 content-type and "+"PKCS #9 message-digest.")}e.signers.push({key:o,version:1,issuer:r,serialNumber:i,digestAlgorithm:a,signatureAlgorithm:n.pki.oids.rsaEncryption,signature:null,authenticatedAttributes:c,unauthenticatedAttributes:[]})},sign:function(t){var r;(t=t||{},"object"!=typeof e.content||null===e.contentInfo)&&(e.contentInfo=i.create(i.Class.UNIVERSAL,i.Type.SEQUENCE,!0,[i.create(i.Class.UNIVERSAL,i.Type.OID,!1,i.oidToDer(n.pki.oids.data).getBytes())]),"content"in e&&(e.content instanceof n.util.ByteBuffer?r=e.content.bytes():"string"==typeof e.content&&(r=n.util.encodeUtf8(e.content)),t.detached?e.detachedContent=i.create(i.Class.UNIVERSAL,i.Type.OCTETSTRING,!1,r):e.contentInfo.value.push(i.create(i.Class.CONTEXT_SPECIFIC,0,!0,[i.create(i.Class.UNIVERSAL,i.Type.OCTETSTRING,!1,r)]))));0!==e.signers.length&&function(t){var r;r=e.detachedContent?e.detachedContent:(r=e.contentInfo.value[1]).value[0];if(!r)throw new Error("Could not sign PKCS#7 message; there is no content to sign.");var s=i.derToOid(e.contentInfo.value[0].value),o=i.toDer(r);for(var a in o.getByte(),i.getBerValueLength(o),o=o.getBytes(),t)t[a].start().update(o);for(var l=new Date,d=0;d<e.signers.length;++d){var f=e.signers[d];if(0===f.authenticatedAttributes.length){if(s!==n.pki.oids.data)throw new Error("Invalid signer; authenticatedAttributes must be present "+"when the ContentInfo content type is not PKCS#7 Data.")}else{f.authenticatedAttributesAsn1=i.create(i.Class.CONTEXT_SPECIFIC,0,!0,[]);for(var h=i.create(i.Class.UNIVERSAL,i.Type.SET,!0,[]),p=0;p<f.authenticatedAttributes.length;++p){var m=f.authenticatedAttributes[p];m.type===n.pki.oids.messageDigest?m.value=t[f.digestAlgorithm].digest():m.type===n.pki.oids.signingTime&&(m.value||(m.value=l)),h.value.push(u(m)),f.authenticatedAttributesAsn1.value.push(u(m))}o=i.toDer(h).getBytes(),f.md.start().update(o)}f.signature=f.key.sign(f.md,"RSASSA-PKCS1-V1_5")}e.signerInfos=function(e){for(var t=[],r=0;r<e.length;++r)t.push(c(e[r]));return t}(e.signers)}(function(){for(var t={},r=0;r<e.signers.length;++r){var s=e.signers[r];(o=s.digestAlgorithm)in t||(t[o]=n.md[n.pki.oids[o]].create()),0===s.authenticatedAttributes.length?s.md=t[o]:s.md=n.md[n.pki.oids[o]].create()}for(var o in e.digestAlgorithmIdentifiers=[],t)e.digestAlgorithmIdentifiers.push(i.create(i.Class.UNIVERSAL,i.Type.SEQUENCE,!0,[i.create(i.Class.UNIVERSAL,i.Type.OID,!1,i.oidToDer(o).getBytes()),i.create(i.Class.UNIVERSAL,i.Type.NULL,!1,"")]));return t}())},verify:function(){throw new Error("PKCS#7 signature verification not yet implemented.")},addCertificate:function(t){"string"==typeof t&&(t=n.pki.certificateFromPem(t)),e.certificates.push(t)},addCertificateRevokationList:function(e){throw new Error("PKCS#7 CRL support not yet implemented.")}}},s.createEncryptedData=function(){var e=null;return e={type:n.pki.oids.encryptedData,version:0,encryptedContent:{algorithm:n.pki.oids["aes256-CBC"]},fromAsn1:function(t){l(e,t,s.asn1.encryptedDataValidator)},decrypt:function(t){t!==undefined&&(e.encryptedContent.key=t),d(e)}}},s.createEnvelopedData=function(){var e=null;return e={type:n.pki.oids.envelopedData,version:0,recipients:[],encryptedContent:{algorithm:n.pki.oids["aes256-CBC"]},fromAsn1:function(t){var r=l(e,t,s.asn1.envelopedDataValidator);e.recipients=function(e){for(var t=[],r=0;r<e.length;++r)t.push(o(e[r]));return t}(r.recipientInfos.value)},toAsn1:function(){return i.create(i.Class.UNIVERSAL,i.Type.SEQUENCE,!0,[i.create(i.Class.UNIVERSAL,i.Type.OID,!1,i.oidToDer(e.type).getBytes()),i.create(i.Class.CONTEXT_SPECIFIC,0,!0,[i.create(i.Class.UNIVERSAL,i.Type.SEQUENCE,!0,[i.create(i.Class.UNIVERSAL,i.Type.INTEGER,!1,i.integerToDer(e.version).getBytes()),i.create(i.Class.UNIVERSAL,i.Type.SET,!0,a(e.recipients)),i.create(i.Class.UNIVERSAL,i.Type.SEQUENCE,!0,(t=e.encryptedContent,[i.create(i.Class.UNIVERSAL,i.Type.OID,!1,i.oidToDer(n.pki.oids.data).getBytes()),i.create(i.Class.UNIVERSAL,i.Type.SEQUENCE,!0,[i.create(i.Class.UNIVERSAL,i.Type.OID,!1,i.oidToDer(t.algorithm).getBytes()),t.parameter?i.create(i.Class.UNIVERSAL,i.Type.OCTETSTRING,!1,t.parameter.getBytes()):undefined]),i.create(i.Class.CONTEXT_SPECIFIC,0,!0,[i.create(i.Class.UNIVERSAL,i.Type.OCTETSTRING,!1,t.content.getBytes())])]))])])]);var t},findRecipient:function(t){for(var r=t.issuer.attributes,n=0;n<e.recipients.length;++n){var i=e.recipients[n],s=i.issuer;if(i.serialNumber===t.serialNumber&&s.length===r.length){for(var o=!0,a=0;a<r.length;++a)if(s[a].type!==r[a].type||s[a].value!==r[a].value){o=!1;break}if(o)return i}}return null},decrypt:function(t,r){if(e.encryptedContent.key===undefined&&t!==undefined&&r!==undefined)switch(t.encryptedContent.algorithm){case n.pki.oids.rsaEncryption:case n.pki.oids.desCBC:var i=r.decrypt(t.encryptedContent.content);e.encryptedContent.key=n.util.createBuffer(i);break;default:throw new Error("Unsupported asymmetric cipher, "+"OID "+t.encryptedContent.algorithm)}d(e)},addRecipient:function(t){e.recipients.push({version:0,issuer:t.issuer.attributes,serialNumber:t.serialNumber,encryptedContent:{algorithm:n.pki.oids.rsaEncryption,key:t.publicKey}})},encrypt:function(t,r){if(e.encryptedContent.content===undefined){var i,s,o;switch(r=r||e.encryptedContent.algorithm,t=t||e.encryptedContent.key,r){case n.pki.oids["aes128-CBC"]:i=16,s=16,o=n.aes.createEncryptionCipher;break;case n.pki.oids["aes192-CBC"]:i=24,s=16,o=n.aes.createEncryptionCipher;break;case n.pki.oids["aes256-CBC"]:i=32,s=16,o=n.aes.createEncryptionCipher;break;case n.pki.oids["des-EDE3-CBC"]:i=24,s=8,o=n.des.createEncryptionCipher;break;default:throw new Error("Unsupported symmetric cipher, OID "+r)}if(t===undefined)t=n.util.createBuffer(n.random.getBytes(i));else if(t.length()!=i)throw new Error("Symmetric key has wrong length; "+"got "+t.length()+" bytes, expected "+i+".");e.encryptedContent.algorithm=r,e.encryptedContent.key=t,e.encryptedContent.parameter=n.util.createBuffer(n.random.getBytes(s));var a=o(t);if(a.start(e.encryptedContent.parameter.copy()),a.update(e.content),!a.finish())throw new Error("Symmetric encryption failed.");e.encryptedContent.content=a.output}for(var c=0;c<e.recipients.length;++c){var u=e.recipients[c];if(u.encryptedContent.content===undefined){if(u.encryptedContent.algorithm!==n.pki.oids.rsaEncryption)throw new Error("Unsupported asymmetric cipher, OID "+u.encryptedContent.algorithm);u.encryptedContent.content=u.encryptedContent.key.encrypt(e.encryptedContent.key.data)}}}}}}}},{package:"node-forge",file:"/home/circleci/project/node_modules/node-forge/lib/pkcs7.js"}],[4830,{"node-forge/lib/forge":5146,"node-forge/lib/x509":5169},function(){with(this)return function(){"use strict";return function(e,t,r){e("node-forge/lib/x509");const n=e("node-forge/lib/forge").pki;t.exports.certificateForKey=(e,t,r)=>{const i=n.setRsaPublicKey(t.n,t.e),s=n.createCertificate();s.publicKey=i,s.serialNumber="01",s.validity.notBefore=new Date,s.validity.notAfter=new Date,s.validity.notAfter.setFullYear(s.validity.notBefore.getFullYear()+10);const o=[{name:"organizationName",value:"ipfs"},{shortName:"OU",value:"keystore"},{name:"commonName",value:e.id}];return s.setSubject(o),s.setIssuer(o),s.setExtensions([{name:"basicConstraints",cA:!0},{name:"keyUsage",keyCertSign:!0,digitalSignature:!0,nonRepudiation:!0,keyEncipherment:!0,dataEncipherment:!0},{name:"extKeyUsage",serverAuth:!0,clientAuth:!0,codeSigning:!0,emailProtection:!0,timeStamping:!0},{name:"nsCertType",client:!0,server:!0,email:!0,objsign:!0,sslCA:!0,emailCA:!0,objCA:!0}]),s.sign(t),r(null,s)}}}},{package:"libp2p-keychain",file:"/home/circleci/project/node_modules/libp2p-keychain/src/util.js"}],[4360,{assert:1647,cids:2064},function(){with(this)return function(){"use strict";return function(e,t,r){const n=e("assert"),i=e("cids");class s{constructor(e,t){n(i.isCID(e),"must be valid CID"),this._refCounter=1,this.cid=e,this.priority=t||1}inc(){this._refCounter+=1}dec(){this._refCounter=Math.max(0,this._refCounter-1)}hasRefs(){return this._refCounter>0}get[Symbol.toStringTag](){return`WantlistEntry <key: ${this.cid.toBaseEncodedString()}, priority: ${this.priority}, refs: ${this._refCounter}>`}equals(e){return this._refCounter===e._refCounter&&this.cid.equals(e.cid)&&this.priority===e.priority}}t.exports=s}}},{package:"ipfs-bitswap",file:"/home/circleci/project/node_modules/ipfs-bitswap/src/types/wantlist/entry.js"}],[4359,{},function(){with(this)return function(){"use strict";return function(e,t,r){t.exports="\n  message Message {\n    message Wantlist {\n      message Entry {\n        // changed from string to bytes, it makes a difference in JavaScript\n        optional bytes block = 1;      // the block cid (cidV0 in bitswap 1.0.0, cidV1 in bitswap 1.1.0)\n        optional int32 priority = 2;    // the priority (normalized). default to 1\n        optional bool cancel = 3;       // whether this revokes an entry\n      }\n\n      repeated Entry entries = 1;       // a list of wantlist entries\n      optional bool full = 2;           // whether this is the full wantlist. default to false\n    }\n\n    message Block {\n      optional bytes prefix = 1;        // CID prefix (cid version, multicodec and multihash prefix (type + length)\n      optional bytes data = 2;\n    }\n\n    optional Wantlist wantlist = 1;\n    repeated bytes blocks = 2;          // used to send Blocks in bitswap 1.0.0\n    repeated Block payload = 3;         // used to send Blocks in bitswap 1.1.0\n  }\n"}}},{package:"ipfs-bitswap",file:"/home/circleci/project/node_modules/ipfs-bitswap/src/types/message/message.proto.js"}],[4921,{},function(){with(this)return function(){"use strict";return function(e,t,r){var n="__lodash_hash_undefined__",i=9007199254740991,s="[object Arguments]",o="[object Array]",a="[object Boolean]",c="[object Date]",u="[object Error]",l="[object Function]",d="[object Map]",f="[object Number]",h="[object Object]",p="[object Promise]",m="[object RegExp]",g="[object Set]",y="[object String]",b="[object Symbol]",_="[object WeakMap]",w="[object ArrayBuffer]",v="[object DataView]",E=/^\[object .+?Constructor\]$/,S=/^(?:0|[1-9]\d*)$/,C={};C["[object Float32Array]"]=C["[object Float64Array]"]=C["[object Int8Array]"]=C["[object Int16Array]"]=C["[object Int32Array]"]=C["[object Uint8Array]"]=C["[object Uint8ClampedArray]"]=C["[object Uint16Array]"]=C["[object Uint32Array]"]=!0,C[s]=C[o]=C[w]=C[a]=C[v]=C[c]=C[u]=C[l]=C[d]=C[f]=C[h]=C[m]=C[g]=C[y]=C[_]=!1;var k="object"==typeof global&&global&&global.Object===Object&&global,I="object"==typeof self&&self&&self.Object===Object&&self,T=k||I||Function("return this")(),A="object"==typeof r&&r&&!r.nodeType&&r,R=A&&"object"==typeof t&&t&&!t.nodeType&&t,j=R&&R.exports===A&&k.process,x=function(){try{return j&&j.binding("util")}catch(e){}}(),N=x&&x.isTypedArray;function P(e,t){for(var r=-1,n=e?e.length:0;++r<n;)if(t(e[r],r,e))return!0;return!1}function L(e){var t=!1;if(null!=e&&"function"!=typeof e.toString)try{t=!!(e+"")}catch(e){}return t}function O(e){var t=-1,r=Array(e.size);return e.forEach((function(e,n){r[++t]=[n,e]})),r}function D(e){var t=-1,r=Array(e.size);return e.forEach((function(e){r[++t]=e})),r}var B,M,U,F=Array.prototype,V=Function.prototype,q=Object.prototype,K=T["__core-js_shared__"],G=(B=/[^.]+$/.exec(K&&K.keys&&K.keys.IE_PROTO||""))?"Symbol(src)_1."+B:"",$=V.toString,H=q.hasOwnProperty,W=q.toString,z=RegExp("^"+$.call(H).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Y=T.Symbol,Q=T.Uint8Array,X=q.propertyIsEnumerable,Z=F.splice,J=(M=Object.keys,U=Object,function(e){return M(U(e))}),ee=ke(T,"DataView"),te=ke(T,"Map"),re=ke(T,"Promise"),ne=ke(T,"Set"),ie=ke(T,"WeakMap"),se=ke(Object,"create"),oe=Ae(ee),ae=Ae(te),ce=Ae(re),ue=Ae(ne),le=Ae(ie),de=Y?Y.prototype:undefined,fe=de?de.valueOf:undefined;function he(e){var t=-1,r=e?e.length:0;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}function pe(e){var t=-1,r=e?e.length:0;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}function me(e){var t=-1,r=e?e.length:0;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}function ge(e){var t=-1,r=e?e.length:0;for(this.__data__=new me;++t<r;)this.add(e[t])}function ye(e){this.__data__=new pe(e)}function be(e,t){var r=je(e)||function(e){return function(e){return Oe(e)&&xe(e)}(e)&&H.call(e,"callee")&&(!X.call(e,"callee")||W.call(e)==s)}(e)?function(e,t){for(var r=-1,n=Array(e);++r<e;)n[r]=t(r);return n}(e.length,String):[],n=r.length,i=!!n;for(var o in e)!t&&!H.call(e,o)||i&&("length"==o||Te(o,n))||r.push(o);return r}function _e(e,t){for(var r=e.length;r--;)if(Re(e[r][0],t))return r;return-1}function we(e,t,r,n,i){return e===t||(null==e||null==t||!Le(e)&&!Oe(t)?e!=e&&t!=t:function(e,t,r,n,i,l){var p=je(e),_=je(t),E=o,S=o;p||(E=(E=Ie(e))==s?h:E);_||(S=(S=Ie(t))==s?h:S);var C=E==h&&!L(e),k=S==h&&!L(t),I=E==S;if(I&&!C)return l||(l=new ye),p||De(e)?Se(e,t,r,n,i,l):function(e,t,r,n,i,s,o){switch(r){case v:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case w:return!(e.byteLength!=t.byteLength||!n(new Q(e),new Q(t)));case a:case c:case f:return Re(+e,+t);case u:return e.name==t.name&&e.message==t.message;case m:case y:return e==t+"";case d:var l=O;case g:var h=2&s;if(l||(l=D),e.size!=t.size&&!h)return!1;var p=o.get(e);if(p)return p==t;s|=1,o.set(e,t);var _=Se(l(e),l(t),n,i,s,o);return o.delete(e),_;case b:if(fe)return fe.call(e)==fe.call(t)}return!1}(e,t,E,r,n,i,l);if(!(2&i)){var T=C&&H.call(e,"__wrapped__"),A=k&&H.call(t,"__wrapped__");if(T||A){var R=T?e.value():e,j=A?t.value():t;return l||(l=new ye),r(R,j,n,i,l)}}if(!I)return!1;return l||(l=new ye),function(e,t,r,n,i,s){var o=2&i,a=Be(e),c=a.length,u=Be(t).length;if(c!=u&&!o)return!1;var l=c;for(;l--;){var d=a[l];if(!(o?d in t:H.call(t,d)))return!1}var f=s.get(e);if(f&&s.get(t))return f==t;var h=!0;s.set(e,t),s.set(t,e);var p=o;for(;++l<c;){var m=e[d=a[l]],g=t[d];if(n)var y=o?n(g,m,d,t,e,s):n(m,g,d,e,t,s);if(!(y===undefined?m===g||r(m,g,n,i,s):y)){h=!1;break}p||(p="constructor"==d)}if(h&&!p){var b=e.constructor,_=t.constructor;b==_||!("constructor"in e)||!("constructor"in t)||"function"==typeof b&&b instanceof b&&"function"==typeof _&&_ instanceof _||(h=!1)}return s.delete(e),s.delete(t),h}(e,t,r,n,i,l)}(e,t,we,r,n,i))}function ve(e){return!(!Le(e)||function(e){return!!G&&G in e}(e))&&(Ne(e)||L(e)?z:E).test(Ae(e))}function Ee(e){if(r=(t=e)&&t.constructor,n="function"==typeof r&&r.prototype||q,t!==n)return J(e);var t,r,n,i=[];for(var s in Object(e))H.call(e,s)&&"constructor"!=s&&i.push(s);return i}function Se(e,t,r,n,i,s){var o=2&i,a=e.length,c=t.length;if(a!=c&&!(o&&c>a))return!1;var u=s.get(e);if(u&&s.get(t))return u==t;var l=-1,d=!0,f=1&i?new ge:undefined;for(s.set(e,t),s.set(t,e);++l<a;){var h=e[l],p=t[l];if(n)var m=o?n(p,h,l,t,e,s):n(h,p,l,e,t,s);if(m!==undefined){if(m)continue;d=!1;break}if(f){if(!P(t,(function(e,t){if(!f.has(t)&&(h===e||r(h,e,n,i,s)))return f.add(t)}))){d=!1;break}}else if(h!==p&&!r(h,p,n,i,s)){d=!1;break}}return s.delete(e),s.delete(t),d}function Ce(e,t){var r,n,i=e.__data__;return("string"==(n=typeof(r=t))||"number"==n||"symbol"==n||"boolean"==n?"__proto__"!==r:null===r)?i["string"==typeof t?"string":"hash"]:i.map}function ke(e,t){var r=function(e,t){return null==e?undefined:e[t]}(e,t);return ve(r)?r:undefined}he.prototype.clear=function(){this.__data__=se?se(null):{}},he.prototype.delete=function(e){return this.has(e)&&delete this.__data__[e]},he.prototype.get=function(e){var t=this.__data__;if(se){var r=t[e];return r===n?undefined:r}return H.call(t,e)?t[e]:undefined},he.prototype.has=function(e){var t=this.__data__;return se?t[e]!==undefined:H.call(t,e)},he.prototype.set=function(e,t){return this.__data__[e]=se&&t===undefined?n:t,this},pe.prototype.clear=function(){this.__data__=[]},pe.prototype.delete=function(e){var t=this.__data__,r=_e(t,e);return!(r<0)&&(r==t.length-1?t.pop():Z.call(t,r,1),!0)},pe.prototype.get=function(e){var t=this.__data__,r=_e(t,e);return r<0?undefined:t[r][1]},pe.prototype.has=function(e){return _e(this.__data__,e)>-1},pe.prototype.set=function(e,t){var r=this.__data__,n=_e(r,e);return n<0?r.push([e,t]):r[n][1]=t,this},me.prototype.clear=function(){this.__data__={hash:new he,map:new(te||pe),string:new he}},me.prototype.delete=function(e){return Ce(this,e).delete(e)},me.prototype.get=function(e){return Ce(this,e).get(e)},me.prototype.has=function(e){return Ce(this,e).has(e)},me.prototype.set=function(e,t){return Ce(this,e).set(e,t),this},ge.prototype.add=ge.prototype.push=function(e){return this.__data__.set(e,n),this},ge.prototype.has=function(e){return this.__data__.has(e)},ye.prototype.clear=function(){this.__data__=new pe},ye.prototype.delete=function(e){return this.__data__.delete(e)},ye.prototype.get=function(e){return this.__data__.get(e)},ye.prototype.has=function(e){return this.__data__.has(e)},ye.prototype.set=function(e,t){var r=this.__data__;if(r instanceof pe){var n=r.__data__;if(!te||n.length<199)return n.push([e,t]),this;r=this.__data__=new me(n)}return r.set(e,t),this};var Ie=function(e){return W.call(e)};function Te(e,t){return!!(t=null==t?i:t)&&("number"==typeof e||S.test(e))&&e>-1&&e%1==0&&e<t}function Ae(e){if(null!=e){try{return $.call(e)}catch(e){}try{return e+""}catch(e){}}return""}function Re(e,t){return e===t||e!=e&&t!=t}(ee&&Ie(new ee(new ArrayBuffer(1)))!=v||te&&Ie(new te)!=d||re&&Ie(re.resolve())!=p||ne&&Ie(new ne)!=g||ie&&Ie(new ie)!=_)&&(Ie=function(e){var t=W.call(e),r=t==h?e.constructor:undefined,n=r?Ae(r):undefined;if(n)switch(n){case oe:return v;case ae:return d;case ce:return p;case ue:return g;case le:return _}return t});var je=Array.isArray;function xe(e){return null!=e&&Pe(e.length)&&!Ne(e)}function Ne(e){var t=Le(e)?W.call(e):"";return t==l||"[object GeneratorFunction]"==t}function Pe(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=i}function Le(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function Oe(e){return!!e&&"object"==typeof e}var De=N?function(e){return function(t){return e(t)}}(N):function(e){return Oe(e)&&Pe(e.length)&&!!C[W.call(e)]};function Be(e){return xe(e)?be(e):Ee(e)}t.exports=function(e,t,r){var n=(r="function"==typeof r?r:undefined)?r(e,t):undefined;return n===undefined?we(e,t,r):!!n}}}},{package:"lodash.isequalwith",file:"/home/circleci/project/node_modules/lodash.isequalwith/index.js"}],[4357,{"../wantlist":4361,assert:1647,cids:2064},function(){with(this)return function(){"use strict";return function(e,t,r){const n=e("../wantlist").Entry,i=e("cids"),s=e("assert");t.exports=class{constructor(e,t,r){s(i.isCID(e),"needs valid cid"),this.entry=new n(e,t),this.cancel=Boolean(r)}get cid(){return this.entry.cid}set cid(e){this.entry.cid=e}get priority(){return this.entry.priority}set priority(e){this.entry.priority=e}get[Symbol.toStringTag](){return`BitswapMessageEntry ${this.cid.toBaseEncodedString()} <cancel: ${this.cancel}, priority: ${this.priority}>`}equals(e){return this.cancel===e.cancel&&this.entry.equals(e.entry)}}}}},{package:"ipfs-bitswap",file:"/home/circleci/project/node_modules/ipfs-bitswap/src/types/message/entry.js"}],[5865,{"../../is-buffer/index.js":4611,varint:5868},function(){with(this)return function(){"use strict";return function(e,t,r){(function(r){(function(){const n=e("varint");t.exports=e=>{if(!r.isBuffer(e))throw new Error("arg needs to be a buffer");let t=[];for(;e.length>0;){const r=n.decode(e);t.push(r),e=e.slice(n.decode.bytes)}return t}}).call(this)}).call(this,{isBuffer:e("../../is-buffer/index.js")})}}},{package:"varint-decoder",file:"/home/circleci/project/node_modules/varint-decoder/src/index.js"}],[4347,{"./crypto":4346,buffer:2028,multihashes:5111},function(){with(this)return function(){"use strict";return function(e,t,r){(function(r){(function(){const n=e("multihashes"),i=e("./crypto");function s(e,t,r,i){if("function"==typeof r&&(i=r,r=undefined),!i)throw new Error("Missing callback");s.digest(e,t,r,((e,s)=>{if(e)return i(e);i(null,n.encode(s,t,r))}))}t.exports=s,s.Buffer=r,s.multihash=n,s.digest=function(e,t,r,n){if("function"==typeof r&&(n=r,r=undefined),!n)throw new Error("Missing callback");let i,o=n;r&&(o=(e,t)=>{if(e)return n(e);n(null,t.slice(0,r))});try{i=s.createHash(t)}catch(e){return o(e)}i(e,o)},s.createHash=function(e){if(e=n.coerceCode(e),!s.functions[e])throw new Error("multihash function "+e+" not yet supported");return s.functions[e]},s.functions={17:i.sha1,18:i.sha2256,19:i.sha2512,20:i.sha3512,21:i.sha3384,22:i.sha3256,23:i.sha3224,24:i.shake128,25:i.shake256,26:i.keccak224,27:i.keccak256,28:i.keccak384,29:i.keccak512,34:i.murmur3128,35:i.murmur332,86:i.dblSha2256},i.addBlake(s.functions)}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"multihashing-async",file:"/home/circleci/project/node_modules/ipfs-bitswap/node_modules/multihashing-async/src/index.js"}],[4343,{},function(){with(this)return function(){"use strict";return function(e,t,r){!function(e){var r,n=/^-?(?:\d+(?:\.\d*)?|\.\d+)(?:e[+-]?\d+)?$/i,i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator,s=Math.ceil,o=Math.floor,a="[BigNumber Error] ",c=a+"Number primitive has more than 15 significant digits: ",u=1e14,l=14,d=9007199254740991,f=[1,10,100,1e3,1e4,1e5,1e6,1e7,1e8,1e9,1e10,1e11,1e12,1e13],h=1e7,p=1e9;function m(e){var t=0|e;return e>0||e===t?t:t-1}function g(e){for(var t,r,n=1,i=e.length,s=e[0]+"";n<i;){for(t=e[n++]+"",r=l-t.length;r--;t="0"+t);s+=t}for(i=s.length;48===s.charCodeAt(--i););return s.slice(0,i+1||1)}function y(e,t){var r,n,i=e.c,s=t.c,o=e.s,a=t.s,c=e.e,u=t.e;if(!o||!a)return null;if(r=i&&!i[0],n=s&&!s[0],r||n)return r?n?0:-a:o;if(o!=a)return o;if(r=o<0,n=c==u,!i||!s)return n?0:!i^r?1:-1;if(!n)return c>u^r?1:-1;for(a=(c=i.length)<(u=s.length)?c:u,o=0;o<a;o++)if(i[o]!=s[o])return i[o]>s[o]^r?1:-1;return c==u?0:c>u^r?1:-1}function b(e,t,r,n){if(e<t||e>r||e!==o(e))throw Error(a+(n||"Argument")+("number"==typeof e?e<t||e>r?" out of range: ":" not an integer: ":" not a primitive number: ")+String(e))}function _(e){var t=e.c.length-1;return m(e.e/l)==t&&e.c[t]%2!=0}function w(e,t){return(e.length>1?e.charAt(0)+"."+e.slice(1):e)+(t<0?"e":"e+")+t}function v(e,t,r){var n,i;if(t<0){for(i=r+".";++t;i+=r);e=i+e}else if(++t>(n=e.length)){for(i=r,t-=n;--t;i+=r);e+=i}else t<n&&(e=e.slice(0,t)+"."+e.slice(t));return e}r=function e(t){var r,E,S,C,k,I,T,A,R,j,x=G.prototype={constructor:G,toString:null,valueOf:null},N=new G(1),P=20,L=4,O=-7,D=21,B=-1e7,M=1e7,U=!1,F=1,V=0,q={prefix:"",groupSize:3,secondaryGroupSize:0,groupSeparator:",",decimalSeparator:".",fractionGroupSize:0,fractionGroupSeparator:" ",suffix:""},K="0123456789abcdefghijklmnopqrstuvwxyz";function G(e,t){var r,i,s,a,u,f,h,p,m=this;if(!(m instanceof G))return new G(e,t);if(null==t){if(e&&!0===e._isBigNumber)return m.s=e.s,void(!e.c||e.e>M?m.c=m.e=null:e.e<B?m.c=[m.e=0]:(m.e=e.e,m.c=e.c.slice()));if((f="number"==typeof e)&&0*e==0){if(m.s=1/e<0?(e=-e,-1):1,e===~~e){for(a=0,u=e;u>=10;u/=10,a++);return void(a>M?m.c=m.e=null:(m.e=a,m.c=[e]))}p=String(e)}else{if(!n.test(p=String(e)))return S(m,p,f);m.s=45==p.charCodeAt(0)?(p=p.slice(1),-1):1}(a=p.indexOf("."))>-1&&(p=p.replace(".","")),(u=p.search(/e/i))>0?(a<0&&(a=u),a+=+p.slice(u+1),p=p.substring(0,u)):a<0&&(a=p.length)}else{if(b(t,2,K.length,"Base"),10==t)return z(m=new G(e),P+m.e+1,L);if(p=String(e),f="number"==typeof e){if(0*e!=0)return S(m,p,f,t);if(m.s=1/e<0?(p=p.slice(1),-1):1,G.DEBUG&&p.replace(/^0\.0*|\./,"").length>15)throw Error(c+e)}else m.s=45===p.charCodeAt(0)?(p=p.slice(1),-1):1;for(r=K.slice(0,t),a=u=0,h=p.length;u<h;u++)if(r.indexOf(i=p.charAt(u))<0){if("."==i){if(u>a){a=h;continue}}else if(!s&&(p==p.toUpperCase()&&(p=p.toLowerCase())||p==p.toLowerCase()&&(p=p.toUpperCase()))){s=!0,u=-1,a=0;continue}return S(m,String(e),f,t)}f=!1,(a=(p=E(p,t,10,m.s)).indexOf("."))>-1?p=p.replace(".",""):a=p.length}for(u=0;48===p.charCodeAt(u);u++);for(h=p.length;48===p.charCodeAt(--h););if(p=p.slice(u,++h)){if(h-=u,f&&G.DEBUG&&h>15&&(e>d||e!==o(e)))throw Error(c+m.s*e);if((a=a-u-1)>M)m.c=m.e=null;else if(a<B)m.c=[m.e=0];else{if(m.e=a,m.c=[],u=(a+1)%l,a<0&&(u+=l),u<h){for(u&&m.c.push(+p.slice(0,u)),h-=l;u<h;)m.c.push(+p.slice(u,u+=l));u=l-(p=p.slice(u)).length}else u-=h;for(;u--;p+="0");m.c.push(+p)}}else m.c=[m.e=0]}function $(e,t,r,n){var i,s,o,a,c;if(null==r?r=L:b(r,0,8),!e.c)return e.toString();if(i=e.c[0],o=e.e,null==t)c=g(e.c),c=1==n||2==n&&(o<=O||o>=D)?w(c,o):v(c,o,"0");else if(s=(e=z(new G(e),t,r)).e,a=(c=g(e.c)).length,1==n||2==n&&(t<=s||s<=O)){for(;a<t;c+="0",a++);c=w(c,s)}else if(t-=o,c=v(c,s,"0"),s+1>a){if(--t>0)for(c+=".";t--;c+="0");}else if((t+=s-a)>0)for(s+1==a&&(c+=".");t--;c+="0");return e.s<0&&i?"-"+c:c}function H(e,t){for(var r,n=1,i=new G(e[0]);n<e.length;n++){if(!(r=new G(e[n])).s){i=r;break}t.call(i,r)&&(i=r)}return i}function W(e,t,r){for(var n=1,i=t.length;!t[--i];t.pop());for(i=t[0];i>=10;i/=10,n++);return(r=n+r*l-1)>M?e.c=e.e=null:r<B?e.c=[e.e=0]:(e.e=r,e.c=t),e}function z(e,t,r,n){var i,a,c,d,h,p,m,g=e.c,y=f;if(g){e:{for(i=1,d=g[0];d>=10;d/=10,i++);if((a=t-i)<0)a+=l,c=t,m=(h=g[p=0])/y[i-c-1]%10|0;else if((p=s((a+1)/l))>=g.length){if(!n)break e;for(;g.length<=p;g.push(0));h=m=0,i=1,c=(a%=l)-l+1}else{for(h=d=g[p],i=1;d>=10;d/=10,i++);m=(c=(a%=l)-l+i)<0?0:h/y[i-c-1]%10|0}if(n=n||t<0||null!=g[p+1]||(c<0?h:h%y[i-c-1]),n=r<4?(m||n)&&(0==r||r==(e.s<0?3:2)):m>5||5==m&&(4==r||n||6==r&&(a>0?c>0?h/y[i-c]:0:g[p-1])%10&1||r==(e.s<0?8:7)),t<1||!g[0])return g.length=0,n?(t-=e.e+1,g[0]=y[(l-t%l)%l],e.e=-t||0):g[0]=e.e=0,e;if(0==a?(g.length=p,d=1,p--):(g.length=p+1,d=y[l-a],g[p]=c>0?o(h/y[i-c]%y[c])*d:0),n)for(;;){if(0==p){for(a=1,c=g[0];c>=10;c/=10,a++);for(c=g[0]+=d,d=1;c>=10;c/=10,d++);a!=d&&(e.e++,g[0]==u&&(g[0]=1));break}if(g[p]+=d,g[p]!=u)break;g[p--]=0,d=1}for(a=g.length;0===g[--a];g.pop());}e.e>M?e.c=e.e=null:e.e<B&&(e.c=[e.e=0])}return e}function Y(e){var t,r=e.e;return null===r?e.toString():(t=g(e.c),t=r<=O||r>=D?w(t,r):v(t,r,"0"),e.s<0?"-"+t:t)}return G.clone=e,G.ROUND_UP=0,G.ROUND_DOWN=1,G.ROUND_CEIL=2,G.ROUND_FLOOR=3,G.ROUND_HALF_UP=4,G.ROUND_HALF_DOWN=5,G.ROUND_HALF_EVEN=6,G.ROUND_HALF_CEIL=7,G.ROUND_HALF_FLOOR=8,G.EUCLID=9,G.config=G.set=function(e){var t,r;if(null!=e){if("object"!=typeof e)throw Error(a+"Object expected: "+e);if(e.hasOwnProperty(t="DECIMAL_PLACES")&&(b(r=e[t],0,p,t),P=r),e.hasOwnProperty(t="ROUNDING_MODE")&&(b(r=e[t],0,8,t),L=r),e.hasOwnProperty(t="EXPONENTIAL_AT")&&((r=e[t])&&r.pop?(b(r[0],-p,0,t),b(r[1],0,p,t),O=r[0],D=r[1]):(b(r,-p,p,t),O=-(D=r<0?-r:r))),e.hasOwnProperty(t="RANGE"))if((r=e[t])&&r.pop)b(r[0],-p,-1,t),b(r[1],1,p,t),B=r[0],M=r[1];else{if(b(r,-p,p,t),!r)throw Error(a+t+" cannot be zero: "+r);B=-(M=r<0?-r:r)}if(e.hasOwnProperty(t="CRYPTO")){if((r=e[t])!==!!r)throw Error(a+t+" not true or false: "+r);if(r){if("undefined"==typeof crypto||!crypto||!crypto.getRandomValues&&!crypto.randomBytes)throw U=!r,Error(a+"crypto unavailable");U=r}else U=r}if(e.hasOwnProperty(t="MODULO_MODE")&&(b(r=e[t],0,9,t),F=r),e.hasOwnProperty(t="POW_PRECISION")&&(b(r=e[t],0,p,t),V=r),e.hasOwnProperty(t="FORMAT")){if("object"!=typeof(r=e[t]))throw Error(a+t+" not an object: "+r);q=r}if(e.hasOwnProperty(t="ALPHABET")){if("string"!=typeof(r=e[t])||/^.$|[+-.\s]|(.).*\1/.test(r))throw Error(a+t+" invalid: "+r);K=r}}return{DECIMAL_PLACES:P,ROUNDING_MODE:L,EXPONENTIAL_AT:[O,D],RANGE:[B,M],CRYPTO:U,MODULO_MODE:F,POW_PRECISION:V,FORMAT:q,ALPHABET:K}},G.isBigNumber=function(e){if(!e||!0!==e._isBigNumber)return!1;if(!G.DEBUG)return!0;var t,r,n=e.c,i=e.e,s=e.s;e:if("[object Array]"=={}.toString.call(n)){if((1===s||-1===s)&&i>=-p&&i<=p&&i===o(i)){if(0===n[0]){if(0===i&&1===n.length)return!0;break e}if((t=(i+1)%l)<1&&(t+=l),String(n[0]).length==t){for(t=0;t<n.length;t++)if((r=n[t])<0||r>=u||r!==o(r))break e;if(0!==r)return!0}}}else if(null===n&&null===i&&(null===s||1===s||-1===s))return!0;throw Error(a+"Invalid BigNumber: "+e)},G.maximum=G.max=function(){return H(arguments,x.lt)},G.minimum=G.min=function(){return H(arguments,x.gt)},G.random=(C=9007199254740992,k=Math.random()*C&2097151?function(){return o(Math.random()*C)}:function(){return 8388608*(1073741824*Math.random()|0)+(8388608*Math.random()|0)},function(e){var t,r,n,i,c,u=0,d=[],h=new G(N);if(null==e?e=P:b(e,0,p),i=s(e/l),U)if(crypto.getRandomValues){for(t=crypto.getRandomValues(new Uint32Array(i*=2));u<i;)(c=131072*t[u]+(t[u+1]>>>11))>=9e15?(r=crypto.getRandomValues(new Uint32Array(2)),t[u]=r[0],t[u+1]=r[1]):(d.push(c%1e14),u+=2);u=i/2}else{if(!crypto.randomBytes)throw U=!1,Error(a+"crypto unavailable");for(t=crypto.randomBytes(i*=7);u<i;)(c=281474976710656*(31&t[u])+1099511627776*t[u+1]+4294967296*t[u+2]+16777216*t[u+3]+(t[u+4]<<16)+(t[u+5]<<8)+t[u+6])>=9e15?crypto.randomBytes(7).copy(t,u):(d.push(c%1e14),u+=7);u=i/7}if(!U)for(;u<i;)(c=k())<9e15&&(d[u++]=c%1e14);for(i=d[--u],e%=l,i&&e&&(c=f[l-e],d[u]=o(i/c)*c);0===d[u];d.pop(),u--);if(u<0)d=[n=0];else{for(n=-1;0===d[0];d.splice(0,1),n-=l);for(u=1,c=d[0];c>=10;c/=10,u++);u<l&&(n-=l-u)}return h.e=n,h.c=d,h}),G.sum=function(){for(var e=1,t=arguments,r=new G(t[0]);e<t.length;)r=r.plus(t[e++]);return r},E=function(){var e="0123456789";function t(e,t,r,n){for(var i,s,o=[0],a=0,c=e.length;a<c;){for(s=o.length;s--;o[s]*=t);for(o[0]+=n.indexOf(e.charAt(a++)),i=0;i<o.length;i++)o[i]>r-1&&(null==o[i+1]&&(o[i+1]=0),o[i+1]+=o[i]/r|0,o[i]%=r)}return o.reverse()}return function(n,i,s,o,a){var c,u,l,d,f,h,p,m,y=n.indexOf("."),b=P,_=L;for(y>=0&&(d=V,V=0,n=n.replace(".",""),h=(m=new G(i)).pow(n.length-y),V=d,m.c=t(v(g(h.c),h.e,"0"),10,s,e),m.e=m.c.length),l=d=(p=t(n,i,s,a?(c=K,e):(c=e,K))).length;0==p[--d];p.pop());if(!p[0])return c.charAt(0);if(y<0?--l:(h.c=p,h.e=l,h.s=o,p=(h=r(h,m,b,_,s)).c,f=h.r,l=h.e),y=p[u=l+b+1],d=s/2,f=f||u<0||null!=p[u+1],f=_<4?(null!=y||f)&&(0==_||_==(h.s<0?3:2)):y>d||y==d&&(4==_||f||6==_&&1&p[u-1]||_==(h.s<0?8:7)),u<1||!p[0])n=f?v(c.charAt(1),-b,c.charAt(0)):c.charAt(0);else{if(p.length=u,f)for(--s;++p[--u]>s;)p[u]=0,u||(++l,p=[1].concat(p));for(d=p.length;!p[--d];);for(y=0,n="";y<=d;n+=c.charAt(p[y++]));n=v(n,l,c.charAt(0))}return n}}(),r=function(){function e(e,t,r){var n,i,s,o,a=0,c=e.length,u=t%h,l=t/h|0;for(e=e.slice();c--;)a=((i=u*(s=e[c]%h)+(n=l*s+(o=e[c]/h|0)*u)%h*h+a)/r|0)+(n/h|0)+l*o,e[c]=i%r;return a&&(e=[a].concat(e)),e}function t(e,t,r,n){var i,s;if(r!=n)s=r>n?1:-1;else for(i=s=0;i<r;i++)if(e[i]!=t[i]){s=e[i]>t[i]?1:-1;break}return s}function r(e,t,r,n){for(var i=0;r--;)e[r]-=i,i=e[r]<t[r]?1:0,e[r]=i*n+e[r]-t[r];for(;!e[0]&&e.length>1;e.splice(0,1));}return function(n,i,s,a,c){var d,f,h,p,g,y,b,_,w,v,E,S,C,k,I,T,A,R=n.s==i.s?1:-1,j=n.c,x=i.c;if(!(j&&j[0]&&x&&x[0]))return new G(n.s&&i.s&&(j?!x||j[0]!=x[0]:x)?j&&0==j[0]||!x?0*R:R/0:NaN);for(w=(_=new G(R)).c=[],R=s+(f=n.e-i.e)+1,c||(c=u,f=m(n.e/l)-m(i.e/l),R=R/l|0),h=0;x[h]==(j[h]||0);h++);if(x[h]>(j[h]||0)&&f--,R<0)w.push(1),p=!0;else{for(k=j.length,T=x.length,h=0,R+=2,(g=o(c/(x[0]+1)))>1&&(x=e(x,g,c),j=e(j,g,c),T=x.length,k=j.length),C=T,E=(v=j.slice(0,T)).length;E<T;v[E++]=0);A=x.slice(),A=[0].concat(A),I=x[0],x[1]>=c/2&&I++;do{if(g=0,(d=t(x,v,T,E))<0){if(S=v[0],T!=E&&(S=S*c+(v[1]||0)),(g=o(S/I))>1)for(g>=c&&(g=c-1),b=(y=e(x,g,c)).length,E=v.length;1==t(y,v,b,E);)g--,r(y,T<b?A:x,b,c),b=y.length,d=1;else 0==g&&(d=g=1),b=(y=x.slice()).length;if(b<E&&(y=[0].concat(y)),r(v,y,E,c),E=v.length,-1==d)for(;t(x,v,T,E)<1;)g++,r(v,T<E?A:x,E,c),E=v.length}else 0===d&&(g++,v=[0]);w[h++]=g,v[0]?v[E++]=j[C]||0:(v=[j[C]],E=1)}while((C++<k||null!=v[0])&&R--);p=null!=v[0],w[0]||w.splice(0,1)}if(c==u){for(h=1,R=w[0];R>=10;R/=10,h++);z(_,s+(_.e=h+f*l-1)+1,a,p)}else _.e=f,_.r=+p;return _}}(),I=/^(-?)0([xbo])(?=\w[\w.]*$)/i,T=/^([^.]+)\.$/,A=/^\.([^.]+)$/,R=/^-?(Infinity|NaN)$/,j=/^\s*\+(?=[\w.])|^\s+|\s+$/g,S=function(e,t,r,n){var i,s=r?t:t.replace(j,"");if(R.test(s))e.s=isNaN(s)?null:s<0?-1:1;else{if(!r&&(s=s.replace(I,(function(e,t,r){return i="x"==(r=r.toLowerCase())?16:"b"==r?2:8,n&&n!=i?e:t})),n&&(i=n,s=s.replace(T,"$1").replace(A,"0.$1")),t!=s))return new G(s,i);if(G.DEBUG)throw Error(a+"Not a"+(n?" base "+n:"")+" number: "+t);e.s=null}e.c=e.e=null},x.absoluteValue=x.abs=function(){var e=new G(this);return e.s<0&&(e.s=1),e},x.comparedTo=function(e,t){return y(this,new G(e,t))},x.decimalPlaces=x.dp=function(e,t){var r,n,i,s=this;if(null!=e)return b(e,0,p),null==t?t=L:b(t,0,8),z(new G(s),e+s.e+1,t);if(!(r=s.c))return null;if(n=((i=r.length-1)-m(this.e/l))*l,i=r[i])for(;i%10==0;i/=10,n--);return n<0&&(n=0),n},x.dividedBy=x.div=function(e,t){return r(this,new G(e,t),P,L)},x.dividedToIntegerBy=x.idiv=function(e,t){return r(this,new G(e,t),0,1)},x.exponentiatedBy=x.pow=function(e,t){var r,n,i,c,u,d,f,h,p=this;if((e=new G(e)).c&&!e.isInteger())throw Error(a+"Exponent not an integer: "+Y(e));if(null!=t&&(t=new G(t)),u=e.e>14,!p.c||!p.c[0]||1==p.c[0]&&!p.e&&1==p.c.length||!e.c||!e.c[0])return h=new G(Math.pow(+Y(p),u?2-_(e):+Y(e))),t?h.mod(t):h;if(d=e.s<0,t){if(t.c?!t.c[0]:!t.s)return new G(NaN);(n=!d&&p.isInteger()&&t.isInteger())&&(p=p.mod(t))}else{if(e.e>9&&(p.e>0||p.e<-1||(0==p.e?p.c[0]>1||u&&p.c[1]>=24e7:p.c[0]<8e13||u&&p.c[0]<=9999975e7)))return c=p.s<0&&_(e)?-0:0,p.e>-1&&(c=1/c),new G(d?1/c:c);V&&(c=s(V/l+2))}for(u?(r=new G(.5),d&&(e.s=1),f=_(e)):f=(i=Math.abs(+Y(e)))%2,h=new G(N);;){if(f){if(!(h=h.times(p)).c)break;c?h.c.length>c&&(h.c.length=c):n&&(h=h.mod(t))}if(i){if(0===(i=o(i/2)))break;f=i%2}else if(z(e=e.times(r),e.e+1,1),e.e>14)f=_(e);else{if(0===(i=+Y(e)))break;f=i%2}p=p.times(p),c?p.c&&p.c.length>c&&(p.c.length=c):n&&(p=p.mod(t))}return n?h:(d&&(h=N.div(h)),t?h.mod(t):c?z(h,V,L,undefined):h)},x.integerValue=function(e){var t=new G(this);return null==e?e=L:b(e,0,8),z(t,t.e+1,e)},x.isEqualTo=x.eq=function(e,t){return 0===y(this,new G(e,t))},x.isFinite=function(){return!!this.c},x.isGreaterThan=x.gt=function(e,t){return y(this,new G(e,t))>0},x.isGreaterThanOrEqualTo=x.gte=function(e,t){return 1===(t=y(this,new G(e,t)))||0===t},x.isInteger=function(){return!!this.c&&m(this.e/l)>this.c.length-2},x.isLessThan=x.lt=function(e,t){return y(this,new G(e,t))<0},x.isLessThanOrEqualTo=x.lte=function(e,t){return-1===(t=y(this,new G(e,t)))||0===t},x.isNaN=function(){return!this.s},x.isNegative=function(){return this.s<0},x.isPositive=function(){return this.s>0},x.isZero=function(){return!!this.c&&0==this.c[0]},x.minus=function(e,t){var r,n,i,s,o=this,a=o.s;if(t=(e=new G(e,t)).s,!a||!t)return new G(NaN);if(a!=t)return e.s=-t,o.plus(e);var c=o.e/l,d=e.e/l,f=o.c,h=e.c;if(!c||!d){if(!f||!h)return f?(e.s=-t,e):new G(h?o:NaN);if(!f[0]||!h[0])return h[0]?(e.s=-t,e):new G(f[0]?o:3==L?-0:0)}if(c=m(c),d=m(d),f=f.slice(),a=c-d){for((s=a<0)?(a=-a,i=f):(d=c,i=h),i.reverse(),t=a;t--;i.push(0));i.reverse()}else for(n=(s=(a=f.length)<(t=h.length))?a:t,a=t=0;t<n;t++)if(f[t]!=h[t]){s=f[t]<h[t];break}if(s&&(i=f,f=h,h=i,e.s=-e.s),(t=(n=h.length)-(r=f.length))>0)for(;t--;f[r++]=0);for(t=u-1;n>a;){if(f[--n]<h[n]){for(r=n;r&&!f[--r];f[r]=t);--f[r],f[n]+=u}f[n]-=h[n]}for(;0==f[0];f.splice(0,1),--d);return f[0]?W(e,f,d):(e.s=3==L?-1:1,e.c=[e.e=0],e)},x.modulo=x.mod=function(e,t){var n,i,s=this;return e=new G(e,t),!s.c||!e.s||e.c&&!e.c[0]?new G(NaN):!e.c||s.c&&!s.c[0]?new G(s):(9==F?(i=e.s,e.s=1,n=r(s,e,0,3),e.s=i,n.s*=i):n=r(s,e,0,F),(e=s.minus(n.times(e))).c[0]||1!=F||(e.s=s.s),e)},x.multipliedBy=x.times=function(e,t){var r,n,i,s,o,a,c,d,f,p,g,y,b,_,w,v=this,E=v.c,S=(e=new G(e,t)).c;if(!(E&&S&&E[0]&&S[0]))return!v.s||!e.s||E&&!E[0]&&!S||S&&!S[0]&&!E?e.c=e.e=e.s=null:(e.s*=v.s,E&&S?(e.c=[0],e.e=0):e.c=e.e=null),e;for(n=m(v.e/l)+m(e.e/l),e.s*=v.s,(c=E.length)<(p=S.length)&&(b=E,E=S,S=b,i=c,c=p,p=i),i=c+p,b=[];i--;b.push(0));for(_=u,w=h,i=p;--i>=0;){for(r=0,g=S[i]%w,y=S[i]/w|0,s=i+(o=c);s>i;)r=((d=g*(d=E[--o]%w)+(a=y*d+(f=E[o]/w|0)*g)%w*w+b[s]+r)/_|0)+(a/w|0)+y*f,b[s--]=d%_;b[s]=r}return r?++n:b.splice(0,1),W(e,b,n)},x.negated=function(){var e=new G(this);return e.s=-e.s||null,e},x.plus=function(e,t){var r,n=this,i=n.s;if(t=(e=new G(e,t)).s,!i||!t)return new G(NaN);if(i!=t)return e.s=-t,n.minus(e);var s=n.e/l,o=e.e/l,a=n.c,c=e.c;if(!s||!o){if(!a||!c)return new G(i/0);if(!a[0]||!c[0])return c[0]?e:new G(a[0]?n:0*i)}if(s=m(s),o=m(o),a=a.slice(),i=s-o){for(i>0?(o=s,r=c):(i=-i,r=a),r.reverse();i--;r.push(0));r.reverse()}for((i=a.length)-(t=c.length)<0&&(r=c,c=a,a=r,t=i),i=0;t;)i=(a[--t]=a[t]+c[t]+i)/u|0,a[t]=u===a[t]?0:a[t]%u;return i&&(a=[i].concat(a),++o),W(e,a,o)},x.precision=x.sd=function(e,t){var r,n,i,s=this;if(null!=e&&e!==!!e)return b(e,1,p),null==t?t=L:b(t,0,8),z(new G(s),e,t);if(!(r=s.c))return null;if(n=(i=r.length-1)*l+1,i=r[i]){for(;i%10==0;i/=10,n--);for(i=r[0];i>=10;i/=10,n++);}return e&&s.e+1>n&&(n=s.e+1),n},x.shiftedBy=function(e){return b(e,-9007199254740991,d),this.times("1e"+e)},x.squareRoot=x.sqrt=function(){var e,t,n,i,s,o=this,a=o.c,c=o.s,u=o.e,l=P+4,d=new G("0.5");if(1!==c||!a||!a[0])return new G(!c||c<0&&(!a||a[0])?NaN:a?o:1/0);if(0==(c=Math.sqrt(+Y(o)))||c==1/0?(((t=g(a)).length+u)%2==0&&(t+="0"),c=Math.sqrt(+t),u=m((u+1)/2)-(u<0||u%2),n=new G(t=c==1/0?"1e"+u:(t=c.toExponential()).slice(0,t.indexOf("e")+1)+u)):n=new G(c+""),n.c[0])for((c=(u=n.e)+l)<3&&(c=0);;)if(s=n,n=d.times(s.plus(r(o,s,l,1))),g(s.c).slice(0,c)===(t=g(n.c)).slice(0,c)){if(n.e<u&&--c,"9999"!=(t=t.slice(c-3,c+1))&&(i||"4999"!=t)){+t&&(+t.slice(1)||"5"!=t.charAt(0))||(z(n,n.e+P+2,1),e=!n.times(n).eq(o));break}if(!i&&(z(s,s.e+P+2,0),s.times(s).eq(o))){n=s;break}l+=4,c+=4,i=1}return z(n,n.e+P+1,L,e)},x.toExponential=function(e,t){return null!=e&&(b(e,0,p),e++),$(this,e,t,1)},x.toFixed=function(e,t){return null!=e&&(b(e,0,p),e=e+this.e+1),$(this,e,t)},x.toFormat=function(e,t,r){var n,i=this;if(null==r)null!=e&&t&&"object"==typeof t?(r=t,t=null):e&&"object"==typeof e?(r=e,e=t=null):r=q;else if("object"!=typeof r)throw Error(a+"Argument not an object: "+r);if(n=i.toFixed(e,t),i.c){var s,o=n.split("."),c=+r.groupSize,u=+r.secondaryGroupSize,l=r.groupSeparator||"",d=o[0],f=o[1],h=i.s<0,p=h?d.slice(1):d,m=p.length;if(u&&(s=c,c=u,u=s,m-=s),c>0&&m>0){for(s=m%c||c,d=p.substr(0,s);s<m;s+=c)d+=l+p.substr(s,c);u>0&&(d+=l+p.slice(s)),h&&(d="-"+d)}n=f?d+(r.decimalSeparator||"")+((u=+r.fractionGroupSize)?f.replace(new RegExp("\\d{"+u+"}\\B","g"),"$&"+(r.fractionGroupSeparator||"")):f):d}return(r.prefix||"")+n+(r.suffix||"")},x.toFraction=function(e){var t,n,i,s,o,c,u,d,h,p,m,y,b=this,_=b.c;if(null!=e&&(!(u=new G(e)).isInteger()&&(u.c||1!==u.s)||u.lt(N)))throw Error(a+"Argument "+(u.isInteger()?"out of range: ":"not an integer: ")+Y(u));if(!_)return new G(b);for(t=new G(N),h=n=new G(N),i=d=new G(N),y=g(_),o=t.e=y.length-b.e-1,t.c[0]=f[(c=o%l)<0?l+c:c],e=!e||u.comparedTo(t)>0?o>0?t:h:u,c=M,M=1/0,u=new G(y),d.c[0]=0;p=r(u,t,0,1),1!=(s=n.plus(p.times(i))).comparedTo(e);)n=i,i=s,h=d.plus(p.times(s=h)),d=s,t=u.minus(p.times(s=t)),u=s;return s=r(e.minus(n),i,0,1),d=d.plus(s.times(h)),n=n.plus(s.times(i)),d.s=h.s=b.s,m=r(h,i,o*=2,L).minus(b).abs().comparedTo(r(d,n,o,L).minus(b).abs())<1?[h,i]:[d,n],M=c,m},x.toNumber=function(){return+Y(this)},x.toPrecision=function(e,t){return null!=e&&b(e,1,p),$(this,e,t,2)},x.toString=function(e){var t,r=this,n=r.s,i=r.e;return null===i?n?(t="Infinity",n<0&&(t="-"+t)):t="NaN":(null==e?t=i<=O||i>=D?w(g(r.c),i):v(g(r.c),i,"0"):10===e?t=v(g((r=z(new G(r),P+i+1,L)).c),r.e,"0"):(b(e,2,K.length,"Base"),t=E(v(g(r.c),i,"0"),10,e,n,!0)),n<0&&r.c[0]&&(t="-"+t)),t},x.valueOf=x.toJSON=function(){return Y(this)},x._isBigNumber=!0,i&&(x[Symbol.toStringTag]="BigNumber",x[Symbol.for("nodejs.util.inspect.custom")]=x.valueOf),null!=t&&G.set(t),G}(),r.default=r.BigNumber=r,"function"==typeof define&&define.amd?define((function(){return r})):void 0!==t&&t.exports?t.exports=r:(e||(e="undefined"!=typeof self&&self?self:window),e.BigNumber=r)}(this)}}},{package:"bignumber.js",file:"/home/circleci/project/node_modules/ipfs-bitswap/node_modules/bignumber.js/bignumber.js"}],[5080,{},function(){with(this)return function(){"use strict";return function(e,t,r){const n=Math.exp;t.exports=function(e){if("number"!=typeof e)throw new Error("must provide a timespan to the moving average constructor");if(e<=0)throw new Error("must provide a timespan > 0 to the moving average constructor");let t,r,i=0,s=0,o=0,a={};return a.push=function(a,c){if(r){const u=1-n(-(a-r)/e),l=c-t;t=u*c+(1-u)*t,i=(1-u)*(i+l*(u*l)),s=Math.sqrt(i),o=t+u*l}else t=c;r=a},a.movingAverage=function(){return t},a.variance=function(){return i},a.deviation=function(){return s},a.forecast=function(){return o},a}}}},{package:"moving-average",file:"/home/circleci/project/node_modules/moving-average/index.js"}],[5332,{"safe-buffer":5597,varint:5868},function(){with(this)return function(){"use strict";return function(e,t,r){const n=e("safe-buffer").Buffer;t.exports=function(t){t=Object.assign({fixed:!1},t||{});const r=e("varint");let s=t.fixed?null:i(),o=0,a=!1;return e=>(c,u)=>{if(c&&(a=c),a)return u(a);e(null,((e,c)=>{if(e&&(a=e),a)return u(a);if(!a&&!n.isBuffer(c))return a=new Error("data must be a buffer"),u(a);const l=a?0:c.length;let d;if(t.fixed?(d=n.alloc(4),d.writeInt32BE(l,0)):(r.encode(l,s,o),o+=r.encode.bytes,d=s.slice(o-r.encode.bytes,o),s.length-o<100&&(s=i(),o=0)),a)return u(null,d);u(null,n.concat([d,c],(t.fixed?4:r.encode.bytes)+l))}))}};function i(){return n.alloc(10240)}}}},{package:"pull-length-prefixed",file:"/home/circleci/project/node_modules/pull-length-prefixed/src/encode.js"}],[5331,{"pull-pushable":5345,"pull-reader":5346,"safe-buffer":5597,varint:5868},function(){with(this)return function(){"use strict";return function(e,t,r){const n=e("varint"),i=e("pull-reader"),s=e("safe-buffer").Buffer,o=e("pull-pushable");r.decode=function(e){let t=new i,r=o((e=>{t.abort(e)}));return n=>(t(n),function n(){let i=!0,s=!1;const o=(e,t)=>{s=!0,e?(r.end(e),i=!1):(r.push(t),i||n())};for(;i;)s=!1,a(t,e,o),s||(i=!1)}(),r)},r.decodeFromReader=function(e,t,r){"function"==typeof t&&(r=t,t={});a(e,t,(function(e,t){if(e)return r(!0===e?new Error("Unexpected end of input from reader."):e);r(null,t)}))};function a(e,t,r){(t=Object.assign({fixed:!1,maxLength:4194304},t||{})).fixed?function(e,t,r){e.read(4,((n,i)=>{if(n)return r(n);const s=i.readInt32BE(0);if(s>t)return r(new Error("size longer than max permitted length of "+t+"!"));c(e,s,r)}))}(e,t.maxLength,r):function(e,t,r){let i=[];0===i.length&&o();function o(){e.read(1,((a,u)=>{if(a)return r(a);if(i.push(u),u&&!(e=>!(128&e))(u[0]))return void o();const l=n.decode(s.concat(i));if(l>t)return r(new Error("size longer than max permitted length of "+t+"!"));c(e,l,((e,t)=>e?r(e):(i=[],t.length<l?r(new Error("Message length does not match prefix specified length.")):void r(null,t))))}))}}(e,t.maxLength,r)}function c(e,t,r){e.read(t,((e,t)=>{if(e)return r(e);r(null,t)}))}}}},{package:"pull-length-prefixed",file:"/home/circleci/project/node_modules/pull-length-prefixed/src/decode.js"}],[4850,{},function(){with(this)return function(){"use strict";return function(e,t,r){t.exports="// Record represents a dht record that contains a value\n// for a key value pair\nmessage Record {\n  // The key that references this record\n  bytes key = 1;\n\n  // The actual value this record is storing\n  bytes value = 2;\n\n  // Note: These fields were removed from the Record message\n  // hash of the authors public key\n  // optional bytes author = 3;\n  // A PKI signature for the key+value+author\n  // optional bytes signature = 4;\n\n  // Time the record was received, set by receiver\n  optional string timeReceived = 5;\n}"}}},{package:"libp2p-record",file:"/home/circleci/project/node_modules/libp2p-record/src/record.proto.js"}],[4854,{},function(){with(this)return function(){"use strict";return function(e,t,r){t.exports.toRFC3339=e=>`${e.getUTCFullYear()}-${String(e.getUTCMonth()+1).padStart(2,"0")}-${String(e.getUTCDate()).padStart(2,"0")}T${String(e.getUTCHours()).padStart(2,"0")}:${String(e.getUTCMinutes()).padStart(2,"0")}:${String(e.getUTCSeconds()).padStart(2,"0")}.${1e3*e.getUTCMilliseconds()*1e3}Z`,t.exports.parseRFC3339=e=>{const t=new RegExp("(\\d{4})-(\\d{2})-(\\d{2})T"+"(\\d{2}):(\\d{2}):(\\d{2})"+"\\.(\\d+)Z"),r=String(e).trim().match(t);if(!r)throw new Error("Invalid format");const n=parseInt(r[1],10),i=parseInt(r[2],10)-1,s=parseInt(r[3],10),o=parseInt(r[4],10),a=parseInt(r[5],10),c=parseInt(r[6],10),u=parseInt(r[7].slice(0,-6),10);return new Date(Date.UTC(n,i,s,o,a,c,u))}}}},{package:"libp2p-record",file:"/home/circleci/project/node_modules/libp2p-record/src/utils.js"}],[2039,{"buffer-indexof":2038},function(){with(this)return function(){"use strict";return function(e,t,r){var n=e("buffer-indexof");t.exports=function(e,t,r){for(var i=-1,s=[],o=r?t.length:0;(i=n(e,t))>-1;)s.push(e.slice(0,i+o)),e=e.slice(i+t.length,e.length);return s.push(e),s}}}},{package:"buffer-split",file:"/home/circleci/project/node_modules/buffer-split/index.js"}],[4852,{"./public-key":4853},function(){with(this)return function(){"use strict";return function(e,t,r){t.exports={pk:e("./public-key")}}}},{package:"libp2p-record",file:"/home/circleci/project/node_modules/libp2p-record/src/selectors/index.js"}],[4856,{"./public-key":4857},function(){with(this)return function(){"use strict";return function(e,t,r){t.exports={pk:e("./public-key")}}}},{package:"libp2p-record",file:"/home/circleci/project/node_modules/libp2p-record/src/validators/index.js"}],[5339,{},function(){with(this)return function(){"use strict";return function(e,t,r){r.Types={NEW:0,IN_MESSAGE:1,OUT_MESSAGE:2,IN_CLOSE:3,OUT_CLOSE:4,IN_RESET:5,OUT_RESET:6},r.MAX_MSG_SIZE=1<<20}}},{package:"pull-mplex",file:"/home/circleci/project/node_modules/pull-mplex/src/consts.js"}],[5343,{},function(){with(this)return function(){"use strict";return function(e,t,r){t.exports.emitError=function(e,t){e.emit("error",t)},t.exports.emitStream=function(e,t,r){e.emit("stream",t,r)}}}},{package:"pull-mplex",file:"/home/circleci/project/node_modules/pull-mplex/src/util/index.js"}],[5335,{},function(){with(this)return function(){"use strict";return function(e,t,r){t.exports=function(e){var t=!1,r=0;return function(){if(r=!0,!t){for(t=!0;r;)r=!1,e();t=!1}}}}}},{package:"looper",file:"/home/circleci/project/node_modules/pull-mplex/node_modules/looper/index.js"}],[5338,{buffer:2028,debug:2197,"pull-through":5382,varint:5868},function(){with(this)return function(){"use strict";return function(e,t,r){(function(t){(function(){const n=e("varint"),i=e("pull-through"),s=e("debug"),o=s("pull-plex:coder");o.err=s("pull-plex:coder:err");const a=10240,c=t.alloc(0);r.encode=()=>{let e=t.allocUnsafe(a),r=0;return i((function(i){const s=r;n.encode(i[0]<<3|i[1],e,r),r+=n.encode.bytes,n.encode(i[2]?i[2].length:0,e,r),r+=n.encode.bytes,this.queue(e.slice(s,r)),a-r<100&&(e=t.allocUnsafe(a),r=0),this.queue(i[2]?i[2]:c)}))};const u=0,l=1;r.decode=()=>{let e=u;const r=t=>{const[r,i,s]=(e=>{let t=0,r=0;try{let i=n.decode(e);return t+=n.decode.bytes,r=n.decode(e,t),t+=n.decode.bytes,[i,t,r]}catch(e){o.err(e)}return[]})(t);if(void 0!==r){const n={id:r>>3,type:7&r,data:[]};return e=l,[t.slice(i),n,s]}return[t]};let s=0,a=null,c=!1,d=[];return i((function(n){var i=this;!function o(){if(n&&n.length){if(u===e){if(c&&(d.push(n),n=t.concat(d)),[n,a,s]=r(n),!a)return c||d.push(n),void(c=!0);d=[],c=!1}l===e&&([s,n,a.data]=((r,n,i)=>{if(i<=0)return e=u,[0,r,n];let s=i-r.length;s<0&&(s=0);const o=i-s;if(r.length>0){const e=t.isBuffer(r)?r:t.from(r);n.push(e.slice(0,o))}return s<=0&&(e=u),[s,r.slice(o),n]})(n,a.data,s),s<=0&&u===e&&(a.data=t.concat(a.data),i.queue(a),a=null,s=0)),o()}}()}))}}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"pull-mplex",file:"/home/circleci/project/node_modules/pull-mplex/src/coder.js"}],[5336,{"./consts":5339,"./util":5343,"async/nextTick":1714,debug:2197,events:2029,looper:5335,"pull-pushable":5345},function(){with(this)return function(){"use strict";return function(e,t,r){const n=e("pull-pushable"),i=e("looper"),s=e("async/nextTick"),o=e("events"),a=e("debug"),{Types:c}=e("./consts"),{emitError:u}=e("./util"),l=a("pull-plex:chan");l.err=a("pull-plex:chan:err");t.exports=class extends o{constructor(e){var t;super(),e={initiator:!1,...e},this._id=e.id,this._name=e.name,this._plex=e.plex,this._open=e.open,this._initiator=e.initiator,this._endedRemote=!1,this._endedLocal=!1,this._destroy=!1,this.MSG=this._initiator?c.OUT_MESSAGE:c.IN_MESSAGE,this.END=this._initiator?c.OUT_CLOSE:c.IN_CLOSE,this.RESET=this._initiator?c.OUT_RESET:c.IN_RESET,this._log("new channel",this._name),this._msgs=n((e=>{this._log("source closed",e),e&&"boolean"!=typeof e&&s(u,this,e)})),this._source=this._msgs,this.sink=(t=this,function(e){const r=i((function(){e(null,(function(e,n){if(!t._endedLocal){if(t._endedLocal=e||!1,!0===e)return t.endChan();if(e||t._destroy)return t.destroyChan(),t.emit("error",e||t._destroy),void t.destroy();t.sendMsg(n),r()}}))}));r()})}get source(){return this._source}get id(){return this._id}get open(){return this._open}set open(e){this._open=e}get name(){return this._name}get destroyed(){return this._endedRemote&&this._endedLocal}_log(e,t){l.enabled&&l({op:e,name:this._name,id:this._id,endedLocal:this._endedLocal,endedRemote:this._endedRemote,initiator:this._initiator,data:t&&t.toString()||""})}push(e){this._log("push"),this._msgs.push(e)}close(e){this._log("close",e),this._endedRemote||(this._endedRemote=e||!0,this._msgs.end(this._endedRemote),this.emit("close",e),this.plex=null)}destroy(e){this._log("destroy",e),this._destroy=e||"channel destroyed!",this.close(this._destroy)}openChan(e){this.open||(this.open=!0,this._plex.push([this._id,c.NEW,e!==this._id.toString()?e:this._id.toString()]))}sendMsg(e){this._log("sendMsg",e),this.open||this.openChan(this.name),this._plex.push([this._id,this.MSG,e])}endChan(){this._log("endChan"),this.open&&this._plex.push([this._id,this.END])}destroyChan(){this._log("destroyChan"),this.open&&this._plex.push([this._id,this.RESET])}}}}},{package:"pull-mplex",file:"/home/circleci/project/node_modules/pull-mplex/src/channel.js"}],[5382,{looper:5061},function(){with(this)return function(){"use strict";return function(e,t,r){var n=e("looper");t.exports=function(e,t){return function(r){var i,s,o=[];function a(e){o.push(e)}e=e||function(e){this.queue(e)},t=t||function(){this.queue(null)};var c,u={emit:function(e,t){"data"==e&&a(t),"end"==e&&(i=!0,a(null)),"error"==e&&(s=t)},queue:a};return function(a,l){if(i=i||a,a)return r(a,(function(){if(c){var e=c;c=null,e(a)}l(a)}));c=l,n((function n(a){if(c)if(l=c,s)c=null,l(s);else if(o.length){var d=o.shift();c=null,l(null===d,d)}else r(i,(function(o,d){if(o&&!0!==o)return s=o,a();if(i=i||o)t.call(u);else if(null!==d&&(e.call(u,d),s||i))return r(s||i,(function(){c=null,l(s||i)}));a(n)}))}))}}}}}},{package:"pull-through",file:"/home/circleci/project/node_modules/pull-through/index.js"}],[5388,{"./":5386,events:2029,http:5735,https:4307,url:5841,ws:2027},function(){with(this)return function(){"use strict";return function(e,t,r){var n=e("./"),i=e("ws"),s=(e("url"),e("http")),o=e("https"),a=e("events").EventEmitter;t.exports=i.Server?function(e,t){var r=new a;function c(e,t){return e.on(t,(function(){var e=[].slice.call(arguments);e.unshift(t),r.emit.apply(r,e)}))}"function"==typeof e&&(t=e,e=null),e=e||{},t&&r.on("connection",t);var u=e.server||(e.key&&e.cert?o.createServer(e):s.createServer()),l=new i.Server({server:u,perMessageDeflate:!1,verifyClient:e.verifyClient});return c(u,"listening"),c(u,"request"),c(u,"close"),l.on("connection",(function(e){var t=n(e);t.remoteAddress=e.upgradeReq.socket.remoteAddress,r.emit("connection",t)})),r.listen=function(e,t){return t&&r.once("listening",t),u.listen(e.port||e),r},r.close=function(e){return u.close(e),l.close(),r},r.address=u.address.bind(u),r}:null}}},{package:"pull-ws",file:"/home/circleci/project/node_modules/pull-ws/server.js"}],[4330,{"pull-defer/duplex":5325},function(){with(this)return function(){"use strict";return function(e,t,r){const n=e("pull-defer/duplex");t.exports=class{constructor(e,t){this.peerInfo=null,this.conn=n(),e?this.setInnerConn(e,t):t&&(this.info=t)}get source(){return this.conn.source}get sink(){return this.conn.sink}getPeerInfo(e){return this.info&&this.info.getPeerInfo?this.info.getPeerInfo(e):this.peerInfo?void e(null,this.peerInfo):e(new Error("Peer Info not set yet"))}setPeerInfo(e){if(this.info&&this.info.setPeerInfo)return this.info.setPeerInfo(e);this.peerInfo=e}getObservedAddrs(e){if(this.info&&this.info.getObservedAddrs)return this.info.getObservedAddrs(e);e(null,[])}setInnerConn(e,t){this.conn.resolve(e),this.info=t||e}}}}},{package:"interface-connection",file:"/home/circleci/project/node_modules/interface-connection/src/connection.js"}],[5391,{ws:2027},function(){with(this)return function(){"use strict";return function(e,t,r){t.exports="undefined"==typeof WebSocket?e("ws"):WebSocket}}},{package:"pull-ws",file:"/home/circleci/project/node_modules/pull-ws/web-socket.js"}],[5392,{"relative-url":5585},function(){with(this)return function(){"use strict";return function(e,t,r){var n=e("relative-url"),i={http:"ws",https:"wss"};t.exports=function(e,t){return n(e,t,i,"ws")}}}},{package:"pull-ws",file:"/home/circleci/project/node_modules/pull-ws/ws-url.js"}],[5385,{"./sink":5389,"./source":5390},function(){with(this)return function(){"use strict";return function(e,t,r){var n=e("./source"),i=e("./sink");t.exports=function(e,t){var r=e.upgradeReq||{};t&&t.binaryType?e.binaryType=t.binaryType:t&&t.binary&&(e.binaryType="arraybuffer");return{source:n(e,t&&t.onConnect),sink:i(e,t),headers:r.headers,url:r.url,upgrade:r.upgrade,method:r.method}}}}},{package:"pull-ws",file:"/home/circleci/project/node_modules/pull-ws/duplex.js"}],[4802,{"./peer-list":4807},function(){with(this)return function(){"use strict";return function(e,t,r){const n=e("./peer-list");t.exports=class extends n{constructor(e){super(),this.limit=e}push(e){return this.length<this.limit&&super.push(e)}}}}},{package:"libp2p-kad-dht",file:"/home/circleci/project/node_modules/libp2p-kad-dht/src/limited-peer-list.js"}],[4803,{},function(){with(this)return function(){"use strict";return function(e,t,r){t.exports='// can\'t use, because protocol-buffers doesn\'t support imports\n// so we have to duplicate for now :(\n// import "record.proto";\n\nmessage Record {\n  // adjusted for javascript\n  optional bytes key = 1;\n  optional bytes value = 2;\n  optional bytes author = 3;\n  optional bytes signature = 4;\n  optional string timeReceived = 5;\n}\n\nmessage Message {\n  enum MessageType {\n    PUT_VALUE = 0;\n    GET_VALUE = 1;\n    ADD_PROVIDER = 2;\n    GET_PROVIDERS = 3;\n    FIND_NODE = 4;\n    PING = 5;\n  }\n\n  enum ConnectionType {\n    // sender does not have a connection to peer, and no extra information (default)\n    NOT_CONNECTED = 0;\n\n    // sender has a live connection to peer\n    CONNECTED = 1;\n\n    // sender recently connected to peer\n    CAN_CONNECT = 2;\n\n    // sender recently tried to connect to peer repeatedly but failed to connect\n    // ("try" here is loose, but this should signal "made strong effort, failed")\n    CANNOT_CONNECT = 3;\n  }\n\n  message Peer {\n    // ID of a given peer.\n    optional bytes id = 1;\n\n    // multiaddrs for a given peer\n    repeated bytes addrs = 2;\n\n    // used to signal the sender\'s connection capabilities to the peer\n    optional ConnectionType connection = 3;\n  }\n\n  // defines what type of message it is.\n  optional MessageType type = 1;\n\n  // defines what coral cluster level this query/response belongs to.\n  // in case we want to implement coral\'s cluster rings in the future.\n  optional int32 clusterLevelRaw = 10;\n\n  // Used to specify the key associated with this message.\n  // PUT_VALUE, GET_VALUE, ADD_PROVIDER, GET_PROVIDERS\n  // adjusted for javascript\n  optional bytes key = 2;\n\n  // Used to return a value\n  // PUT_VALUE, GET_VALUE\n  // adjusted Record to bytes for js\n  optional bytes record = 3;\n\n  // Used to return peers closer to a key in a query\n  // GET_VALUE, GET_PROVIDERS, FIND_NODE\n  repeated Peer closerPeers = 8;\n\n  // Used to return Providers\n  // GET_VALUE, ADD_PROVIDER, GET_PROVIDERS\n  repeated Peer providerPeers = 9;\n}'}}},{package:"libp2p-kad-dht",file:"/home/circleci/project/node_modules/libp2p-kad-dht/src/message/dht.proto.js"}],[4677,{events:2029,randombytes:5428},function(){with(this)return function(){"use strict";return function(e,t,r){const n=e("randombytes"),{EventEmitter:i}=e("events");function s(e,t){if(e===t)return!0;if(e.length!==t.length)return!1;for(let r=0,n=e.length;r<n;++r)if(e[r]!==t[r])return!1;return!0}function o(e,t){if(!(t instanceof Uint8Array))throw new TypeError(e+" is not a Uint8Array")}class a extends i{constructor(e={}){super(),this.localNodeId=e.localNodeId||n(20),this.numberOfNodesPerKBucket=e.numberOfNodesPerKBucket||20,this.numberOfNodesToPing=e.numberOfNodesToPing||3,this.distance=e.distance||a.distance,this.arbiter=e.arbiter||a.arbiter,this.metadata=Object.assign({},e.metadata),o("option.localNodeId as parameter 1",this.localNodeId),this.root={contacts:[],dontSplit:!1,left:null,right:null}}static arbiter(e,t){return e.vectorClock>t.vectorClock?e:t}static distance(e,t){let r=0,n=0;const i=Math.min(e.length,t.length),s=Math.max(e.length,t.length);for(;n<i;++n)r=256*r+(e[n]^t[n]);for(;n<s;++n)r=256*r+255;return r}add(e){o("contact.id",(e||{}).id);let t=0,r=this.root;for(;null===r.contacts;)r=this._determineNode(r,e.id,t++);const n=this._indexOf(r,e.id);return n>=0?(this._update(r,n,e),this):r.contacts.length<this.numberOfNodesPerKBucket?(r.contacts.push(e),this.emit("added",e),this):r.dontSplit?(this.emit("ping",r.contacts.slice(0,this.numberOfNodesToPing),e),this):(this._split(r,t),this.add(e))}closest(e,t=Infinity){if(o("id",e),!Number.isInteger(t)&&t!==Infinity||t<=0)throw new TypeError("n is not positive number");let r=[];for(let n=[this.root],i=0;n.length>0&&r.length<t;){const t=n.pop();if(null===t.contacts){const r=this._determineNode(t,e,i++);n.push(t.left===r?t.right:t.left),n.push(r)}else r=r.concat(t.contacts)}return r.map((t=>[this.distance(t.id,e),t])).sort(((e,t)=>e[0]-t[0])).slice(0,t).map((e=>e[1]))}count(){let e=0;for(const t=[this.root];t.length>0;){const r=t.pop();null===r.contacts?t.push(r.right,r.left):e+=r.contacts.length}return e}_determineNode(e,t,r){const n=r>>3,i=r%8;if(t.length<=n&&0!==i)return e.left;return t[n]&1<<7-i?e.right:e.left}get(e){o("id",e);let t=0,r=this.root;for(;null===r.contacts;)r=this._determineNode(r,e,t++);const n=this._indexOf(r,e);return n>=0?r.contacts[n]:null}_indexOf(e,t){for(let r=0;r<e.contacts.length;++r)if(s(e.contacts[r].id,t))return r;return-1}remove(e){o("the id as parameter 1",e);let t=0,r=this.root;for(;null===r.contacts;)r=this._determineNode(r,e,t++);const n=this._indexOf(r,e);if(n>=0){const e=r.contacts.splice(n,1)[0];this.emit("removed",e)}return this}_split(e,t){e.left={contacts:[],dontSplit:!1,left:null,right:null},e.right={contacts:[],dontSplit:!1,left:null,right:null};for(const r of e.contacts)this._determineNode(e,r.id,t).contacts.push(r);e.contacts=null;const r=this._determineNode(e,this.localNodeId,t);(e.left===r?e.right:e.left).dontSplit=!0}toArray(){let e=[];for(const t=[this.root];t.length>0;){const r=t.pop();null===r.contacts?t.push(r.right,r.left):e=e.concat(r.contacts)}return e}_update(e,t,r){if(!s(e.contacts[t].id,r.id))throw new Error("wrong index for _update");const n=e.contacts[t],i=this.arbiter(n,r);i===n&&n!==r||(e.contacts.splice(t,1),e.contacts.push(i),this.emit("updated",n,i))}}t.exports=a}}},{package:"k-bucket",file:"/home/circleci/project/node_modules/k-bucket/index.js"}],[4798,{"./crypto":4797,buffer:2028,multihashes:5111},function(){with(this)return function(){"use strict";return function(e,t,r){(function(r){(function(){const n=e("multihashes"),i=e("./crypto");function s(e,t,r,i){if("function"==typeof r&&(i=r,r=undefined),!i)throw new Error("Missing callback");s.digest(e,t,r,((e,s)=>{if(e)return i(e);i(null,n.encode(s,t,r))}))}t.exports=s,s.Buffer=r,s.multihash=n,s.digest=function(e,t,r,n){if("function"==typeof r&&(n=r,r=undefined),!n)throw new Error("Missing callback");let i,o=n;r&&(o=(e,t)=>{if(e)return n(e);n(null,t.slice(0,r))});try{i=s.createHash(t)}catch(e){return o(e)}i(e,o)},s.createHash=function(e){if(e=n.coerceCode(e),!s.functions[e])throw new Error("multihash function "+e+" not yet supported");return s.functions[e]},s.functions={17:i.sha1,18:i.sha2256,19:i.sha2512,20:i.sha3512,21:i.sha3384,22:i.sha3256,23:i.sha3224,24:i.shake128,25:i.shake256,26:i.keccak224,27:i.keccak256,28:i.keccak384,29:i.keccak512,34:i.murmur3128,35:i.murmur332,86:i.dblSha2256},i.addBlake(s.functions)}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"multihashing-async",file:"/home/circleci/project/node_modules/libp2p-kad-dht/node_modules/multihashing-async/src/index.js"}],[5248,{"p-map":5243},function(){with(this)return function(){"use strict";return function(e,t,r){const n=e("p-map"),i=async(e,t,r)=>n(new Array(e).fill(),((e,r)=>t(r)),r);t.exports=i,t.exports.default=i}}},{package:"p-times",file:"/home/circleci/project/node_modules/p-times/index.js"}],[4299,{},function(){with(this)return function(){"use strict";return function(e,t,r){t.exports=function(e){if(!e)throw Error("hashlru must have a max value, of type number, greater than 0");var t=0,r=Object.create(null),n=Object.create(null);function i(i,s){r[i]=s,++t>=e&&(t=0,n=r,r=Object.create(null))}return{has:function(e){return r[e]!==undefined||n[e]!==undefined},remove:function(e){r[e]!==undefined&&(r[e]=undefined),n[e]!==undefined&&(n[e]=undefined)},get:function(e){var t=r[e];return t!==undefined?t:(t=n[e])!==undefined?(i(e,t),t):void 0},set:function(e,t){r[e]!==undefined?r[e]=t:i(e,t)},clear:function(){r=Object.create(null),n=Object.create(null)}}}}}},{package:"hashlru",file:"/home/circleci/project/node_modules/hashlru/index.js"}],[5244,{eventemitter3:2526},function(){with(this)return function(){"use strict";return function(e,t,r){const n=e("eventemitter3");class i{constructor(){this._queue=[]}enqueue(e,t){const r={priority:(t={priority:0,...t}).priority,run:e};if(this.size&&this._queue[this.size-1].priority>=t.priority)return void this._queue.push(r);const n=function(e,t,r){let n=0,i=e.length;for(;i>0;){const s=i/2|0;let o=n+s;r(e[o],t)<=0?(n=++o,i-=s+1):i=s}return n}(this._queue,r,((e,t)=>t.priority-e.priority));this._queue.splice(n,0,r)}dequeue(){return this._queue.shift().run}get size(){return this._queue.length}}t.exports=class extends n{constructor(e){if(super(),!("number"==typeof(e={carryoverConcurrencyCount:!1,intervalCap:Infinity,interval:0,concurrency:Infinity,autoStart:!0,queueClass:i,...e}).concurrency&&e.concurrency>=1))throw new TypeError(`Expected \`concurrency\` to be a number from 1 and up, got \`${e.concurrency}\` (${typeof e.concurrency})`);if(!("number"==typeof e.intervalCap&&e.intervalCap>=1))throw new TypeError(`Expected \`intervalCap\` to be a number from 1 and up, got \`${e.intervalCap}\` (${typeof e.intervalCap})`);if(!(Number.isFinite(e.interval)&&e.interval>=0))throw new TypeError(`Expected \`interval\` to be a finite number >= 0, got \`${e.interval}\` (${typeof e.interval})`);this._carryoverConcurrencyCount=e.carryoverConcurrencyCount,this._isIntervalIgnored=e.intervalCap===Infinity||0===e.interval,this._intervalCount=0,this._intervalCap=e.intervalCap,this._interval=e.interval,this._intervalId=null,this._intervalEnd=0,this._timeoutId=null,this.queue=new e.queueClass,this._queueClass=e.queueClass,this._pendingCount=0,this._concurrency=e.concurrency,this._isPaused=!1===e.autoStart,this._resolveEmpty=()=>{},this._resolveIdle=()=>{}}get _doesIntervalAllowAnother(){return this._isIntervalIgnored||this._intervalCount<this._intervalCap}get _doesConcurrentAllowAnother(){return this._pendingCount<this._concurrency}_next(){this._pendingCount--,this._tryToStartAnother()}_resolvePromises(){this._resolveEmpty(),this._resolveEmpty=()=>{},0===this._pendingCount&&(this._resolveIdle(),this._resolveIdle=()=>{})}_onResumeInterval(){this._onInterval(),this._initializeIntervalIfNeeded(),this._timeoutId=null}_intervalPaused(){const e=Date.now();if(null===this._intervalId){const t=this._intervalEnd-e;if(!(t<0))return null===this._timeoutId&&(this._timeoutId=setTimeout((()=>{this._onResumeInterval()}),t)),!0;this._intervalCount=this._carryoverConcurrencyCount?this._pendingCount:0}return!1}_tryToStartAnother(){if(0===this.queue.size)return clearInterval(this._intervalId),this._intervalId=null,this._resolvePromises(),!1;if(!this._isPaused){const e=!this._intervalPaused();if(this._doesIntervalAllowAnother&&this._doesConcurrentAllowAnother)return this.emit("active"),this.queue.dequeue()(),e&&this._initializeIntervalIfNeeded(),!0}return!1}_initializeIntervalIfNeeded(){this._isIntervalIgnored||null!==this._intervalId||(this._intervalId=setInterval((()=>this._onInterval()),this._interval),this._intervalEnd=Date.now()+this._interval)}_onInterval(){for(0===this._intervalCount&&0===this._pendingCount&&(clearInterval(this._intervalId),this._intervalId=null),this._intervalCount=this._carryoverConcurrencyCount?this._pendingCount:0;this._tryToStartAnother(););}async add(e,t){return new Promise(((r,n)=>{this.queue.enqueue((async()=>{this._pendingCount++,this._intervalCount++;try{r(await e())}catch(e){n(e)}this._next()}),t),this._tryToStartAnother()}))}async addAll(e,t){return Promise.all(e.map((e=>this.add(e,t))))}start(){if(this._isPaused)for(this._isPaused=!1;this._tryToStartAnother(););}pause(){this._isPaused=!0}clear(){this.queue=new this._queueClass}async onEmpty(){if(0!==this.queue.size)return new Promise((e=>{const t=this._resolveEmpty;this._resolveEmpty=()=>{t(),e()}}))}async onIdle(){if(0!==this._pendingCount||0!==this.queue.size)return new Promise((e=>{const t=this._resolveIdle;this._resolveIdle=()=>{t(),e()}}))}get size(){return this.queue.size}get pending(){return this._pendingCount}get isPaused(){return this._isPaused}}}}},{package:"p-queue",file:"/home/circleci/project/node_modules/p-queue/index.js"}],[6006,{buffer:2028},function(){with(this)return function(){"use strict";return function(e,t,r){(function(e){(function(){function r(t,r){if(t.length!==r.length)throw new Error("Inputs should have the same length");for(var n=e.allocUnsafe(t.length),i=0;i<t.length;i++)n[i]=t[i]^r[i];return n}t.exports=r,r.compare=function(e,t){if(e.length!==t.length)throw new Error("Inputs should have the same length");for(var r=0;r<e.length;r++)if(e[r]!==t[r])return e[r]<t[r]?-1:1;return 0},r.gt=function(e,t){return 1===r.compare(e,t)},r.lt=function(e,t){return-1===r.compare(e,t)},r.eq=function(e,t){return 0===r.compare(e,t)}}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"xor-distance",file:"/home/circleci/project/node_modules/xor-distance/index.js"}],[4814,{"../peer-distance-list":4806,"../utils":4826,"./path":4813,"./workerQueue":4815,events:2029,"promisify-es6":5298},function(){with(this)return function(){"use strict";return function(e,t,r){const n=e("../peer-distance-list"),i=e("events"),s=e("promisify-es6"),o=e("./path"),a=e("./workerQueue"),c=e("../utils");t.exports=class extends i{constructor(e){super(),this.query=e,this.running=!1,this.workers=[],this.peersSeen=new Set,this.errors=[],this.peersQueried=null}stop(){if(this.running){this.running=!1;for(const e of this.workers)e.stop()}}async execute(e){const t=[],r=Math.min(this.query.dht.disjointPaths,e.length);for(let e=0;e<r;e++)t.push(new o(this,this.query.makePath(e,r)));e.forEach(((e,n)=>{t[n%r].addInitialPeer(e)})),await this.executePaths(t);const n={finalSet:new Set(this.peersQueried.peers),paths:[]};for(const e of t)e.res&&(e.res.pathComplete||e.res.queryComplete)&&(e.res.success=!0,n.paths.push(e.res));return n}async executePaths(e){this.running=!0,this.emit("start");try{await Promise.all(e.map((e=>e.execute())))}finally{this.stop(),this.emit("complete")}if(this.errors.length===this.peersSeen.size)throw this.errors[0]}async workerQueue(e){await this.init(),await this.startWorker(e)}async startWorker(e){const t=new a(this.query.dht,this,e,this.query._log);this.workers.push(t),await t.execute()}async init(){this.peersQueried||(this.peersQueriedPromise?await this.peersQueriedPromise:(this.peersQueriedPromise=(async()=>{const e=await s((e=>c.convertBuffer(this.query.key,e)))();this.peersQueried=new n(e,this.query.dht.kBucketSize)})(),await this.peersQueriedPromise,delete this.peersQueriedPromise))}async continueQuerying(e){if(this.peersQueried.length<this.peersQueried.capacity)return!0;const t=e.queue.workersList().map((e=>e.data));return!!await s((e=>this.peersQueried.anyCloser(t,e)))()}}}}},{package:"libp2p-kad-dht",file:"/home/circleci/project/node_modules/libp2p-kad-dht/src/query/run.js"}],[4825,{"../constants":4800,"../message":4804,"../utils":4826,"./handlers":4822,"pull-length-prefixed":5333,"pull-stream":5351},function(){with(this)return function(){"use strict";return function(e,t,r){const n=e("pull-stream"),i=e("pull-length-prefixed"),s=e("../message"),o=e("./handlers"),a=e("../utils"),c=e("../constants");t.exports=e=>{const t=a.logger(e.peerInfo.id,"rpc"),r=o(e);return function(o,a){a.getPeerInfo(((o,u)=>{if(o)return t.error("Failed to get peer info"),void t.error(o);t("from: %s",u.id.toB58String()),n(a,i.decode(),n.filter((e=>e.length<c.maxMessageSize)),n.map((e=>{let r;try{r=s.deserialize(e)}catch(e){return void t.error("failed to read incoming message",e)}return r})),n.filter(Boolean),n.asyncMap(((n,i)=>function(n,i,s){e._add(n,(e=>{e&&(t.error("Failed to update the kbucket store"),t.error(e));const o=r(i.type);if(!o)return t.error(`no handler found for message type: ${i.type}`),s();o(n,i,s)}))}(u,n,i))),n.filter(Boolean),n.map((e=>{let r;try{r=e.serialize()}catch(e){return void t.error("failed to send message",e)}return r})),n.filter(Boolean),i.encode(),a)}))}}}}},{package:"libp2p-kad-dht",file:"/home/circleci/project/node_modules/libp2p-kad-dht/src/rpc/index.js"}],[5330,{"pull-cat":5324,"pull-pair":5344,"pull-pushable":5345,"pull-reader":5346},function(){with(this)return function(){"use strict";return function(e,t,r){var n=e("pull-reader"),i=e("pull-pushable"),s=e("pull-cat"),o=e("pull-pair");t.exports=function(e,t){"function"==typeof e&&(t=e,e={}),t=function(e){var t=0;return function(r,n,i){t++||e(r,n,i)}}(t||function(){});var r=n(e&&e.timeout||5e3),a=i((function(e){e&&t(e)})),c=o();return{handshake:{read:r.read,abort:function(e){a.end(e),r.abort(e,(function(e){})),t(e)},write:a.push,rest:function(){return a.end(),{source:r.read(),sink:c.sink}}},sink:r,source:s([a,c.source])}}}}},{package:"pull-handshake",file:"/home/circleci/project/node_modules/pull-handshake/index.js"}],[4865,{"../support":4872,"./crypto":4864,"async/waterfall":1726,debug:2197},function(){with(this)return function(){"use strict";return function(e,t,r){const n=e("debug"),i=e("async/waterfall"),s=e("../support"),o=e("./crypto"),a=n("libp2p:secio");a.error=n("libp2p:secio:error"),t.exports=function(e,t){a("2. exchange - start"),a("2. exchange - writing exchange"),i([t=>o.createExchange(e,t),(t,r)=>{s.write(e,t),s.read(e.shake,r)},(t,r)=>{a("2. exchange - reading exchange"),o.verify(e,t,r)},t=>o.generateKeys(e,t)],(e=>{if(e)return t(e);a("2. exchange - finish"),t()}))}}}},{package:"libp2p-secio",file:"/home/circleci/project/node_modules/libp2p-secio/src/handshake/exchange.js"}],[4866,{"../etm":4863,"./crypto":4864,debug:2197,"pull-handshake":5330,"pull-stream/pull":5352,"pull-stream/sources/error":5363},function(){with(this)return function(){"use strict";return function(e,t,r){const n=e("pull-stream/pull"),i=e("pull-stream/sources/error"),s=e("pull-handshake"),o=e("debug"),a=o("libp2p:secio");a.error=o("libp2p:secio:error");const c=e("../etm"),u=e("./crypto");t.exports=function(e,t){a("3. finish - start");const r=e.protocols,o=e.shake.rest(),l=s({timeout:e.timeout},(e=>{if(e)throw e}));n(o,c.createUnboxStream(r.remote.cipher,r.remote.mac),l,c.createBoxStream(r.local.cipher,r.local.mac),o),l.handshake.write(e.proposal.in.rand),l.handshake.read(e.proposal.in.rand.length,((r,n)=>{const s=r=>{a.error(r),e.secure.resolve({source:i(r),sink(e){}}),t(r)};if(r)return s(r);try{u.verifyNonce(e,n)}catch(r){return s(r)}a("3. finish - finish"),e.secure.resolve(l.handshake.rest()),t()}))}}}},{package:"libp2p-secio",file:"/home/circleci/project/node_modules/libp2p-secio/src/handshake/finish.js"}],[4868,{"../support":4872,"./crypto":4864,"async/waterfall":1726,debug:2197},function(){with(this)return function(){"use strict";return function(e,t,r){const n=e("debug"),i=e("async/waterfall"),s=e("../support"),o=e("./crypto"),a=n("libp2p:secio");a.error=n("libp2p:secio:error"),t.exports=function(e,t){a("1. propose - start"),a("1. propose - writing proposal"),s.write(e,o.createProposal(e)),i([t=>s.read(e.shake,t),(t,r)=>{a("1. propose - reading proposal",t),o.identify(e,t,r)},t=>o.selectProtocols(e,t)],(e=>{if(e)return t(e);a("1. propose - finish"),t()}))}}}},{package:"libp2p-secio",file:"/home/circleci/project/node_modules/libp2p-secio/src/handshake/propose.js"}],[4903,{buffer:2028,"libp2p-crypto":4773,mafmt:5067,multiaddr:5085,"peer-id":5284},function(){with(this)return function(){"use strict";return function(e,t,r){(function(n){(function(){const i=e("multiaddr"),s=e("peer-id"),o=e("libp2p-crypto"),a=e("mafmt");const c={string:e=>"string"==typeof e,object:e=>"object"==typeof e,multiaddr:e=>{if(c.string(e))try{return i(e),!0}catch(e){return!1}},function:e=>"function"==typeof e};function u(e,t){if(!Array.isArray(t))throw new Error("Data is not an array");e.forEach(((e,r)=>{if(!c[e])throw console.error("Type %s does not exist",e),new Error("Type "+e+" does not exist");if(!c[e](t[r]))throw new Error("Data at index "+r+" is invalid for type "+e)}))}(r=t.exports).cleanUrlSIO=function(e){const t=e.protos(),r=t[0].name,n=t[1].name,i=t[2].name,s=e.stringTuples(),o=s[1][1];if("tcp"!==n||"ws"!==i&&"wss"!==i)throw new Error("invalid multiaddr: "+e.toString());let a=s[0][1];"ip6"===r&&(a="["+a+"]");let c="ws"===i&&80===o||"wss"===i&&443===o?"":o;return("wss"===i?"https":"http")+"://"+a+(c?":"+c:"")},r.validate=u,r.Protocol=function(e){e||(e=()=>{});const t=this;t.requests={},t.addRequest=(e,r,n)=>{t.requests[e]={def:r,handle:n}},t.handleSocket=r=>{r.r={},Object.keys(t.requests).forEach((n=>{const i=t.requests[n];r.on(n,(function(){const t=[...arguments];try{u(i.def,t),t.unshift(r),i.handle.apply(null,t)}catch(i){e(i),e("peer %s has sent invalid data for request %s",r.id||"<server>",n,t)}}))}))}},r.getIdAndValidate=function(e,t,r){s.createFromPubKey(n.from(e,"hex"),((i,s)=>i?r(new Error("Crypto error")):s.toB58String()!==t?r(new Error("Id is not matching")):r(null,o.keys.unmarshalPublicKey(n.from(e,"hex")))))},r.validateMa=e=>a.WebSocketStar.matches(i(e))}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"libp2p-websocket-star",file:"/home/circleci/project/node_modules/libp2p-websocket-star/src/utils.js"}],[4902,{"./errors":4900,"./utils":4903,"async/series":1719,"async/setImmediate":1720,buffer:2028,debug:2197,events:2029,"interface-connection":4331,"libp2p-crypto":4773,multiaddr:5085,once:5184,"pull-stream/pull":5352,"pull-stream/throughs/through":5377,"socket.io-client":5696,"socket.io-pull-stream":5718,uuid:5846},function(){with(this)return function(){"use strict";return function(e,t,r){(function(r){(function(){const n=e("debug")("libp2p:websocket-star:listener"),i=e("multiaddr"),s=e("socket.io-client"),o=e("socket.io-pull-stream"),a=e("uuid"),c=e("async/series"),u=e("events").EventEmitter,l=e("interface-connection").Connection,d=e("once"),f=e("async/setImmediate"),h=e("./utils"),p=h.cleanUrlSIO,m=e("libp2p-crypto"),g=e("pull-stream/pull"),y=e("pull-stream/throughs/through"),b=e("./errors"),_=d((()=>{})),w={transports:["websocket"],"force new connection":!0};t.exports=class extends u{constructor(e){super(),this.id=e.id,this.log=n.bind(n,"listener#offline"),this.canCrypto=Boolean(e.id),this._handler=e.handler||_,this.listeners_list=e.listeners||{},this.flag=e.flag,this.conns=[],this.connected=!1}_up(e){if(e=e?d(e):_,this.io)return e();this.log=n.bind(n,"listener#"+this.server),this.log("dialing to signalling server");const t=this.io=s.connect(this.server,w);o(t,{codec:"buffer"}),t.once("error",e),t.once("connect_error",e),t.once("connect",e);const r=new h.Protocol(this.log);r.addRequest("ws-peer",["multiaddr"],((e,t)=>this.emit("peer",t))),r.addRequest("ss-incomming",["string","multiaddr","function"],this._incommingDial.bind(this)),r.handleSocket(t)}_down(){this.io&&(this.io.disconnect(),this.emit("close"),delete this.io)}_cryptoChallenge(e){if(!this.io)return e(new Error("Not connected"));const t=this.canCrypto?m.keys.marshalPublicKey(this.id.pubKey).toString("hex"):"",n=this.ma.toString();this.io.emit("ss-join",n,t,((t,n,i)=>{if(t)return e(t);if(n){if(!this.canCrypto)return this._down(),e(new Error("Can't sign cryptoChallenge: No id provided"));this.log("performing cryptoChallenge"),this.id.privKey.sign(r.from(n),((t,r)=>{if(t)return e(t);this.signature=r.toString("hex"),this._join(e)}))}else{if(!this.flag)return this._down(),e(new Error('Tried to listen on a server with crypto challenge disabled!\n    This is prohibited by default and can lead to security issues!\n    Please set "allowJoinWithDisabledChallenge" to true in the constructor options (but only if you know what you are doing)!'));this.signature="_",e(null,null,i)}}))}_crypto(e){if(e=e?d(e):_,this.log("joining"),!this.io)return e(new Error("Not connected"));this.signature?this._join(e):this._cryptoChallenge(e)}_join(e){this.io.emit("ss-join",this.ma.toString(),this.signature,e)}_incommingDial(e,t,r,n){this.log("dial#"+t+" incomming from",r);const s=i(r),o=this.io.createSource(t+".dialer"),a=this.io.createSink(t+".listener");n();const c=new l({sink:a,source:o},{getObservedAddrs:e=>e(null,[s])});this.emit("connection",c),this._handler(c)}listen(e,t){if(this.ma=e,this.server=p(e),this.listeners_list[this.server]=this,t=t?d(t):_,this.connected)return this.closing=!1,f((()=>t()));c([e=>this._up(e),e=>this._crypto(((t,r,n)=>e(t,n)))],((e,[r,n])=>{if(e){if(e.description&&"ENOTFOUND"===e.description.code){const t=e.description.hostname;e=Object.assign(new Error(`WebSocket connection failed on ${t}`),{code:b.ERR_WS_STAR_WEBSOCKET_CONNECTION})}return this.log("error",e),e instanceof Error||(e=new Error(e)),this._down(),this.emit("error",e),this.emit("close"),t(e)}this.log("success"),this.connected=!0,this.io.on("reconnect",(()=>{this.signature=null,this._crypto(((e,t,r)=>{if(e)this.log("reconnect error",e),this.emit("error",e);else{this.log("reconnected");for(const e of r||[])this.emit("peer",e)}}))})),this.emit("listening");for(const e of n||[])this.emit("peer",e);t()}))}getAddrs(e){f((()=>e(null,this.ma?[this.ma]:[])))}get activeConnections(){return this.conns=this.conns.filter((e=>e.sink||e.source)),Boolean(this.conns.length)}maybeClose(){!this.activeConnections&&this.closing&&(this.connected=!1,this.closing=!1,this.log("no more connections and listener is offline - closing"),this._down())}close(e){e=e?d(e):_,this.closing=!0,this.maybeClose(),e()}stateWatch(e,t){let r={sink:!0,source:!0};const n=e=>y((e=>e),(t=>{r[e]=!1,r.sink||r.source||this.maybeClose()}));return this.conns.push(r),{sink:g(n("sink"),e),source:g(t,n("source"))}}dial(e,t,r){"function"==typeof t&&(r=t,t={});const s=i(e),o=new l(null),c=a(),u=this.log.bind(n,"dial#"+c);r=r?d(r):_;let f=this.io;if(!f)return r(new Error("Not listening"));const h=f.createSink(c+".dialer");return u("dialing",e.toString()),f.emit("ss-dial",this.ma.toString(),e.toString(),c,(e=>{if(e)return r(e instanceof Error?e:new Error(e));u(e?"error: "+e.toString():"success");const t=f.createSource(c+".listener");o.setInnerConn(this.stateWatch(h,t),{getObservedAddrs:e=>e(null,[s])}),r(null,o)})),o}}}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"libp2p-websocket-star",file:"/home/circleci/project/node_modules/libp2p-websocket-star/src/listener.js"}],[4253,{},function(){with(this)return function(){"use strict";return function(e,t,r){t.exports=function(){if("undefined"==typeof window)return null;var e={RTCPeerConnection:window.RTCPeerConnection||window.mozRTCPeerConnection||window.webkitRTCPeerConnection,RTCSessionDescription:window.RTCSessionDescription||window.mozRTCSessionDescription||window.webkitRTCSessionDescription,RTCIceCandidate:window.RTCIceCandidate||window.mozRTCIceCandidate||window.webkitRTCIceCandidate};return e.RTCPeerConnection?e:null}}}},{package:"get-browser-rtc",file:"/home/circleci/project/node_modules/get-browser-rtc/index.js"}],[5693,{"./lib/_stream_duplex.js":5680,"./lib/_stream_passthrough.js":5681,"./lib/_stream_readable.js":5682,"./lib/_stream_transform.js":5683,"./lib/_stream_writable.js":5684,"./lib/internal/streams/end-of-stream.js":5688,"./lib/internal/streams/pipeline.js":5690},function(){with(this)return function(){"use strict";return function(e,t,r){(r=t.exports=e("./lib/_stream_readable.js")).Stream=r,r.Readable=r,r.Writable=e("./lib/_stream_writable.js"),r.Duplex=e("./lib/_stream_duplex.js"),r.Transform=e("./lib/_stream_transform.js"),r.PassThrough=e("./lib/_stream_passthrough.js"),r.finished=e("./lib/internal/streams/end-of-stream.js"),r.pipeline=e("./lib/internal/streams/pipeline.js")}}},{package:"readable-stream",file:"/home/circleci/project/node_modules/simple-peer/node_modules/readable-stream/readable-browser.js"}],[5700,{debug:5701,parseuri:5271},function(){with(this)return function(){"use strict";return function(e,t,r){var n=e("parseuri"),i=e("debug")("socket.io-client:url");t.exports=function(e,t){var r=e;t=t||"undefined"!=typeof location&&location,null==e&&(e=t.protocol+"//"+t.host);"string"==typeof e&&("/"===e.charAt(0)&&(e="/"===e.charAt(1)?t.protocol+e:t.host+e),/^(https?|wss?):\/\//.test(e)||(i("protocol-less url %s",e),e=void 0!==t?t.protocol+"//"+e:"https://"+e),i("parse %s",e),r=n(e));r.port||(/^(http|ws)$/.test(r.protocol)?r.port="80":/^(http|ws)s$/.test(r.protocol)&&(r.port="443"));r.path=r.path||"/";var s=-1!==r.host.indexOf(":")?"["+r.host+"]":r.host;return r.id=r.protocol+"://"+s+":"+r.port,r.href=r.protocol+"://"+s+(t&&t.port===r.port?"":":"+r.port),r}}}},{package:"socket.io-client",file:"/home/circleci/project/node_modules/socket.io-client/lib/url.js"}],[5699,{"./on":5698,"component-bind":2092,"component-emitter":2093,debug:5701,"has-binary2":4280,parseqs:5270,"socket.io-parser":5705,"to-array":5777},function(){with(this)return function(){"use strict";return function(e,t,r){var n=e("socket.io-parser"),i=e("component-emitter"),s=e("to-array"),o=e("./on"),a=e("component-bind"),c=e("debug")("socket.io-client:socket"),u=e("parseqs"),l=e("has-binary2");t.exports=h;var d={connect:1,connect_error:1,connect_timeout:1,connecting:1,disconnect:1,error:1,reconnect:1,reconnect_attempt:1,reconnect_failed:1,reconnect_error:1,reconnecting:1,ping:1,pong:1},f=i.prototype.emit;function h(e,t,r){this.io=e,this.nsp=t,this.json=this,this.ids=0,this.acks={},this.receiveBuffer=[],this.sendBuffer=[],this.connected=!1,this.disconnected=!0,this.flags={},r&&r.query&&(this.query=r.query),this.io.autoConnect&&this.open()}i(h.prototype),h.prototype.subEvents=function(){if(!this.subs){var e=this.io;this.subs=[o(e,"open",a(this,"onopen")),o(e,"packet",a(this,"onpacket")),o(e,"close",a(this,"onclose"))]}},h.prototype.open=h.prototype.connect=function(){return this.connected||(this.subEvents(),this.io.reconnecting||this.io.open(),"open"===this.io.readyState&&this.onopen(),this.emit("connecting")),this},h.prototype.send=function(){var e=s(arguments);return e.unshift("message"),this.emit.apply(this,e),this},h.prototype.emit=function(e){if(d.hasOwnProperty(e))return f.apply(this,arguments),this;var t=s(arguments),r={type:(this.flags.binary!==undefined?this.flags.binary:l(t))?n.BINARY_EVENT:n.EVENT,data:t,options:{}};return r.options.compress=!this.flags||!1!==this.flags.compress,"function"==typeof t[t.length-1]&&(c("emitting packet with ack id %d",this.ids),this.acks[this.ids]=t.pop(),r.id=this.ids++),this.connected?this.packet(r):this.sendBuffer.push(r),this.flags={},this},h.prototype.packet=function(e){e.nsp=this.nsp,this.io.packet(e)},h.prototype.onopen=function(){if(c("transport is open - connecting"),"/"!==this.nsp)if(this.query){var e="object"==typeof this.query?u.encode(this.query):this.query;c("sending connect packet with query %s",e),this.packet({type:n.CONNECT,query:e})}else this.packet({type:n.CONNECT})},h.prototype.onclose=function(e){c("close (%s)",e),this.connected=!1,this.disconnected=!0,delete this.id,this.emit("disconnect",e)},h.prototype.onpacket=function(e){var t=e.nsp===this.nsp,r=e.type===n.ERROR&&"/"===e.nsp;if(t||r)switch(e.type){case n.CONNECT:this.onconnect();break;case n.EVENT:case n.BINARY_EVENT:this.onevent(e);break;case n.ACK:case n.BINARY_ACK:this.onack(e);break;case n.DISCONNECT:this.ondisconnect();break;case n.ERROR:this.emit("error",e.data)}},h.prototype.onevent=function(e){var t=e.data||[];c("emitting event %j",t),null!=e.id&&(c("attaching ack callback to event"),t.push(this.ack(e.id))),this.connected?f.apply(this,t):this.receiveBuffer.push(t)},h.prototype.ack=function(e){var t=this,r=!1;return function(){if(!r){r=!0;var i=s(arguments);c("sending ack %j",i),t.packet({type:l(i)?n.BINARY_ACK:n.ACK,id:e,data:i})}}},h.prototype.onack=function(e){var t=this.acks[e.id];"function"==typeof t?(c("calling ack %s with %j",e.id,e.data),t.apply(this,e.data),delete this.acks[e.id]):c("bad ack %s",e.id)},h.prototype.onconnect=function(){this.connected=!0,this.disconnected=!1,this.emit("connect"),this.emitBuffered()},h.prototype.emitBuffered=function(){var e;for(e=0;e<this.receiveBuffer.length;e++)f.apply(this,this.receiveBuffer[e]);for(this.receiveBuffer=[],e=0;e<this.sendBuffer.length;e++)this.packet(this.sendBuffer[e]);this.sendBuffer=[]},h.prototype.ondisconnect=function(){c("server disconnect (%s)",this.nsp),this.destroy(),this.onclose("io server disconnect")},h.prototype.destroy=function(){if(this.subs){for(var e=0;e<this.subs.length;e++)this.subs[e].destroy();this.subs=null}this.io.destroy(this)},h.prototype.close=h.prototype.disconnect=function(){return this.connected&&(c("performing disconnect (%s)",this.nsp),this.packet({type:n.DISCONNECT})),this.destroy(),this.connected&&this.onclose("io client disconnect"),this},h.prototype.compress=function(e){return this.flags.compress=e,this},h.prototype.binary=function(e){return this.flags.binary=e,this}}}},{package:"socket.io-client",file:"/home/circleci/project/node_modules/socket.io-client/lib/socket.js"}],[5701,{"./debug":5702,_process:5294},function(){with(this)return function(){"use strict";return function(e,t,r){(function(n){(function(){function i(){var e;try{e=r.storage.debug}catch(e){}return!e&&void 0!==n&&"env"in n&&(e=n.env.DEBUG),e}(r=t.exports=e("./debug")).log=function(){return"object"==typeof console&&console.log&&Function.prototype.apply.call(console.log,console,arguments)},r.formatArgs=function(e){var t=this.useColors;if(e[0]=(t?"%c":"")+this.namespace+(t?" %c":" ")+e[0]+(t?"%c ":" ")+"+"+r.humanize(this.diff),!t)return;var n="color: "+this.color;e.splice(1,0,n,"color: inherit");var i=0,s=0;e[0].replace(/%[a-zA-Z%]/g,(function(e){"%%"!==e&&(i++,"%c"===e&&(s=i))})),e.splice(s,0,n)},r.save=function(e){try{null==e?r.storage.removeItem("debug"):r.storage.debug=e}catch(e){}},r.load=i,r.useColors=function(){if("undefined"!=typeof window&&window.process&&"renderer"===window.process.type)return!0;if("undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))return!1;return"undefined"!=typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!=typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)},r.storage="undefined"!=typeof chrome&&void 0!==chrome.storage?chrome.storage.local:function(){try{return window.localStorage}catch(e){}}(),r.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],r.formatters.j=function(e){try{return JSON.stringify(e)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}},r.enable(i())}).call(this)}).call(this,e("_process"))}}},{package:"debug",file:"/home/circleci/project/node_modules/socket.io-client/node_modules/debug/src/browser.js"}],[5705,{"./binary":5704,"./is-buffer":5706,"component-emitter":2093,debug:5707,isarray:5709},function(){with(this)return function(){"use strict";return function(e,t,r){var n=e("debug")("socket.io-parser"),i=e("component-emitter"),s=e("./binary"),o=e("isarray"),a=e("./is-buffer");function c(){}r.protocol=4,r.types=["CONNECT","DISCONNECT","EVENT","ACK","ERROR","BINARY_EVENT","BINARY_ACK"],r.CONNECT=0,r.DISCONNECT=1,r.EVENT=2,r.ACK=3,r.ERROR=4,r.BINARY_EVENT=5,r.BINARY_ACK=6,r.Encoder=c,r.Decoder=d;var u=r.ERROR+'"encode error"';function l(e){var t=""+e.type;if(r.BINARY_EVENT!==e.type&&r.BINARY_ACK!==e.type||(t+=e.attachments+"-"),e.nsp&&"/"!==e.nsp&&(t+=e.nsp+","),null!=e.id&&(t+=e.id),null!=e.data){var i=function(e){try{return JSON.stringify(e)}catch(e){return!1}}(e.data);if(!1===i)return u;t+=i}return n("encoded %j as %s",e,t),t}function d(){this.reconstructor=null}function f(e){this.reconPack=e,this.buffers=[]}function h(e){return{type:r.ERROR,data:"parser error: "+e}}c.prototype.encode=function(e,t){(n("encoding packet %j",e),r.BINARY_EVENT===e.type||r.BINARY_ACK===e.type)?function(e,t){function r(e){var r=s.deconstructPacket(e),n=l(r.packet),i=r.buffers;i.unshift(n),t(i)}s.removeBlobs(e,r)}(e,t):t([l(e)])},i(d.prototype),d.prototype.add=function(e){var t;if("string"==typeof e)t=function(e){var t=0,i={type:Number(e.charAt(0))};if(null==r.types[i.type])return h("unknown packet type "+i.type);if(r.BINARY_EVENT===i.type||r.BINARY_ACK===i.type){for(var s=t+1;"-"!==e.charAt(++t)&&t!=e.length;);var a=e.substring(s,t);if(a!=Number(a)||"-"!==e.charAt(t))throw new Error("Illegal attachments");i.attachments=Number(a)}if("/"===e.charAt(t+1)){for(s=t+1;++t;){if(","===(u=e.charAt(t)))break;if(t===e.length)break}i.nsp=e.substring(s,t)}else i.nsp="/";var c=e.charAt(t+1);if(""!==c&&Number(c)==c){for(s=t+1;++t;){var u;if(null==(u=e.charAt(t))||Number(u)!=u){--t;break}if(t===e.length)break}i.id=Number(e.substring(s,t+1))}if(e.charAt(++t)){var l=function(e){try{return JSON.parse(e)}catch(e){return!1}}(e.substr(t));if(!(!1!==l&&(i.type===r.ERROR||o(l))))return h("invalid payload");i.data=l}return n("decoded %s as %j",e,i),i}(e),r.BINARY_EVENT===t.type||r.BINARY_ACK===t.type?(this.reconstructor=new f(t),0===this.reconstructor.reconPack.attachments&&this.emit("decoded",t)):this.emit("decoded",t);else{if(!a(e)&&!e.base64)throw new Error("Unknown type: "+e);if(!this.reconstructor)throw new Error("got binary data when not reconstructing a packet");(t=this.reconstructor.takeBinaryData(e))&&(this.reconstructor=null,this.emit("decoded",t))}},d.prototype.destroy=function(){this.reconstructor&&this.reconstructor.finishedReconstruction()},f.prototype.takeBinaryData=function(e){if(this.buffers.push(e),this.buffers.length===this.reconPack.attachments){var t=s.reconstructPacket(this.reconPack,this.buffers);return this.finishedReconstruction(),t}return null},f.prototype.finishedReconstruction=function(){this.reconPack=null,this.buffers=[]}}}},{package:"socket.io-parser",file:"/home/circleci/project/node_modules/socket.io-parser/index.js"}],[5697,{"./on":5698,"./socket":5699,backo2:1890,"component-bind":2092,"component-emitter":2093,debug:5701,"engine.io-client":2284,indexof:4328,"socket.io-parser":5705},function(){with(this)return function(){"use strict";return function(e,t,r){var n=e("engine.io-client"),i=e("./socket"),s=e("component-emitter"),o=e("socket.io-parser"),a=e("./on"),c=e("component-bind"),u=e("debug")("socket.io-client:manager"),l=e("indexof"),d=e("backo2"),f=Object.prototype.hasOwnProperty;function h(e,t){if(!(this instanceof h))return new h(e,t);e&&"object"==typeof e&&(t=e,e=undefined),(t=t||{}).path=t.path||"/socket.io",this.nsps={},this.subs=[],this.opts=t,this.reconnection(!1!==t.reconnection),this.reconnectionAttempts(t.reconnectionAttempts||Infinity),this.reconnectionDelay(t.reconnectionDelay||1e3),this.reconnectionDelayMax(t.reconnectionDelayMax||5e3),this.randomizationFactor(t.randomizationFactor||.5),this.backoff=new d({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(null==t.timeout?2e4:t.timeout),this.readyState="closed",this.uri=e,this.connecting=[],this.lastPing=null,this.encoding=!1,this.packetBuffer=[];var r=t.parser||o;this.encoder=new r.Encoder,this.decoder=new r.Decoder,this.autoConnect=!1!==t.autoConnect,this.autoConnect&&this.open()}t.exports=h,h.prototype.emitAll=function(){for(var e in this.emit.apply(this,arguments),this.nsps)f.call(this.nsps,e)&&this.nsps[e].emit.apply(this.nsps[e],arguments)},h.prototype.updateSocketIds=function(){for(var e in this.nsps)f.call(this.nsps,e)&&(this.nsps[e].id=this.generateId(e))},h.prototype.generateId=function(e){return("/"===e?"":e+"#")+this.engine.id},s(h.prototype),h.prototype.reconnection=function(e){return arguments.length?(this._reconnection=!!e,this):this._reconnection},h.prototype.reconnectionAttempts=function(e){return arguments.length?(this._reconnectionAttempts=e,this):this._reconnectionAttempts},h.prototype.reconnectionDelay=function(e){return arguments.length?(this._reconnectionDelay=e,this.backoff&&this.backoff.setMin(e),this):this._reconnectionDelay},h.prototype.randomizationFactor=function(e){return arguments.length?(this._randomizationFactor=e,this.backoff&&this.backoff.setJitter(e),this):this._randomizationFactor},h.prototype.reconnectionDelayMax=function(e){return arguments.length?(this._reconnectionDelayMax=e,this.backoff&&this.backoff.setMax(e),this):this._reconnectionDelayMax},h.prototype.timeout=function(e){return arguments.length?(this._timeout=e,this):this._timeout},h.prototype.maybeReconnectOnOpen=function(){!this.reconnecting&&this._reconnection&&0===this.backoff.attempts&&this.reconnect()},h.prototype.open=h.prototype.connect=function(e,t){if(u("readyState %s",this.readyState),~this.readyState.indexOf("open"))return this;u("opening %s",this.uri),this.engine=n(this.uri,this.opts);var r=this.engine,i=this;this.readyState="opening",this.skipReconnect=!1;var s=a(r,"open",(function(){i.onopen(),e&&e()})),o=a(r,"error",(function(t){if(u("connect_error"),i.cleanup(),i.readyState="closed",i.emitAll("connect_error",t),e){var r=new Error("Connection error");r.data=t,e(r)}else i.maybeReconnectOnOpen()}));if(!1!==this._timeout){var c=this._timeout;u("connect attempt will timeout after %d",c),0===c&&s.destroy();var l=setTimeout((function(){u("connect attempt timed out after %d",c),s.destroy(),r.close(),r.emit("error","timeout"),i.emitAll("connect_timeout",c)}),c);this.subs.push({destroy:function(){clearTimeout(l)}})}return this.subs.push(s),this.subs.push(o),this},h.prototype.onopen=function(){u("open"),this.cleanup(),this.readyState="open",this.emit("open");var e=this.engine;this.subs.push(a(e,"data",c(this,"ondata"))),this.subs.push(a(e,"ping",c(this,"onping"))),this.subs.push(a(e,"pong",c(this,"onpong"))),this.subs.push(a(e,"error",c(this,"onerror"))),this.subs.push(a(e,"close",c(this,"onclose"))),this.subs.push(a(this.decoder,"decoded",c(this,"ondecoded")))},h.prototype.onping=function(){this.lastPing=new Date,this.emitAll("ping")},h.prototype.onpong=function(){this.emitAll("pong",new Date-this.lastPing)},h.prototype.ondata=function(e){this.decoder.add(e)},h.prototype.ondecoded=function(e){this.emit("packet",e)},h.prototype.onerror=function(e){u("error",e),this.emitAll("error",e)},h.prototype.socket=function(e,t){var r=this.nsps[e];if(!r){r=new i(this,e,t),this.nsps[e]=r;var n=this;r.on("connecting",s),r.on("connect",(function(){r.id=n.generateId(e)})),this.autoConnect&&s()}function s(){~l(n.connecting,r)||n.connecting.push(r)}return r},h.prototype.destroy=function(e){var t=l(this.connecting,e);~t&&this.connecting.splice(t,1),this.connecting.length||this.close()},h.prototype.packet=function(e){u("writing packet %j",e);var t=this;e.query&&0===e.type&&(e.nsp+="?"+e.query),t.encoding?t.packetBuffer.push(e):(t.encoding=!0,this.encoder.encode(e,(function(r){for(var n=0;n<r.length;n++)t.engine.write(r[n],e.options);t.encoding=!1,t.processPacketQueue()})))},h.prototype.processPacketQueue=function(){if(this.packetBuffer.length>0&&!this.encoding){var e=this.packetBuffer.shift();this.packet(e)}},h.prototype.cleanup=function(){u("cleanup");for(var e=this.subs.length,t=0;t<e;t++){this.subs.shift().destroy()}this.packetBuffer=[],this.encoding=!1,this.lastPing=null,this.decoder.destroy()},h.prototype.close=h.prototype.disconnect=function(){u("disconnect"),this.skipReconnect=!0,this.reconnecting=!1,"opening"===this.readyState&&this.cleanup(),this.backoff.reset(),this.readyState="closed",this.engine&&this.engine.close()},h.prototype.onclose=function(e){u("onclose"),this.cleanup(),this.backoff.reset(),this.readyState="closed",this.emit("close",e),this._reconnection&&!this.skipReconnect&&this.reconnect()},h.prototype.reconnect=function(){if(this.reconnecting||this.skipReconnect)return this;var e=this;if(this.backoff.attempts>=this._reconnectionAttempts)u("reconnect failed"),this.backoff.reset(),this.emitAll("reconnect_failed"),this.reconnecting=!1;else{var t=this.backoff.duration();u("will wait %dms before reconnect attempt",t),this.reconnecting=!0;var r=setTimeout((function(){e.skipReconnect||(u("attempting reconnect"),e.emitAll("reconnect_attempt",e.backoff.attempts),e.emitAll("reconnecting",e.backoff.attempts),e.skipReconnect||e.open((function(t){t?(u("reconnect attempt error"),e.reconnecting=!1,e.reconnect(),e.emitAll("reconnect_error",t.data)):(u("reconnect success"),e.onreconnect())})))}),t);this.subs.push({destroy:function(){clearTimeout(r)}})}},h.prototype.onreconnect=function(){var e=this.backoff.attempts;this.reconnecting=!1,this.backoff.reset(),this.updateSocketIds(),this.emitAll("reconnect",e)}}}},{package:"socket.io-client",file:"/home/circleci/project/node_modules/socket.io-client/lib/manager.js"}],[1725,{"./eachSeries":1685,"./internal/slice":1708,"./internal/wrapAsync":1710,"lodash/noop":5053},function(){with(this)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=function(e,t){var r,a=null;t=t||n.default,(0,i.default)(e,(function(e,t){(0,s.default)(e)((function(e,n){r=arguments.length>2?(0,o.default)(arguments,1):n,a=e,t(!e)}))}),(function(){t(a,r)}))};var n=a(e("lodash/noop")),i=a(e("./eachSeries")),s=a(e("./internal/wrapAsync")),o=a(e("./internal/slice"));function a(e){return e&&e.__esModule?e:{default:e}}t.exports=r.default}}},{package:"async",file:"/home/circleci/project/node_modules/async/tryEach.js"}],[4832,{"./constants":4831,debug:2197,"pull-handshake":5330,"pull-stream/pull":5352},function(){with(this)return function(){"use strict";return function(e,t,r){const n=e("pull-stream/pull"),i=e("pull-handshake"),s=e("./constants"),o=s.PROTOCOL,a=s.PING_LENGTH,c=e("debug"),u=c("libp2p-ping");u.error=c("libp2p-ping:error"),(r=t.exports).mount=function(e){e.handle(o,((e,t)=>{const r=i({timeout:0}),s=r.handshake;n(t,r,t),function e(){s.read(a,((t,r)=>{if(!0!==t)return t?u.error(t):(s.write(r),e())}))}()}))},r.unmount=function(e){e.unhandle(o)}}}},{package:"libp2p-ping",file:"/home/circleci/project/node_modules/libp2p-ping/src/handler.js"}],[4834,{"./constants":4831,"./util":4835,debug:2197,events:2029,"pull-handshake":5330,"pull-stream/pull":5352,"pull-stream/sources/empty":5362},function(){with(this)return function(){"use strict";return function(e,t,r){const n=e("events").EventEmitter,i=e("pull-stream/pull"),s=e("pull-stream/sources/empty"),o=e("pull-handshake"),a=e("./constants"),c=e("./util").rnd,u=e("debug"),l=u("libp2p-ping");l.error=u("libp2p-ping:error");const d=a.PROTOCOL,f=a.PING_LENGTH;t.exports=class extends n{constructor(e,t){super(),this._stopped=!1,this.peer=t,this.swarm=e}start(){l("dialing %s to %s",d,this.peer.id.toB58String()),this.swarm.dial(this.peer,d,((e,t)=>{if(e)return this.emit("error",e);const r=o({timeout:0});this.shake=r.handshake,i(r,t,r);const n=this;!function e(){let t=new Date,r=c(f);n.shake.write(r),n.shake.read(f,((i,s)=>{let o=new Date;if(i||!r.equals(s)){const e=new Error("Received wrong ping ack");return n.emit("error",e)}n.emit("ping",o-t),n._stopped||e()}))}()}))}stop(){!this._stopped&&this.shake&&(this._stopped=!0,i(s(),this.shake.rest()))}}}}},{package:"libp2p-ping",file:"/home/circleci/project/node_modules/libp2p-ping/src/ping.js"}],[4790,{"./config":4789,assert:1647,"async/map":1711,"async/setImmediate":1720,"libp2p-pubsub":4836,"pull-length-prefixed":5333,"pull-stream":5351},function(){with(this)return function(){"use strict";return function(e,t,r){const n=e("pull-stream"),i=e("pull-length-prefixed"),s=e("assert"),o=e("libp2p-pubsub"),{message:a,utils:c}=e("libp2p-pubsub"),u=e("./config").multicodec,l=c.ensureArray,d=e("async/setImmediate"),f=e("async/map"),h=()=>{};t.exports=class extends o{constructor(e){super("libp2p:floodsub",u,e),this.subscriptions=new Set}_onDial(e,t,r){super._onDial(e,t,(t=>{if(t)return r(t);const n=e.id.toB58String(),i=this.peers.get(n);i&&i.isWritable&&i.sendSubscriptions(this.subscriptions),d((()=>r()))}))}_processConnection(e,t,r){n(t,i.decode(),n.map((e=>a.rpc.RPC.decode(e))),n.drain((t=>this._onRpc(e,t)),(t=>this._onConnectionEnd(e,r,t))))}_onRpc(e,t){if(!t)return;this.log("rpc from",e);const r=t.subscriptions,n=t.msgs;if(n&&n.length&&this._processRpcMessages(c.normalizeInRpcMessages(t.msgs)),r&&r.length){const t=this.peers.get(e);t&&(t.updateSubscriptions(r),this.emit("floodsub:subscription-change",t.info,t.topics,r))}}_processRpcMessages(e){e.forEach((e=>{const t=c.msgId(e.from,e.seqno);this.seenCache.has(t)||(this.seenCache.put(t),this._emitMessages(e.topicIDs,[e]),this._forwardMessages(e.topicIDs,[e]))}))}_emitMessages(e,t){e.forEach((e=>{this.subscriptions.has(e)&&t.forEach((t=>{this.emit(e,t)}))}))}_forwardMessages(e,t){this.peers.forEach((r=>{r.isWritable&&c.anyMatch(r.topics,e)&&(r.sendMessages(c.normalizeOutRpcMessages(t)),this.log("publish msgs on topics",e,r.info.id.toB58String()))}))}stop(e){super.stop((t=>{if(t)return e(t);this.subscriptions=new Set,e()}))}publish(e,t,r){s(this.started,"FloodSub is not started"),r=r||h,this.log("publish",e,t),e=l(e),t=l(t);const n=this.libp2p.peerInfo.id.toB58String();f(t,((t,r)=>{const i=c.randomSeqno();this.seenCache.put(c.msgId(n,i));const s={from:n,data:t,seqno:i,topicIDs:e};this._emitMessages(e,[s]),this._buildMessage(s,r)}),((t,n)=>{if(t)return r(t);this._forwardMessages(e,n),r(null)}))}subscribe(e){function t(r){if(r&&r.isWritable)return r.sendSubscriptions(e);const n=()=>{r.removeListener("connection",n),t(r)};r.on("connection",n),r.once("close",(()=>r.removeListener("connection",n)))}s(this.started,"FloodSub is not started"),(e=l(e)).forEach((e=>this.subscriptions.add(e))),this.peers.forEach((e=>t(e)))}unsubscribe(e){function t(r){r&&r.isWritable?r.sendUnsubscriptions(e):d(t.bind(r))}this.started&&((e=l(e)).forEach((e=>this.subscriptions.delete(e))),this.peers.forEach((e=>t(e))))}}}}},{package:"libp2p-floodsub",file:"/home/circleci/project/node_modules/libp2p-floodsub/src/index.js"}],[4883,{"err-code":2299},function(){with(this)return function(){"use strict";return function(e,t,r){const n=e("err-code");t.exports={CONNECTION_FAILED:e=>n(e,"CONNECTION_FAILED"),DIAL_ABORTED:()=>n("Dial was aborted","DIAL_ABORTED"),ERR_BLACKLISTED:()=>n("Dial is currently blacklisted for this peer","ERR_BLACKLISTED"),DIAL_SELF:()=>n("A node cannot dial itself","DIAL_SELF"),INVALID_STATE_TRANSITION:e=>n(e,"INVALID_STATE_TRANSITION"),NO_TRANSPORTS_REGISTERED:()=>n("No transports registered, dial not possible","NO_TRANSPORTS_REGISTERED"),PROTECTOR_REQUIRED:()=>n("No protector provided with private network enforced","PROTECTOR_REQUIRED"),UNEXPECTED_END:()=>n("Unexpected end of input from reader.","UNEXPECTED_END"),maybeUnexpectedEnd:e=>!0===e?t.exports.UNEXPECTED_END():e}}}},{package:"libp2p-switch",file:"/home/circleci/project/node_modules/libp2p-switch/src/errors.js"}],[4884,{multiaddr:5085,"peer-id":5284,"peer-info":5285},function(){with(this)return function(){"use strict";return function(e,t,r){const n=e("peer-id"),i=e("peer-info"),s=e("multiaddr");t.exports=function(e,t){let r;if(i.isPeerInfo(e))return t.put(e);if(s.isMultiaddr(e)){const s=e.getPeerId();try{r=t.get(s)}catch(e){r=new i(n.createFromB58String(s))}return r.multiaddrs.add(e),r}if(n.isPeerId(e)){const r=e.toB58String();try{return t.get(r)}catch(e){throw new Error(`Couldnt get PeerInfo for ${r}`)}}throw new Error("peer type not recognized")}}}},{package:"libp2p-switch",file:"/home/circleci/project/node_modules/libp2p-switch/src/get-peer-info.js"}],[4890,{"async/setImmediate":1720},function(){with(this)return function(){"use strict";return function(e,t,r){const n=e("async/setImmediate");t.exports={tag:"/plaintext/1.0.0",encrypt:(e,t,r,i)=>("function"==typeof r&&(i=r,r=undefined),n((()=>i())),t)}}}},{package:"libp2p-switch",file:"/home/circleci/project/node_modules/libp2p-switch/src/plaintext.js"}],[4889,{events:2029,"pull-stream/throughs/map":5374},function(){with(this)return function(){"use strict";return function(e,t,r){const n=e("pull-stream/throughs/map"),i=e("events");t.exports=e=>{const t=Object.assign(new i,{incoming:r("in"),outgoing:r("out")});return e.on("peer-mux-established",(e=>{t.emit("peer:connected",e.id.toB58String())})),e.on("peer-mux-closed",(e=>{t.emit("peer:closed",e.id.toB58String())})),t;function r(e){return(r,i,s)=>n((n=>(function(e,r,n,i,s){e.then((e=>{if(e){const o=e.id.toB58String();t.emit("message",o,r,n,i,s)}}))}(s,r,i,e,n.length),n)))}}}}},{package:"libp2p-switch",file:"/home/circleci/project/node_modules/libp2p-switch/src/observer.js"}],[4892,{"./old-peers":4893,"./stat":4894,events:2029},function(){with(this)return function(){"use strict";return function(e,t,r){const n=e("events"),i=e("./stat"),s=e("./old-peers"),o={computeThrottleMaxQueueSize:1e3,computeThrottleTimeout:2e3,movingAverageIntervals:[6e4,3e5,9e5],maxOldPeersRetention:50},a=["dataReceived","dataSent"],c={in:"dataReceived",out:"dataSent"};t.exports=(e,t)=>{const r=Object.assign({},o,t),u=new i(a,r),l=Object.assign(new n,{start:function(){e.on("message",m),u.start();for(let e of f.values())e.start();for(let e of h.values())e.start()},stop:function(){e.removeListener("message",m),u.stop();for(let e of f.values())e.stop();for(let e of h.values())e.stop()},global:u,peers:()=>Array.from(f.keys()),forPeer:e=>f.get(e)||d.get(e),transports:()=>Array.from(h.keys()),forTransport:e=>h.get(e),protocols:()=>Array.from(p.keys()),forProtocol:e=>p.get(e)});u.on("update",g);const d=s(r.maxOldPeersRetention),f=new Map,h=new Map,p=new Map;return e.on("peer:closed",(e=>{const t=f.get(e);t&&(t.removeListener("update",g),t.stop(),f.delete(e),d.set(e,t))})),l;function m(e,t,n,s,o){const l=c[s];if(t){u.push(l,o);let t=f.get(e);t||(t=d.get(e),t?d.delete(e):t=new i(a,r),t.on("update",g),t.start(),f.set(e,t)),t.push(l,o)}if(t){let e=h.get(t);e||(e=new i(a,r),e.on("update",g),h.set(t,e)),e.push(l,o)}if(n){let e=p.get(n);e||(e=new i(a,r),e.on("update",g),p.set(n,e)),e.push(l,o)}}function g(){l.emit("update")}}}}},{package:"libp2p-switch",file:"/home/circleci/project/node_modules/libp2p-switch/src/stats/index.js"}],[4875,{"../observe-connection":4888,"./incoming":4876,debug:2197},function(){with(this)return function(){"use strict";return function(e,t,r){const n=e("debug"),i=e("./incoming"),s=e("../observe-connection");t.exports=function(e){const t=n("libp2p:switch:listener");return function(r,n){return function(o){t("received incoming connection for transport %s",r),o.getPeerInfo(((a,c)=>{const u=r?s(r,null,o,e.observer):o,l=new i({connection:u,_switch:e,transportKey:r,peerInfo:c});l.once("error",(e=>t(e))),l.once("private",(e=>{if(n)return n(e);l.encrypt()})),l.once("encrypted",(()=>l.upgrade())),l.protect()}))}}}}}},{package:"libp2p-switch",file:"/home/circleci/project/node_modules/libp2p-switch/src/connection/handler.js"}],[4880,{"../constants":4879,"../get-peer-info":4884,"./queueManager":4882},function(){with(this)return function(){"use strict";return function(e,t,r){const n=e("./queueManager"),i=e("../get-peer-info"),{BLACK_LIST_ATTEMPTS:s,BLACK_LIST_TTL:o,MAX_COLD_CALLS:a,MAX_PARALLEL_DIALS:c,PRIORITY_HIGH:u,PRIORITY_LOW:l}=e("../constants");t.exports=function(e){const t=new n(e);function r({peerInfo:r,protocol:n,options:s,callback:o}){"function"==typeof n&&(o=n,n=null);try{r=i(r,e._peerBook)}catch(e){return o(e)}t.add({peerInfo:r,protocol:n,options:s,callback:o})}return e.state.on("STARTED:enter",(function(e){t.start(),e()})),e.state.on("STOPPING:enter",(function(e){t.stop(),e()})),{connect:function(e,t,n){"function"==typeof t&&(n=t,t=null),r({peerInfo:e,protocol:null,options:t={useFSM:!1,priority:l,...t},callback:n})},dial:function(e,t,n){r({peerInfo:e,protocol:t,options:{useFSM:!1,priority:u},callback:n})},dialFSM:function(e,t,n){r({peerInfo:e,protocol:t,options:{useFSM:!0,priority:u},callback:n})},clearBlacklist:function(e){t.clearBlacklist(e)},BLACK_LIST_ATTEMPTS:isNaN(e._options.blackListAttempts)?s:e._options.blackListAttempts,BLACK_LIST_TTL:isNaN(e._options.blacklistTTL)?o:e._options.blacklistTTL,MAX_COLD_CALLS:isNaN(e._options.maxColdCalls)?a:e._options.maxColdCalls,MAX_PARALLEL_DIALS:isNaN(e._options.maxParallelDials)?c:e._options.maxParallelDials}}}}},{package:"libp2p-switch",file:"/home/circleci/project/node_modules/libp2p-switch/src/dialer/index.js"}],[4878,{"../connection":4877,"../plaintext":4890,"../utils":4896,debug:2197,"libp2p-circuit":4741,"libp2p-identify":4792,"multistream-select":5120,once:5184},function(){with(this)return function(){"use strict";return function(e,t,r){const n=e("libp2p-identify"),i=e("multistream-select"),s=e("debug")("libp2p:switch:conn-manager"),o=e("once"),a=e("../connection"),{msHandle:c,msSelect:u,identifyDialer:l}=e("../utils"),d=e("libp2p-circuit"),f=e("../plaintext");t.exports=class{constructor(e){this.switch=e,this.connections={}}add(e){this.connections[e.theirB58Id]=this.connections[e.theirB58Id]||[],this.get(e)||(this.connections[e.theirB58Id].push(e),this.switch.emit("connection:start",e.theirPeerInfo),"MUXED"===e.getState()?(this.switch.emit("peer-mux-established",e.theirPeerInfo),this.switch.dialer.clearBlacklist(e.theirPeerInfo)):e.once("muxed",(()=>{this.switch.emit("peer-mux-established",e.theirPeerInfo),this.switch.dialer.clearBlacklist(e.theirPeerInfo)})))}get(e){if(!this.connections[e.theirB58Id])return null;for(let t=0;t<this.connections[e.theirB58Id].length;t++)if(this.connections[e.theirB58Id][t]===e)return this.connections[e.theirB58Id][t];return null}getOne(e){if(this.connections[e])for(var t=0;t<this.connections[e].length;t++)if("MUXED"===this.connections[e][t].getState())return this.connections[e][t];return null}remove(e){if(this.connections[e.theirB58Id]){for(let t=0;t<this.connections[e.theirB58Id].length;t++)if(this.connections[e.theirB58Id][t]===e){this.connections[e.theirB58Id].splice(t,1);break}0===this.connections[e.theirB58Id].length&&(delete this.connections[e.theirB58Id],e.theirPeerInfo.disconnect(),this.switch.emit("peer-mux-closed",e.theirPeerInfo)),this.switch.emit("connection:end",e.theirPeerInfo)}else e.theirPeerInfo&&(e.theirPeerInfo.disconnect(),this.switch.emit("peer-mux-closed",e.theirPeerInfo))}getAll(){let e=[];for(const t of Object.values(this.connections))e=[...e,...t];return e}getAllById(e){return this.connections[e]||[]}addStreamMuxer(e){this.switch.muxers[e.multicodec]=e,this.switch.handle(e.multicodec,((t,r)=>{const d=e.listener(r);return d.on("stream",this.switch.protocolMuxer(null)),this.switch.identify&&r.getPeerInfo(((e,t)=>{!e&&t||s("crypto peerInfo wasnt found"),r.getPeerInfo=async e=>{const r=d.newStream(),s=new i.Dialer;let a;e=o(e);try{await c(s,r);const e=await u(s,n.multicodec);a=await l(e,t)}catch(t){return d.end((()=>{e(t,null)}))}const{peerInfo:f}=a;f&&r.setPeerInfo(f),e(null,f)},r.getPeerInfo(((e,t)=>{if(e)return s("identify not successful");const n=t.id.toB58String();t=this.switch._peerBook.put(t);const i=new a({_switch:this.switch,peerInfo:t,muxer:d,conn:r,type:"inc"});this.switch.connection.add(i),t.isConnected()||(t.multiaddrs.size>0?t.connect(t.multiaddrs.toArray()[0]):t.connect(`/ipfs/${n}`)),d.once("close",(()=>{i.close()}))}))})),r}))}crypto(e,t){e||t||(e=f.tag,t=f.encrypt),this.switch.crypto={tag:e,encrypt:t}}enableCircuitRelay(e){(e=e||{}).enabled&&(e.hop||Object.assign(e,{hop:{enabled:!1,active:!1}}),this.switch.transport.add(d.tag,new d(this.switch,e)))}reuse(){this.switch.identify=!0,this.switch.handle(n.multicodec,((e,t)=>{n.listener(t,this.switch._peerInfo)}))}}}}},{package:"libp2p-switch",file:"/home/circleci/project/node_modules/libp2p-switch/src/connection/manager.js"}],[4895,{"./constants":4879,"./limit-dialer":4886,"./utils":4896,"async/parallel":1715,debug:2197,once:5184},function(){with(this)return function(){"use strict";return function(e,t,r){const n=e("async/parallel"),i=e("once"),s=e("debug")("libp2p:switch:transport"),o=e("./limit-dialer"),{DIAL_TIMEOUT:a}=e("./constants"),{uniqueBy:c}=e("./utils");class u{constructor(e){this.switch=e,this.dialer=new o(8,this.switch._options.dialTimeout||a)}add(e,t){if(s("adding %s",e),this.switch.transports[e])throw new Error("There is already a transport with this key");this.switch.transports[e]=t,this.switch.transports[e].listeners||(this.switch.transports[e].listeners=[])}remove(e,t){if(t=t||function(){},!this.switch.transports[e])return t();this.close(e,(r=>{delete this.switch.transports[e],t(r)}))}removeAll(e){const t=Object.keys(this.switch.transports).map((e=>t=>{this.remove(e,t)}));n(t,e)}dial(e,t,r){const n=this.switch.transports[e];let i=t.multiaddrs.toArray();Array.isArray(i)||(i=[i]),i=u.dialables(n,i,this.switch._peerInfo),s("dialing %s",e,i.map((e=>e.toString()))),this.dialer.dialMany(t.id,n,i,((e,n)=>{if(e)return r(e);t.connect(n.multiaddr),r(null,n.conn)}))}listen(e,t,r,s){r=this.switch._connectionHandler(e,r);const o=this.switch.transports[e];let a=this.switch._peerInfo.multiaddrs.toArray();a=c(a,(e=>{const t=Number(e.toOptions().port);return isNaN(t)||0===t?e.toString():t}));const l=u.dialables(o,a);o.listeners||(o.listeners=[]);let d=[];const f=l.map((e=>t=>{const n=i(t),s=o.createListener(r);s.once("error",n),s.listen(e,(e=>{if(e)return n(e);s.removeListener("error",n),s.getAddrs(((e,t)=>{if(e)return n(e);d=d.concat(t),o.listeners.push(s),n()}))}))}));n(f,(e=>{if(e)return s(e);this.switch._peerInfo.multiaddrs.replace(l,d),s()}))}close(e,t){const r=this.switch.transports[e];if(!r)return t(new Error(`Trying to close non existing transport: ${e}`));n(r.listeners.map((e=>t=>{e.close(t)})),t)}static dialables(e,t,r){if(!e||!e.filter)return[];const n=e.filter(t);if(!r||!n.length)return n;const i=function(e){const t=e.id.toB58String();return e.multiaddrs.toArray().reduce(((e,r)=>{const n=r.getPeerId();r=r.toString();const i=n?r.slice(0,r.lastIndexOf(`/ipfs/${n}`)):`${r}/ipfs/${t}`;return e.concat([r,i])}),[]).filter((e=>Boolean(e))).concat(`/ipfs/${t}`)}(r);return n.filter((e=>!i.some((t=>function(e){const t=e.protoNames().reverse().find((e=>l.includes(e)));return e=e.toString(),t?e.slice(e.lastIndexOf(t)+t.length):e}(e).startsWith(t)))))}}const l=["p2p-circuit","p2p-websocket-star","p2p-webrtc-star","p2p-stardust"];t.exports=u}}},{package:"libp2p-switch",file:"/home/circleci/project/node_modules/libp2p-switch/src/transport.js"}],[4741,{"./circuit":4735},function(){with(this)return function(){"use strict";return function(e,t,r){t.exports=e("./circuit")}}},{package:"libp2p-circuit",file:"/home/circleci/project/node_modules/libp2p-circuit/src/index.js"}],[4891,{"./observe-connection":4888,debug:2197,"multistream-select":5120},function(){with(this)return function(){"use strict";return function(e,t,r){const n=e("multistream-select"),i=e("./observe-connection"),s=e("debug"),o=s("libp2p:switch:protocol-muxer");o.error=s("libp2p:switch:protocol-muxer:error"),t.exports=function(e,t){return r=>(s,a)=>{const c=a||new n.Listener;let u;u=r&&!a?i(r,null,s,t):s,Object.keys(e).forEach((r=>{if(!r)return;c.addHandler(r,((r,n)=>{o("registering handler with protocol %s",r);const s=e[r];if(s){const e=s&&s.handlerFunc;if(e){e(s,i(null,r,n,t))}}}),e[r].matchFunc)})),c.handle(u,(e=>{e&&o.error("multistream handshake failed",e)}))}}}}},{package:"libp2p-switch",file:"/home/circleci/project/node_modules/libp2p-switch/src/protocol-muxer.js"}],[4702,{"./dist/LatencyMonitor":4700},function(){with(this)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=e("./dist/LatencyMonitor").default}}},{package:"latency-monitor",file:"/home/circleci/project/node_modules/latency-monitor/index.js"}],[4434,{cids:2064,"err-code":2299},function(){with(this)return function(){"use strict";return function(e,t,r){const n=e("cids"),i=e("err-code");t.exports=async(e,t,r,s,o,a,c)=>{let u=await c.get(e),l=u,d=r;for(;s.length;){const o=s[0];if(!(o in l))throw i(new Error(`No property named ${o} found in cbor node ${e.toBaseEncodedString()}`),"ERR_NO_PROP");if(s.shift(),d=`${d}/${o}`,n.isCID(l[o]))return{entry:{name:t,path:r,cid:e,node:u,depth:a},next:{cid:l[o],name:o,path:d,toResolve:s}};l=l[o]}return{entry:{name:t,path:r,cid:e,node:u,depth:a}}}}}},{package:"ipfs-unixfs-exporter",file:"/home/circleci/project/node_modules/ipfs-unixfs-exporter/src/resolvers/dag-cbor.js"}],[4436,{"../utils/extract-data-from-block":4441,"../utils/validate-offset-and-length":4443,"err-code":2299},function(){with(this)return function(){"use strict";return function(e,t,r){const n=e("err-code"),i=e("../utils/extract-data-from-block"),s=e("../utils/validate-offset-and-length");t.exports=async(e,t,r,o,a,c,u)=>{if(o.length)throw n(new Error(`No link named ${r} found in raw node ${e.toBaseEncodedString()}`),"ERR_NOT_FOUND");const l=await u.get(e);return{entry:{name:t,path:r,cid:e,node:l,content:(d=l,function*(e={}){const{offset:t,length:r}=s(d.length,e.offset,e.length);yield i(d,0,t,t+r)}),depth:c}};var d}}}},{package:"ipfs-unixfs-exporter",file:"/home/circleci/project/node_modules/ipfs-unixfs-exporter/src/resolvers/raw.js"}],[4440,{"../../utils/find-cid-in-shard":4442,"./content/directory":4437,"./content/file":4438,"./content/hamt-sharded-directory":4439,"err-code":2299,"ipfs-unixfs":4462},function(){with(this)return function(){"use strict";return function(e,t,r){const n=e("err-code"),i=e("ipfs-unixfs"),s=e("../../utils/find-cid-in-shard"),o={raw:e("./content/file"),file:e("./content/file"),directory:e("./content/directory"),"hamt-sharded-directory":e("./content/hamt-sharded-directory"),metadata:(e,t,r,n,i,s,o)=>{},symlink:(e,t,r,n,i,s,o)=>{}};t.exports=async(e,t,r,a,c,u,l)=>{const d=await l.get(e);let f,h;t||(t=e.toBaseEncodedString());try{f=i.unmarshal(d.Data)}catch(e){throw n(e,"ERR_NOT_UNIXFS")}if(r||(r=t),a.length){let e;if(e=f&&"hamt-sharded-directory"===f.type?await s(d,a[0],l):((e,t)=>{const r=e.Links.find((e=>e.Name===t));return r&&r.Hash})(d,a[0]),!e)throw n(new Error("file does not exist"),"ERR_NOT_FOUND");const t=a.shift();h={cid:e,toResolve:a,name:t,path:`${r}/${t}`}}return{entry:{name:t,path:r,cid:e,node:d,content:o[f.type](e,d,f,r,c,u,l),unixfs:f,depth:u},next:h}}}}},{package:"ipfs-unixfs-exporter",file:"/home/circleci/project/node_modules/ipfs-unixfs-exporter/src/resolvers/unixfs-v1/index.js"}],[4474,{"../../../errors":4465},function(){with(this)return function(){"use strict";return function(e,t,r){var n=e("../../../errors").codes.ERR_STREAM_PREMATURE_CLOSE;function i(){}t.exports=function e(t,r,s){if("function"==typeof r)return e(t,null,r);r||(r={}),s=function(e){var t=!1;return function(){if(!t){t=!0;for(var r=arguments.length,n=new Array(r),i=0;i<r;i++)n[i]=arguments[i];e.apply(this,n)}}}(s||i);var o=r.readable||!1!==r.readable&&t.readable,a=r.writable||!1!==r.writable&&t.writable,c=function(){t.writable||l()},u=t._writableState&&t._writableState.finished,l=function(){a=!1,u=!0,o||s.call(t)},d=t._readableState&&t._readableState.endEmitted,f=function(){o=!1,d=!0,a||s.call(t)},h=function(e){s.call(t,e)},p=function(){var e;return o&&!d?(t._readableState&&t._readableState.ended||(e=new n),s.call(t,e)):a&&!u?(t._writableState&&t._writableState.ended||(e=new n),s.call(t,e)):void 0},m=function(){t.req.on("finish",l)};return!function(e){return e.setHeader&&"function"==typeof e.abort}(t)?a&&!t._writableState&&(t.on("end",c),t.on("close",c)):(t.on("complete",l),t.on("abort",p),t.req?m():t.on("request",m)),t.on("end",f),t.on("finish",l),!1!==r.error&&t.on("error",h),t.on("close",p),function(){t.removeListener("complete",l),t.removeListener("abort",p),t.removeListener("request",m),t.req&&t.req.removeListener("finish",l),t.removeListener("end",c),t.removeListener("close",c),t.removeListener("finish",l),t.removeListener("end",f),t.removeListener("error",h),t.removeListener("close",p)}}}}},{package:"readable-stream",file:"/home/circleci/project/node_modules/ipfs-utils/node_modules/readable-stream/lib/internal/streams/end-of-stream.js"}],[4476,{"../../../errors":4465,"./end-of-stream":4474},function(){with(this)return function(){"use strict";return function(e,t,r){var n;var i=e("../../../errors").codes,s=i.ERR_MISSING_ARGS,o=i.ERR_STREAM_DESTROYED;function a(e){if(e)throw e}function c(t,r,i,s){s=function(e){var t=!1;return function(){t||(t=!0,e.apply(void 0,arguments))}}(s);var a=!1;t.on("close",(function(){a=!0})),n===undefined&&(n=e("./end-of-stream")),n(t,{readable:r,writable:i},(function(e){if(e)return s(e);a=!0,s()}));var c=!1;return function(e){if(!a&&!c)return c=!0,function(e){return e.setHeader&&"function"==typeof e.abort}(t)?t.abort():"function"==typeof t.destroy?t.destroy():void s(e||new o("pipe"))}}function u(e){e()}function l(e,t){return e.pipe(t)}function d(e){return e.length?"function"!=typeof e[e.length-1]?a:e.pop():a}t.exports=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];var n,i=d(t);if(Array.isArray(t[0])&&(t=t[0]),t.length<2)throw new s("streams");var o=t.map((function(e,r){var s=r<t.length-1;return c(e,s,r>0,(function(e){n||(n=e),e&&o.forEach(u),s||(o.forEach(u),i(n))}))}));return t.reduce(l)}}}},{package:"readable-stream",file:"/home/circleci/project/node_modules/ipfs-utils/node_modules/readable-stream/lib/internal/streams/pipeline.js"}],[4470,{"../errors":4465,"./_stream_duplex":4466,"./internal/streams/destroy":4473,"./internal/streams/state":4477,"./internal/streams/stream":4478,_process:5294,buffer:2028,inherits:4329,"util-deprecate":5845},function(){with(this)return function(){"use strict";return function(e,t,r){(function(r){(function(){function n(e){var t=this;this.next=null,this.entry=null,this.finish=function(){!function(e,t,r){var n=e.entry;e.entry=null;for(;n;){var i=n.callback;t.pendingcb--,i(r),n=n.next}t.corkedRequestsFree.next=e}(t,e)}}var i;t.exports=C,C.WritableState=S;var s={deprecate:e("util-deprecate")},o=e("./internal/streams/stream"),a=e("buffer").Buffer,c=global.Uint8Array||function(){};var u,l=e("./internal/streams/destroy"),d=e("./internal/streams/state").getHighWaterMark,f=e("../errors").codes,h=f.ERR_INVALID_ARG_TYPE,p=f.ERR_METHOD_NOT_IMPLEMENTED,m=f.ERR_MULTIPLE_CALLBACK,g=f.ERR_STREAM_CANNOT_PIPE,y=f.ERR_STREAM_DESTROYED,b=f.ERR_STREAM_NULL_VALUES,_=f.ERR_STREAM_WRITE_AFTER_END,w=f.ERR_UNKNOWN_ENCODING,v=l.errorOrDestroy;function E(){}function S(t,s,o){i=i||e("./_stream_duplex"),t=t||{},"boolean"!=typeof o&&(o=s instanceof i),this.objectMode=!!t.objectMode,o&&(this.objectMode=this.objectMode||!!t.writableObjectMode),this.highWaterMark=d(this,t,"writableHighWaterMark",o),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var a=!1===t.decodeStrings;this.decodeStrings=!a,this.defaultEncoding=t.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(e){!function(e,t){var n=e._writableState,i=n.sync,s=n.writecb;if("function"!=typeof s)throw new m;if(function(e){e.writing=!1,e.writecb=null,e.length-=e.writelen,e.writelen=0}(n),t)!function(e,t,n,i,s){--t.pendingcb,n?(r.nextTick(s,i),r.nextTick(j,e,t),e._writableState.errorEmitted=!0,v(e,i)):(s(i),e._writableState.errorEmitted=!0,v(e,i),j(e,t))}(e,n,i,t,s);else{var o=A(n)||e.destroyed;o||n.corked||n.bufferProcessing||!n.bufferedRequest||T(e,n),i?r.nextTick(I,e,n,o,s):I(e,n,o,s)}}(s,e)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=!1!==t.emitClose,this.autoDestroy=!!t.autoDestroy,this.bufferedRequestCount=0,this.corkedRequestsFree=new n(this)}function C(t){var r=this instanceof(i=i||e("./_stream_duplex"));if(!r&&!u.call(C,this))return new C(t);this._writableState=new S(t,this,r),this.writable=!0,t&&("function"==typeof t.write&&(this._write=t.write),"function"==typeof t.writev&&(this._writev=t.writev),"function"==typeof t.destroy&&(this._destroy=t.destroy),"function"==typeof t.final&&(this._final=t.final)),o.call(this)}function k(e,t,r,n,i,s,o){t.writelen=n,t.writecb=o,t.writing=!0,t.sync=!0,t.destroyed?t.onwrite(new y("write")):r?e._writev(i,t.onwrite):e._write(i,s,t.onwrite),t.sync=!1}function I(e,t,r,n){r||function(e,t){0===t.length&&t.needDrain&&(t.needDrain=!1,e.emit("drain"))}(e,t),t.pendingcb--,n(),j(e,t)}function T(e,t){t.bufferProcessing=!0;var r=t.bufferedRequest;if(e._writev&&r&&r.next){var i=t.bufferedRequestCount,s=new Array(i),o=t.corkedRequestsFree;o.entry=r;for(var a=0,c=!0;r;)s[a]=r,r.isBuf||(c=!1),r=r.next,a+=1;s.allBuffers=c,k(e,t,!0,t.length,s,"",o.finish),t.pendingcb++,t.lastBufferedRequest=null,o.next?(t.corkedRequestsFree=o.next,o.next=null):t.corkedRequestsFree=new n(t),t.bufferedRequestCount=0}else{for(;r;){var u=r.chunk,l=r.encoding,d=r.callback;if(k(e,t,!1,t.objectMode?1:u.length,u,l,d),r=r.next,t.bufferedRequestCount--,t.writing)break}null===r&&(t.lastBufferedRequest=null)}t.bufferedRequest=r,t.bufferProcessing=!1}function A(e){return e.ending&&0===e.length&&null===e.bufferedRequest&&!e.finished&&!e.writing}function R(e,t){e._final((function(r){t.pendingcb--,r&&v(e,r),t.prefinished=!0,e.emit("prefinish"),j(e,t)}))}function j(e,t){var n=A(t);if(n&&(function(e,t){t.prefinished||t.finalCalled||("function"!=typeof e._final||t.destroyed?(t.prefinished=!0,e.emit("prefinish")):(t.pendingcb++,t.finalCalled=!0,r.nextTick(R,e,t)))}(e,t),0===t.pendingcb&&(t.finished=!0,e.emit("finish"),t.autoDestroy))){var i=e._readableState;(!i||i.autoDestroy&&i.endEmitted)&&e.destroy()}return n}e("inherits")(C,o),S.prototype.getBuffer=function(){for(var e=this.bufferedRequest,t=[];e;)t.push(e),e=e.next;return t},function(){try{Object.defineProperty(S.prototype,"buffer",{get:s.deprecate((function(){return this.getBuffer()}),"_writableState.buffer is deprecated. Use _writableState.getBuffer "+"instead.","DEP0003")})}catch(e){}}(),"function"==typeof Symbol&&Symbol.hasInstance&&"function"==typeof Function.prototype[Symbol.hasInstance]?(u=Function.prototype[Symbol.hasInstance],Object.defineProperty(C,Symbol.hasInstance,{value:function(e){return!!u.call(this,e)||this===C&&(e&&e._writableState instanceof S)}})):u=function(e){return e instanceof this},C.prototype.pipe=function(){v(this,new g)},C.prototype.write=function(e,t,n){var i,s=this._writableState,o=!1,u=!s.objectMode&&(i=e,a.isBuffer(i)||i instanceof c);return u&&!a.isBuffer(e)&&(e=function(e){return a.from(e)}(e)),"function"==typeof t&&(n=t,t=null),u?t="buffer":t||(t=s.defaultEncoding),"function"!=typeof n&&(n=E),s.ending?function(e,t){var n=new _;v(e,n),r.nextTick(t,n)}(this,n):(u||function(e,t,n,i){var s;return null===n?s=new b:"string"==typeof n||t.objectMode||(s=new h("chunk",["string","Buffer"],n)),!s||(v(e,s),r.nextTick(i,s),!1)}(this,s,e,n))&&(s.pendingcb++,o=function(e,t,r,n,i,s){if(!r){var o=function(e,t,r){e.objectMode||!1===e.decodeStrings||"string"!=typeof t||(t=a.from(t,r));return t}(t,n,i);n!==o&&(r=!0,i="buffer",n=o)}var c=t.objectMode?1:n.length;t.length+=c;var u=t.length<t.highWaterMark;u||(t.needDrain=!0);if(t.writing||t.corked){var l=t.lastBufferedRequest;t.lastBufferedRequest={chunk:n,encoding:i,isBuf:r,callback:s,next:null},l?l.next=t.lastBufferedRequest:t.bufferedRequest=t.lastBufferedRequest,t.bufferedRequestCount+=1}else k(e,t,!1,c,n,i,s);return u}(this,s,u,e,t,n)),o},C.prototype.cork=function(){this._writableState.corked++},C.prototype.uncork=function(){var e=this._writableState;e.corked&&(e.corked--,e.writing||e.corked||e.bufferProcessing||!e.bufferedRequest||T(this,e))},C.prototype.setDefaultEncoding=function(e){if("string"==typeof e&&(e=e.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((e+"").toLowerCase())>-1))throw new w(e);return this._writableState.defaultEncoding=e,this},Object.defineProperty(C.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(C.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),C.prototype._write=function(e,t,r){r(new p("_write()"))},C.prototype._writev=null,C.prototype.end=function(e,t,n){var i=this._writableState;return"function"==typeof e?(n=e,e=null,t=null):"function"==typeof t&&(n=t,t=null),null!==e&&e!==undefined&&this.write(e,t),i.corked&&(i.corked=1,this.uncork()),i.ending||function(e,t,n){t.ending=!0,j(e,t),n&&(t.finished?r.nextTick(n):e.once("finish",n));t.ended=!0,e.writable=!1}(this,i,n),this},Object.defineProperty(C.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(C.prototype,"destroyed",{enumerable:!1,get:function(){return this._writableState!==undefined&&this._writableState.destroyed},set:function(e){this._writableState&&(this._writableState.destroyed=e)}}),C.prototype.destroy=l.destroy,C.prototype._undestroy=l.undestroy,C.prototype._destroy=function(e,t){t(e)}}).call(this)}).call(this,e("_process"))}}},{package:"readable-stream",file:"/home/circleci/project/node_modules/ipfs-utils/node_modules/readable-stream/lib/_stream_writable.js"}],[4466,{"./_stream_readable":4468,"./_stream_writable":4470,_process:5294,inherits:4329},function(){with(this)return function(){"use strict";return function(e,t,r){(function(r){(function(){var n=Object.keys||function(e){var t=[];for(var r in e)t.push(r);return t};t.exports=u;var i=e("./_stream_readable"),s=e("./_stream_writable");e("inherits")(u,i);for(var o=n(s.prototype),a=0;a<o.length;a++){var c=o[a];u.prototype[c]||(u.prototype[c]=s.prototype[c])}function u(e){if(!(this instanceof u))return new u(e);i.call(this,e),s.call(this,e),this.allowHalfOpen=!0,e&&(!1===e.readable&&(this.readable=!1),!1===e.writable&&(this.writable=!1),!1===e.allowHalfOpen&&(this.allowHalfOpen=!1,this.once("end",l)))}function l(){this._writableState.ended||r.nextTick(d,this)}function d(e){e.end()}Object.defineProperty(u.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(u.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(u.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(u.prototype,"destroyed",{enumerable:!1,get:function(){return this._readableState!==undefined&&this._writableState!==undefined&&(this._readableState.destroyed&&this._writableState.destroyed)},set:function(e){this._readableState!==undefined&&this._writableState!==undefined&&(this._readableState.destroyed=e,this._writableState.destroyed=e)}})}).call(this)}).call(this,e("_process"))}}},{package:"readable-stream",file:"/home/circleci/project/node_modules/ipfs-utils/node_modules/readable-stream/lib/_stream_duplex.js"}],[4469,{"../errors":4465,"./_stream_duplex":4466,inherits:4329},function(){with(this)return function(){"use strict";return function(e,t,r){t.exports=l;var n=e("../errors").codes,i=n.ERR_METHOD_NOT_IMPLEMENTED,s=n.ERR_MULTIPLE_CALLBACK,o=n.ERR_TRANSFORM_ALREADY_TRANSFORMING,a=n.ERR_TRANSFORM_WITH_LENGTH_0,c=e("./_stream_duplex");function u(e,t){var r=this._transformState;r.transforming=!1;var n=r.writecb;if(null===n)return this.emit("error",new s);r.writechunk=null,r.writecb=null,null!=t&&this.push(t),n(e);var i=this._readableState;i.reading=!1,(i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}function l(e){if(!(this instanceof l))return new l(e);c.call(this,e),this._transformState={afterTransform:u.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,e&&("function"==typeof e.transform&&(this._transform=e.transform),"function"==typeof e.flush&&(this._flush=e.flush)),this.on("prefinish",d)}function d(){var e=this;"function"!=typeof this._flush||this._readableState.destroyed?f(this,null,null):this._flush((function(t,r){f(e,t,r)}))}function f(e,t,r){if(t)return e.emit("error",t);if(null!=r&&e.push(r),e._writableState.length)throw new a;if(e._transformState.transforming)throw new o;return e.push(null)}e("inherits")(l,c),l.prototype.push=function(e,t){return this._transformState.needTransform=!1,c.prototype.push.call(this,e,t)},l.prototype._transform=function(e,t,r){r(new i("_transform()"))},l.prototype._write=function(e,t,r){var n=this._transformState;if(n.writecb=r,n.writechunk=e,n.writeencoding=t,!n.transforming){var i=this._readableState;(n.needTransform||i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}},l.prototype._read=function(e){var t=this._transformState;null===t.writechunk||t.transforming?t.needTransform=!0:(t.transforming=!0,this._transform(t.writechunk,t.writeencoding,t.afterTransform))},l.prototype._destroy=function(e,t){c.prototype._destroy.call(this,e,(function(e){t(e)}))}}}},{package:"readable-stream",file:"/home/circleci/project/node_modules/ipfs-utils/node_modules/readable-stream/lib/_stream_transform.js"}],[4467,{"./_stream_transform":4469,inherits:4329},function(){with(this)return function(){"use strict";return function(e,t,r){t.exports=i;var n=e("./_stream_transform");function i(e){if(!(this instanceof i))return new i(e);n.call(this,e)}e("inherits")(i,n),i.prototype._transform=function(e,t,r){r(null,e)}}}},{package:"readable-stream",file:"/home/circleci/project/node_modules/ipfs-utils/node_modules/readable-stream/lib/_stream_passthrough.js"}],[4468,{"../errors":4465,"./_stream_duplex":4466,"./internal/streams/async_iterator":4471,"./internal/streams/buffer_list":4472,"./internal/streams/destroy":4473,"./internal/streams/from":4475,"./internal/streams/state":4477,"./internal/streams/stream":4478,_process:5294,buffer:2028,events:2029,inherits:4329,"string_decoder/":5755,util:2027},function(){with(this)return function(){"use strict";return function(e,t,r){(function(r){(function(){var n;t.exports=C,C.ReadableState=S;e("events").EventEmitter;var i=function(e,t){return e.listeners(t).length},s=e("./internal/streams/stream"),o=e("buffer").Buffer,a=global.Uint8Array||function(){};var c,u=e("util");c=u&&u.debuglog?u.debuglog("stream"):function(){};var l,d,f,h=e("./internal/streams/buffer_list"),p=e("./internal/streams/destroy"),m=e("./internal/streams/state").getHighWaterMark,g=e("../errors").codes,y=g.ERR_INVALID_ARG_TYPE,b=g.ERR_STREAM_PUSH_AFTER_EOF,_=g.ERR_METHOD_NOT_IMPLEMENTED,w=g.ERR_STREAM_UNSHIFT_AFTER_END_EVENT;e("inherits")(C,s);var v=p.errorOrDestroy,E=["error","close","destroy","pause","resume"];function S(t,r,i){n=n||e("./_stream_duplex"),t=t||{},"boolean"!=typeof i&&(i=r instanceof n),this.objectMode=!!t.objectMode,i&&(this.objectMode=this.objectMode||!!t.readableObjectMode),this.highWaterMark=m(this,t,"readableHighWaterMark",i),this.buffer=new h,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.paused=!0,this.emitClose=!1!==t.emitClose,this.autoDestroy=!!t.autoDestroy,this.destroyed=!1,this.defaultEncoding=t.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,t.encoding&&(l||(l=e("string_decoder/").StringDecoder),this.decoder=new l(t.encoding),this.encoding=t.encoding)}function C(t){if(n=n||e("./_stream_duplex"),!(this instanceof C))return new C(t);var r=this instanceof n;this._readableState=new S(t,this,r),this.readable=!0,t&&("function"==typeof t.read&&(this._read=t.read),"function"==typeof t.destroy&&(this._destroy=t.destroy)),s.call(this)}function k(e,t,r,n,i){c("readableAddChunk",t);var s,u=e._readableState;if(null===t)u.reading=!1,function(e,t){if(c("onEofChunk"),t.ended)return;if(t.decoder){var r=t.decoder.end();r&&r.length&&(t.buffer.push(r),t.length+=t.objectMode?1:r.length)}t.ended=!0,t.sync?R(e):(t.needReadable=!1,t.emittedReadable||(t.emittedReadable=!0,j(e)))}(e,u);else if(i||(s=function(e,t){var r;n=t,o.isBuffer(n)||n instanceof a||"string"==typeof t||t===undefined||e.objectMode||(r=new y("chunk",["string","Buffer","Uint8Array"],t));var n;return r}(u,t)),s)v(e,s);else if(u.objectMode||t&&t.length>0)if("string"==typeof t||u.objectMode||Object.getPrototypeOf(t)===o.prototype||(t=function(e){return o.from(e)}(t)),n)u.endEmitted?v(e,new w):I(e,u,t,!0);else if(u.ended)v(e,new b);else{if(u.destroyed)return!1;u.reading=!1,u.decoder&&!r?(t=u.decoder.write(t),u.objectMode||0!==t.length?I(e,u,t,!1):x(e,u)):I(e,u,t,!1)}else n||(u.reading=!1,x(e,u));return!u.ended&&(u.length<u.highWaterMark||0===u.length)}function I(e,t,r,n){t.flowing&&0===t.length&&!t.sync?(t.awaitDrain=0,e.emit("data",r)):(t.length+=t.objectMode?1:r.length,n?t.buffer.unshift(r):t.buffer.push(r),t.needReadable&&R(e)),x(e,t)}Object.defineProperty(C.prototype,"destroyed",{enumerable:!1,get:function(){return this._readableState!==undefined&&this._readableState.destroyed},set:function(e){this._readableState&&(this._readableState.destroyed=e)}}),C.prototype.destroy=p.destroy,C.prototype._undestroy=p.undestroy,C.prototype._destroy=function(e,t){t(e)},C.prototype.push=function(e,t){var r,n=this._readableState;return n.objectMode?r=!0:"string"==typeof e&&((t=t||n.defaultEncoding)!==n.encoding&&(e=o.from(e,t),t=""),r=!0),k(this,e,t,!1,r)},C.prototype.unshift=function(e){return k(this,e,null,!0,!1)},C.prototype.isPaused=function(){return!1===this._readableState.flowing},C.prototype.setEncoding=function(t){l||(l=e("string_decoder/").StringDecoder);var r=new l(t);this._readableState.decoder=r,this._readableState.encoding=this._readableState.decoder.encoding;for(var n=this._readableState.buffer.head,i="";null!==n;)i+=r.write(n.data),n=n.next;return this._readableState.buffer.clear(),""!==i&&this._readableState.buffer.push(i),this._readableState.length=i.length,this};var T=1073741824;function A(e,t){return e<=0||0===t.length&&t.ended?0:t.objectMode?1:e!=e?t.flowing&&t.length?t.buffer.head.data.length:t.length:(e>t.highWaterMark&&(t.highWaterMark=function(e){return e>=T?e=T:(e--,e|=e>>>1,e|=e>>>2,e|=e>>>4,e|=e>>>8,e|=e>>>16,e++),e}(e)),e<=t.length?e:t.ended?t.length:(t.needReadable=!0,0))}function R(e){var t=e._readableState;c("emitReadable",t.needReadable,t.emittedReadable),t.needReadable=!1,t.emittedReadable||(c("emitReadable",t.flowing),t.emittedReadable=!0,r.nextTick(j,e))}function j(e){var t=e._readableState;c("emitReadable_",t.destroyed,t.length,t.ended),t.destroyed||!t.length&&!t.ended||(e.emit("readable"),t.emittedReadable=!1),t.needReadable=!t.flowing&&!t.ended&&t.length<=t.highWaterMark,D(e)}function x(e,t){t.readingMore||(t.readingMore=!0,r.nextTick(N,e,t))}function N(e,t){for(;!t.reading&&!t.ended&&(t.length<t.highWaterMark||t.flowing&&0===t.length);){var r=t.length;if(c("maybeReadMore read 0"),e.read(0),r===t.length)break}t.readingMore=!1}function P(e){var t=e._readableState;t.readableListening=e.listenerCount("readable")>0,t.resumeScheduled&&!t.paused?t.flowing=!0:e.listenerCount("data")>0&&e.resume()}function L(e){c("readable nexttick read 0"),e.read(0)}function O(e,t){c("resume",t.reading),t.reading||e.read(0),t.resumeScheduled=!1,e.emit("resume"),D(e),t.flowing&&!t.reading&&e.read(0)}function D(e){var t=e._readableState;for(c("flow",t.flowing);t.flowing&&null!==e.read(););}function B(e,t){return 0===t.length?null:(t.objectMode?r=t.buffer.shift():!e||e>=t.length?(r=t.decoder?t.buffer.join(""):1===t.buffer.length?t.buffer.first():t.buffer.concat(t.length),t.buffer.clear()):r=t.buffer.consume(e,t.decoder),r);var r}function M(e){var t=e._readableState;c("endReadable",t.endEmitted),t.endEmitted||(t.ended=!0,r.nextTick(U,t,e))}function U(e,t){if(c("endReadableNT",e.endEmitted,e.length),!e.endEmitted&&0===e.length&&(e.endEmitted=!0,t.readable=!1,t.emit("end"),e.autoDestroy)){var r=t._writableState;(!r||r.autoDestroy&&r.finished)&&t.destroy()}}function F(e,t){for(var r=0,n=e.length;r<n;r++)if(e[r]===t)return r;return-1}C.prototype.read=function(e){c("read",e),e=parseInt(e,10);var t=this._readableState,r=e;if(0!==e&&(t.emittedReadable=!1),0===e&&t.needReadable&&((0!==t.highWaterMark?t.length>=t.highWaterMark:t.length>0)||t.ended))return c("read: emitReadable",t.length,t.ended),0===t.length&&t.ended?M(this):R(this),null;if(0===(e=A(e,t))&&t.ended)return 0===t.length&&M(this),null;var n,i=t.needReadable;return c("need readable",i),(0===t.length||t.length-e<t.highWaterMark)&&c("length less than watermark",i=!0),t.ended||t.reading?c("reading or ended",i=!1):i&&(c("do read"),t.reading=!0,t.sync=!0,0===t.length&&(t.needReadable=!0),this._read(t.highWaterMark),t.sync=!1,t.reading||(e=A(r,t))),null===(n=e>0?B(e,t):null)?(t.needReadable=t.length<=t.highWaterMark,e=0):(t.length-=e,t.awaitDrain=0),0===t.length&&(t.ended||(t.needReadable=!0),r!==e&&t.ended&&M(this)),null!==n&&this.emit("data",n),n},C.prototype._read=function(e){v(this,new _("_read()"))},C.prototype.pipe=function(e,t){var n=this,s=this._readableState;switch(s.pipesCount){case 0:s.pipes=e;break;case 1:s.pipes=[s.pipes,e];break;default:s.pipes.push(e)}s.pipesCount+=1,c("pipe count=%d opts=%j",s.pipesCount,t);var o=(!t||!1!==t.end)&&e!==r.stdout&&e!==r.stderr?u:g;function a(t,r){c("onunpipe"),t===n&&r&&!1===r.hasUnpiped&&(r.hasUnpiped=!0,c("cleanup"),e.removeListener("close",p),e.removeListener("finish",m),e.removeListener("drain",l),e.removeListener("error",h),e.removeListener("unpipe",a),n.removeListener("end",u),n.removeListener("end",g),n.removeListener("data",f),d=!0,!s.awaitDrain||e._writableState&&!e._writableState.needDrain||l())}function u(){c("onend"),e.end()}s.endEmitted?r.nextTick(o):n.once("end",o),e.on("unpipe",a);var l=function(e){return function(){var t=e._readableState;c("pipeOnDrain",t.awaitDrain),t.awaitDrain&&t.awaitDrain--,0===t.awaitDrain&&i(e,"data")&&(t.flowing=!0,D(e))}}(n);e.on("drain",l);var d=!1;function f(t){c("ondata");var r=e.write(t);c("dest.write",r),!1===r&&((1===s.pipesCount&&s.pipes===e||s.pipesCount>1&&-1!==F(s.pipes,e))&&!d&&(c("false write response, pause",s.awaitDrain),s.awaitDrain++),n.pause())}function h(t){c("onerror",t),g(),e.removeListener("error",h),0===i(e,"error")&&v(e,t)}function p(){e.removeListener("finish",m),g()}function m(){c("onfinish"),e.removeListener("close",p),g()}function g(){c("unpipe"),n.unpipe(e)}return n.on("data",f),function(e,t,r){if("function"==typeof e.prependListener)return e.prependListener(t,r);e._events&&e._events[t]?Array.isArray(e._events[t])?e._events[t].unshift(r):e._events[t]=[r,e._events[t]]:e.on(t,r)}(e,"error",h),e.once("close",p),e.once("finish",m),e.emit("pipe",n),s.flowing||(c("pipe resume"),n.resume()),e},C.prototype.unpipe=function(e){var t=this._readableState,r={hasUnpiped:!1};if(0===t.pipesCount)return this;if(1===t.pipesCount)return e&&e!==t.pipes||(e||(e=t.pipes),t.pipes=null,t.pipesCount=0,t.flowing=!1,e&&e.emit("unpipe",this,r)),this;if(!e){var n=t.pipes,i=t.pipesCount;t.pipes=null,t.pipesCount=0,t.flowing=!1;for(var s=0;s<i;s++)n[s].emit("unpipe",this,{hasUnpiped:!1});return this}var o=F(t.pipes,e);return-1===o||(t.pipes.splice(o,1),t.pipesCount-=1,1===t.pipesCount&&(t.pipes=t.pipes[0]),e.emit("unpipe",this,r)),this},C.prototype.on=function(e,t){var n=s.prototype.on.call(this,e,t),i=this._readableState;return"data"===e?(i.readableListening=this.listenerCount("readable")>0,!1!==i.flowing&&this.resume()):"readable"===e&&(i.endEmitted||i.readableListening||(i.readableListening=i.needReadable=!0,i.flowing=!1,i.emittedReadable=!1,c("on readable",i.length,i.reading),i.length?R(this):i.reading||r.nextTick(L,this))),n},C.prototype.addListener=C.prototype.on,C.prototype.removeListener=function(e,t){var n=s.prototype.removeListener.call(this,e,t);return"readable"===e&&r.nextTick(P,this),n},C.prototype.removeAllListeners=function(e){var t=s.prototype.removeAllListeners.apply(this,arguments);return"readable"!==e&&e!==undefined||r.nextTick(P,this),t},C.prototype.resume=function(){var e=this._readableState;return e.flowing||(c("resume"),e.flowing=!e.readableListening,function(e,t){t.resumeScheduled||(t.resumeScheduled=!0,r.nextTick(O,e,t))}(this,e)),e.paused=!1,this},C.prototype.pause=function(){return c("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(c("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState.paused=!0,this},C.prototype.wrap=function(e){var t=this,r=this._readableState,n=!1;for(var i in e.on("end",(function(){if(c("wrapped end"),r.decoder&&!r.ended){var e=r.decoder.end();e&&e.length&&t.push(e)}t.push(null)})),e.on("data",(function(i){(c("wrapped data"),r.decoder&&(i=r.decoder.write(i)),!r.objectMode||null!==i&&i!==undefined)&&((r.objectMode||i&&i.length)&&(t.push(i)||(n=!0,e.pause())))})),e)this[i]===undefined&&"function"==typeof e[i]&&(this[i]=function(t){return function(){return e[t].apply(e,arguments)}}(i));for(var s=0;s<E.length;s++)e.on(E[s],this.emit.bind(this,E[s]));return this._read=function(t){c("wrapped _read",t),n&&(n=!1,e.resume())},this},"function"==typeof Symbol&&(C.prototype[Symbol.asyncIterator]=function(){return d===undefined&&(d=e("./internal/streams/async_iterator")),d(this)}),Object.defineProperty(C.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),Object.defineProperty(C.prototype,"readableBuffer",{enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}}),Object.defineProperty(C.prototype,"readableFlowing",{enumerable:!1,get:function(){return this._readableState.flowing},set:function(e){this._readableState&&(this._readableState.flowing=e)}}),C._fromList=B,Object.defineProperty(C.prototype,"readableLength",{enumerable:!1,get:function(){return this._readableState.length}}),"function"==typeof Symbol&&(C.from=function(t,r){return f===undefined&&(f=e("./internal/streams/from")),f(C,t,r)})}).call(this)}).call(this,e("_process"))}}},{package:"readable-stream",file:"/home/circleci/project/node_modules/ipfs-utils/node_modules/readable-stream/lib/_stream_readable.js"}],[4456,{},function(){with(this)return function(){"use strict";return function(e,t,r){t.exports=class{constructor(e,t){this.options=t||{},Object.assign(this,e)}}}}},{package:"ipfs-unixfs-importer",file:"/home/circleci/project/node_modules/ipfs-unixfs-importer/src/dir.js"}],[4461,{},function(){with(this)return function(){"use strict";return function(e,t,r){t.exports=(e="")=>(e.trim().match(/([^\\^/]|\\\/)+/g)||[]).filter(Boolean)}}},{package:"ipfs-unixfs-importer",file:"/home/circleci/project/node_modules/ipfs-unixfs-importer/src/utils/to-path-components.js"}],[1653,{},function(){with(this)return function(){"use strict";return function(e,t,r){t.exports=async e=>{for await(const t of e)return t}}}},{package:"async-iterator-first",file:"/home/circleci/project/node_modules/async-iterator-first/index.js"}],[4454,{"./dir":4456,"./utils/persist":4460,"ipfs-unixfs":4462,"ipld-dag-pb":4599},function(){with(this)return function(){"use strict";return function(e,t,r){const{DAGLink:n,DAGNode:i}=e("ipld-dag-pb"),s=e("ipfs-unixfs"),o=e("./dir"),a=e("./utils/persist");t.exports=class extends o{constructor(e,t){super(e,t),this._children={}}put(e,t){this.cid=undefined,this.size=undefined,this._children[e]=t}get(e){return this._children[e]}childCount(){return Object.keys(this._children).length}directChildrenCount(){return this.childCount()}onlyChild(){return this._children[Object.keys(this._children)[0]]}*eachChildSeries(){const e=Object.keys(this._children);for(let t=0;t<e.length;t++){const r=e[t];yield{key:r,child:this._children[r]}}}async*flush(e,t){const r=Object.keys(this._children),o=[];for(let e=0;e<r.length;e++){let i=this._children[r[e]];if("function"==typeof i.flush)for await(const e of i.flush(i.path,t))i=e,yield i;o.push(new n(r[e],i.node.length||i.node.size,i.cid))}const c=new s("directory");let u=i.create(c.marshal(),o);const l=await a(u,t,this.options);this.cid=l,this.size=u.size,yield{cid:l,unixfs:c,path:e,node:u}}}}}},{package:"ipfs-unixfs-importer",file:"/home/circleci/project/node_modules/ipfs-unixfs-importer/src/dir-flat.js"}],[4457,{"./dir-sharded":4455},function(){with(this)return function(){"use strict";return function(e,t,r){const n=e("./dir-sharded");t.exports=async function e(t,r,i,s){let o=r;r.flat&&r.directChildrenCount()>=i&&(o=await async function(e,t){const r=new n({root:e.root,dir:!0,parent:e.parent,parentKey:e.parentKey,path:e.path,dirty:e.dirty,flat:!1},t);for await(const{key:t,child:n}of e.eachChildSeries())await r.put(t,n);return r}(r,s));const a=o.parent;return a&&(o!==r&&(t&&(t.parent=o),await a.put(o.parentKey,o)),a)?e(o,a,i,s):o}}}},{package:"ipfs-unixfs-importer",file:"/home/circleci/project/node_modules/ipfs-unixfs-importer/src/flat-to-shard.js"}],[4453,{buffer:2028,"err-code":2299},function(){with(this)return function(){"use strict";return function(e,t,r){(function(r){(function(){const n=e("err-code");t.exports=async function*(e){for await(const t of e){if(t.length===undefined)throw n(new Error("Content was invalid"),"ERR_INVALID_CONTENT");"string"==typeof t||t instanceof String?yield r.from(t,"utf8"):Array.isArray(t)?yield r.from(t):yield t}}}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"ipfs-unixfs-importer",file:"/home/circleci/project/node_modules/ipfs-unixfs-importer/src/dag-builder/validate-chunks.js"}],[4447,{"../utils/persist":4460,"ipfs-unixfs":4462,"ipld-dag-pb":4599},function(){with(this)return function(){"use strict";return function(e,t,r){const n=e("ipfs-unixfs"),i=e("../utils/persist"),{DAGNode:s}=e("ipld-dag-pb");t.exports=async(e,t,r)=>{const o=new n("directory"),a=s.create(o.marshal(),[]);return{cid:await i(a,t,r),path:e.path,unixfs:o,node:a}}}}},{package:"ipfs-unixfs-importer",file:"/home/circleci/project/node_modules/ipfs-unixfs-importer/src/dag-builder/dir.js"}],[4450,{"../../utils/persist":4460,"./balanced":4448,"./flat":4449,"./trickle":4451,"async-iterator-all":1651,"err-code":2299,"ipfs-unixfs":4462,"ipld-dag-pb":4599},function(){with(this)return function(){"use strict";return function(e,t,r){const n=e("err-code"),i=e("ipfs-unixfs"),s=e("../../utils/persist"),{DAGNode:o,DAGLink:a}=e("ipld-dag-pb"),c=e("async-iterator-all"),u={flat:e("./flat"),balanced:e("./balanced"),trickle:e("./trickle")};t.exports=async(e,t,r,l)=>{const d=u[l.strategy];if(!d)throw n(new Error(`Unknown importer build strategy name: ${l.strategy}`),"ERR_BAD_STRATEGY");const f=await c(d(async function*(e,t,r){let n,a=-1;for await(const c of e){let e,u;a++,r.progress(c.length);let l={...r};r.rawLeaves?(e=c,l.codec="raw",l.cidVersion=1):(u=new i(r.leafType,c),e=o.create(u.marshal(),[]));const d={cid:await s(e,t,l),unixfs:u,node:e};0!==a?(1===a&&(yield n,n=null),yield d):n=d}n&&(n.single=!0,yield n)}(t,r,l),((e,t,r)=>async function(n){if(1===n.length&&n[0].single&&r.reduceSingleLeafToSelf){const t=n[0];return{cid:t.cid,path:e.path,name:(e.path||"").split("/").pop(),unixfs:t.unixfs,node:t.node}}const c=new i("file"),u=n.filter((e=>!("raw"!==e.cid.codec||!e.node.length)||!(e.unixfs.data||!e.unixfs.fileSize())||Boolean(e.unixfs.data.length))).map((e=>"raw"===e.cid.codec?(c.addBlockSize(e.node.length),new a(e.name,e.node.length,e.cid)):(e.unixfs.data?c.addBlockSize(e.unixfs.data.length):c.addBlockSize(e.unixfs.fileSize()),new a(e.name,e.node.size,e.cid)))),l=o.create(c.marshal(),u);return{cid:await s(l,t,r),path:e.path,unixfs:c,node:l,size:l.size}})(e,r,l),l.builderOptions));if(f.length>1)throw n(new Error("expected a maximum of 1 roots and got "+f.length),"ETOOMANYROOTS");return f[0]}}}},{package:"ipfs-unixfs-importer",file:"/home/circleci/project/node_modules/ipfs-unixfs-importer/src/dag-builder/file/index.js"}],[4445,{"../chunker/fixed-size":4444,"../chunker/rabin":4446,"err-code":2299},function(){with(this)return function(){"use strict";return function(e,t,r){const n=e("err-code"),i={fixed:e("../chunker/fixed-size"),rabin:e("../chunker/rabin")};t.exports=(e,t,r)=>{const s=i[e];if(!s)throw n(new Error(`Unknkown chunker named ${e}`),"ERR_UNKNOWN_CHUNKER");return s(t,r)}}}},{package:"ipfs-unixfs-importer",file:"/home/circleci/project/node_modules/ipfs-unixfs-importer/src/chunker/index.js"}],[1657,{},function(){with(this)return function(){"use strict";return function(e,t,r){var n={};function i(e,t,r){r||(r=Error);var i=function(e){var r,n;function i(r,n,i){return e.call(this,function(e,r,n){return"string"==typeof t?t:t(e,r,n)}(r,n,i))||this}return n=e,(r=i).prototype=Object.create(n.prototype),r.prototype.constructor=r,r.__proto__=n,i}(r);i.prototype.name=r.name,i.prototype.code=e,n[e]=i}function s(e,t){if(Array.isArray(e)){var r=e.length;return e=e.map((function(e){return String(e)})),r>2?"one of ".concat(t," ").concat(e.slice(0,r-1).join(", "),", or ")+e[r-1]:2===r?"one of ".concat(t," ").concat(e[0]," or ").concat(e[1]):"of ".concat(t," ").concat(e[0])}return"of ".concat(t," ").concat(String(e))}i("ERR_INVALID_OPT_VALUE",(function(e,t){return'The value "'+t+'" is invalid for option "'+e+'"'}),TypeError),i("ERR_INVALID_ARG_TYPE",(function(e,t,r){var n,i,o,a;if("string"==typeof t&&(i="not ",t.substr(!o||o<0?0:+o,i.length)===i)?(n="must not be",t=t.replace(/^not /,"")):n="must be",function(e,t,r){return(r===undefined||r>e.length)&&(r=e.length),e.substring(r-t.length,r)===t}(e," argument"))a="The ".concat(e," ").concat(n," ").concat(s(t,"type"));else{var c=function(e,t,r){return"number"!=typeof r&&(r=0),!(r+t.length>e.length)&&-1!==e.indexOf(t,r)}(e,".")?"property":"argument";a='The "'.concat(e,'" ').concat(c," ").concat(n," ").concat(s(t,"type"))}return a+=". Received type ".concat(typeof r)}),TypeError),i("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF"),i("ERR_METHOD_NOT_IMPLEMENTED",(function(e){return"The "+e+" method is not implemented"})),i("ERR_STREAM_PREMATURE_CLOSE","Premature close"),i("ERR_STREAM_DESTROYED",(function(e){return"Cannot call "+e+" after a stream was destroyed"})),i("ERR_MULTIPLE_CALLBACK","Callback called multiple times"),i("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable"),i("ERR_STREAM_WRITE_AFTER_END","write after end"),i("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError),i("ERR_UNKNOWN_ENCODING",(function(e){return"Unknown encoding: "+e}),TypeError),i("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event"),t.exports.codes=n}}},{package:"readable-stream",file:"/home/circleci/project/node_modules/async-iterator-to-stream/node_modules/readable-stream/errors-browser.js"}],[1670,{events:2029},function(){with(this)return function(){"use strict";return function(e,t,r){t.exports=e("events").EventEmitter}}},{package:"readable-stream",file:"/home/circleci/project/node_modules/async-iterator-to-stream/node_modules/readable-stream/lib/internal/streams/stream-browser.js"}],[1665,{_process:5294},function(){with(this)return function(){"use strict";return function(e,t,r){(function(e){(function(){function r(e,t){i(e,t),n(e)}function n(e){e._writableState&&!e._writableState.emitClose||e._readableState&&!e._readableState.emitClose||e.emit("close")}function i(e,t){e.emit("error",t)}t.exports={destroy:function(t,s){var o=this,a=this._readableState&&this._readableState.destroyed,c=this._writableState&&this._writableState.destroyed;return a||c?(s?s(t):t&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,e.nextTick(i,this,t)):e.nextTick(i,this,t)),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(t||null,(function(t){!s&&t?o._writableState?o._writableState.errorEmitted?e.nextTick(n,o):(o._writableState.errorEmitted=!0,e.nextTick(r,o,t)):e.nextTick(r,o,t):s?(e.nextTick(n,o),s(t)):e.nextTick(n,o)})),this)},undestroy:function(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)},errorOrDestroy:function(e,t){var r=e._readableState,n=e._writableState;r&&r.autoDestroy||n&&n.autoDestroy?e.destroy(t):e.emit("error",t)}}}).call(this)}).call(this,e("_process"))}}},{package:"readable-stream",file:"/home/circleci/project/node_modules/async-iterator-to-stream/node_modules/readable-stream/lib/internal/streams/destroy.js"}],[1669,{"../../../errors":1657},function(){with(this)return function(){"use strict";return function(e,t,r){var n=e("../../../errors").codes.ERR_INVALID_OPT_VALUE;t.exports={getHighWaterMark:function(e,t,r,i){var s=function(e,t,r){return null!=e.highWaterMark?e.highWaterMark:t?e[r]:null}(t,i,r);if(null!=s){if(!isFinite(s)||Math.floor(s)!==s||s<0)throw new n(i?r:"highWaterMark",s);return Math.floor(s)}return e.objectMode?16:16384}}}}},{package:"readable-stream",file:"/home/circleci/project/node_modules/async-iterator-to-stream/node_modules/readable-stream/lib/internal/streams/state.js"}],[1667,{},function(){with(this)return function(){"use strict";return function(e,t,r){t.exports=function(){throw new Error("Readable.from is not available in the browser")}}}},{package:"readable-stream",file:"/home/circleci/project/node_modules/async-iterator-to-stream/node_modules/readable-stream/lib/internal/streams/from-browser.js"}],[1664,{buffer:2028,util:2027},function(){with(this)return function(){"use strict";return function(e,t,r){function n(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function i(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function s(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var o=e("buffer").Buffer,a=e("util").inspect,c=a&&a.custom||"inspect";t.exports=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.head=null,this.tail=null,this.length=0}var t,r,u;return t=e,r=[{key:"push",value:function(e){var t={data:e,next:null};this.length>0?this.tail.next=t:this.head=t,this.tail=t,++this.length}},{key:"unshift",value:function(e){var t={data:e,next:this.head};0===this.length&&(this.tail=t),this.head=t,++this.length}},{key:"shift",value:function(){if(0!==this.length){var e=this.head.data;return 1===this.length?this.head=this.tail=null:this.head=this.head.next,--this.length,e}}},{key:"clear",value:function(){this.head=this.tail=null,this.length=0}},{key:"join",value:function(e){if(0===this.length)return"";for(var t=this.head,r=""+t.data;t=t.next;)r+=e+t.data;return r}},{key:"concat",value:function(e){if(0===this.length)return o.alloc(0);for(var t,r,n,i=o.allocUnsafe(e>>>0),s=this.head,a=0;s;)t=s.data,r=i,n=a,o.prototype.copy.call(t,r,n),a+=s.data.length,s=s.next;return i}},{key:"consume",value:function(e,t){var r;return e<this.head.data.length?(r=this.head.data.slice(0,e),this.head.data=this.head.data.slice(e)):r=e===this.head.data.length?this.shift():t?this._getString(e):this._getBuffer(e),r}},{key:"first",value:function(){return this.head.data}},{key:"_getString",value:function(e){var t=this.head,r=1,n=t.data;for(e-=n.length;t=t.next;){var i=t.data,s=e>i.length?i.length:e;if(s===i.length?n+=i:n+=i.slice(0,e),0==(e-=s)){s===i.length?(++r,t.next?this.head=t.next:this.head=this.tail=null):(this.head=t,t.data=i.slice(s));break}++r}return this.length-=r,n}},{key:"_getBuffer",value:function(e){var t=o.allocUnsafe(e),r=this.head,n=1;for(r.data.copy(t),e-=r.data.length;r=r.next;){var i=r.data,s=e>i.length?i.length:e;if(i.copy(t,t.length-e,0,s),0==(e-=s)){s===i.length?(++n,r.next?this.head=r.next:this.head=this.tail=null):(this.head=r,r.data=i.slice(s));break}++n}return this.length-=n,t}},{key:c,value:function(e,t){return a(this,function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?n(Object(r),!0).forEach((function(t){i(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):n(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},t,{depth:0,customInspect:!1}))}}],r&&s(t.prototype,r),u&&s(t,u),e}()}}},{package:"readable-stream",file:"/home/circleci/project/node_modules/async-iterator-to-stream/node_modules/readable-stream/lib/internal/streams/buffer_list.js"}],[1663,{"./end-of-stream":1666,_process:5294},function(){with(this)return function(){"use strict";return function(e,t,r){(function(r){(function(){var n;function i(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var s=e("./end-of-stream"),o=Symbol("lastResolve"),a=Symbol("lastReject"),c=Symbol("error"),u=Symbol("ended"),l=Symbol("lastPromise"),d=Symbol("handlePromise"),f=Symbol("stream");function h(e,t){return{value:e,done:t}}function p(e){var t=e[o];if(null!==t){var r=e[f].read();null!==r&&(e[l]=null,e[o]=null,e[a]=null,t(h(r,!1)))}}function m(e){r.nextTick(p,e)}var g=Object.getPrototypeOf((function(){})),y=Object.setPrototypeOf((i(n={get stream(){return this[f]},next:function(){var e=this,t=this[c];if(null!==t)return Promise.reject(t);if(this[u])return Promise.resolve(h(undefined,!0));if(this[f].destroyed)return new Promise((function(t,n){r.nextTick((function(){e[c]?n(e[c]):t(h(undefined,!0))}))}));var n,i=this[l];if(i)n=new Promise(function(e,t){return function(r,n){e.then((function(){t[u]?r(h(undefined,!0)):t[d](r,n)}),n)}}(i,this));else{var s=this[f].read();if(null!==s)return Promise.resolve(h(s,!1));n=new Promise(this[d])}return this[l]=n,n}},Symbol.asyncIterator,(function(){return this})),i(n,"return",(function(){var e=this;return new Promise((function(t,r){e[f].destroy(null,(function(e){e?r(e):t(h(undefined,!0))}))}))})),n),g);t.exports=function(e){var t,r=Object.create(y,(i(t={},f,{value:e,writable:!0}),i(t,o,{value:null,writable:!0}),i(t,a,{value:null,writable:!0}),i(t,c,{value:null,writable:!0}),i(t,u,{value:e._readableState.endEmitted,writable:!0}),i(t,d,{value:function(e,t){var n=r[f].read();n?(r[l]=null,r[o]=null,r[a]=null,e(h(n,!1))):(r[o]=e,r[a]=t)},writable:!0}),t));return r[l]=null,s(e,(function(e){if(e&&"ERR_STREAM_PREMATURE_CLOSE"!==e.code){var t=r[a];return null!==t&&(r[l]=null,r[o]=null,r[a]=null,t(e)),void(r[c]=e)}var n=r[o];null!==n&&(r[l]=null,r[o]=null,r[a]=null,n(h(undefined,!0))),r[u]=!0})),e.on("readable",m.bind(null,r)),r}}).call(this)}).call(this,e("_process"))}}},{package:"readable-stream",file:"/home/circleci/project/node_modules/async-iterator-to-stream/node_modules/readable-stream/lib/internal/streams/async_iterator.js"}],[4394,{"err-code":2299},function(){with(this)return function(){"use strict";return function(e,t,r){const n=e("err-code");t.exports=(e={},t)=>{Array.isArray(e)&&(e=e.filter((e=>"object"==typeof e)).pop()||{});const r={};for(let n in t)null!==e[n]&&e[n]!==undefined?r[n]=e[n]:r[n]=t[n];const i=r.format||r.codec;if(i&&isNaN(i)&&(r.format=i,delete r.codec),e.count!==undefined&&(r.length=e.count),e.p!==undefined&&(r.parents=e.p),e.l!==undefined&&(r.long=e.l),r.length||0===r.length||(r.length=Infinity),r.offset<0)throw n(new Error("cannot have negative write offset"),"ERR_INVALID_PARAMS");if(r.length<0)throw n(new Error("cannot have negative byte count"),"ERR_INVALID_PARAMS");return r}}}},{package:"ipfs-mfs",file:"/home/circleci/project/node_modules/ipfs-mfs/src/core/utils/apply-default-options.js"}],[4401,{"./constants":4395,"./to-path-components":4402,"./with-mfs-root":4408,"err-code":2299,"ipfs-unixfs-exporter":4433},function(){with(this)return function(){"use strict";return function(e,t,r){const{FILE_SEPARATOR:n}=e("./constants"),i=e("./with-mfs-root"),s=e("./to-path-components"),o=e("ipfs-unixfs-exporter"),a=e("err-code"),c="ipfs";t.exports=async(e,t)=>{let r=Array.isArray(t),u=Array.isArray(t)?t:[t];const l=await i(e);return u=u.map((e=>{if((e=(e=(e||"").trim()).replace(/(\/\/+)/g,"/")).endsWith("/")&&e.length>1&&(e=e.substring(0,e.length-1)),!e)throw a(new Error("paths must not be empty"),"ERR_NO_PATH");if(e.substring(0,1)!==n)throw a(new Error(`paths must start with a leading ${n}`),"ERR_INVALID_PATH");e.substring(e.length-n.length)===n&&(e=e.substring(0,e.length-n.length));const t=s(e);if(t[0]===c){let e;return e=2===t.length?`${n}${t.join(n)}`:`${n}${t.slice(0,t.length-1).join(n)}`,{type:"ipfs",depth:t.length-2,mfsPath:`${n}${t.join(n)}`,mfsDirectory:e,parts:t,path:`${n}${t.join(n)}`,name:t[t.length-1]}}const r=`/ipfs/${l}${t.length?"/"+t.join(n):""}`,i=`/ipfs/${l}/${t.slice(0,t.length-1).join(n)}`;return{type:"mfs",depth:t.length,mfsDirectory:i,mfsPath:r,parts:t,path:`${n}${t.join(n)}`,name:t[t.length-1]}})),await Promise.all(u.map((async t=>{const r="mfs"===t.type?t.mfsPath:t.path;try{const n=await o(r,e.ipld);t.cid=n.cid,t.mfsPath=`/ipfs/${n.path}`,t.unixfs=n.unixfs,t.content=n.content}catch(e){if("ERR_NOT_FOUND"!==e.code)throw e}t.exists=Boolean(t.cid)}))),r?u:u[0]}}}},{package:"ipfs-mfs",file:"/home/circleci/project/node_modules/ipfs-mfs/src/core/utils/to-mfs-path.js"}],[4395,{"interface-datastore":4336},function(){with(this)return function(){"use strict";return function(e,t,r){const n=e("interface-datastore").Key;t.exports={FILE_SEPARATOR:"/",MFS_ROOT_KEY:new n("/local/filesroot"),MAX_CHUNK_SIZE:262144,MAX_LINKS:174,FILE_TYPES:{file:0,directory:1,"hamt-sharded-directory":1}}}}},{package:"ipfs-mfs",file:"/home/circleci/project/node_modules/ipfs-mfs/src/core/utils/constants.js"}],[4404,{"./to-mfs-path":4401},function(){with(this)return function(){"use strict";return function(e,t,r){const n=e("./to-mfs-path");t.exports=async function(e,t){Array.isArray(t[0])&&(t=t[0]);const r=t.filter((e=>"string"==typeof e)).map((e=>e.trim()));return{sources:await n(e,r)}}}}},{package:"ipfs-mfs",file:"/home/circleci/project/node_modules/ipfs-mfs/src/core/utils/to-sources.js"}],[4406,{"./constants":4395,debug:2197},function(){with(this)return function(){"use strict";return function(e,t,r){const n=e("debug")("ipfs:mfs:utils:update-mfs-root"),{MFS_ROOT_KEY:i}=e("./constants");t.exports=async(e,t)=>(n(`New MFS root will be ${t}`),await e.repo.datastore.put(i,t.buffer),t)}}},{package:"ipfs-mfs",file:"/home/circleci/project/node_modules/ipfs-mfs/src/core/utils/update-mfs-root.js"}],[4407,{"./add-link":4393,debug:2197},function(){with(this)return function(){"use strict";return function(e,t,r){const n=e("debug")("ipfs:mfs:utils:update-tree"),i=e("./add-link"),s={shardSplitThreshold:1e3};t.exports=async(e,t,r)=>{r=Object.assign({},s,r),n("Trail",t),t=t.slice().reverse();let o,a=0;for await(const n of e.ipld.getMany(t.map((e=>e.cid)))){const s=t[a].cid,c=t[a].name;if(a++,!o){o={cid:s,name:c,size:n.size};continue}const u=await i(e,{parent:n,name:o.name,cid:o.cid,size:o.size,flush:r.flush,shardSplitThreshold:r.shardSplitThreshold,format:r.format,hashAlg:r.hashAlg,cidVersion:r.cidVersion});o={cid:u.cid,name:c,size:u.node.size}}return n(`Final CID ${o.cid}`),o.cid}}}},{package:"ipfs-mfs",file:"/home/circleci/project/node_modules/ipfs-mfs/src/core/utils/update-tree.js"}],[4393,{"./hamt-utils":4398,"async-iterator-last":1654,cids:2064,debug:2197,"err-code":2299,"ipfs-unixfs":4462,"ipfs-unixfs-importer/src/dir-sharded":4455,"ipld-dag-pb":4599,multicodec:5096,multihashes:5111},function(){with(this)return function(){"use strict";return function(e,t,r){const{DAGNode:n,DAGLink:i}=e("ipld-dag-pb"),s=e("cids"),o=e("debug")("ipfs:mfs:core:utils:add-link"),a=e("ipfs-unixfs"),c=e("ipfs-unixfs-importer/src/dir-sharded"),{updateHamtDirectory:u,recreateHamtLevel:l,createShard:d,toPrefix:f,addLinksToHamtBucket:h}=e("./hamt-utils"),p=e("err-code"),m=e("multicodec"),g=e("multihashes"),y=e("async-iterator-last"),b=async(e,t)=>{const r=await d(e,t.parent.Links.map((e=>({name:e.Name,size:e.Tsize,cid:e.Hash}))).concat({name:t.name,size:t.size,cid:t.cid}),t);return o(`Converted directory to sharded directory ${r.cid}`),r},_=async(e,t)=>{let r=await n.rmLink(t.parent,t.name);r=await n.addLink(r,new i(t.name,t.size,t.cid));const s=m[t.format.toUpperCase().replace(/-/g,"_")],o=g.names[t.hashAlg];return{node:r,cid:await e.ipld.put(r,s,{cidVersion:t.cidVersion,hashAlg:o,hashOnly:!t.flush})}},w=async(e,t)=>{const{shard:r,path:i}=await v(e,t),s=await y(r.flush("",e.ipld)),o=t.parent.Links.find((e=>e.Name.substring(0,2)===i[0].prefix)),a=s.node.Links.find((e=>e.Name.substring(0,2)===i[0].prefix));let c=t.parent;return o&&(c=await n.rmLink(t.parent,o.Name)),c=await n.addLink(c,a),u(e,c.Links,i[0].bucket,t)},v=async(e,t)=>{const r={name:t.name,cid:t.cid,size:t.size},n=await l(t.parent.Links),i=new c({root:!0,dir:!0,parent:null,parentKey:null,path:"",dirty:!0,flat:!1},t);i._bucket=n;const s=await n._findNewBucketAndPos(r.name),a=E(s);a[0].node=t.parent;let u=0;for(;u<a.length;){let t=a[u];u++;let i=t.node.Links.find((e=>e.Name.substring(0,2)===t.prefix));if(!i){o(`Link ${t.prefix}${r.name} will be added`),u=a.length;break}if(i.Name===`${t.prefix}${r.name}`){o(`Link ${t.prefix}${r.name} will be replaced`),u=a.length;break}if(i.Name.length>2){o(`Link ${i.Name} will be replaced with a subshard`),u=a.length;break}o(`Found subshard ${t.prefix}`);const s=await e.ipld.get(i.Hash);if(!a[u]){o(`Loaded new subshard ${t.prefix}`),await l(s.Links,n,t.bucket,parseInt(t.prefix,16));const e=await n._findNewBucketAndPos(r.name);a.push({bucket:e.bucket,prefix:f(e.pos),node:s});break}const c=a[u];await h(s.Links,c.bucket,n),c.node=s}return await i._bucket.put(r.name,{size:r.size,cid:r.cid}),{shard:i,path:a}},E=e=>{let t=e.bucket,r=e.pos,n=[{bucket:t,prefix:f(r)}];for(t=e.bucket._parent,r=e.bucket._posAtParent;t;)n.push({bucket:t,prefix:f(r)}),r=t._posAtParent,t=t._parent;return n.reverse(),n};t.exports=async(e,t)=>{if(!t.parentCid&&!t.parent)throw p(new Error("No parent node or CID passed to addLink"),"EINVALIDPARENT");if(t.parentCid&&!s.isCID(t.parentCid))throw p(new Error("Invalid CID passed to addLink"),"EINVALIDPARENTCID");if(t.parent||(o(`Loading parent node ${t.parentCid}`),t.parent=await e.ipld.get(t.parentCid)),!t.cid)throw p(new Error("No child cid passed to addLink"),"EINVALIDCHILDCID");if(!t.name)throw p(new Error("No child name passed to addLink"),"EINVALIDCHILDNAME");if(s.isCID(t.cid)||(t.cid=new s(t.cid)),!t.size&&0!==t.size)throw p(new Error("No child size passed to addLink"),"EINVALIDCHILDSIZE");return"hamt-sharded-directory"===a.unmarshal(t.parent.Data).type?(o("Adding link to sharded directory"),w(e,t)):t.parent.Links.length>=t.shardSplitThreshold?(o("Converting directory to sharded directory"),b(e,t)):(o(`Adding ${t.name} (${t.cid}) to regular directory`),_(e,t))}}}},{package:"ipfs-mfs",file:"/home/circleci/project/node_modules/ipfs-mfs/src/core/utils/add-link.js"}],[4402,{},function(){with(this)return function(){"use strict";return function(e,t,r){t.exports=(e="")=>(e.trim().match(/([^\\^/]|\\\/)+/g)||[]).filter(Boolean)}}},{package:"ipfs-mfs",file:"/home/circleci/project/node_modules/ipfs-mfs/src/core/utils/to-path-components.js"}],[4397,{"ipfs-unixfs":4462,"ipld-dag-pb":4599,multicodec:5096,multihashes:5111},function(){with(this)return function(){"use strict";return function(e,t,r){const n=e("ipfs-unixfs"),{DAGNode:i}=e("ipld-dag-pb"),s=e("multicodec"),o=e("multihashes");t.exports=async(e,t,r)=>{const a=s[r.format.toUpperCase().replace(/-/g,"_")],c=o.names[r.hashAlg],u=i.create(new n(t).marshal());return{cid:await e.ipld.put(u,a,{cidVersion:r.cidVersion,hashAlg:c}),node:u}}}}},{package:"ipfs-mfs",file:"/home/circleci/project/node_modules/ipfs-mfs/src/core/utils/create-node.js"}],[4408,{"./constants":4395,cids:2064,debug:2197,"ipfs-unixfs":4462,"ipld-dag-pb":4599,multicodec:5096,multihashes:5111},function(){with(this)return function(){"use strict";return function(e,t,r){const n=e("cids"),i=e("ipfs-unixfs"),{DAGNode:s}=e("ipld-dag-pb"),o=e("debug")("ipfs:mfs:utils:with-mfs-root"),a=e("multicodec"),c=e("multihashes"),{MFS_ROOT_KEY:u}=e("./constants");t.exports=async e=>{let t;await e.repo.datastore.open();try{const r=await e.repo.datastore.get(u);t=new n(r)}catch(r){if("ERR_NOT_FOUND"!==r.code)throw r;o("Creating new MFS root");const n=s.create(new i("directory").marshal());t=await e.ipld.put(n,a.DAG_PB,{cidVersion:0,hashAlg:c.names["sha2-256"]}),await e.repo.datastore.put(u,t.buffer)}return o(`Loaded MFS root /ipfs/${t}`),t}}}},{package:"ipfs-mfs",file:"/home/circleci/project/node_modules/ipfs-mfs/src/core/utils/with-mfs-root.js"}],[4405,{debug:2197,"ipfs-unixfs-exporter":4433},function(){with(this)return function(){"use strict";return function(e,t,r){const n=e("ipfs-unixfs-exporter"),i=e("debug")("ipfs:mfs:utils:to-trail");t.exports=async(e,t)=>{i(`Creating trail for path ${t}`);const r=[];for await(const i of n.path(t,e.ipld))r.push({name:i.name,cid:i.cid,size:i.node.size,type:i.unixfs?i.unixfs.type:undefined});return r}}}},{package:"ipfs-mfs",file:"/home/circleci/project/node_modules/ipfs-mfs/src/core/utils/to-trail.js"}],[4399,{"./hamt-utils":4398,cids:2064,debug:2197,"err-code":2299,"ipfs-unixfs":4462,"ipld-dag-pb":4599,multicodec:5096,multihashes:5111},function(){with(this)return function(){"use strict";return function(e,t,r){const{DAGNode:n,DAGLink:i}=e("ipld-dag-pb"),s=e("cids"),o=e("debug")("ipfs:mfs:core:utils:remove-link"),a=e("ipfs-unixfs"),{generatePath:c,updateHamtDirectory:u}=e("./hamt-utils"),l=e("err-code"),d=e("multicodec"),f=e("multihashes"),h=async(e,t)=>{const r=d[t.format.toUpperCase().replace(/-/g,"_")],i=f.names[t.hashAlg],s=await n.rmLink(t.parent,t.name),a=await e.ipld.put(s,r,{cidVersion:t.cidVersion,hashAlg:i});return o(`Updated regular directory ${a}`),{node:s,cid:a}},p=async(e,t)=>{const{rootBucket:r,path:n}=await c(e,t.name,t.parent);await r.del(t.name);const{node:i}=await m(e,n,{name:t.name,cid:t.cid,size:t.size,hashAlg:t.hashAlg,format:t.format,cidVersion:t.cidVersion,flush:t.flush},t);return u(e,i.Links,r,t)},m=async(e,t,r,i)=>{const{bucket:s,prefix:a,node:c}=t.pop(),d=c.Links.find((e=>e.Name.substring(0,2)===a));if(!d)throw l(new Error(`No link found with prefix ${a} for file ${r.name}`),"ERR_NOT_FOUND");if(d.Name===`${a}${r.name}`){o(`Removing existing link ${d.Name}`);const t=await n.rmLink(c,d.Name);return await s.del(r.name),u(e,t.Links,s,i)}o(`Descending into sub-shard ${d.Name} for ${a}${r.name}`);const f=await m(e,t,r,i);let h=a;1===f.node.Links.length&&(o(`Removing subshard for ${a}`),f.cid=f.node.Links[0].Hash,f.node=f.node.Links[0],h=`${a}${f.node.Name.substring(2)}`),o(`Updating shard ${a} with name ${h}`);const p=n.isDAGNode(f.node)?f.node.size:f.node.Tsize;return g(e,s,c,a,h,p,f.cid,i)},g=async(e,t,r,s,o,a,c,l)=>(r=await n.rmLink(r,s),r=await n.addLink(r,new i(o,a,c)),u(e,r.Links,t,l));t.exports=async(e,t)=>{if(!t.parentCid&&!t.parent)throw l(new Error("No parent node or CID passed to removeLink"),"EINVALIDPARENT");if(t.parentCid&&!s.isCID(t.parentCid))throw l(new Error("Invalid CID passed to removeLink"),"EINVALIDPARENTCID");if(t.parent||(o(`Loading parent node ${t.parentCid}`),t.parent=await e.ipld.get(t.parentCid)),!t.name)throw l(new Error("No child name passed to removeLink"),"EINVALIDCHILDNAME");return"hamt-sharded-directory"===a.unmarshal(t.parent.Data).type?(o(`Removing ${t.name} from sharded directory`),p(e,t)):(o(`Removing link ${t.name} regular directory`),h(e,t))}}}},{package:"ipfs-mfs",file:"/home/circleci/project/node_modules/ipfs-mfs/src/core/utils/remove-link.js"}],[4400,{"./constants":4395,buffer:2028,debug:2197,"err-code":2299,fs:2027},function(){with(this)return function(){"use strict";return function(e,t,r){(function(r){(function(){const n=e("err-code"),i=e("fs"),s=e("debug")("ipfs:mfs:utils:to-async-iterator"),{MAX_CHUNK_SIZE:o}=e("./constants");t.exports=async e=>{if(!e)throw n(new Error("paths must start with a leading /"),"ERR_INVALID_PATH");if("string"==typeof e||e instanceof String)return s("Content was a path"),i.createReadStream(e);if(e.length)return s("Content was array-like"),{[Symbol.asyncIterator]:async function*(){yield e}};if(e[Symbol.asyncIterator])return s("Content was an async iterator"),e;if(e[Symbol.iterator])return s("Content was an iterator"),e;if(global.Blob&&e instanceof global.Blob){s("Content was an HTML5 Blob");let t=0;const n={next:async()=>t>e.size?{done:!0}:new Promise(((n,i)=>{const s=e.slice(t,o);t+=o;const a=new global.FileReader,c=e=>{if(a.removeEventListener("loadend",c,!1),e.error)return i(e.error);n({done:!1,value:r.from(a.result)})};a.addEventListener("loadend",c),a.readAsArrayBuffer(s)}))};return{[Symbol.asyncIterator]:()=>n}}throw n(new Error(`Don't know how to convert ${e} into an async iterator`),"ERR_INVALID_PARAMS")}}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"ipfs-mfs",file:"/home/circleci/project/node_modules/ipfs-mfs/src/core/utils/to-async-iterator.js"}],[4403,{"./to-sources":4404},function(){with(this)return function(){"use strict";return function(e,t,r){const n=e("./to-sources");t.exports=async function(e,t){const{sources:r,options:i}=await n(e,t);return{destination:r.pop(),sources:r,options:i}}}}},{package:"ipfs-mfs",file:"/home/circleci/project/node_modules/ipfs-mfs/src/core/utils/to-sources-and-destination.js"}],[5078,{"./browser":5076,"./node":5079,"observable-webworkers":5183,"p-queue":5244,"promise-timeout":5295},function(){with(this)return function(){"use strict";return function(e,t,r){const n=e("./node"),i=e("./browser"),s=e("p-queue"),{timeout:o}=e("promise-timeout"),a=e("observable-webworkers"),c={};let u;const l={concurrency:Infinity,timeout:846e5,global:global,singleProcess:!1};t.exports=(e,t)=>(t||(t={}),"object"==typeof e&&(t=e,e="lock"),e||(e="lock"),t=Object.assign({},l,t),u||(u=n(t)||i(t),u.isWorker||(u.on("requestReadLock",((e,t)=>{c[e]&&c[e].readLock(t)})),u.on("requestWriteLock",((e,t)=>{c[e]&&c[e].writeLock(t)})))),c[e]||(c[e]=((e,t)=>{if(u.isWorker)return{readLock:u.readLock(e,t),writeLock:u.writeLock(e,t)};const r=new s({concurrency:1});let n=null;return{readLock:e=>{if(n)return n.add((()=>o(e(),t.timeout)));n=new s({concurrency:t.concurrency,autoStart:!1});const i=n,a=n.add((()=>o(e(),t.timeout)));return r.add((()=>(i.start(),i.onIdle().then((()=>{n===i&&(n=null)}))))),a},writeLock:e=>(n=null,r.add((()=>o(e(),t.timeout))))}})(e,t)),c[e]),t.exports.Worker=function(e,t){let r;t=t||global.Worker;try{r=new t(e)}catch(n){n.message.includes("not a constructor")&&(r=t(e))}if(!r)throw new Error("Could not create Worker from",t);return a(r),r}}}},{package:"mortice",file:"/home/circleci/project/node_modules/mortice/lib/index.js"}],[1236,{"./BaseController":1216,"./BaseControllerV2":1217,"./ComposableController":1218,"./ControllerMessenger":1219,"./approval/ApprovalController":1222,"./assets/AccountTrackerController":1223,"./assets/AssetsContractController":1224,"./assets/AssetsDetectionController":1225,"./assets/CollectiblesController":1226,"./assets/CurrencyRateController":1227,"./assets/TokenBalancesController":1228,"./assets/TokenListController":1229,"./assets/TokenRatesController":1230,"./assets/TokensController":1231,"./gas/GasFeeController":1234,"./keyring/KeyringController":1237,"./message-manager/MessageManager":1239,"./message-manager/PersonalMessageManager":1240,"./message-manager/TypedMessageManager":1241,"./network/NetworkController":1242,"./notification/NotificationController":1243,"./third-party/PhishingController":1244,"./transaction/TransactionController":1245,"./user/AddressBookController":1246,"./user/PreferencesController":1247,"./util":1248,"isomorphic-fetch":4637},function(){with(this)return function(){"use strict";return function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){n===undefined&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){n===undefined&&(n=r),e[n]=t[r]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),s=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&n(t,e,r);return i(t,e),t},o=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(r,"__esModule",{value:!0}),r.util=r.getAnonymizedState=r.getPersistentState=r.BaseControllerV2=void 0,e("isomorphic-fetch");const a=s(e("./util"));r.util=a,o(e("./assets/AccountTrackerController"),r),o(e("./user/AddressBookController"),r),o(e("./approval/ApprovalController"),r),o(e("./assets/AssetsContractController"),r),o(e("./assets/AssetsDetectionController"),r),o(e("./BaseController"),r);var c=e("./BaseControllerV2");Object.defineProperty(r,"BaseControllerV2",{enumerable:!0,get:function(){return c.BaseController}}),Object.defineProperty(r,"getPersistentState",{enumerable:!0,get:function(){return c.getPersistentState}}),Object.defineProperty(r,"getAnonymizedState",{enumerable:!0,get:function(){return c.getAnonymizedState}}),o(e("./ComposableController"),r),o(e("./ControllerMessenger"),r),o(e("./assets/CurrencyRateController"),r),o(e("./keyring/KeyringController"),r),o(e("./message-manager/MessageManager"),r),o(e("./network/NetworkController"),r),o(e("./third-party/PhishingController"),r),o(e("./user/PreferencesController"),r),o(e("./assets/TokenBalancesController"),r),o(e("./assets/TokenRatesController"),r),o(e("./transaction/TransactionController"),r),o(e("./message-manager/PersonalMessageManager"),r),o(e("./message-manager/TypedMessageManager"),r),o(e("./notification/NotificationController"),r),o(e("./assets/TokenListController"),r),o(e("./gas/GasFeeController"),r),o(e("./assets/TokensController"),r),o(e("./assets/CollectiblesController"),r)}}},{package:"@metamask/controllers",file:"/home/circleci/project/node_modules/@metamask/rpc-methods/node_modules/@metamask/controllers/dist/index.js"}],[1306,{"./url-alphabet/index.cjs":1307},function(){with(this)return function(){"use strict";return function(e,t,r){let{urlAlphabet:n}=e("./url-alphabet/index.cjs");let i=e=>crypto.getRandomValues(new Uint8Array(e)),s=(e,t,r)=>{let n=(2<<Math.log(e.length-1)/Math.LN2)-1,i=-~(1.6*n*t/e.length);return()=>{let s="";for(;;){let o=r(i),a=i;for(;a--;)if(s+=e[o[a]&n]||"",s.length===t)return s}}};t.exports={nanoid:(e=21)=>{let t="",r=crypto.getRandomValues(new Uint8Array(e));for(;e--;){let n=63&r[e];t+=n<36?n.toString(36):n<62?(n-26).toString(36).toUpperCase():n<63?"_":"-"}return t},customAlphabet:(e,t)=>s(e,t,i),customRandom:s,urlAlphabet:n,random:i}}}},{package:"nanoid",file:"/home/circleci/project/node_modules/@metamask/rpc-methods/node_modules/nanoid/index.browser.cjs"}],[1259,{"eth-rpc-errors":2399},function(){with(this)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.PermissionsRequestNotFoundError=r.DuplicateCaveatError=r.ForbiddenCaveatError=r.InvalidCaveatFieldsError=r.CaveatInvalidJsonError=r.CaveatMissingValueError=r.InvalidCaveatTypeError=r.InvalidCaveatError=r.CaveatAlreadyExistsError=r.CaveatDoesNotExistError=r.InvalidCaveatsPropertyError=r.UnrecognizedCaveatTypeError=r.PermissionDoesNotExistError=r.InvalidApprovedPermissionError=r.UnrecognizedSubjectError=r.InvalidSubjectIdentifierError=r.internalError=r.userRejectedRequest=r.invalidParams=r.methodNotFound=r.unauthorized=void 0;const n=e("eth-rpc-errors");r.unauthorized=function(e){return n.ethErrors.provider.unauthorized({message:"Unauthorized to perform action. Try requesting the required permission(s) first. For more information, see: https://docs.metamask.io/guide/rpc-api.html#permissions",data:e.data})},r.methodNotFound=function(e){const t=`The method "${e.method}" does not exist / is not available.`;return n.ethErrors.rpc.methodNotFound({data:e.data,message:t})},r.invalidParams=function(e){return n.ethErrors.rpc.invalidParams({data:e.data,message:e.message})},r.userRejectedRequest=function(e){return n.ethErrors.provider.userRejectedRequest({data:e})},r.internalError=function(e,t){return n.ethErrors.rpc.internal({message:e,data:t})};class i extends Error{constructor(e){super(`Invalid subject identifier: "${"string"==typeof e?e:typeof e}"`)}}r.InvalidSubjectIdentifierError=i;class s extends Error{constructor(e){super(`Unrecognized subject: "${e}" has no permissions.`)}}r.UnrecognizedSubjectError=s;class o extends Error{constructor(e,t,r){super(`Invalid approved permission for origin "${e}" and target "${t}".`),this.data={origin:e,target:t,approvedPermission:r}}}r.InvalidApprovedPermissionError=o;class a extends Error{constructor(e,t){super(`Subject "${e}" has no permission for "${t}".`)}}r.PermissionDoesNotExistError=a;class c extends Error{constructor(e,t,r){super(`Unrecognized caveat type: "${e}"`),this.data={caveatType:e},t!==undefined&&(this.data.origin=t),r!==undefined&&(this.data.target=r)}}r.UnrecognizedCaveatTypeError=c;class u extends Error{constructor(e,t,r){super(`The "caveats" property of permission for "${t}" of subject "${e}" is invalid. It must be a non-empty array if specified.`),this.data={origin:e,target:t,caveatsProperty:r}}}r.InvalidCaveatsPropertyError=u;class l extends Error{constructor(e,t,r){super(`Permission for "${t}" of subject "${e}" has no caveat of type "${r}".`)}}r.CaveatDoesNotExistError=l;class d extends Error{constructor(e,t,r){super(`Permission for "${t}" of subject "${e}" already has a caveat of type "${r}".`)}}r.CaveatAlreadyExistsError=d;class f extends n.EthereumRpcError{constructor(e,t,r){super(n.errorCodes.rpc.invalidParams,"Invalid caveat. Caveats must be plain objects.",{receivedCaveat:e}),this.data={origin:t,target:r}}}r.InvalidCaveatError=f;class h extends Error{constructor(e,t,r){super(`Caveat types must be strings. Received: "${typeof e.type}"`),this.data={caveat:e,origin:t,target:r}}}r.InvalidCaveatTypeError=h;class p extends Error{constructor(e,t,r){super('Caveat is missing "value" field.'),this.data={caveat:e,origin:t,target:r}}}r.CaveatMissingValueError=p;class m extends Error{constructor(e,t,r){super('Caveat "value" is invalid JSON.'),this.data={caveat:e,origin:t,target:r}}}r.CaveatInvalidJsonError=m;class g extends Error{constructor(e,t,r){super(`Caveat has unexpected number of fields: "${Object.keys(e).length}"`),this.data={caveat:e,origin:t,target:r}}}r.InvalidCaveatFieldsError=g;class y extends Error{constructor(e,t,r){super(`Permissions for target "${r}" may not have caveats of type "${e}".`),this.data={caveatType:e,origin:t,target:r}}}r.ForbiddenCaveatError=y;class b extends Error{constructor(e,t,r){super(`Permissions for target "${r}" contains multiple caveats of type "${e}".`),this.data={caveatType:e,origin:t,target:r}}}r.DuplicateCaveatError=b;class _ extends Error{constructor(e){super(`Permissions request with id "${e}" not found.`)}}r.PermissionsRequestNotFoundError=_}}},{package:"@metamask/snap-controllers",file:"/home/circleci/project/node_modules/@metamask/rpc-methods/node_modules/@metamask/snap-controllers/dist/permissions/errors.js"}],[1276,{"fast-deep-equal":4239},function(){with(this)return function(){"use strict";return function(e,t,r){var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(r,"__esModule",{value:!0}),r.isValidJson=r.isNonEmptyArray=r.hasProperty=r.isPlainObject=r.timeSince=void 0;const i=n(e("fast-deep-equal"));r.timeSince=function(e){return Date.now()-e},r.isPlainObject=function(e){return Boolean(e)&&"object"==typeof e&&!Array.isArray(e)};r.hasProperty=(e,t)=>Reflect.hasOwnProperty.call(e,t),r.isNonEmptyArray=function(e){return Array.isArray(e)&&e.length>0},r.isValidJson=function(e){try{return i.default(e,JSON.parse(JSON.stringify(e)))}catch(e){return!1}}}}},{package:"@metamask/snap-controllers",file:"/home/circleci/project/node_modules/@metamask/rpc-methods/node_modules/@metamask/snap-controllers/dist/utils.js"}],[1261,{"./errors":1259,"json-rpc-engine":4650},function(){with(this)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.getPermissionMiddlewareFactory=void 0;const n=e("json-rpc-engine"),i=e("./errors");r.getPermissionMiddlewareFactory=function({executeRestrictedMethod:e,getRestrictedMethod:t,isUnrestrictedMethod:r}){return function(s){const{origin:o}=s;if("string"!=typeof o||!o)throw new Error('The subject "origin" must be a non-empty string.');return n.createAsyncMiddleware((async(n,a,c)=>{const{method:u,params:l}=n;if(r(u))return c();const d=t(u,o),f=await e(d,s,u,l);return f===undefined?(a.error=i.internalError(`Request for method "${n.method}" returned undefined result.`,{request:n}),undefined):(a.result=f,undefined)}))}}}}},{package:"@metamask/snap-controllers",file:"/home/circleci/project/node_modules/@metamask/rpc-methods/node_modules/@metamask/snap-controllers/dist/permissions/permission-middleware.js"}],[1262,{"../utils":1265},function(){with(this)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.getPermissionsHandler=void 0;const n=e("../utils");r.getPermissionsHandler={methodNames:[n.MethodNames.getPermissions],implementation:async function(e,t,r,n,{getPermissionsForOrigin:i}){return t.result=Object.values(i()||{}),n()},hookNames:{getPermissionsForOrigin:!0}}}}},{package:"@metamask/snap-controllers",file:"/home/circleci/project/node_modules/@metamask/rpc-methods/node_modules/@metamask/snap-controllers/dist/permissions/rpc-methods/getPermissions.js"}],[1264,{"../../utils":1276,"../errors":1259,"../utils":1265,"eth-rpc-errors":2399},function(){with(this)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.requestPermissionsHandler=void 0;const n=e("eth-rpc-errors"),i=e("../utils"),s=e("../errors"),o=e("../../utils");r.requestPermissionsHandler={methodNames:[i.MethodNames.requestPermissions],implementation:async function(e,t,r,i,{requestPermissionsForOrigin:a}){const{id:c,params:u}=e;if("number"!=typeof c&&"string"!=typeof c||"string"==typeof c&&!c)return i(n.ethErrors.rpc.invalidRequest({message:"Invalid request: Must specify a valid id.",data:{request:e}}));if(!Array.isArray(u)||!o.isPlainObject(u[0]))return i(s.invalidParams({data:{request:e}}));const[l]=u,[d]=await a(l,String(c));return t.result=Object.values(d),i()},hookNames:{requestPermissionsForOrigin:!0}}}}},{package:"@metamask/snap-controllers",file:"/home/circleci/project/node_modules/@metamask/rpc-methods/node_modules/@metamask/snap-controllers/dist/permissions/rpc-methods/requestPermissions.js"}],[1253,{"./ComposedStore":1249,"./MergedStore":1250,"./ObservableStore":1251,"./asStream":1252,"./transform":1254},function(){with(this)return function(){"use strict";return function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){n===undefined&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){n===undefined&&(n=r),e[n]=t[r]}),i=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(r,"__esModule",{value:!0}),i(e("./asStream"),r),i(e("./ComposedStore"),r),i(e("./MergedStore"),r),i(e("./ObservableStore"),r),i(e("./transform"),r)}}},{package:"@metamask/obs-store",file:"/home/circleci/project/node_modules/@metamask/rpc-methods/node_modules/@metamask/obs-store/dist/index.js"}],[1278,{"./enums":1277},function(){with(this)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.SNAP_STREAM_NAMES=void 0;var n=e("./enums");Object.defineProperty(r,"SNAP_STREAM_NAMES",{enumerable:!0,get:function(){return n.STREAM_NAMES}})}}},{package:"@metamask/snap-workers",file:"/home/circleci/project/node_modules/@metamask/rpc-methods/node_modules/@metamask/snap-workers/dist/index.js"}],[1305,{"./createEngineStream":1303,"./createStreamMiddleware":1304},function(){with(this)return function(){"use strict";return function(e,t,r){var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(r,"__esModule",{value:!0}),r.createStreamMiddleware=r.createEngineStream=void 0;const i=n(e("./createEngineStream"));r.createEngineStream=i.default;const s=n(e("./createStreamMiddleware"));r.createStreamMiddleware=s.default}}},{package:"json-rpc-middleware-stream",file:"/home/circleci/project/node_modules/@metamask/rpc-methods/node_modules/json-rpc-middleware-stream/dist/index.js"}],[1273,{},function(){with(this)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.INLINE_SNAPS=void 0,r.INLINE_SNAPS={IDLE:"\n    console.log('Welcome to Flavortown.');\n  ",INFINITE_LOOP:"\n    console.log('Infinite loop snap start.');\n    let num = 0;\n    let time;\n    while (true) {\n      if (num === 0) {\n        time = Date.now();\n      }\n      if (num === (2e8 - 1)) {\n        console.log('Ding, gratz.');\n        console.log(console.log((Date.now() - time) / 1000))\n      }\n      num = (num + 1) % 2e8;\n  ",MEMORY_LEAK:"\n    console.log('Memory leak snap start.')\n    const getStr = () => Math.random().toString(2)\n    const getLongStr = (str) => new Array(1000000).join(str)\n    wallet.leakyBoi = {}\n    let str\n    while (true) {\n      str = getStr()\n      wallet.leakyBoi[str] = Object.assign({}, wallet.leakyBoi, { [str]: getLongStr(str) })\n    }\n  "}}}},{package:"@metamask/snap-controllers",file:"/home/circleci/project/node_modules/@metamask/rpc-methods/node_modules/@metamask/snap-controllers/dist/snaps/inlineSnaps.js"}],[1152,{"./bip32":1150,"./bip39":1151},function(){with(this)return function(){"use strict";return function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){n===undefined&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){n===undefined&&(n=r),e[n]=t[r]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),s=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&n(t,e,r);return i(t,e),t};Object.defineProperty(r,"__esModule",{value:!0}),r.derivers=void 0;const o=s(e("./bip32")),a=s(e("./bip39"));r.derivers={bip32:o,bip39:a}}}},{package:"@metamask/key-tree",file:"/home/circleci/project/node_modules/@metamask/key-tree/dist/derivers/index.js"}],[1387,{"bn.js":1371,buffer:2028,"js-sha3":1394,"number-to-bn":5175},function(){with(this)return function(){"use strict";return function(e,t,r){(function(r){(function(){var n=e("bn.js"),i=e("number-to-bn"),s=e("js-sha3").keccak_256;function o(e){for(var t=e,r=t[0];t.length>0&&"0"===r.toString();)r=(t=t.slice(1))[0];return t}function a(e){var t=e.toString(16);return t.length%2&&(t="0"+t),o(new r(t,"hex"))}function c(e,t){return!("string"!=typeof e||!e.match(/^0x[0-9A-Fa-f]*$/))&&(!t||e.length===2+2*t)}function u(e,t){var n=e;if(!r.isBuffer(n)){if(!c(n)){var i=new Error(t?"[ethjs-abi] invalid "+t:"[ethjs-abi] invalid hex or buffer, must be a prefixed alphanumeric even length hex string");throw i.reason="[ethjs-abi] invalid hex string, hex must be prefixed and alphanumeric (e.g. 0x023..)",i.value=n,i}(n=n.substring(2)).length%2&&(n="0"+n),n=new r(n,"hex")}return n}function l(e,t){return{encode:function(n){var s=n;return"object"==typeof s&&s.toString&&(s.toTwos||s.dividedToIntegerBy)&&(s=s.toString(10).split(".")[0]),"string"!=typeof s&&"number"!=typeof s||(s=String(s).split(".")[0]),s=(s=i(s)).toTwos(8*e).maskn(8*e),t&&(s=s.fromTwos(8*e).toTwos(256)),s.toArrayLike(r,"be",32)},decode:function(r,i){var s=32-e,o=new n(r.slice(i+s,i+32));return o=t?o.fromTwos(8*e):o.maskn(8*e),{consumed:32,value:new n(o.toString(10))}}}}var d=l(32,!1),f={encode:function(e){return d.encode(e?1:0)},decode:function(e,t){var r=d.decode(e,t);return{consumed:r.consumed,value:!r.value.isZero()}}};function h(e){return{encode:function(e){var t=e;if(32===(t=u(t)).length)return t;var n=new r(32);return n.fill(0),t.copy(n),n},decode:function(t,r){if(0!==t.length&&t.length<r+32)throw new Error("[ethjs-abi] while decoding fixed bytes, invalid bytes data length: "+e);return{consumed:32,value:"0x"+t.slice(r,r+e).toString("hex")}}}}var p={encode:function(e){var t=e,n=new r(32);if(!c(t,20))throw new Error("[ethjs-abi] while encoding address, invalid address value, not alphanumeric 20 byte hex string");return t=u(t),n.fill(0),t.copy(n,12),n},decode:function(e,t){if(0===e.length)return{consumed:32,value:"0x"};if(0!==e.length&&e.length<t+32)throw new Error("[ethjs-abi] while decoding address data, invalid address data, invalid byte length "+e.length);return{consumed:32,value:"0x"+e.slice(t+12,t+32).toString("hex")}}};function m(e){var t=parseInt(32*Math.ceil(e.length/32)),n=new r(t-e.length);return n.fill(0),r.concat([d.encode(e.length),e,n])}function g(e,t){if(0!==e.length&&e.length<t+32)throw new Error("[ethjs-abi] while decoding dynamic bytes data, invalid bytes length: "+e.length+" should be less than "+(t+32));var r=d.decode(e,t).value;if(r=r.toNumber(),0!==e.length&&e.length<t+32+r)throw new Error("[ethjs-abi] while decoding dynamic bytes data, invalid bytes length: "+e.length+" should be less than "+(t+32+r));return{consumed:parseInt(32+32*Math.ceil(r/32),10),value:e.slice(t+32,t+32+r)}}var y={encode:function(e){return m(u(e))},decode:function(e,t){var r=g(e,t);return r.value="0x"+r.value.toString("hex"),r},dynamic:!0},b={encode:function(e){return m(new r(e,"utf8"))},decode:function(e,t){var r=g(e,t);return r.value=r.value.toString("utf8"),r},dynamic:!0};function _(e,t){return{encode:function(n){var i=new r(0),s=t;if(!Array.isArray(n))throw new Error("[ethjs-abi] while encoding array, invalid array data, not type Object (Array)");if(-1===s&&(s=n.length,i=d.encode(s)),s!==n.length)throw new Error("[ethjs-abi] while encoding array, size mismatch array length "+s+" does not equal "+n.length);return n.forEach((function(t){i=r.concat([i,e.encode(t)])})),i},decode:function(r,n){var i,s=t,o=n,a=0;-1===s&&(s=(i=d.decode(r,o)).value.toNumber(),a+=i.consumed,o+=i.consumed);for(var c=[],u=0;u<s;u++){var l=e.decode(r,o);a+=l.consumed,o+=l.consumed,c.push(l.value)}return{consumed:a,value:c}},dynamic:-1===t}}var w=new RegExp(/^((u?int|bytes)([0-9]*)|(address|bool|string)|(\[([0-9]*)\]))/);t.exports={BN:n,bnToBuffer:a,isHexString:c,hexOrBuffer:u,hexlify:function(e){return"number"==typeof e?"0x"+a(new n(e)).toString("hex"):e.mod||e.modulo?"0x"+a(e).toString("hex"):"0x"+u(e).toString("hex")},stripZeros:o,keccak256:s,getKeys:function(e,t,r){var n=[];if(!Array.isArray(e))throw new Error("[ethjs-abi] while getting keys, invalid params value "+JSON.stringify(e));for(var i=0;i<e.length;i++){var s=e[i][t];if(r&&!s)s="";else if("string"!=typeof s)throw new Error("[ethjs-abi] while getKeys found invalid ABI data structure, type value not string");n.push(s)}return n},numberToBN:i,coderNumber:l,uint256Coder:d,coderBoolean:f,coderFixedBytes:h,coderAddress:p,coderDynamicBytes:y,coderString:b,coderArray:_,paramTypePart:w,getParamCoder:function(e){for(var t=e,r=null,n="[ethjs-abi] while getting param coder (getParamCoder) type value "+JSON.stringify(t)+" is either invalid or unsupported by ethjs-abi.";t;){var i=t.match(w);if(!i)throw new Error(n);t=t.substring(i[0].length);var s=i[2]||i[4]||i[5];switch(s){case"int":case"uint":if(r)throw new Error(n);var o=parseInt(i[3]||256);if(0===o||o>256||o%8!=0)throw new Error("[ethjs-abi] while getting param coder for type "+t+", invalid "+s+"<N> width: "+t);r=l(o/8,"int"===s);break;case"bool":if(r)throw new Error(n);r=f;break;case"string":if(r)throw new Error(n);r=b;break;case"bytes":if(r)throw new Error(n);if(i[3]){var a=parseInt(i[3]);if(0===a||a>32)throw new Error("[ethjs-abi] while getting param coder for prefix bytes, invalid type "+t+", size "+a+" should be 0 or greater than 32");r=h(a)}else r=y;break;case"address":if(r)throw new Error(n);r=p;break;case"[]":if(!r||r.dynamic)throw new Error(n);r=_(r,-1);break;default:if(!r||r.dynamic)throw new Error(n);r=_(r,parseInt(i[6]))}}if(!r)throw new Error(n);return r}}}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"ethjs-abi",file:"/home/circleci/project/node_modules/@metamask/snap-controllers/node_modules/ethjs-contract/node_modules/ethjs-abi/lib/utils/index.js"}],[5315,{},function(){with(this)return function(){"use strict";return function(e,t,r){
/*!
  * prr
  * (c) 2013 Rod Vagg <rod@vagg.org>
  * https://github.com/rvagg/prr
  * License: MIT
  */
var n,i;n=this,i=function(){var e="function"==typeof Object.defineProperty?function(e,t,r){return Object.defineProperty(e,t,r),e}:function(e,t,r){return e[t]=r.value,e};return function(t,r,n,i){var s;if(i=function(e,t){var r="object"==typeof t,n=!r&&"string"==typeof t,i=function(e){return r?!!t[e]:!!n&&t.indexOf(e[0])>-1};return{enumerable:i("enumerable"),configurable:i("configurable"),writable:i("writable"),value:e}}(n,i),"object"==typeof r){for(s in r)Object.hasOwnProperty.call(r,s)&&(i.value=r[s],e(t,s,i));return t}return e(t,r,i)}},void 0!==t&&t.exports?t.exports=i():n.prr=i()}}},{package:"prr",file:"/home/circleci/project/node_modules/prr/prr.js"}],[4710,{},function(){with(this)return function(){"use strict";return function(e,t,r){var n={};function i(e,t,r){r||(r=Error);var i=function(e){var r,n;function i(r,n,i){return e.call(this,function(e,r,n){return"string"==typeof t?t:t(e,r,n)}(r,n,i))||this}return n=e,(r=i).prototype=Object.create(n.prototype),r.prototype.constructor=r,r.__proto__=n,i}(r);i.prototype.name=r.name,i.prototype.code=e,n[e]=i}function s(e,t){if(Array.isArray(e)){var r=e.length;return e=e.map((function(e){return String(e)})),r>2?"one of ".concat(t," ").concat(e.slice(0,r-1).join(", "),", or ")+e[r-1]:2===r?"one of ".concat(t," ").concat(e[0]," or ").concat(e[1]):"of ".concat(t," ").concat(e[0])}return"of ".concat(t," ").concat(String(e))}i("ERR_INVALID_OPT_VALUE",(function(e,t){return'The value "'+t+'" is invalid for option "'+e+'"'}),TypeError),i("ERR_INVALID_ARG_TYPE",(function(e,t,r){var n,i,o,a;if("string"==typeof t&&(i="not ",t.substr(!o||o<0?0:+o,i.length)===i)?(n="must not be",t=t.replace(/^not /,"")):n="must be",function(e,t,r){return(r===undefined||r>e.length)&&(r=e.length),e.substring(r-t.length,r)===t}(e," argument"))a="The ".concat(e," ").concat(n," ").concat(s(t,"type"));else{var c=function(e,t,r){return"number"!=typeof r&&(r=0),!(r+t.length>e.length)&&-1!==e.indexOf(t,r)}(e,".")?"property":"argument";a='The "'.concat(e,'" ').concat(c," ").concat(n," ").concat(s(t,"type"))}return a+=". Received type ".concat(typeof r)}),TypeError),i("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF"),i("ERR_METHOD_NOT_IMPLEMENTED",(function(e){return"The "+e+" method is not implemented"})),i("ERR_STREAM_PREMATURE_CLOSE","Premature close"),i("ERR_STREAM_DESTROYED",(function(e){return"Cannot call "+e+" after a stream was destroyed"})),i("ERR_MULTIPLE_CALLBACK","Callback called multiple times"),i("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable"),i("ERR_STREAM_WRITE_AFTER_END","write after end"),i("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError),i("ERR_UNKNOWN_ENCODING",(function(e){return"Unknown encoding: "+e}),TypeError),i("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event"),t.exports.codes=n}}},{package:"readable-stream",file:"/home/circleci/project/node_modules/level-iterator-stream/node_modules/readable-stream/errors-browser.js"}],[4723,{events:2029},function(){with(this)return function(){"use strict";return function(e,t,r){t.exports=e("events").EventEmitter}}},{package:"readable-stream",file:"/home/circleci/project/node_modules/level-iterator-stream/node_modules/readable-stream/lib/internal/streams/stream-browser.js"}],[4718,{_process:5294},function(){with(this)return function(){"use strict";return function(e,t,r){(function(e){(function(){function r(e,t){i(e,t),n(e)}function n(e){e._writableState&&!e._writableState.emitClose||e._readableState&&!e._readableState.emitClose||e.emit("close")}function i(e,t){e.emit("error",t)}t.exports={destroy:function(t,s){var o=this,a=this._readableState&&this._readableState.destroyed,c=this._writableState&&this._writableState.destroyed;return a||c?(s?s(t):t&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,e.nextTick(i,this,t)):e.nextTick(i,this,t)),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(t||null,(function(t){!s&&t?o._writableState?o._writableState.errorEmitted?e.nextTick(n,o):(o._writableState.errorEmitted=!0,e.nextTick(r,o,t)):e.nextTick(r,o,t):s?(e.nextTick(n,o),s(t)):e.nextTick(n,o)})),this)},undestroy:function(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)},errorOrDestroy:function(e,t){var r=e._readableState,n=e._writableState;r&&r.autoDestroy||n&&n.autoDestroy?e.destroy(t):e.emit("error",t)}}}).call(this)}).call(this,e("_process"))}}},{package:"readable-stream",file:"/home/circleci/project/node_modules/level-iterator-stream/node_modules/readable-stream/lib/internal/streams/destroy.js"}],[4722,{"../../../errors":4710},function(){with(this)return function(){"use strict";return function(e,t,r){var n=e("../../../errors").codes.ERR_INVALID_OPT_VALUE;t.exports={getHighWaterMark:function(e,t,r,i){var s=function(e,t,r){return null!=e.highWaterMark?e.highWaterMark:t?e[r]:null}(t,i,r);if(null!=s){if(!isFinite(s)||Math.floor(s)!==s||s<0)throw new n(i?r:"highWaterMark",s);return Math.floor(s)}return e.objectMode?16:16384}}}}},{package:"readable-stream",file:"/home/circleci/project/node_modules/level-iterator-stream/node_modules/readable-stream/lib/internal/streams/state.js"}],[4720,{},function(){with(this)return function(){"use strict";return function(e,t,r){t.exports=function(){throw new Error("Readable.from is not available in the browser")}}}},{package:"readable-stream",file:"/home/circleci/project/node_modules/level-iterator-stream/node_modules/readable-stream/lib/internal/streams/from-browser.js"}],[4717,{buffer:2028,util:2027},function(){with(this)return function(){"use strict";return function(e,t,r){function n(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function i(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function s(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var o=e("buffer").Buffer,a=e("util").inspect,c=a&&a.custom||"inspect";t.exports=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.head=null,this.tail=null,this.length=0}var t,r,u;return t=e,r=[{key:"push",value:function(e){var t={data:e,next:null};this.length>0?this.tail.next=t:this.head=t,this.tail=t,++this.length}},{key:"unshift",value:function(e){var t={data:e,next:this.head};0===this.length&&(this.tail=t),this.head=t,++this.length}},{key:"shift",value:function(){if(0!==this.length){var e=this.head.data;return 1===this.length?this.head=this.tail=null:this.head=this.head.next,--this.length,e}}},{key:"clear",value:function(){this.head=this.tail=null,this.length=0}},{key:"join",value:function(e){if(0===this.length)return"";for(var t=this.head,r=""+t.data;t=t.next;)r+=e+t.data;return r}},{key:"concat",value:function(e){if(0===this.length)return o.alloc(0);for(var t,r,n,i=o.allocUnsafe(e>>>0),s=this.head,a=0;s;)t=s.data,r=i,n=a,o.prototype.copy.call(t,r,n),a+=s.data.length,s=s.next;return i}},{key:"consume",value:function(e,t){var r;return e<this.head.data.length?(r=this.head.data.slice(0,e),this.head.data=this.head.data.slice(e)):r=e===this.head.data.length?this.shift():t?this._getString(e):this._getBuffer(e),r}},{key:"first",value:function(){return this.head.data}},{key:"_getString",value:function(e){var t=this.head,r=1,n=t.data;for(e-=n.length;t=t.next;){var i=t.data,s=e>i.length?i.length:e;if(s===i.length?n+=i:n+=i.slice(0,e),0==(e-=s)){s===i.length?(++r,t.next?this.head=t.next:this.head=this.tail=null):(this.head=t,t.data=i.slice(s));break}++r}return this.length-=r,n}},{key:"_getBuffer",value:function(e){var t=o.allocUnsafe(e),r=this.head,n=1;for(r.data.copy(t),e-=r.data.length;r=r.next;){var i=r.data,s=e>i.length?i.length:e;if(i.copy(t,t.length-e,0,s),0==(e-=s)){s===i.length?(++n,r.next?this.head=r.next:this.head=this.tail=null):(this.head=r,r.data=i.slice(s));break}++n}return this.length-=n,t}},{key:c,value:function(e,t){return a(this,function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?n(Object(r),!0).forEach((function(t){i(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):n(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},t,{depth:0,customInspect:!1}))}}],r&&s(t.prototype,r),u&&s(t,u),e}()}}},{package:"readable-stream",file:"/home/circleci/project/node_modules/level-iterator-stream/node_modules/readable-stream/lib/internal/streams/buffer_list.js"}],[4716,{"./end-of-stream":4719,_process:5294},function(){with(this)return function(){"use strict";return function(e,t,r){(function(r){(function(){var n;function i(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var s=e("./end-of-stream"),o=Symbol("lastResolve"),a=Symbol("lastReject"),c=Symbol("error"),u=Symbol("ended"),l=Symbol("lastPromise"),d=Symbol("handlePromise"),f=Symbol("stream");function h(e,t){return{value:e,done:t}}function p(e){var t=e[o];if(null!==t){var r=e[f].read();null!==r&&(e[l]=null,e[o]=null,e[a]=null,t(h(r,!1)))}}function m(e){r.nextTick(p,e)}var g=Object.getPrototypeOf((function(){})),y=Object.setPrototypeOf((i(n={get stream(){return this[f]},next:function(){var e=this,t=this[c];if(null!==t)return Promise.reject(t);if(this[u])return Promise.resolve(h(undefined,!0));if(this[f].destroyed)return new Promise((function(t,n){r.nextTick((function(){e[c]?n(e[c]):t(h(undefined,!0))}))}));var n,i=this[l];if(i)n=new Promise(function(e,t){return function(r,n){e.then((function(){t[u]?r(h(undefined,!0)):t[d](r,n)}),n)}}(i,this));else{var s=this[f].read();if(null!==s)return Promise.resolve(h(s,!1));n=new Promise(this[d])}return this[l]=n,n}},Symbol.asyncIterator,(function(){return this})),i(n,"return",(function(){var e=this;return new Promise((function(t,r){e[f].destroy(null,(function(e){e?r(e):t(h(undefined,!0))}))}))})),n),g);t.exports=function(e){var t,r=Object.create(y,(i(t={},f,{value:e,writable:!0}),i(t,o,{value:null,writable:!0}),i(t,a,{value:null,writable:!0}),i(t,c,{value:null,writable:!0}),i(t,u,{value:e._readableState.endEmitted,writable:!0}),i(t,d,{value:function(e,t){var n=r[f].read();n?(r[l]=null,r[o]=null,r[a]=null,e(h(n,!1))):(r[o]=e,r[a]=t)},writable:!0}),t));return r[l]=null,s(e,(function(e){if(e&&"ERR_STREAM_PREMATURE_CLOSE"!==e.code){var t=r[a];return null!==t&&(r[l]=null,r[o]=null,r[a]=null,t(e)),void(r[c]=e)}var n=r[o];null!==n&&(r[l]=null,r[o]=null,r[a]=null,n(h(undefined,!0))),r[u]=!0})),e.on("readable",m.bind(null,r)),r}}).call(this)}).call(this,e("_process"))}}},{package:"readable-stream",file:"/home/circleci/project/node_modules/level-iterator-stream/node_modules/readable-stream/lib/internal/streams/async_iterator.js"}],[4962,{},function(){with(this)return function(){"use strict";return function(e,t,r){t.exports=function(e){return function(t){return null==t?undefined:t[e]}}}}},{package:"lodash",file:"/home/circleci/project/node_modules/lodash/_baseProperty.js"}],[4313,{stream:5734,xtend:6007},function(){with(this)return function(){"use strict";return function(e,t,r){var n=e("stream"),i=e("xtend");t.exports=function(e,t,r){if("object"!=typeof e)throw new TypeError("db must be an object");if("string"!=typeof t)throw new TypeError("storeName must be a string");if(null==r&&(r={}),"object"!=typeof r)throw new TypeError("opts must be an object");var s=new n.Transform(i(r,{objectMode:!0,transform:function(e,t,r){r(null,e)}}));r=i({snapshot:!1},r);var o=null;return s._cursorsOpened=0,function n(){var i,a,c,u,l,d=r.direction||"next",f=r.range||{};i=f.lower,a=f.upper,c=!!f.lowerOpen,u=!!f.upperOpen,o&&("next"===d?(c=!0,i=o):(u=!0,a=o)),i&&a?l=IDBKeyRange.bound(i,a,c,u):i?l=IDBKeyRange.lowerBound(i,c):a&&(l=IDBKeyRange.upperBound(a,u));var h=e.transaction(t,"readonly"),p=h.objectStore(t);s._cursorsOpened++;var m=p.openCursor(l,r.direction);function g(e){try{e.continue()}catch(e){"TransactionInactiveError"!==e.name||r.snapshot?s.emit("error",e):n()}}m.onsuccess=function(){var e=m.result;if(e){o=e.key;var t=s.write({key:e.key,value:e.value});r.snapshot||t?g(e):s.once("drain",(function(){g(e)}))}else s.end()},h.onabort=function(){s.emit("error",h.error)},h.onerror=function(){s.emit("error",h.error)}}(),s}}}},{package:"idb-readable-stream",file:"/home/circleci/project/node_modules/idb-readable-stream/index.js"}],[2185,{_process:5294},function(){with(this)return function(){"use strict";return function(e,t,r){(function(e){(function(){function r(e){this.db=e,this._ended=!1,this._nexting=!1}r.prototype.next=function(t){var r=this;if("function"!=typeof t)throw new Error("next() requires a callback argument");return r._ended?t(new Error("cannot call next() after end()")):r._nexting?t(new Error("cannot call next() before previous next() has completed")):(r._nexting=!0,"function"==typeof r._next?r._next((function(){r._nexting=!1,t.apply(null,arguments)})):void e.nextTick((function(){r._nexting=!1,t()})))},r.prototype.end=function(t){if("function"!=typeof t)throw new Error("end() requires a callback argument");return this._ended?t(new Error("end() already called on iterator")):(this._ended=!0,"function"==typeof this._end?this._end(t):void e.nextTick(t))},t.exports=r}).call(this)}).call(this,e("_process"))}}},{package:"abstract-leveldown",file:"/home/circleci/project/node_modules/datastore-level/node_modules/abstract-leveldown/abstract-iterator.js"}],[2184,{_process:5294},function(){with(this)return function(){"use strict";return function(e,t,r){(function(e){(function(){function r(e){this._db=e,this._operations=[],this._written=!1}r.prototype._checkWritten=function(){if(this._written)throw new Error("write() already called on this batch")},r.prototype.put=function(e,t){this._checkWritten();var r=this._db._checkKey(e,"key",this._db._isBuffer);if(r)throw r;return this._db._isBuffer(e)||(e=String(e)),this._db._isBuffer(t)||(t=String(t)),"function"==typeof this._put?this._put(e,t):this._operations.push({type:"put",key:e,value:t}),this},r.prototype.del=function(e){this._checkWritten();var t=this._db._checkKey(e,"key",this._db._isBuffer);if(t)throw t;return this._db._isBuffer(e)||(e=String(e)),"function"==typeof this._del?this._del(e):this._operations.push({type:"del",key:e}),this},r.prototype.clear=function(){return this._checkWritten(),this._operations=[],"function"==typeof this._clear&&this._clear(),this},r.prototype.write=function(t,r){if(this._checkWritten(),"function"==typeof t&&(r=t),"function"!=typeof r)throw new Error("write() requires a callback argument");return"object"!=typeof t&&(t={}),this._written=!0,"function"==typeof this._write?this._write(r):"function"==typeof this._db._batch?this._db._batch(this._operations,t,r):void e.nextTick(r)},t.exports=r}).call(this)}).call(this,e("_process"))}}},{package:"abstract-leveldown",file:"/home/circleci/project/node_modules/datastore-level/node_modules/abstract-leveldown/abstract-chained-batch.js"}],[2188,{"./abstract-leveldown":2186},function(){with(this)return function(){"use strict";return function(e,t,r){var n=e("./abstract-leveldown");t.exports=function(e){return!(!e||"object"!=typeof e)&&Object.keys(n.prototype).filter((function(e){return"_"!=e[0]&&"approximateSize"!=e})).every((function(t){return"function"==typeof e[t]}))}}}},{package:"abstract-leveldown",file:"/home/circleci/project/node_modules/datastore-level/node_modules/abstract-leveldown/is-leveldown.js"}],[2186,{"../../../is-buffer/index.js":4611,"./abstract-chained-batch":2184,"./abstract-iterator":2185,_process:5294,xtend:6007},function(){with(this)return function(){"use strict";return function(e,t,r){(function(r,n){(function(){var i=e("xtend"),s=e("./abstract-iterator"),o=e("./abstract-chained-batch");function a(e){if(!arguments.length||e===undefined)throw new Error("constructor requires at least a location argument");if("string"!=typeof e)throw new Error("constructor requires a location string argument");this.location=e,this.status="new"}a.prototype.open=function(e,t){var r=this,i=this.status;if("function"==typeof e&&(t=e),"function"!=typeof t)throw new Error("open() requires a callback argument");"object"!=typeof e&&(e={}),e.createIfMissing=0!=e.createIfMissing,e.errorIfExists=!!e.errorIfExists,"function"==typeof this._open?(this.status="opening",this._open(e,(function(e){if(e)return r.status=i,t(e);r.status="open",t()}))):(this.status="open",n.nextTick(t))},a.prototype.close=function(e){var t=this,r=this.status;if("function"!=typeof e)throw new Error("close() requires a callback argument");"function"==typeof this._close?(this.status="closing",this._close((function(n){if(n)return t.status=r,e(n);t.status="closed",e()}))):(this.status="closed",n.nextTick(e))},a.prototype.get=function(e,t,r){var i;if("function"==typeof t&&(r=t),"function"!=typeof r)throw new Error("get() requires a callback argument");return(i=this._checkKey(e,"key",this._isBuffer))?r(i):(this._isBuffer(e)||(e=String(e)),"object"!=typeof t&&(t={}),t.asBuffer=0!=t.asBuffer,"function"==typeof this._get?this._get(e,t,r):void n.nextTick((function(){r(new Error("NotFound"))})))},a.prototype.put=function(e,t,r,i){var s;if("function"==typeof r&&(i=r),"function"!=typeof i)throw new Error("put() requires a callback argument");return(s=this._checkKey(e,"key",this._isBuffer))?i(s):(this._isBuffer(e)||(e=String(e)),null==t||this._isBuffer(t)||n.browser||(t=String(t)),"object"!=typeof r&&(r={}),"function"==typeof this._put?this._put(e,t,r,i):void n.nextTick(i))},a.prototype.del=function(e,t,r){var i;if("function"==typeof t&&(r=t),"function"!=typeof r)throw new Error("del() requires a callback argument");return(i=this._checkKey(e,"key",this._isBuffer))?r(i):(this._isBuffer(e)||(e=String(e)),"object"!=typeof t&&(t={}),"function"==typeof this._del?this._del(e,t,r):void n.nextTick(r))},a.prototype.batch=function(e,t,r){if(!arguments.length)return this._chainedBatch();if("function"==typeof t&&(r=t),"function"==typeof e&&(r=e),"function"!=typeof r)throw new Error("batch(array) requires a callback argument");if(!Array.isArray(e))return r(new Error("batch(array) requires an array argument"));t&&"object"==typeof t||(t={});for(var i,s,o=0,a=e.length;o<a;o++)if("object"==typeof(i=e[o])){if(s=this._checkKey(i.type,"type",this._isBuffer))return r(s);if(s=this._checkKey(i.key,"key",this._isBuffer))return r(s)}if("function"==typeof this._batch)return this._batch(e,t,r);n.nextTick(r)},a.prototype.approximateSize=function(e,t,r){if(null==e||null==t||"function"==typeof e||"function"==typeof t)throw new Error("approximateSize() requires valid `start`, `end` and `callback` arguments");if("function"!=typeof r)throw new Error("approximateSize() requires a callback argument");if(this._isBuffer(e)||(e=String(e)),this._isBuffer(t)||(t=String(t)),"function"==typeof this._approximateSize)return this._approximateSize(e,t,r);n.nextTick((function(){r(null,0)}))},a.prototype._setupIteratorOptions=function(e){var t=this;return e=i(e),["start","end","gt","gte","lt","lte"].forEach((function(r){e[r]&&t._isBuffer(e[r])&&0===e[r].length&&delete e[r]})),e.reverse=!!e.reverse,e.keys=0!=e.keys,e.values=0!=e.values,e.limit="limit"in e?e.limit:-1,e.keyAsBuffer=0!=e.keyAsBuffer,e.valueAsBuffer=0!=e.valueAsBuffer,e},a.prototype.iterator=function(e){return"object"!=typeof e&&(e={}),e=this._setupIteratorOptions(e),"function"==typeof this._iterator?this._iterator(e):new s(this)},a.prototype._chainedBatch=function(){return new o(this)},a.prototype._isBuffer=function(e){return r.isBuffer(e)},a.prototype._checkKey=function(e,t){if(null===e||e===undefined)return new Error(t+" cannot be `null` or `undefined`");if(this._isBuffer(e)){if(0===e.length)return new Error(t+" cannot be an empty Buffer")}else if(""===String(e))return new Error(t+" cannot be an empty String")},t.exports=a}).call(this)}).call(this,{isBuffer:e("../../../is-buffer/index.js")},e("_process"))}}},{package:"abstract-leveldown",file:"/home/circleci/project/node_modules/datastore-level/node_modules/abstract-leveldown/abstract-leveldown.js"}],[4707,{buffer:2028},function(){with(this)return function(){"use strict";return function(e,t,r){(function(e){(function(){r.utf8=r["utf-8"]={encode:function(e){return n(e)?e:String(e)},decode:t,buffer:!1,type:"utf8"},r.json={encode:JSON.stringify,decode:JSON.parse,buffer:!1,type:"json"},r.binary={encode:function(t){return n(t)?t:e.from(t)},decode:t,buffer:!0,type:"binary"},r.none={encode:t,decode:t,buffer:!1,type:"id"},r.id=r.none;function t(e){return e}function n(t){return t===undefined||null===t||e.isBuffer(t)}["hex","ascii","base64","ucs2","ucs-2","utf16le","utf-16le"].forEach((function(t){r[t]={encode:function(r){return n(r)?r:e.from(r,t)},decode:function(e){return e.toString(t)},buffer:!0,type:t}}))}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"level-codec",file:"/home/circleci/project/node_modules/level-codec/lib/encodings.js"}],[2276,{"./next-tick":2280},function(){with(this)return function(){"use strict";return function(e,t,r){var n=e("./next-tick");function i(e){if("object"!=typeof e||null===e)throw new TypeError("First argument must be an abstract-leveldown compliant store");this.db=e,this._operations=[],this._written=!1}i.prototype._checkWritten=function(){if(this._written)throw new Error("write() already called on this batch")},i.prototype.put=function(e,t){this._checkWritten();var r=this.db._checkKey(e)||this.db._checkValue(t);if(r)throw r;return e=this.db._serializeKey(e),t=this.db._serializeValue(t),this._put(e,t),this},i.prototype._put=function(e,t){this._operations.push({type:"put",key:e,value:t})},i.prototype.del=function(e){this._checkWritten();var t=this.db._checkKey(e);if(t)throw t;return e=this.db._serializeKey(e),this._del(e),this},i.prototype._del=function(e){this._operations.push({type:"del",key:e})},i.prototype.clear=function(){return this._checkWritten(),this._clear(),this},i.prototype._clear=function(){this._operations=[]},i.prototype.write=function(e,t){if(this._checkWritten(),"function"==typeof e&&(t=e),"function"!=typeof t)throw new Error("write() requires a callback argument");"object"==typeof e&&null!==e||(e={}),this._written=!0,this._write(e,t)},i.prototype._write=function(e,t){this.db._batch(this._operations,e,t)},i.prototype._nextTick=n,t.exports=i}}},{package:"abstract-leveldown",file:"/home/circleci/project/node_modules/encoding-down/node_modules/abstract-leveldown/abstract-chained-batch.js"}],[2277,{"./next-tick":2280},function(){with(this)return function(){"use strict";return function(e,t,r){var n=e("./next-tick");function i(e){if("object"!=typeof e||null===e)throw new TypeError("First argument must be an abstract-leveldown compliant store");this.db=e,this._ended=!1,this._nexting=!1}i.prototype.next=function(e){var t=this;if("function"!=typeof e)throw new Error("next() requires a callback argument");return t._ended?(n(e,new Error("cannot call next() after end()")),t):t._nexting?(n(e,new Error("cannot call next() before previous next() has completed")),t):(t._nexting=!0,t._next((function(){t._nexting=!1,e.apply(null,arguments)})),t)},i.prototype._next=function(e){n(e)},i.prototype.seek=function(e){if(this._ended)throw new Error("cannot call seek() after end()");if(this._nexting)throw new Error("cannot call seek() before next() has completed");e=this.db._serializeKey(e),this._seek(e)},i.prototype._seek=function(e){},i.prototype.end=function(e){if("function"!=typeof e)throw new Error("end() requires a callback argument");if(this._ended)return n(e,new Error("end() already called on iterator"));this._ended=!0,this._end(e)},i.prototype._end=function(e){n(e)},i.prototype._nextTick=n,t.exports=i}}},{package:"abstract-leveldown",file:"/home/circleci/project/node_modules/encoding-down/node_modules/abstract-leveldown/abstract-iterator.js"}],[2278,{"./abstract-chained-batch":2276,"./abstract-iterator":2277,"./next-tick":2280,buffer:2028,"level-supports":2281,xtend:6007},function(){with(this)return function(){"use strict";return function(e,t,r){var n=e("xtend"),i=e("level-supports"),s=e("buffer").Buffer,o=e("./abstract-iterator"),a=e("./abstract-chained-batch"),c=e("./next-tick"),u=Object.prototype.hasOwnProperty,l="start end gt gte lt lte".split(" ");function d(e){this.status="new",this.supports=i(e,{status:!0})}function f(e,t){var r={};for(var n in t)if(u.call(t,n)){var i=t[n];h(n)&&(i=e._serializeKey(i)),r[n]=i}return r}function h(e){return-1!==l.indexOf(e)}d.prototype.open=function(e,t){var r=this,n=this.status;if("function"==typeof e&&(t=e),"function"!=typeof t)throw new Error("open() requires a callback argument");"object"==typeof e&&null!==e||(e={}),e.createIfMissing=!1!==e.createIfMissing,e.errorIfExists=!!e.errorIfExists,this.status="opening",this._open(e,(function(e){if(e)return r.status=n,t(e);r.status="open",t()}))},d.prototype._open=function(e,t){c(t)},d.prototype.close=function(e){var t=this,r=this.status;if("function"!=typeof e)throw new Error("close() requires a callback argument");this.status="closing",this._close((function(n){if(n)return t.status=r,e(n);t.status="closed",e()}))},d.prototype._close=function(e){c(e)},d.prototype.get=function(e,t,r){if("function"==typeof t&&(r=t),"function"!=typeof r)throw new Error("get() requires a callback argument");var n=this._checkKey(e);if(n)return c(r,n);e=this._serializeKey(e),"object"==typeof t&&null!==t||(t={}),t.asBuffer=!1!==t.asBuffer,this._get(e,t,r)},d.prototype._get=function(e,t,r){c((function(){r(new Error("NotFound"))}))},d.prototype.put=function(e,t,r,n){if("function"==typeof r&&(n=r),"function"!=typeof n)throw new Error("put() requires a callback argument");var i=this._checkKey(e)||this._checkValue(t);if(i)return c(n,i);e=this._serializeKey(e),t=this._serializeValue(t),"object"==typeof r&&null!==r||(r={}),this._put(e,t,r,n)},d.prototype._put=function(e,t,r,n){c(n)},d.prototype.del=function(e,t,r){if("function"==typeof t&&(r=t),"function"!=typeof r)throw new Error("del() requires a callback argument");var n=this._checkKey(e);if(n)return c(r,n);e=this._serializeKey(e),"object"==typeof t&&null!==t||(t={}),this._del(e,t,r)},d.prototype._del=function(e,t,r){c(r)},d.prototype.batch=function(e,t,r){if(!arguments.length)return this._chainedBatch();if("function"==typeof t&&(r=t),"function"==typeof e&&(r=e),"function"!=typeof r)throw new Error("batch(array) requires a callback argument");if(!Array.isArray(e))return c(r,new Error("batch(array) requires an array argument"));if(0===e.length)return c(r);"object"==typeof t&&null!==t||(t={});for(var i=new Array(e.length),s=0;s<e.length;s++){if("object"!=typeof e[s]||null===e[s])return c(r,new Error("batch(array) element must be an object and not `null`"));var o=n(e[s]);if("put"!==o.type&&"del"!==o.type)return c(r,new Error("`type` must be 'put' or 'del'"));var a=this._checkKey(o.key);if(a)return c(r,a);if(o.key=this._serializeKey(o.key),"put"===o.type){var u=this._checkValue(o.value);if(u)return c(r,u);o.value=this._serializeValue(o.value)}i[s]=o}this._batch(i,t,r)},d.prototype._batch=function(e,t,r){c(r)},d.prototype.clear=function(e,t){if("function"==typeof e)t=e;else if("function"!=typeof t)throw new Error("clear() requires a callback argument");(e=f(this,e)).reverse=!!e.reverse,e.limit="limit"in e?e.limit:-1,this._clear(e,t)},d.prototype._clear=function(e,t){e.keys=!0,e.values=!1,e.keyAsBuffer=!0,e.valueAsBuffer=!0;var r=this._iterator(e),n={},i=this,s=function(e){if(e)return r.end((function(){t(e)}));r.next((function(e,o){return e?s(e):o===undefined?r.end(t):void i._del(o,n,s)}))};s()},d.prototype._setupIteratorOptions=function(e){return(e=f(this,e)).reverse=!!e.reverse,e.keys=!1!==e.keys,e.values=!1!==e.values,e.limit="limit"in e?e.limit:-1,e.keyAsBuffer=!1!==e.keyAsBuffer,e.valueAsBuffer=!1!==e.valueAsBuffer,e},d.prototype.iterator=function(e){return"object"==typeof e&&null!==e||(e={}),e=this._setupIteratorOptions(e),this._iterator(e)},d.prototype._iterator=function(e){return new o(this)},d.prototype._chainedBatch=function(){return new a(this)},d.prototype._serializeKey=function(e){return e},d.prototype._serializeValue=function(e){return e},d.prototype._checkKey=function(e){return null===e||e===undefined?new Error("key cannot be `null` or `undefined`"):s.isBuffer(e)&&0===e.length?new Error("key cannot be an empty Buffer"):""===e?new Error("key cannot be an empty String"):Array.isArray(e)&&0===e.length?new Error("key cannot be an empty Array"):void 0},d.prototype._checkValue=function(e){if(null===e||e===undefined)return new Error("value cannot be `null` or `undefined`")},d.prototype._nextTick=c,t.exports=d}}},{package:"abstract-leveldown",file:"/home/circleci/project/node_modules/encoding-down/node_modules/abstract-leveldown/abstract-leveldown.js"}],[1638,{},function(){with(this)return function(){"use strict";return function(e,t,r){function n(e){const t={};return Object.keys(e).forEach((function(r){(0|r)==r&&(r|=0);const n=e[r];t[n]=r})),t}r.tagClass={0:"universal",1:"application",2:"context",3:"private"},r.tagClassByName=n(r.tagClass),r.tag={0:"end",1:"bool",2:"int",3:"bitstr",4:"octstr",5:"null_",6:"objid",7:"objDesc",8:"external",9:"real",10:"enum",11:"embed",12:"utf8str",13:"relativeOid",16:"seq",17:"set",18:"numstr",19:"printstr",20:"t61str",21:"videostr",22:"ia5str",23:"utctime",24:"gentime",25:"graphstr",26:"iso646str",27:"genstr",28:"unistr",29:"charstr",30:"bmpstr"},r.tagByName=n(r.tag)}}},{package:"asn1.js",file:"/home/circleci/project/node_modules/asn1.js/lib/asn1/constants/der.js"}],[1636,{"../base/buffer":1634,"../base/reporter":1637,"minimalistic-assert":5074},function(){with(this)return function(){"use strict";return function(e,t,r){const n=e("../base/reporter").Reporter,i=e("../base/buffer").EncoderBuffer,s=e("../base/buffer").DecoderBuffer,o=e("minimalistic-assert"),a=["seq","seqof","set","setof","objid","bool","gentime","utctime","null_","enum","int","objDesc","bitstr","bmpstr","charstr","genstr","graphstr","ia5str","iso646str","numstr","octstr","printstr","t61str","unistr","utf8str","videostr"],c=["key","obj","use","optional","explicit","implicit","def","choice","any","contains"].concat(a);function u(e,t,r){const n={};this._baseState=n,n.name=r,n.enc=e,n.parent=t||null,n.children=null,n.tag=null,n.args=null,n.reverseArgs=null,n.choice=null,n.optional=!1,n.any=!1,n.obj=!1,n.use=null,n.useDecoder=null,n.key=null,n.default=null,n.explicit=null,n.implicit=null,n.contains=null,n.parent||(n.children=[],this._wrap())}t.exports=u;const l=["enc","parent","children","tag","args","reverseArgs","choice","optional","any","obj","use","alteredUse","key","default","explicit","implicit","contains"];u.prototype.clone=function(){const e=this._baseState,t={};l.forEach((function(r){t[r]=e[r]}));const r=new this.constructor(t.parent);return r._baseState=t,r},u.prototype._wrap=function(){const e=this._baseState;c.forEach((function(t){this[t]=function(){const r=new this.constructor(this);return e.children.push(r),r[t].apply(r,arguments)}}),this)},u.prototype._init=function(e){const t=this._baseState;o(null===t.parent),e.call(this),t.children=t.children.filter((function(e){return e._baseState.parent===this}),this),o.equal(t.children.length,1,"Root node can have only one child")},u.prototype._useArgs=function(e){const t=this._baseState,r=e.filter((function(e){return e instanceof this.constructor}),this);e=e.filter((function(e){return!(e instanceof this.constructor)}),this),0!==r.length&&(o(null===t.children),t.children=r,r.forEach((function(e){e._baseState.parent=this}),this)),0!==e.length&&(o(null===t.args),t.args=e,t.reverseArgs=e.map((function(e){if("object"!=typeof e||e.constructor!==Object)return e;const t={};return Object.keys(e).forEach((function(r){r==(0|r)&&(r|=0);const n=e[r];t[n]=r})),t})))},["_peekTag","_decodeTag","_use","_decodeStr","_decodeObjid","_decodeTime","_decodeNull","_decodeInt","_decodeBool","_decodeList","_encodeComposite","_encodeStr","_encodeObjid","_encodeTime","_encodeNull","_encodeInt","_encodeBool"].forEach((function(e){u.prototype[e]=function(){const t=this._baseState;throw new Error(e+" not implemented for encoding: "+t.enc)}})),a.forEach((function(e){u.prototype[e]=function(){const t=this._baseState,r=Array.prototype.slice.call(arguments);return o(null===t.tag),t.tag=e,this._useArgs(r),this}})),u.prototype.use=function(e){o(e);const t=this._baseState;return o(null===t.use),t.use=e,this},u.prototype.optional=function(){return this._baseState.optional=!0,this},u.prototype.def=function(e){const t=this._baseState;return o(null===t.default),t.default=e,t.optional=!0,this},u.prototype.explicit=function(e){const t=this._baseState;return o(null===t.explicit&&null===t.implicit),t.explicit=e,this},u.prototype.implicit=function(e){const t=this._baseState;return o(null===t.explicit&&null===t.implicit),t.implicit=e,this},u.prototype.obj=function(){const e=this._baseState,t=Array.prototype.slice.call(arguments);return e.obj=!0,0!==t.length&&this._useArgs(t),this},u.prototype.key=function(e){const t=this._baseState;return o(null===t.key),t.key=e,this},u.prototype.any=function(){return this._baseState.any=!0,this},u.prototype.choice=function(e){const t=this._baseState;return o(null===t.choice),t.choice=e,this._useArgs(Object.keys(e).map((function(t){return e[t]}))),this},u.prototype.contains=function(e){const t=this._baseState;return o(null===t.use),t.contains=e,this},u.prototype._decode=function(e,t){const r=this._baseState;if(null===r.parent)return e.wrapResult(r.children[0]._decode(e,t));let n,i=r.default,o=!0,a=null;if(null!==r.key&&(a=e.enterKey(r.key)),r.optional){let n=null;if(null!==r.explicit?n=r.explicit:null!==r.implicit?n=r.implicit:null!==r.tag&&(n=r.tag),null!==n||r.any){if(o=this._peekTag(e,n,r.any),e.isError(o))return o}else{const n=e.save();try{null===r.choice?this._decodeGeneric(r.tag,e,t):this._decodeChoice(e,t),o=!0}catch(e){o=!1}e.restore(n)}}if(r.obj&&o&&(n=e.enterObject()),o){if(null!==r.explicit){const t=this._decodeTag(e,r.explicit);if(e.isError(t))return t;e=t}const n=e.offset;if(null===r.use&&null===r.choice){let t;r.any&&(t=e.save());const n=this._decodeTag(e,null!==r.implicit?r.implicit:r.tag,r.any);if(e.isError(n))return n;r.any?i=e.raw(t):e=n}if(t&&t.track&&null!==r.tag&&t.track(e.path(),n,e.length,"tagged"),t&&t.track&&null!==r.tag&&t.track(e.path(),e.offset,e.length,"content"),r.any||(i=null===r.choice?this._decodeGeneric(r.tag,e,t):this._decodeChoice(e,t)),e.isError(i))return i;if(r.any||null!==r.choice||null===r.children||r.children.forEach((function(r){r._decode(e,t)})),r.contains&&("octstr"===r.tag||"bitstr"===r.tag)){const n=new s(i);i=this._getUse(r.contains,e._reporterState.obj)._decode(n,t)}}return r.obj&&o&&(i=e.leaveObject(n)),null===r.key||null===i&&!0!==o?null!==a&&e.exitKey(a):e.leaveKey(a,r.key,i),i},u.prototype._decodeGeneric=function(e,t,r){const n=this._baseState;return"seq"===e||"set"===e?null:"seqof"===e||"setof"===e?this._decodeList(t,e,n.args[0],r):/str$/.test(e)?this._decodeStr(t,e,r):"objid"===e&&n.args?this._decodeObjid(t,n.args[0],n.args[1],r):"objid"===e?this._decodeObjid(t,null,null,r):"gentime"===e||"utctime"===e?this._decodeTime(t,e,r):"null_"===e?this._decodeNull(t,r):"bool"===e?this._decodeBool(t,r):"objDesc"===e?this._decodeStr(t,e,r):"int"===e||"enum"===e?this._decodeInt(t,n.args&&n.args[0],r):null!==n.use?this._getUse(n.use,t._reporterState.obj)._decode(t,r):t.error("unknown tag: "+e)},u.prototype._getUse=function(e,t){const r=this._baseState;return r.useDecoder=this._use(e,t),o(null===r.useDecoder._baseState.parent),r.useDecoder=r.useDecoder._baseState.children[0],r.implicit!==r.useDecoder._baseState.implicit&&(r.useDecoder=r.useDecoder.clone(),r.useDecoder._baseState.implicit=r.implicit),r.useDecoder},u.prototype._decodeChoice=function(e,t){const r=this._baseState;let n=null,i=!1;return Object.keys(r.choice).some((function(s){const o=e.save(),a=r.choice[s];try{const r=a._decode(e,t);if(e.isError(r))return!1;n={type:s,value:r},i=!0}catch(t){return e.restore(o),!1}return!0}),this),i?n:e.error("Choice not matched")},u.prototype._createEncoderBuffer=function(e){return new i(e,this.reporter)},u.prototype._encode=function(e,t,r){const n=this._baseState;if(null!==n.default&&n.default===e)return;const i=this._encodeValue(e,t,r);return i===undefined||this._skipDefault(i,t,r)?void 0:i},u.prototype._encodeValue=function(e,t,r){const i=this._baseState;if(null===i.parent)return i.children[0]._encode(e,t||new n);let s=null;if(this.reporter=t,i.optional&&e===undefined){if(null===i.default)return;e=i.default}let o=null,a=!1;if(i.any)s=this._createEncoderBuffer(e);else if(i.choice)s=this._encodeChoice(e,t);else if(i.contains)o=this._getUse(i.contains,r)._encode(e,t),a=!0;else if(i.children)o=i.children.map((function(r){if("null_"===r._baseState.tag)return r._encode(null,t,e);if(null===r._baseState.key)return t.error("Child should have a key");const n=t.enterKey(r._baseState.key);if("object"!=typeof e)return t.error("Child expected, but input is not object");const i=r._encode(e[r._baseState.key],t,e);return t.leaveKey(n),i}),this).filter((function(e){return e})),o=this._createEncoderBuffer(o);else if("seqof"===i.tag||"setof"===i.tag){if(!i.args||1!==i.args.length)return t.error("Too many args for : "+i.tag);if(!Array.isArray(e))return t.error("seqof/setof, but data is not Array");const r=this.clone();r._baseState.implicit=null,o=this._createEncoderBuffer(e.map((function(r){const n=this._baseState;return this._getUse(n.args[0],e)._encode(r,t)}),r))}else null!==i.use?s=this._getUse(i.use,r)._encode(e,t):(o=this._encodePrimitive(i.tag,e),a=!0);if(!i.any&&null===i.choice){const e=null!==i.implicit?i.implicit:i.tag,r=null===i.implicit?"universal":"context";null===e?null===i.use&&t.error("Tag could be omitted only for .use()"):null===i.use&&(s=this._encodeComposite(e,a,r,o))}return null!==i.explicit&&(s=this._encodeComposite(i.explicit,!1,"context",s)),s},u.prototype._encodeChoice=function(e,t){const r=this._baseState,n=r.choice[e.type];return n||o(!1,e.type+" not found in "+JSON.stringify(Object.keys(r.choice))),n._encode(e.value,t)},u.prototype._encodePrimitive=function(e,t){const r=this._baseState;if(/str$/.test(e))return this._encodeStr(t,e);if("objid"===e&&r.args)return this._encodeObjid(t,r.reverseArgs[0],r.args[1]);if("objid"===e)return this._encodeObjid(t,null,null);if("gentime"===e||"utctime"===e)return this._encodeTime(t,e);if("null_"===e)return this._encodeNull();if("int"===e||"enum"===e)return this._encodeInt(t,r.args&&r.reverseArgs[0]);if("bool"===e)return this._encodeBool(t);if("objDesc"===e)return this._encodeStr(t,e);throw new Error("Unsupported tag: "+e)},u.prototype._isNumstr=function(e){return/^[0-9 ]*$/.test(e)},u.prototype._isPrintstr=function(e){return/^[A-Za-z0-9 '()+,-./:=?]*$/.test(e)}}}},{package:"asn1.js",file:"/home/circleci/project/node_modules/asn1.js/lib/asn1/base/node.js"}],[1634,{"../base/reporter":1637,buffer:2028,inherits:4329},function(){with(this)return function(){"use strict";return function(e,t,r){const n=e("inherits"),i=e("../base/reporter").Reporter,s=e("buffer").Buffer;function o(e,t){i.call(this,t),s.isBuffer(e)?(this.base=e,this.offset=0,this.length=e.length):this.error("Input not Buffer")}function a(e,t){if(Array.isArray(e))this.length=0,this.value=e.map((function(e){return a.isEncoderBuffer(e)||(e=new a(e,t)),this.length+=e.length,e}),this);else if("number"==typeof e){if(!(0<=e&&e<=255))return t.error("non-byte EncoderBuffer value");this.value=e,this.length=1}else if("string"==typeof e)this.value=e,this.length=s.byteLength(e);else{if(!s.isBuffer(e))return t.error("Unsupported type: "+typeof e);this.value=e,this.length=e.length}}n(o,i),r.DecoderBuffer=o,o.isDecoderBuffer=function(e){if(e instanceof o)return!0;return"object"==typeof e&&s.isBuffer(e.base)&&"DecoderBuffer"===e.constructor.name&&"number"==typeof e.offset&&"number"==typeof e.length&&"function"==typeof e.save&&"function"==typeof e.restore&&"function"==typeof e.isEmpty&&"function"==typeof e.readUInt8&&"function"==typeof e.skip&&"function"==typeof e.raw},o.prototype.save=function(){return{offset:this.offset,reporter:i.prototype.save.call(this)}},o.prototype.restore=function(e){const t=new o(this.base);return t.offset=e.offset,t.length=this.offset,this.offset=e.offset,i.prototype.restore.call(this,e.reporter),t},o.prototype.isEmpty=function(){return this.offset===this.length},o.prototype.readUInt8=function(e){return this.offset+1<=this.length?this.base.readUInt8(this.offset++,!0):this.error(e||"DecoderBuffer overrun")},o.prototype.skip=function(e,t){if(!(this.offset+e<=this.length))return this.error(t||"DecoderBuffer overrun");const r=new o(this.base);return r._reporterState=this._reporterState,r.offset=this.offset,r.length=this.offset+e,this.offset+=e,r},o.prototype.raw=function(e){return this.base.slice(e?e.offset:this.offset,this.length)},r.EncoderBuffer=a,a.isEncoderBuffer=function(e){if(e instanceof a)return!0;return"object"==typeof e&&"EncoderBuffer"===e.constructor.name&&"number"==typeof e.length&&"function"==typeof e.join},a.prototype.join=function(e,t){return e||(e=new s(this.length)),t||(t=0),0===this.length||(Array.isArray(this.value)?this.value.forEach((function(r){r.join(e,t),t+=r.length})):("number"==typeof this.value?e[t]=this.value:"string"==typeof this.value?e.write(this.value,t):s.isBuffer(this.value)&&this.value.copy(e,t),t+=this.length)),e}}}},{package:"asn1.js",file:"/home/circleci/project/node_modules/asn1.js/lib/asn1/base/buffer.js"}],[1637,{inherits:4329},function(){with(this)return function(){"use strict";return function(e,t,r){const n=e("inherits");function i(e){this._reporterState={obj:null,path:[],options:e||{},errors:[]}}function s(e,t){this.path=e,this.rethrow(t)}r.Reporter=i,i.prototype.isError=function(e){return e instanceof s},i.prototype.save=function(){const e=this._reporterState;return{obj:e.obj,pathLen:e.path.length}},i.prototype.restore=function(e){const t=this._reporterState;t.obj=e.obj,t.path=t.path.slice(0,e.pathLen)},i.prototype.enterKey=function(e){return this._reporterState.path.push(e)},i.prototype.exitKey=function(e){const t=this._reporterState;t.path=t.path.slice(0,e-1)},i.prototype.leaveKey=function(e,t,r){const n=this._reporterState;this.exitKey(e),null!==n.obj&&(n.obj[t]=r)},i.prototype.path=function(){return this._reporterState.path.join("/")},i.prototype.enterObject=function(){const e=this._reporterState,t=e.obj;return e.obj={},t},i.prototype.leaveObject=function(e){const t=this._reporterState,r=t.obj;return t.obj=e,r},i.prototype.error=function(e){let t;const r=this._reporterState,n=e instanceof s;if(t=n?e:new s(r.path.map((function(e){return"["+JSON.stringify(e)+"]"})).join(""),e.message||e,e.stack),!r.options.partial)throw t;return n||r.errors.push(t),t},i.prototype.wrapResult=function(e){const t=this._reporterState;return t.options.partial?{result:this.isError(e)?null:e,errors:t.errors}:e},n(s,Error),s.prototype.rethrow=function(e){if(this.message=e+" at: "+(this.path||"(shallow)"),Error.captureStackTrace&&Error.captureStackTrace(this,s),!this.stack)try{throw new Error(this.message)}catch(e){this.stack=e.stack}return this}}}},{package:"asn1.js",file:"/home/circleci/project/node_modules/asn1.js/lib/asn1/base/reporter.js"}],[1643,{"../base/node":1636,"../constants/der":1638,buffer:2028,inherits:4329},function(){with(this)return function(){"use strict";return function(e,t,r){const n=e("inherits"),i=e("buffer").Buffer,s=e("../base/node"),o=e("../constants/der");function a(e){this.enc="der",this.name=e.name,this.entity=e,this.tree=new c,this.tree._init(e.body)}function c(e){s.call(this,"der",e)}function u(e){return e<10?"0"+e:e}t.exports=a,a.prototype.encode=function(e,t){return this.tree._encode(e,t).join()},n(c,s),c.prototype._encodeComposite=function(e,t,r,n){const s=function(e,t,r,n){let i;"seqof"===e?e="seq":"setof"===e&&(e="set");if(o.tagByName.hasOwnProperty(e))i=o.tagByName[e];else{if("number"!=typeof e||(0|e)!==e)return n.error("Unknown tag: "+e);i=e}if(i>=31)return n.error("Multi-octet tag encoding unsupported");t||(i|=32);return i|=o.tagClassByName[r||"universal"]<<6,i}(e,t,r,this.reporter);if(n.length<128){const e=new i(2);return e[0]=s,e[1]=n.length,this._createEncoderBuffer([e,n])}let a=1;for(let e=n.length;e>=256;e>>=8)a++;const c=new i(2+a);c[0]=s,c[1]=128|a;for(let e=1+a,t=n.length;t>0;e--,t>>=8)c[e]=255&t;return this._createEncoderBuffer([c,n])},c.prototype._encodeStr=function(e,t){if("bitstr"===t)return this._createEncoderBuffer([0|e.unused,e.data]);if("bmpstr"===t){const t=new i(2*e.length);for(let r=0;r<e.length;r++)t.writeUInt16BE(e.charCodeAt(r),2*r);return this._createEncoderBuffer(t)}return"numstr"===t?this._isNumstr(e)?this._createEncoderBuffer(e):this.reporter.error("Encoding of string type: numstr supports "+"only digits and space"):"printstr"===t?this._isPrintstr(e)?this._createEncoderBuffer(e):this.reporter.error("Encoding of string type: printstr supports "+"only latin upper and lower case letters, "+"digits, space, apostrophe, left and rigth "+"parenthesis, plus sign, comma, hyphen, "+"dot, slash, colon, equal sign, "+"question mark"):/str$/.test(t)||"objDesc"===t?this._createEncoderBuffer(e):this.reporter.error("Encoding of string type: "+t+" unsupported")},c.prototype._encodeObjid=function(e,t,r){if("string"==typeof e){if(!t)return this.reporter.error("string objid given, but no values map found");if(!t.hasOwnProperty(e))return this.reporter.error("objid not found in values map");e=t[e].split(/[\s.]+/g);for(let t=0;t<e.length;t++)e[t]|=0}else if(Array.isArray(e)){e=e.slice();for(let t=0;t<e.length;t++)e[t]|=0}if(!Array.isArray(e))return this.reporter.error("objid() should be either array or string, "+"got: "+JSON.stringify(e));if(!r){if(e[1]>=40)return this.reporter.error("Second objid identifier OOB");e.splice(0,2,40*e[0]+e[1])}let n=0;for(let t=0;t<e.length;t++){let r=e[t];for(n++;r>=128;r>>=7)n++}const s=new i(n);let o=s.length-1;for(let t=e.length-1;t>=0;t--){let r=e[t];for(s[o--]=127&r;(r>>=7)>0;)s[o--]=128|127&r}return this._createEncoderBuffer(s)},c.prototype._encodeTime=function(e,t){let r;const n=new Date(e);return"gentime"===t?r=[u(n.getUTCFullYear()),u(n.getUTCMonth()+1),u(n.getUTCDate()),u(n.getUTCHours()),u(n.getUTCMinutes()),u(n.getUTCSeconds()),"Z"].join(""):"utctime"===t?r=[u(n.getUTCFullYear()%100),u(n.getUTCMonth()+1),u(n.getUTCDate()),u(n.getUTCHours()),u(n.getUTCMinutes()),u(n.getUTCSeconds()),"Z"].join(""):this.reporter.error("Encoding "+t+" time is not supported yet"),this._encodeStr(r,"octstr")},c.prototype._encodeNull=function(){return this._createEncoderBuffer("")},c.prototype._encodeInt=function(e,t){if("string"==typeof e){if(!t)return this.reporter.error("String int or enum given, but no values map");if(!t.hasOwnProperty(e))return this.reporter.error("Values map doesn't contain: "+JSON.stringify(e));e=t[e]}if("number"!=typeof e&&!i.isBuffer(e)){const t=e.toArray();!e.sign&&128&t[0]&&t.unshift(0),e=new i(t)}if(i.isBuffer(e)){let t=e.length;0===e.length&&t++;const r=new i(t);return e.copy(r),0===e.length&&(r[0]=0),this._createEncoderBuffer(r)}if(e<128)return this._createEncoderBuffer(e);if(e<256)return this._createEncoderBuffer([0,e]);let r=1;for(let t=e;t>=256;t>>=8)r++;const n=new Array(r);for(let t=n.length-1;t>=0;t--)n[t]=255&e,e>>=8;return 128&n[0]&&n.unshift(0),this._createEncoderBuffer(new i(n))},c.prototype._encodeBool=function(e){return this._createEncoderBuffer(e?255:0)},c.prototype._use=function(e,t){return"function"==typeof e&&(e=e(t)),e._getEncoder("der").tree},c.prototype._skipDefault=function(e,t,r){const n=this._baseState;let i;if(null===n.default)return!1;const s=e.join();if(n.defaultBuffer===undefined&&(n.defaultBuffer=this._encodeValue(n.default,t,r).join()),s.length!==n.defaultBuffer.length)return!1;for(i=0;i<s.length;i++)if(s[i]!==n.defaultBuffer[i])return!1;return!0}}}},{package:"asn1.js",file:"/home/circleci/project/node_modules/asn1.js/lib/asn1/encoders/der.js"}],[1645,{"./der":1643,inherits:4329},function(){with(this)return function(){"use strict";return function(e,t,r){const n=e("inherits"),i=e("./der");function s(e){i.call(this,e),this.enc="pem"}n(s,i),t.exports=s,s.prototype.encode=function(e,t){const r=i.prototype.encode.call(this,e).toString("base64"),n=["-----BEGIN "+t.label+"-----"];for(let e=0;e<r.length;e+=64)n.push(r.slice(e,e+64));return n.push("-----END "+t.label+"-----"),n.join("\n")}}}},{package:"asn1.js",file:"/home/circleci/project/node_modules/asn1.js/lib/asn1/encoders/pem.js"}],[1642,{"./der":1640,buffer:2028,inherits:4329},function(){with(this)return function(){"use strict";return function(e,t,r){const n=e("inherits"),i=e("buffer").Buffer,s=e("./der");function o(e){s.call(this,e),this.enc="pem"}n(o,s),t.exports=o,o.prototype.decode=function(e,t){const r=e.toString().split(/[\r\n]+/g),n=t.label.toUpperCase(),o=/^-----(BEGIN|END) ([^-]+)-----$/;let a=-1,c=-1;for(let e=0;e<r.length;e++){const t=r[e].match(o);if(null!==t&&t[2]===n){if(-1!==a){if("END"!==t[1])break;c=e;break}if("BEGIN"!==t[1])break;a=e}}if(-1===a||-1===c)throw new Error("PEM section not found for: "+n);const u=r.slice(a+1,c).join("");u.replace(/[^a-z0-9+/=]+/gi,"");const l=new i(u,"base64");return s.prototype.decode.call(this,l,t)}}}},{package:"asn1.js",file:"/home/circleci/project/node_modules/asn1.js/lib/asn1/decoders/pem.js"}],[1640,{"../base/buffer":1634,"../base/node":1636,"../constants/der":1638,"bn.js":1984,inherits:4329},function(){with(this)return function(){"use strict";return function(e,t,r){const n=e("inherits"),i=e("bn.js"),s=e("../base/buffer").DecoderBuffer,o=e("../base/node"),a=e("../constants/der");function c(e){this.enc="der",this.name=e.name,this.entity=e,this.tree=new u,this.tree._init(e.body)}function u(e){o.call(this,"der",e)}function l(e,t){let r=e.readUInt8(t);if(e.isError(r))return r;const n=a.tagClass[r>>6],i=0==(32&r);if(31==(31&r)){let n=r;for(r=0;128==(128&n);){if(n=e.readUInt8(t),e.isError(n))return n;r<<=7,r|=127&n}}else r&=31;return{cls:n,primitive:i,tag:r,tagStr:a.tag[r]}}function d(e,t,r){let n=e.readUInt8(r);if(e.isError(n))return n;if(!t&&128===n)return null;if(0==(128&n))return n;const i=127&n;if(i>4)return e.error("length octect is too long");n=0;for(let t=0;t<i;t++){n<<=8;const t=e.readUInt8(r);if(e.isError(t))return t;n|=t}return n}t.exports=c,c.prototype.decode=function(e,t){return s.isDecoderBuffer(e)||(e=new s(e,t)),this.tree._decode(e,t)},n(u,o),u.prototype._peekTag=function(e,t,r){if(e.isEmpty())return!1;const n=e.save(),i=l(e,'Failed to peek tag: "'+t+'"');return e.isError(i)?i:(e.restore(n),i.tag===t||i.tagStr===t||i.tagStr+"of"===t||r)},u.prototype._decodeTag=function(e,t,r){const n=l(e,'Failed to decode tag of "'+t+'"');if(e.isError(n))return n;let i=d(e,n.primitive,'Failed to get length of "'+t+'"');if(e.isError(i))return i;if(!r&&n.tag!==t&&n.tagStr!==t&&n.tagStr+"of"!==t)return e.error('Failed to match tag: "'+t+'"');if(n.primitive||null!==i)return e.skip(i,'Failed to match body of: "'+t+'"');const s=e.save(),o=this._skipUntilEnd(e,'Failed to skip indefinite length body: "'+this.tag+'"');return e.isError(o)?o:(i=e.offset-s.offset,e.restore(s),e.skip(i,'Failed to match body of: "'+t+'"'))},u.prototype._skipUntilEnd=function(e,t){for(;;){const r=l(e,t);if(e.isError(r))return r;const n=d(e,r.primitive,t);if(e.isError(n))return n;let i;if(i=r.primitive||null!==n?e.skip(n):this._skipUntilEnd(e,t),e.isError(i))return i;if("end"===r.tagStr)break}},u.prototype._decodeList=function(e,t,r,n){const i=[];for(;!e.isEmpty();){const t=this._peekTag(e,"end");if(e.isError(t))return t;const s=r.decode(e,"der",n);if(e.isError(s)&&t)break;i.push(s)}return i},u.prototype._decodeStr=function(e,t){if("bitstr"===t){const t=e.readUInt8();return e.isError(t)?t:{unused:t,data:e.raw()}}if("bmpstr"===t){const t=e.raw();if(t.length%2==1)return e.error("Decoding of string type: bmpstr length mismatch");let r="";for(let e=0;e<t.length/2;e++)r+=String.fromCharCode(t.readUInt16BE(2*e));return r}if("numstr"===t){const t=e.raw().toString("ascii");return this._isNumstr(t)?t:e.error("Decoding of string type: "+"numstr unsupported characters")}if("octstr"===t)return e.raw();if("objDesc"===t)return e.raw();if("printstr"===t){const t=e.raw().toString("ascii");return this._isPrintstr(t)?t:e.error("Decoding of string type: "+"printstr unsupported characters")}return/str$/.test(t)?e.raw().toString():e.error("Decoding of string type: "+t+" unsupported")},u.prototype._decodeObjid=function(e,t,r){let n;const i=[];let s=0,o=0;for(;!e.isEmpty();)o=e.readUInt8(),s<<=7,s|=127&o,0==(128&o)&&(i.push(s),s=0);128&o&&i.push(s);const a=i[0]/40|0,c=i[0]%40;if(n=r?i:[a,c].concat(i.slice(1)),t){let e=t[n.join(" ")];e===undefined&&(e=t[n.join(".")]),e!==undefined&&(n=e)}return n},u.prototype._decodeTime=function(e,t){const r=e.raw().toString();let n,i,s,o,a,c;if("gentime"===t)n=0|r.slice(0,4),i=0|r.slice(4,6),s=0|r.slice(6,8),o=0|r.slice(8,10),a=0|r.slice(10,12),c=0|r.slice(12,14);else{if("utctime"!==t)return e.error("Decoding "+t+" time is not supported yet");n=0|r.slice(0,2),i=0|r.slice(2,4),s=0|r.slice(4,6),o=0|r.slice(6,8),a=0|r.slice(8,10),c=0|r.slice(10,12),n=n<70?2e3+n:1900+n}return Date.UTC(n,i-1,s,o,a,c,0)},u.prototype._decodeNull=function(){return null},u.prototype._decodeBool=function(e){const t=e.readUInt8();return e.isError(t)?t:0!==t},u.prototype._decodeInt=function(e,t){const r=e.raw();let n=new i(r);return t&&(n=t[n.toString(10)]||n),n},u.prototype._use=function(e,t){return"function"==typeof e&&(e=e(t)),e._getDecoder("der").tree}}}},{package:"asn1.js",file:"/home/circleci/project/node_modules/asn1.js/lib/asn1/decoders/der.js"}],[4768,{},function(){with(this)return function(){"use strict";return function(e,t,r){t.exports={COMPRESSED_TYPE_INVALID:"compressed should be a boolean",EC_PRIVATE_KEY_TYPE_INVALID:"private key should be a Buffer",EC_PRIVATE_KEY_LENGTH_INVALID:"private key length is invalid",EC_PRIVATE_KEY_RANGE_INVALID:"private key range is invalid",EC_PRIVATE_KEY_TWEAK_ADD_FAIL:"tweak out of range or resulting private key is invalid",EC_PRIVATE_KEY_TWEAK_MUL_FAIL:"tweak out of range",EC_PRIVATE_KEY_EXPORT_DER_FAIL:"couldn't export to DER format",EC_PRIVATE_KEY_IMPORT_DER_FAIL:"couldn't import from DER format",EC_PUBLIC_KEYS_TYPE_INVALID:"public keys should be an Array",EC_PUBLIC_KEYS_LENGTH_INVALID:"public keys Array should have at least 1 element",EC_PUBLIC_KEY_TYPE_INVALID:"public key should be a Buffer",EC_PUBLIC_KEY_LENGTH_INVALID:"public key length is invalid",EC_PUBLIC_KEY_PARSE_FAIL:"the public key could not be parsed or is invalid",EC_PUBLIC_KEY_CREATE_FAIL:"private was invalid, try again",EC_PUBLIC_KEY_TWEAK_ADD_FAIL:"tweak out of range or resulting public key is invalid",EC_PUBLIC_KEY_TWEAK_MUL_FAIL:"tweak out of range",EC_PUBLIC_KEY_COMBINE_FAIL:"the sum of the public keys is not valid",ECDH_FAIL:"scalar was invalid (zero or overflow)",ECDSA_SIGNATURE_TYPE_INVALID:"signature should be a Buffer",ECDSA_SIGNATURE_LENGTH_INVALID:"signature length is invalid",ECDSA_SIGNATURE_PARSE_FAIL:"couldn't parse signature",ECDSA_SIGNATURE_PARSE_DER_FAIL:"couldn't parse DER signature",ECDSA_SIGNATURE_SERIALIZE_DER_FAIL:"couldn't serialize signature to DER format",ECDSA_SIGN_FAIL:"nonce generation function failed or private key is invalid",ECDSA_RECOVER_FAIL:"couldn't recover public key from signature",MSG32_TYPE_INVALID:"message should be a Buffer",MSG32_LENGTH_INVALID:"message length is invalid",OPTIONS_TYPE_INVALID:"options should be an Object",OPTIONS_DATA_TYPE_INVALID:"options.data should be a Buffer",OPTIONS_DATA_LENGTH_INVALID:"options.data length is invalid",OPTIONS_NONCEFN_TYPE_INVALID:"options.noncefn should be a Function",RECOVERY_ID_TYPE_INVALID:"recovery should be a Number",RECOVERY_ID_VALUE_INVALID:"recovery should have value between -1 and 4",TWEAK_TYPE_INVALID:"tweak should be a Buffer",TWEAK_LENGTH_INVALID:"tweak length is invalid"}}}},{package:"secp256k1",file:"/home/circleci/project/node_modules/libp2p-crypto/node_modules/secp256k1/lib/messages.json"}],[4759,{"../../../../is-buffer/index.js":4611},function(){with(this)return function(){"use strict";return function(e,t,r){(function(e){(function(){var t=Object.prototype.toString;r.isArray=function(e,t){if(!Array.isArray(e))throw TypeError(t)},r.isBoolean=function(e,r){if("[object Boolean]"!==t.call(e))throw TypeError(r)},r.isBuffer=function(t,r){if(!e.isBuffer(t))throw TypeError(r)},r.isFunction=function(e,r){if("[object Function]"!==t.call(e))throw TypeError(r)},r.isNumber=function(e,r){if("[object Number]"!==t.call(e))throw TypeError(r)},r.isObject=function(e,r){if("[object Object]"!==t.call(e))throw TypeError(r)},r.isBufferLength=function(e,t,r){if(e.length!==t)throw RangeError(r)},r.isBufferLength2=function(e,t,r,n){if(e.length!==t&&e.length!==r)throw RangeError(n)},r.isLengthGTZero=function(e,t){if(0===e.length)throw RangeError(t)},r.isNumberInInterval=function(e,t,r,n){if(e<=t||e>=r)throw RangeError(n)}}).call(this)}).call(this,{isBuffer:e("../../../../is-buffer/index.js")})}}},{package:"secp256k1",file:"/home/circleci/project/node_modules/libp2p-crypto/node_modules/secp256k1/lib/assert.js"}],[4760,{bip66:1917,"safe-buffer":5597},function(){with(this)return function(){"use strict";return function(e,t,r){var n=e("safe-buffer").Buffer,i=e("bip66"),s=n.from([48,129,211,2,1,1,4,32,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,160,129,133,48,129,130,2,1,1,48,44,6,7,42,134,72,206,61,1,1,2,33,0,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,254,255,255,252,47,48,6,4,1,0,4,1,7,4,33,2,121,190,102,126,249,220,187,172,85,160,98,149,206,135,11,7,2,155,252,219,45,206,40,217,89,242,129,91,22,248,23,152,2,33,0,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,254,186,174,220,230,175,72,160,59,191,210,94,140,208,54,65,65,2,1,1,161,36,3,34,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]),o=n.from([48,130,1,19,2,1,1,4,32,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,160,129,165,48,129,162,2,1,1,48,44,6,7,42,134,72,206,61,1,1,2,33,0,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,254,255,255,252,47,48,6,4,1,0,4,1,7,4,65,4,121,190,102,126,249,220,187,172,85,160,98,149,206,135,11,7,2,155,252,219,45,206,40,217,89,242,129,91,22,248,23,152,72,58,218,119,38,163,196,101,93,164,251,252,14,17,8,168,253,23,180,72,166,133,84,25,156,71,208,143,251,16,212,184,2,33,0,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,254,186,174,220,230,175,72,160,59,191,210,94,140,208,54,65,65,2,1,1,161,68,3,66,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]);r.privateKeyExport=function(e,t,r){var i=n.from(r?s:o);return e.copy(i,r?8:9),t.copy(i,r?181:214),i},r.privateKeyImport=function(e){var t=e.length,r=0;if(!(t<r+1||48!==e[r])&&!(t<(r+=1)+1)&&128&e[r]){var n=127&e[r];if(r+=1,!(n<1||n>2||t<r+n)){var i=e[r+n-1]|(n>1?e[r+n-2]<<8:0);if(!(t<(r+=n)+i||t<r+3||2!==e[r]||1!==e[r+1]||1!==e[r+2]||t<(r+=3)+2||4!==e[r]||e[r+1]>32||t<r+2+e[r+1]))return e.slice(r+2,r+2+e[r+1])}}},r.signatureExport=function(e){for(var t=n.concat([n.from([0]),e.r]),r=33,s=0;r>1&&0===t[s]&&!(128&t[s+1]);--r,++s);for(var o=n.concat([n.from([0]),e.s]),a=33,c=0;a>1&&0===o[c]&&!(128&o[c+1]);--a,++c);return i.encode(t.slice(s),o.slice(c))},r.signatureImport=function(e){var t=n.alloc(32,0),r=n.alloc(32,0);try{var s=i.decode(e);if(33===s.r.length&&0===s.r[0]&&(s.r=s.r.slice(1)),s.r.length>32)throw new Error("R length is too long");if(33===s.s.length&&0===s.s[0]&&(s.s=s.s.slice(1)),s.s.length>32)throw new Error("S length is too long")}catch(e){return}return s.r.copy(t,32-s.r.length),s.s.copy(r,32-s.s.length),{r:t,s:r}},r.signatureImportLax=function(e){var t=n.alloc(32,0),r=n.alloc(32,0),i=e.length,s=0;if(48===e[s++]){var o=e[s++];if(!(128&o&&(s+=o-128)>i)&&2===e[s++]){var a=e[s++];if(128&a){if(s+(o=a-128)>i)return;for(;o>0&&0===e[s];s+=1,o-=1);for(a=0;o>0;s+=1,o-=1)a=(a<<8)+e[s]}if(!(a>i-s)){var c=s;if(s+=a,2===e[s++]){var u=e[s++];if(128&u){if(s+(o=u-128)>i)return;for(;o>0&&0===e[s];s+=1,o-=1);for(u=0;o>0;s+=1,o-=1)u=(u<<8)+e[s]}if(!(u>i-s)){var l=s;for(s+=u;a>0&&0===e[c];a-=1,c+=1);if(!(a>32)){var d=e.slice(c,c+a);for(d.copy(t,32-d.length);u>0&&0===e[l];u-=1,l+=1);if(!(u>32)){var f=e.slice(l,l+u);return f.copy(r,32-f.length),{r:t,s:r}}}}}}}}}}}},{package:"secp256k1",file:"/home/circleci/project/node_modules/libp2p-crypto/node_modules/secp256k1/lib/der.js"}],[4766,{"./bn":4762,"./ecjpoint":4764,"./ecpoint":4765,"safe-buffer":5597},function(){with(this)return function(){"use strict";return function(e,t,r){var n=e("safe-buffer").Buffer,i=e("./bn"),s=e("./ecpoint"),o=e("./ecjpoint");function a(){this.x=i.fromBuffer(n.from("79BE667EF9DCBBAC55A06295CE870B07029BFCDB2DCE28D959F2815B16F81798","hex")),this.y=i.fromBuffer(n.from("483ADA7726A3C4655DA4FBFC0E1108A8FD17B448A68554199C47D08FFB10D4B8","hex")),this.inf=!1,this._precompute()}a.prototype._precompute=function(){for(var e=new s(this.x,this.y),t=new Array(1+Math.ceil(64.25)),r=t[0]=e,n=1;n<t.length;++n){for(var i=0;i<4;i++)r=r.dbl();t[n]=r}this.precomputed={naf:e._getNAFPoints(7),doubles:{step:4,points:t,negpoints:t.map((function(e){return e.neg()}))}}},a.prototype.mul=function(e){for(var t=this.precomputed.doubles.step,r=this.precomputed.doubles.points,n=this.precomputed.doubles.negpoints,i=e.getNAF(1),a=((1<<t+1)-(t%2==0?2:1))/3,c=[],u=0;u<i.length;u+=t){for(var l=0,d=u+t-1;d>=u;d--)l=(l<<1)+i[d];c.push(l)}for(var f=new o(null,null,null),h=new o(null,null,null),p=a;p>0;p--){for(var m=0;m<c.length;m++)c[m]===p?h=h.mixedAdd(r[m]):c[m]===-p&&(h=h.mixedAdd(n[m]));f=f.add(h)}return s.fromECJPoint(f)},a.prototype.mulAdd=function(e,t,r){for(var n=this.precomputed.naf,i=t._getNAFPoints1(),s=[n.points,i.points],a=[e.getNAF(n.wnd),r.getNAF(i.wnd)],c=new o(null,null,null),u=[null,null],l=Math.max(a[0].length,a[1].length);l>=0;l--){for(var d=0;l>=0&&(u[0]=0|a[0][l],u[1]=0|a[1][l],0===u[0]&&0===u[1]);++d,--l);if(l>=0&&(d+=1),c=c.dblp(d),l<0)break;for(var f=0;f<2;f++){var h,p=u[f];0!==p&&(p>0?h=s[f][p>>1]:p<0&&(h=s[f][-p>>1].neg()),c=h.z===undefined?c.mixedAdd(h):c.add(h))}}return c},t.exports=new a}}},{package:"secp256k1",file:"/home/circleci/project/node_modules/libp2p-crypto/node_modules/secp256k1/lib/js/ecpointg.js"}],[4765,{"./bn":4762,"./ecjpoint":4764,"safe-buffer":5597},function(){with(this)return function(){"use strict";return function(e,t,r){var n=e("safe-buffer").Buffer,i=e("./bn"),s=e("./ecjpoint");function o(e,t){null===e&&null===t?(this.x=this.y=null,this.inf=!0):(this.x=e,this.y=t,this.inf=!1)}o.fromPublicKey=function(e){var t,r,n=e[0];return 33!==e.length||2!==n&&3!==n?65!==e.length||4!==n&&6!==n&&7!==n?null:(t=i.fromBuffer(e.slice(1,33)),r=i.fromBuffer(e.slice(33,65)),t.ucmp(i.p)>=0||r.ucmp(i.p)>=0?null:6!==n&&7!==n||r.isOdd()===(7===n)?0!==t.redSqr().redMul(t).redIAdd7().ucmp(r.redSqr())?null:new o(t,r):null):(t=i.fromBuffer(e.slice(1,33))).ucmp(i.p)>=0||null===(r=t.redSqr().redMul(t).redIAdd7().redSqrt())?null:(3===n!==r.isOdd()&&(r=r.redNeg()),new o(t,r))},o.prototype.toPublicKey=function(e){var t,r=this.x,i=this.y;return e?((t=n.alloc(33))[0]=i.isOdd()?3:2,r.toBuffer().copy(t,1)):((t=n.alloc(65))[0]=4,r.toBuffer().copy(t,1),i.toBuffer().copy(t,33)),t},o.fromECJPoint=function(e){if(e.inf)return new o(null,null);var t=e.z.redInvm(),r=t.redSqr();return new o(e.x.redMul(r),e.y.redMul(r).redMul(t))},o.prototype.toECJPoint=function(){return this.inf?new s(null,null,null):new s(this.x,this.y,s.one)},o.prototype.neg=function(){return this.inf?this:new o(this.x,this.y.redNeg())},o.prototype.add=function(e){if(this.inf)return e;if(e.inf)return this;if(0===this.x.ucmp(e.x))return 0===this.y.ucmp(e.y)?this.dbl():new o(null,null);var t=this.y.redSub(e.y);t.isZero()||(t=t.redMul(this.x.redSub(e.x).redInvm()));var r=t.redSqr().redISub(this.x).redISub(e.x);return new o(r,t.redMul(this.x.redSub(r)).redISub(this.y))},o.prototype.dbl=function(){if(this.inf)return this;var e=this.y.redAdd(this.y);if(e.isZero())return new o(null,null);var t=this.x.redSqr(),r=t.redAdd(t).redIAdd(t).redMul(e.redInvm()),n=r.redSqr().redISub(this.x.redAdd(this.x));return new o(n,r.redMul(this.x.redSub(n)).redISub(this.y))},o.prototype.mul=function(e){for(var t=this._getNAFPoints(4),r=t.points,n=e.getNAF(t.wnd),i=new s(null,null,null),a=n.length-1;a>=0;a--){for(var c=0;a>=0&&0===n[a];a--,++c);if(a>=0&&(c+=1),i=i.dblp(c),a<0)break;var u=n[a];i=u>0?i.mixedAdd(r[u-1>>1]):i.mixedAdd(r[-u-1>>1].neg())}return o.fromECJPoint(i)},o.prototype._getNAFPoints1=function(){return{wnd:1,points:[this]}},o.prototype._getNAFPoints=function(e){var t=new Array((1<<e)-1);t[0]=this;for(var r=this.dbl(),n=1;n<t.length;++n)t[n]=t[n-1].add(r);return{wnd:e,points:t}},t.exports=o}}},{package:"secp256k1",file:"/home/circleci/project/node_modules/libp2p-crypto/node_modules/secp256k1/lib/js/ecpoint.js"}],[4762,{"./optimized":4763,"safe-buffer":5597},function(){with(this)return function(){"use strict";return function(e,t,r){var n=e("safe-buffer").Buffer,i=e("./optimized");function s(){this.negative=0,this.words=null,this.length=0}s.fromNumber=function(e){var t=new s;return t.words=[67108863&e],t.length=1,t},s.fromBuffer=function(e){var t=new s;return t.words=new Array(10),t.words[0]=(3&e[28])<<24|e[29]<<16|e[30]<<8|e[31],t.words[1]=(15&e[25])<<22|e[26]<<14|e[27]<<6|e[28]>>>2,t.words[2]=(63&e[22])<<20|e[23]<<12|e[24]<<4|e[25]>>>4,t.words[3]=(255&e[19])<<18|e[20]<<10|e[21]<<2|e[22]>>>6,t.words[4]=(3&e[15])<<24|e[16]<<16|e[17]<<8|e[18],t.words[5]=(15&e[12])<<22|e[13]<<14|e[14]<<6|e[15]>>>2,t.words[6]=(63&e[9])<<20|e[10]<<12|e[11]<<4|e[12]>>>4,t.words[7]=(255&e[6])<<18|e[7]<<10|e[8]<<2|e[9]>>>6,t.words[8]=(3&e[2])<<24|e[3]<<16|e[4]<<8|e[5],t.words[9]=e[0]<<14|e[1]<<6|e[2]>>>2,t.length=10,t.strip()},s.prototype.toBuffer=function(){for(var e=this.words,t=this.length;t<10;++t)e[t]=0;return n.from([e[9]>>>14&255,e[9]>>>6&255,(63&e[9])<<2|e[8]>>>24&3,e[8]>>>16&255,e[8]>>>8&255,255&e[8],e[7]>>>18&255,e[7]>>>10&255,e[7]>>>2&255,(3&e[7])<<6|e[6]>>>20&63,e[6]>>>12&255,e[6]>>>4&255,(15&e[6])<<4|e[5]>>>22&15,e[5]>>>14&255,e[5]>>>6&255,(63&e[5])<<2|e[4]>>>24&3,e[4]>>>16&255,e[4]>>>8&255,255&e[4],e[3]>>>18&255,e[3]>>>10&255,e[3]>>>2&255,(3&e[3])<<6|e[2]>>>20&63,e[2]>>>12&255,e[2]>>>4&255,(15&e[2])<<4|e[1]>>>22&15,e[1]>>>14&255,e[1]>>>6&255,(63&e[1])<<2|e[0]>>>24&3,e[0]>>>16&255,e[0]>>>8&255,255&e[0]])},s.prototype.clone=function(){var e=new s;e.words=new Array(this.length);for(var t=0;t<this.length;t++)e.words[t]=this.words[t];return e.length=this.length,e.negative=this.negative,e},s.prototype.strip=function(){for(;this.length>1&&0==(0|this.words[this.length-1]);)this.length--;return this},s.prototype.normSign=function(){return 1===this.length&&0===this.words[0]&&(this.negative=0),this},s.prototype.isEven=function(){return 0==(1&this.words[0])},s.prototype.isOdd=function(){return 1==(1&this.words[0])},s.prototype.isZero=function(){return 1===this.length&&0===this.words[0]},s.prototype.ucmp=function(e){if(this.length!==e.length)return this.length>e.length?1:-1;for(var t=this.length-1;t>=0;--t)if(this.words[t]!==e.words[t])return this.words[t]>e.words[t]?1:-1;return 0},s.prototype.gtOne=function(){return this.length>1||this.words[0]>1},s.prototype.isOverflow=function(){return this.ucmp(s.n)>=0},s.prototype.isHigh=function(){return 1===this.ucmp(s.nh)},s.prototype.bitLengthGT256=function(){return this.length>10||10===this.length&&this.words[9]>4194303},s.prototype.iuaddn=function(e){this.words[0]+=e;for(var t=0;this.words[t]>67108863&&t<this.length;++t)this.words[t]-=67108864,this.words[t+1]+=1;return t===this.length&&(this.words[t]=1,this.length+=1),this},s.prototype.iadd=function(e){if(this.negative!==e.negative)return 0!==this.negative?(this.negative=0,this.isub(e),this.negative^=1):(e.negative=0,this.isub(e),e.negative=1),this.normSign();var t,r;this.length>e.length?(t=this,r=e):(t=e,r=this);for(var n=0,i=0;n<r.length;++n){var s=t.words[n]+r.words[n]+i;this.words[n]=67108863&s,i=s>>>26}for(;0!==i&&n<t.length;++n)s=t.words[n]+i,this.words[n]=67108863&s,i=s>>>26;if(this.length=t.length,0!==i)this.words[this.length++]=i;else if(t!==this)for(;n<t.length;++n)this.words[n]=t.words[n];return this},s.prototype.add=function(e){return this.clone().iadd(e)},s.prototype.isub=function(e){if(this.negative!==e.negative)return 0!==this.negative?(this.negative=0,this.iadd(e),this.negative=1):(e.negative=0,this.iadd(e),e.negative=1),this.normSign();var t,r,n=this.ucmp(e);if(0===n)return this.negative=0,this.words[0]=0,this.length=1,this;n>0?(t=this,r=e):(t=e,r=this);for(var i=0,s=0;i<r.length;++i){var o=t.words[i]-r.words[i]+s;s=o>>26,this.words[i]=67108863&o}for(;0!==s&&i<t.length;++i)s=(o=t.words[i]+s)>>26,this.words[i]=67108863&o;if(0===s&&i<t.length&&t!==this)for(;i<t.length;++i)this.words[i]=t.words[i];return this.length=Math.max(this.length,i),t!==this&&(this.negative^=1),this.strip().normSign()},s.prototype.sub=function(e){return this.clone().isub(e)},s.umulTo=function(e,t,r){r.length=e.length+t.length-1;var n=e.words[0]*t.words[0],i=n/67108864|0;r.words[0]=67108863&n;for(var s=1,o=r.length;s<o;s++){for(var a=i>>>26,c=67108863&i,u=Math.max(0,s-e.length+1),l=Math.min(s,t.length-1);u<=l;u++){var d=s-u,f=e.words[d]*t.words[u]+c;a+=f/67108864|0,c=67108863&f}r.words[s]=c,i=a}return 0!==i&&(r.words[r.length++]=i),r.strip()},s.umulTo10x10=Math.imul?i.umulTo10x10:s.umulTo,s.umulnTo=function(e,t,r){if(0===t)return r.words=[0],r.length=1,r;for(var n=0,i=0;n<e.length;++n){var s=e.words[n]*t+i;r.words[n]=67108863&s,i=s/67108864|0}return i>0?(r.words[n]=i,r.length=e.length+1):r.length=e.length,r},s.prototype.umul=function(e){var t=new s;return t.words=new Array(this.length+e.length),10===this.length&&10===e.length?s.umulTo10x10(this,e,t):1===this.length?s.umulnTo(e,this.words[0],t):1===e.length?s.umulnTo(this,e.words[0],t):s.umulTo(this,e,t)},s.prototype.isplit=function(e){e.length=Math.min(this.length,9);for(var t=0;t<e.length;++t)e.words[t]=this.words[t];if(this.length<=9)return this.words[0]=0,this.length=1,this;var r=this.words[9];for(e.words[e.length++]=4194303&r,t=10;t<this.length;++t){var n=this.words[t];this.words[t-10]=(4194303&n)<<4|r>>>22,r=n}return r>>>=22,this.words[t-10]=r,0===r&&this.length>10?this.length-=10:this.length-=9,this},s.prototype.fireduce=function(){return this.isOverflow()&&this.isub(s.n),this},s.prototype.ureduce=function(){var e=this.clone().isplit(s.tmp).umul(s.nc).iadd(s.tmp);return e.bitLengthGT256()&&(e=e.isplit(s.tmp).umul(s.nc).iadd(s.tmp)).bitLengthGT256()&&(e=e.isplit(s.tmp).umul(s.nc).iadd(s.tmp)),e.fireduce()},s.prototype.ishrn=function(e){for(var t=(1<<e)-1,r=26-e,n=this.length-1,i=0;n>=0;--n){var s=this.words[n];this.words[n]=i<<r|s>>>e,i=s&t}return this.length>1&&0===this.words[this.length-1]&&(this.length-=1),this},s.prototype.uinvm=function(){for(var e=this.clone(),t=s.n.clone(),r=s.fromNumber(1),n=s.fromNumber(0),i=s.fromNumber(0),o=s.fromNumber(1);e.isEven()&&t.isEven();){for(var a=1,c=1;0==(e.words[0]&c)&&0==(t.words[0]&c)&&a<26;++a,c<<=1);e.ishrn(a),t.ishrn(a)}for(var u=t.clone(),l=e.clone();!e.isZero();){for(var d=0,f=1;0==(e.words[0]&f)&&d<26;++d,f<<=1);if(d>0)for(e.ishrn(d);d-- >0;)(r.isOdd()||n.isOdd())&&(r.iadd(u),n.isub(l)),r.ishrn(1),n.ishrn(1);for(var h=0,p=1;0==(t.words[0]&p)&&h<26;++h,p<<=1);if(h>0)for(t.ishrn(h);h-- >0;)(i.isOdd()||o.isOdd())&&(i.iadd(u),o.isub(l)),i.ishrn(1),o.ishrn(1);e.ucmp(t)>=0?(e.isub(t),r.isub(i),n.isub(o)):(t.isub(e),i.isub(r),o.isub(n))}if(1===i.negative){i.negative=0;var m=i.ureduce();return m.negative^=1,m.normSign().iadd(s.n)}return i.ureduce()},s.prototype.imulK=function(){this.words[this.length]=0,this.words[this.length+1]=0,this.length+=2;for(var e=0,t=0;e<this.length;++e){var r=0|this.words[e];t+=977*r,this.words[e]=67108863&t,t=64*r+(t/67108864|0)}return 0===this.words[this.length-1]&&(this.length-=1,0===this.words[this.length-1]&&(this.length-=1)),this},s.prototype.redIReduce=function(){this.isplit(s.tmp).imulK().iadd(s.tmp),this.bitLengthGT256()&&this.isplit(s.tmp).imulK().iadd(s.tmp);var e=this.ucmp(s.p);return 0===e?(this.words[0]=0,this.length=1):e>0?this.isub(s.p):this.strip(),this},s.prototype.redNeg=function(){return this.isZero()?s.fromNumber(0):s.p.sub(this)},s.prototype.redAdd=function(e){return this.clone().redIAdd(e)},s.prototype.redIAdd=function(e){return this.iadd(e),this.ucmp(s.p)>=0&&this.isub(s.p),this},s.prototype.redIAdd7=function(){return this.iuaddn(7),this.ucmp(s.p)>=0&&this.isub(s.p),this},s.prototype.redSub=function(e){return this.clone().redISub(e)},s.prototype.redISub=function(e){return this.isub(e),0!==this.negative&&this.iadd(s.p),this},s.prototype.redMul=function(e){return this.umul(e).redIReduce()},s.prototype.redSqr=function(){return this.umul(this).redIReduce()},s.prototype.redSqrt=function(){if(this.isZero())return this.clone();for(var e=this.redSqr(),t=e.redSqr(),r=t.redSqr().redMul(t),n=r.redMul(e),i=n.redMul(this),s=i,o=0;o<54;++o)s=s.redSqr().redSqr().redSqr().redSqr().redMul(i);for(s=s.redSqr().redSqr().redSqr().redSqr().redMul(n),o=0;o<5;++o)s=s.redSqr().redSqr().redSqr().redSqr().redMul(i);return 0===(s=(s=s.redSqr().redSqr().redSqr().redSqr().redMul(r)).redSqr().redSqr().redSqr().redSqr().redSqr().redSqr().redMul(r)).redSqr().ucmp(this)?s:null},s.prototype.redInvm=function(){for(var e,t=this.clone(),r=s.p.clone(),n=s.fromNumber(1),i=s.fromNumber(0);t.gtOne()&&r.gtOne();){for(var o=0,a=1;0==(t.words[0]&a)&&o<26;++o,a<<=1);if(o>0)for(t.ishrn(o);o-- >0;)n.isOdd()&&n.iadd(s.p),n.ishrn(1);for(var c=0,u=1;0==(r.words[0]&u)&&c<26;++c,u<<=1);if(c>0)for(r.ishrn(c);c-- >0;)i.isOdd()&&i.iadd(s.p),i.ishrn(1);t.ucmp(r)>=0?(t.isub(r),n.isub(i)):(r.isub(t),i.isub(n))}return 0!==(e=1===t.length&&1===t.words[0]?n:i).negative&&e.iadd(s.p),0!==e.negative?(e.negative=0,e.redIReduce().redNeg()):e.redIReduce()},s.prototype.getNAF=function(e){for(var t=[],r=1<<e+1,n=r-1,i=r>>1,s=this.clone();!s.isZero();){for(var o=0,a=1;0==(s.words[0]&a)&&o<26;++o,a<<=1)t.push(0);if(0!==o)s.ishrn(o);else{var c=s.words[0]&n;if(c>=i)t.push(i-c),s.iuaddn(c-i).ishrn(1);else if(t.push(c),s.words[0]-=c,!s.isZero()){for(o=e-1;o>0;--o)t.push(0);s.ishrn(e)}}}return t},s.prototype.inspect=function(){if(this.isZero())return"0";for(var e=this.toBuffer().toString("hex"),t=0;"0"===e[t];++t);return e.slice(t)},s.n=s.fromBuffer(n.from("FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEBAAEDCE6AF48A03BBFD25E8CD0364141","hex")),s.nh=s.n.clone().ishrn(1),s.nc=s.fromBuffer(n.from("000000000000000000000000000000014551231950B75FC4402DA1732FC9BEBF","hex")),s.p=s.fromBuffer(n.from("FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEFFFFFC2F","hex")),s.psn=s.p.sub(s.n),s.tmp=new s,s.tmp.words=new Array(10),s.fromNumber(1).words[3]=0,t.exports=s}}},{package:"secp256k1",file:"/home/circleci/project/node_modules/libp2p-crypto/node_modules/secp256k1/lib/js/bn/index.js"}],[2256,{"./lib/hash-info.json":2257,buffer:2028,"create-hmac":2131},function(){with(this)return function(){"use strict";return function(e,t,r){(function(r){(function(){var n=e("create-hmac"),i=e("./lib/hash-info.json"),s=new r(0),o=new r([0]),a=new r([1]);function c(e,t,r,n){var s=i[e];if(s===undefined)throw new Error("hash "+e+" is not supported");this._algo=e,this._securityStrength=s.securityStrength/8,this._outlen=s.outlen/8,this._reseedInterval=281474976710656,this._init(t,r,n)}c.prototype._update=function(e){var t=n(this._algo,this._K).update(this._V).update(o);e&&t.update(e),this._K=t.digest(),this._V=n(this._algo,this._K).update(this._V).digest(),e&&(this._K=n(this._algo,this._K).update(this._V).update(a).update(e).digest(),this._V=n(this._algo,this._K).update(this._V).digest())},c.prototype._init=function(e,t,n){if(e.length<this._securityStrength)throw new Error("Not enough entropy");this._K=new r(this._outlen),this._V=new r(this._outlen);for(var i=0;i<this._K.length;++i)this._K[i]=0,this._V[i]=1;this._update(r.concat([e,t,n||s])),this._reseed=1},c.prototype.reseed=function(e,t){if(e.length<this._securityStrength)throw new Error("Not enough entropy");this._update(r.concat([e,t||s])),this._reseed=1},c.prototype.generate=function(e,t){if(this._reseed>this._reseedInterval)throw new Error("Reseed is required");t&&0===t.length&&(t=undefined),t&&this._update(t);for(var i=new r(0);i.length<e;)this._V=n(this._algo,this._K).update(this._V).digest(),i=r.concat([i,this._V]);return this._update(t),this._reseed+=1,i.slice(0,e)},t.exports=c}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"drbg.js",file:"/home/circleci/project/node_modules/drbg.js/hmac.js"}],[5826,{},function(){with(this)return function(){"use strict";return function(e,t,r){function n(e){return e>=55296&&e<=56319}function i(e){return e>=56320&&e<=57343}t.exports=function(e,t,r){if("string"!=typeof t)throw new Error("Input must be string");for(var s,o,a=t.length,c=0,u=0;u<a;u+=1){if(s=t.charCodeAt(u),o=t[u],n(s)&&i(t.charCodeAt(u+1))&&(o+=t[u+=1]),(c+=e(o))===r)return t.slice(0,u+1);if(c>r)return t.slice(0,u-o.length+1)}return t}}}},{package:"truncate-utf8-bytes",file:"/home/circleci/project/node_modules/truncate-utf8-bytes/lib/truncate.js"}],[5843,{},function(){with(this)return function(){"use strict";return function(e,t,r){function n(e){return e>=55296&&e<=56319}function i(e){return e>=56320&&e<=57343}t.exports=function(e){if("string"!=typeof e)throw new Error("Input must be string");for(var t=e.length,r=0,s=null,o=null,a=0;a<t;a++)i(s=e.charCodeAt(a))?null!=o&&n(o)?r+=1:r+=3:s<=127?r+=1:s>=128&&s<=2047?r+=2:s>=2048&&s<=65535&&(r+=3),o=s;return r}}}},{package:"utf8-byte-length",file:"/home/circleci/project/node_modules/utf8-byte-length/browser.js"}],[5169,{"./aes":5140,"./asn1":5141,"./des":5145,"./forge":5146,"./md":5149,"./mgf":5150,"./oids":5152,"./pem":5155,"./pss":5161,"./rsa":5164,"./util":5168},function(){with(this)return function(){"use strict";return function(e,t,r){var n=e("./forge");e("./aes"),e("./asn1"),e("./des"),e("./md"),e("./mgf"),e("./oids"),e("./pem"),e("./pss"),e("./rsa"),e("./util");var i=n.asn1,s=t.exports=n.pki=n.pki||{},o=s.oids,a={};a.CN=o.commonName,a.commonName="CN",a.C=o.countryName,a.countryName="C",a.L=o.localityName,a.localityName="L",a.ST=o.stateOrProvinceName,a.stateOrProvinceName="ST",a.O=o.organizationName,a.organizationName="O",a.OU=o.organizationalUnitName,a.organizationalUnitName="OU",a.E=o.emailAddress,a.emailAddress="E";var c=n.pki.rsa.publicKeyValidator,u={name:"Certificate",tagClass:i.Class.UNIVERSAL,type:i.Type.SEQUENCE,constructed:!0,value:[{name:"Certificate.TBSCertificate",tagClass:i.Class.UNIVERSAL,type:i.Type.SEQUENCE,constructed:!0,captureAsn1:"tbsCertificate",value:[{name:"Certificate.TBSCertificate.version",tagClass:i.Class.CONTEXT_SPECIFIC,type:0,constructed:!0,optional:!0,value:[{name:"Certificate.TBSCertificate.version.integer",tagClass:i.Class.UNIVERSAL,type:i.Type.INTEGER,constructed:!1,capture:"certVersion"}]},{name:"Certificate.TBSCertificate.serialNumber",tagClass:i.Class.UNIVERSAL,type:i.Type.INTEGER,constructed:!1,capture:"certSerialNumber"},{name:"Certificate.TBSCertificate.signature",tagClass:i.Class.UNIVERSAL,type:i.Type.SEQUENCE,constructed:!0,value:[{name:"Certificate.TBSCertificate.signature.algorithm",tagClass:i.Class.UNIVERSAL,type:i.Type.OID,constructed:!1,capture:"certinfoSignatureOid"},{name:"Certificate.TBSCertificate.signature.parameters",tagClass:i.Class.UNIVERSAL,optional:!0,captureAsn1:"certinfoSignatureParams"}]},{name:"Certificate.TBSCertificate.issuer",tagClass:i.Class.UNIVERSAL,type:i.Type.SEQUENCE,constructed:!0,captureAsn1:"certIssuer"},{name:"Certificate.TBSCertificate.validity",tagClass:i.Class.UNIVERSAL,type:i.Type.SEQUENCE,constructed:!0,value:[{name:"Certificate.TBSCertificate.validity.notBefore (utc)",tagClass:i.Class.UNIVERSAL,type:i.Type.UTCTIME,constructed:!1,optional:!0,capture:"certValidity1UTCTime"},{name:"Certificate.TBSCertificate.validity.notBefore (generalized)",tagClass:i.Class.UNIVERSAL,type:i.Type.GENERALIZEDTIME,constructed:!1,optional:!0,capture:"certValidity2GeneralizedTime"},{name:"Certificate.TBSCertificate.validity.notAfter (utc)",tagClass:i.Class.UNIVERSAL,type:i.Type.UTCTIME,constructed:!1,optional:!0,capture:"certValidity3UTCTime"},{name:"Certificate.TBSCertificate.validity.notAfter (generalized)",tagClass:i.Class.UNIVERSAL,type:i.Type.GENERALIZEDTIME,constructed:!1,optional:!0,capture:"certValidity4GeneralizedTime"}]},{name:"Certificate.TBSCertificate.subject",tagClass:i.Class.UNIVERSAL,type:i.Type.SEQUENCE,constructed:!0,captureAsn1:"certSubject"},c,{name:"Certificate.TBSCertificate.issuerUniqueID",tagClass:i.Class.CONTEXT_SPECIFIC,type:1,constructed:!0,optional:!0,value:[{name:"Certificate.TBSCertificate.issuerUniqueID.id",tagClass:i.Class.UNIVERSAL,type:i.Type.BITSTRING,constructed:!1,captureBitStringValue:"certIssuerUniqueId"}]},{name:"Certificate.TBSCertificate.subjectUniqueID",tagClass:i.Class.CONTEXT_SPECIFIC,type:2,constructed:!0,optional:!0,value:[{name:"Certificate.TBSCertificate.subjectUniqueID.id",tagClass:i.Class.UNIVERSAL,type:i.Type.BITSTRING,constructed:!1,captureBitStringValue:"certSubjectUniqueId"}]},{name:"Certificate.TBSCertificate.extensions",tagClass:i.Class.CONTEXT_SPECIFIC,type:3,constructed:!0,captureAsn1:"certExtensions",optional:!0}]},{name:"Certificate.signatureAlgorithm",tagClass:i.Class.UNIVERSAL,type:i.Type.SEQUENCE,constructed:!0,value:[{name:"Certificate.signatureAlgorithm.algorithm",tagClass:i.Class.UNIVERSAL,type:i.Type.OID,constructed:!1,capture:"certSignatureOid"},{name:"Certificate.TBSCertificate.signature.parameters",tagClass:i.Class.UNIVERSAL,optional:!0,captureAsn1:"certSignatureParams"}]},{name:"Certificate.signatureValue",tagClass:i.Class.UNIVERSAL,type:i.Type.BITSTRING,constructed:!1,captureBitStringValue:"certSignature"}]},l={name:"rsapss",tagClass:i.Class.UNIVERSAL,type:i.Type.SEQUENCE,constructed:!0,value:[{name:"rsapss.hashAlgorithm",tagClass:i.Class.CONTEXT_SPECIFIC,type:0,constructed:!0,value:[{name:"rsapss.hashAlgorithm.AlgorithmIdentifier",tagClass:i.Class.UNIVERSAL,type:i.Class.SEQUENCE,constructed:!0,optional:!0,value:[{name:"rsapss.hashAlgorithm.AlgorithmIdentifier.algorithm",tagClass:i.Class.UNIVERSAL,type:i.Type.OID,constructed:!1,capture:"hashOid"}]}]},{name:"rsapss.maskGenAlgorithm",tagClass:i.Class.CONTEXT_SPECIFIC,type:1,constructed:!0,value:[{name:"rsapss.maskGenAlgorithm.AlgorithmIdentifier",tagClass:i.Class.UNIVERSAL,type:i.Class.SEQUENCE,constructed:!0,optional:!0,value:[{name:"rsapss.maskGenAlgorithm.AlgorithmIdentifier.algorithm",tagClass:i.Class.UNIVERSAL,type:i.Type.OID,constructed:!1,capture:"maskGenOid"},{name:"rsapss.maskGenAlgorithm.AlgorithmIdentifier.params",tagClass:i.Class.UNIVERSAL,type:i.Type.SEQUENCE,constructed:!0,value:[{name:"rsapss.maskGenAlgorithm.AlgorithmIdentifier.params.algorithm",tagClass:i.Class.UNIVERSAL,type:i.Type.OID,constructed:!1,capture:"maskGenHashOid"}]}]}]},{name:"rsapss.saltLength",tagClass:i.Class.CONTEXT_SPECIFIC,type:2,optional:!0,value:[{name:"rsapss.saltLength.saltLength",tagClass:i.Class.UNIVERSAL,type:i.Class.INTEGER,constructed:!1,capture:"saltLength"}]},{name:"rsapss.trailerField",tagClass:i.Class.CONTEXT_SPECIFIC,type:3,optional:!0,value:[{name:"rsapss.trailer.trailer",tagClass:i.Class.UNIVERSAL,type:i.Class.INTEGER,constructed:!1,capture:"trailer"}]}]},d={name:"CertificationRequestInfo",tagClass:i.Class.UNIVERSAL,type:i.Type.SEQUENCE,constructed:!0,captureAsn1:"certificationRequestInfo",value:[{name:"CertificationRequestInfo.integer",tagClass:i.Class.UNIVERSAL,type:i.Type.INTEGER,constructed:!1,capture:"certificationRequestInfoVersion"},{name:"CertificationRequestInfo.subject",tagClass:i.Class.UNIVERSAL,type:i.Type.SEQUENCE,constructed:!0,captureAsn1:"certificationRequestInfoSubject"},c,{name:"CertificationRequestInfo.attributes",tagClass:i.Class.CONTEXT_SPECIFIC,type:0,constructed:!0,optional:!0,capture:"certificationRequestInfoAttributes",value:[{name:"CertificationRequestInfo.attributes",tagClass:i.Class.UNIVERSAL,type:i.Type.SEQUENCE,constructed:!0,value:[{name:"CertificationRequestInfo.attributes.type",tagClass:i.Class.UNIVERSAL,type:i.Type.OID,constructed:!1},{name:"CertificationRequestInfo.attributes.value",tagClass:i.Class.UNIVERSAL,type:i.Type.SET,constructed:!0}]}]}]},f={name:"CertificationRequest",tagClass:i.Class.UNIVERSAL,type:i.Type.SEQUENCE,constructed:!0,captureAsn1:"csr",value:[d,{name:"CertificationRequest.signatureAlgorithm",tagClass:i.Class.UNIVERSAL,type:i.Type.SEQUENCE,constructed:!0,value:[{name:"CertificationRequest.signatureAlgorithm.algorithm",tagClass:i.Class.UNIVERSAL,type:i.Type.OID,constructed:!1,capture:"csrSignatureOid"},{name:"CertificationRequest.signatureAlgorithm.parameters",tagClass:i.Class.UNIVERSAL,optional:!0,captureAsn1:"csrSignatureParams"}]},{name:"CertificationRequest.signature",tagClass:i.Class.UNIVERSAL,type:i.Type.BITSTRING,constructed:!1,captureBitStringValue:"csrSignature"}]};function h(e,t){"string"==typeof t&&(t={shortName:t});for(var r,n=null,i=0;null===n&&i<e.attributes.length;++i)r=e.attributes[i],(t.type&&t.type===r.type||t.name&&t.name===r.name||t.shortName&&t.shortName===r.shortName)&&(n=r);return n}s.RDNAttributesAsArray=function(e,t){for(var r,n,s,c=[],u=0;u<e.value.length;++u){r=e.value[u];for(var l=0;l<r.value.length;++l)s={},n=r.value[l],s.type=i.derToOid(n.value[0].value),s.value=n.value[1].value,s.valueTagClass=n.value[1].type,s.type in o&&(s.name=o[s.type],s.name in a&&(s.shortName=a[s.name])),t&&(t.update(s.type),t.update(s.value)),c.push(s)}return c},s.CRIAttributesAsArray=function(e){for(var t=[],r=0;r<e.length;++r)for(var n=e[r],c=i.derToOid(n.value[0].value),u=n.value[1].value,l=0;l<u.length;++l){var d={};if(d.type=c,d.value=u[l].value,d.valueTagClass=u[l].type,d.type in o&&(d.name=o[d.type],d.name in a&&(d.shortName=a[d.name])),d.type===o.extensionRequest){d.extensions=[];for(var f=0;f<d.value.length;++f)d.extensions.push(s.certificateExtensionFromAsn1(d.value[f]))}t.push(d)}return t};var p=function(e,t,r){var n={};if(e!==o["RSASSA-PSS"])return n;r&&(n={hash:{algorithmOid:o.sha1},mgf:{algorithmOid:o.mgf1,hash:{algorithmOid:o.sha1}},saltLength:20});var s={},a=[];if(!i.validate(t,l,s,a)){var c=new Error("Cannot read RSASSA-PSS parameter block.");throw c.errors=a,c}return s.hashOid!==undefined&&(n.hash=n.hash||{},n.hash.algorithmOid=i.derToOid(s.hashOid)),s.maskGenOid!==undefined&&(n.mgf=n.mgf||{},n.mgf.algorithmOid=i.derToOid(s.maskGenOid),n.mgf.hash=n.mgf.hash||{},n.mgf.hash.algorithmOid=i.derToOid(s.maskGenHashOid)),s.saltLength!==undefined&&(n.saltLength=s.saltLength.charCodeAt(0)),n},m=function(e){switch(o[e.signatureOid]){case"sha1WithRSAEncryption":case"sha1WithRSASignature":return n.md.sha1.create();case"md5WithRSAEncryption":return n.md.md5.create();case"sha256WithRSAEncryption":case"RSASSA-PSS":return n.md.sha256.create();case"sha384WithRSAEncryption":return n.md.sha384.create();case"sha512WithRSAEncryption":return n.md.sha512.create();default:var t=new Error("Could not compute "+e.type+" digest. "+"Unknown signature OID.");throw t.signatureOid=e.signatureOid,t}},g=function(e){var t,r=e.certificate;switch(r.signatureOid){case o.sha1WithRSAEncryption:case o.sha1WithRSASignature:break;case o["RSASSA-PSS"]:var i,s,a;if((i=o[r.signatureParameters.mgf.hash.algorithmOid])===undefined||n.md[i]===undefined)throw(a=new Error("Unsupported MGF hash function.")).oid=r.signatureParameters.mgf.hash.algorithmOid,a.name=i,a;if((s=o[r.signatureParameters.mgf.algorithmOid])===undefined||n.mgf[s]===undefined)throw(a=new Error("Unsupported MGF function.")).oid=r.signatureParameters.mgf.algorithmOid,a.name=s,a;if(s=n.mgf[s].create(n.md[i].create()),(i=o[r.signatureParameters.hash.algorithmOid])===undefined||n.md[i]===undefined)throw(a=new Error("Unsupported RSASSA-PSS hash function.")).oid=r.signatureParameters.hash.algorithmOid,a.name=i,a;t=n.pss.create(n.md[i].create(),s,r.signatureParameters.saltLength)}return r.publicKey.verify(e.md.digest().getBytes(),e.signature,t)};function y(e){for(var t,r,s=i.create(i.Class.UNIVERSAL,i.Type.SEQUENCE,!0,[]),o=e.attributes,a=0;a<o.length;++a){var c=(t=o[a]).value,u=i.Type.PRINTABLESTRING;"valueTagClass"in t&&(u=t.valueTagClass)===i.Type.UTF8&&(c=n.util.encodeUtf8(c)),r=i.create(i.Class.UNIVERSAL,i.Type.SET,!0,[i.create(i.Class.UNIVERSAL,i.Type.SEQUENCE,!0,[i.create(i.Class.UNIVERSAL,i.Type.OID,!1,i.oidToDer(t.type).getBytes()),i.create(i.Class.UNIVERSAL,u,!1,c)])]),s.value.push(r)}return s}function b(e){for(var t,r=0;r<e.length;++r){if(void 0===(t=e[r]).name&&(t.type&&t.type in s.oids?t.name=s.oids[t.type]:t.shortName&&t.shortName in a&&(t.name=s.oids[a[t.shortName]])),void 0===t.type){if(!t.name||!(t.name in s.oids))throw(c=new Error("Attribute type not specified.")).attribute=t,c;t.type=s.oids[t.name]}if(void 0===t.shortName&&t.name&&t.name in a&&(t.shortName=a[t.name]),t.type===o.extensionRequest&&(t.valueConstructed=!0,t.valueTagClass=i.Type.SEQUENCE,!t.value&&t.extensions)){t.value=[];for(var n=0;n<t.extensions.length;++n)t.value.push(s.certificateExtensionToAsn1(_(t.extensions[n])))}var c;if(void 0===t.value)throw(c=new Error("Attribute value not specified.")).attribute=t,c}}function _(e,t){if(t=t||{},void 0===e.name&&e.id&&e.id in s.oids&&(e.name=s.oids[e.id]),void 0===e.id){if(!e.name||!(e.name in s.oids))throw(v=new Error("Extension ID not specified.")).extension=e,v;e.id=s.oids[e.name]}if(void 0!==e.value)return e;if("keyUsage"===e.name){var r=0,a=0,c=0;e.digitalSignature&&(a|=128,r=7),e.nonRepudiation&&(a|=64,r=6),e.keyEncipherment&&(a|=32,r=5),e.dataEncipherment&&(a|=16,r=4),e.keyAgreement&&(a|=8,r=3),e.keyCertSign&&(a|=4,r=2),e.cRLSign&&(a|=2,r=1),e.encipherOnly&&(a|=1,r=0),e.decipherOnly&&(c|=128,r=7);var u=String.fromCharCode(r);0!==c?u+=String.fromCharCode(a)+String.fromCharCode(c):0!==a&&(u+=String.fromCharCode(a)),e.value=i.create(i.Class.UNIVERSAL,i.Type.BITSTRING,!1,u)}else if("basicConstraints"===e.name)e.value=i.create(i.Class.UNIVERSAL,i.Type.SEQUENCE,!0,[]),e.cA&&e.value.value.push(i.create(i.Class.UNIVERSAL,i.Type.BOOLEAN,!1,String.fromCharCode(255))),"pathLenConstraint"in e&&e.value.value.push(i.create(i.Class.UNIVERSAL,i.Type.INTEGER,!1,i.integerToDer(e.pathLenConstraint).getBytes()));else if("extKeyUsage"===e.name){e.value=i.create(i.Class.UNIVERSAL,i.Type.SEQUENCE,!0,[]);var l=e.value.value;for(var d in e)!0===e[d]&&(d in o?l.push(i.create(i.Class.UNIVERSAL,i.Type.OID,!1,i.oidToDer(o[d]).getBytes())):-1!==d.indexOf(".")&&l.push(i.create(i.Class.UNIVERSAL,i.Type.OID,!1,i.oidToDer(d).getBytes())))}else if("nsCertType"===e.name){r=0,a=0;e.client&&(a|=128,r=7),e.server&&(a|=64,r=6),e.email&&(a|=32,r=5),e.objsign&&(a|=16,r=4),e.reserved&&(a|=8,r=3),e.sslCA&&(a|=4,r=2),e.emailCA&&(a|=2,r=1),e.objCA&&(a|=1,r=0);u=String.fromCharCode(r);0!==a&&(u+=String.fromCharCode(a)),e.value=i.create(i.Class.UNIVERSAL,i.Type.BITSTRING,!1,u)}else if("subjectAltName"===e.name||"issuerAltName"===e.name){e.value=i.create(i.Class.UNIVERSAL,i.Type.SEQUENCE,!0,[]);for(var f=0;f<e.altNames.length;++f){u=(b=e.altNames[f]).value;if(7===b.type&&b.ip){if(null===(u=n.util.bytesFromIP(b.ip)))throw(v=new Error('Extension "ip" value is not a valid IPv4 or IPv6 address.')).extension=e,v}else 8===b.type&&(u=b.oid?i.oidToDer(i.oidToDer(b.oid)):i.oidToDer(u));e.value.value.push(i.create(i.Class.CONTEXT_SPECIFIC,b.type,!1,u))}}else if("nsComment"===e.name&&t.cert){if(!/^[\x00-\x7F]*$/.test(e.comment)||e.comment.length<1||e.comment.length>128)throw new Error('Invalid "nsComment" content.');e.value=i.create(i.Class.UNIVERSAL,i.Type.IA5STRING,!1,e.comment)}else if("subjectKeyIdentifier"===e.name&&t.cert){var h=t.cert.generateSubjectKeyIdentifier();e.subjectKeyIdentifier=h.toHex(),e.value=i.create(i.Class.UNIVERSAL,i.Type.OCTETSTRING,!1,h.getBytes())}else if("authorityKeyIdentifier"===e.name&&t.cert){e.value=i.create(i.Class.UNIVERSAL,i.Type.SEQUENCE,!0,[]);l=e.value.value;if(e.keyIdentifier){var p=!0===e.keyIdentifier?t.cert.generateSubjectKeyIdentifier().getBytes():e.keyIdentifier;l.push(i.create(i.Class.CONTEXT_SPECIFIC,0,!1,p))}if(e.authorityCertIssuer){var m=[i.create(i.Class.CONTEXT_SPECIFIC,4,!0,[y(!0===e.authorityCertIssuer?t.cert.issuer:e.authorityCertIssuer)])];l.push(i.create(i.Class.CONTEXT_SPECIFIC,1,!0,m))}if(e.serialNumber){var g=n.util.hexToBytes(!0===e.serialNumber?t.cert.serialNumber:e.serialNumber);l.push(i.create(i.Class.CONTEXT_SPECIFIC,2,!1,g))}}else if("cRLDistributionPoints"===e.name){e.value=i.create(i.Class.UNIVERSAL,i.Type.SEQUENCE,!0,[]);l=e.value.value;var b,_=i.create(i.Class.UNIVERSAL,i.Type.SEQUENCE,!0,[]),w=i.create(i.Class.CONTEXT_SPECIFIC,0,!0,[]);for(f=0;f<e.altNames.length;++f){u=(b=e.altNames[f]).value;if(7===b.type&&b.ip){if(null===(u=n.util.bytesFromIP(b.ip)))throw(v=new Error('Extension "ip" value is not a valid IPv4 or IPv6 address.')).extension=e,v}else 8===b.type&&(u=b.oid?i.oidToDer(i.oidToDer(b.oid)):i.oidToDer(u));w.value.push(i.create(i.Class.CONTEXT_SPECIFIC,b.type,!1,u))}_.value.push(i.create(i.Class.CONTEXT_SPECIFIC,0,!0,[w])),l.push(_)}var v;if(void 0===e.value)throw(v=new Error("Extension value not specified.")).extension=e,v;return e}function w(e,t){if(e===o["RSASSA-PSS"]){var r=[];return t.hash.algorithmOid!==undefined&&r.push(i.create(i.Class.CONTEXT_SPECIFIC,0,!0,[i.create(i.Class.UNIVERSAL,i.Type.SEQUENCE,!0,[i.create(i.Class.UNIVERSAL,i.Type.OID,!1,i.oidToDer(t.hash.algorithmOid).getBytes()),i.create(i.Class.UNIVERSAL,i.Type.NULL,!1,"")])])),t.mgf.algorithmOid!==undefined&&r.push(i.create(i.Class.CONTEXT_SPECIFIC,1,!0,[i.create(i.Class.UNIVERSAL,i.Type.SEQUENCE,!0,[i.create(i.Class.UNIVERSAL,i.Type.OID,!1,i.oidToDer(t.mgf.algorithmOid).getBytes()),i.create(i.Class.UNIVERSAL,i.Type.SEQUENCE,!0,[i.create(i.Class.UNIVERSAL,i.Type.OID,!1,i.oidToDer(t.mgf.hash.algorithmOid).getBytes()),i.create(i.Class.UNIVERSAL,i.Type.NULL,!1,"")])])])),t.saltLength!==undefined&&r.push(i.create(i.Class.CONTEXT_SPECIFIC,2,!0,[i.create(i.Class.UNIVERSAL,i.Type.INTEGER,!1,i.integerToDer(t.saltLength).getBytes())])),i.create(i.Class.UNIVERSAL,i.Type.SEQUENCE,!0,r)}return i.create(i.Class.UNIVERSAL,i.Type.NULL,!1,"")}function v(e){var t=i.create(i.Class.CONTEXT_SPECIFIC,0,!0,[]);if(0===e.attributes.length)return t;for(var r=e.attributes,s=0;s<r.length;++s){var o=r[s],a=o.value,c=i.Type.UTF8;"valueTagClass"in o&&(c=o.valueTagClass),c===i.Type.UTF8&&(a=n.util.encodeUtf8(a));var u=!1;"valueConstructed"in o&&(u=o.valueConstructed);var l=i.create(i.Class.UNIVERSAL,i.Type.SEQUENCE,!0,[i.create(i.Class.UNIVERSAL,i.Type.OID,!1,i.oidToDer(o.type).getBytes()),i.create(i.Class.UNIVERSAL,i.Type.SET,!0,[i.create(i.Class.UNIVERSAL,c,u,a)])]);t.value.push(l)}return t}s.certificateFromPem=function(e,t,r){var o=n.pem.decode(e)[0];if("CERTIFICATE"!==o.type&&"X509 CERTIFICATE"!==o.type&&"TRUSTED CERTIFICATE"!==o.type){var a=new Error("Could not convert certificate from PEM; PEM header type "+'is not "CERTIFICATE", "X509 CERTIFICATE", or "TRUSTED CERTIFICATE".');throw a.headerType=o.type,a}if(o.procType&&"ENCRYPTED"===o.procType.type)throw new Error("Could not convert certificate from PEM; PEM is encrypted.");var c=i.fromDer(o.body,r);return s.certificateFromAsn1(c,t)},s.certificateToPem=function(e,t){var r={type:"CERTIFICATE",body:i.toDer(s.certificateToAsn1(e)).getBytes()};return n.pem.encode(r,{maxline:t})},s.publicKeyFromPem=function(e){var t=n.pem.decode(e)[0];if("PUBLIC KEY"!==t.type&&"RSA PUBLIC KEY"!==t.type){var r=new Error("Could not convert public key from PEM; PEM header "+'type is not "PUBLIC KEY" or "RSA PUBLIC KEY".');throw r.headerType=t.type,r}if(t.procType&&"ENCRYPTED"===t.procType.type)throw new Error("Could not convert public key from PEM; PEM is encrypted.");var o=i.fromDer(t.body);return s.publicKeyFromAsn1(o)},s.publicKeyToPem=function(e,t){var r={type:"PUBLIC KEY",body:i.toDer(s.publicKeyToAsn1(e)).getBytes()};return n.pem.encode(r,{maxline:t})},s.publicKeyToRSAPublicKeyPem=function(e,t){var r={type:"RSA PUBLIC KEY",body:i.toDer(s.publicKeyToRSAPublicKey(e)).getBytes()};return n.pem.encode(r,{maxline:t})},s.getPublicKeyFingerprint=function(e,t){var r,o=(t=t||{}).md||n.md.sha1.create();switch(t.type||"RSAPublicKey"){case"RSAPublicKey":r=i.toDer(s.publicKeyToRSAPublicKey(e)).getBytes();break;case"SubjectPublicKeyInfo":r=i.toDer(s.publicKeyToAsn1(e)).getBytes();break;default:throw new Error('Unknown fingerprint type "'+t.type+'".')}o.start(),o.update(r);var a=o.digest();if("hex"===t.encoding){var c=a.toHex();return t.delimiter?c.match(/.{2}/g).join(t.delimiter):c}if("binary"===t.encoding)return a.getBytes();if(t.encoding)throw new Error('Unknown encoding "'+t.encoding+'".');return a},s.certificationRequestFromPem=function(e,t,r){var o=n.pem.decode(e)[0];if("CERTIFICATE REQUEST"!==o.type){var a=new Error("Could not convert certification request from PEM; "+'PEM header type is not "CERTIFICATE REQUEST".');throw a.headerType=o.type,a}if(o.procType&&"ENCRYPTED"===o.procType.type)throw new Error("Could not convert certification request from PEM; "+"PEM is encrypted.");var c=i.fromDer(o.body,r);return s.certificationRequestFromAsn1(c,t)},s.certificationRequestToPem=function(e,t){var r={type:"CERTIFICATE REQUEST",body:i.toDer(s.certificationRequestToAsn1(e)).getBytes()};return n.pem.encode(r,{maxline:t})},s.createCertificate=function(){var e={version:2,serialNumber:"00",signatureOid:null,signature:null,siginfo:{}};return e.siginfo.algorithmOid=null,e.validity={},e.validity.notBefore=new Date,e.validity.notAfter=new Date,e.issuer={},e.issuer.getField=function(t){return h(e.issuer,t)},e.issuer.addField=function(t){b([t]),e.issuer.attributes.push(t)},e.issuer.attributes=[],e.issuer.hash=null,e.subject={},e.subject.getField=function(t){return h(e.subject,t)},e.subject.addField=function(t){b([t]),e.subject.attributes.push(t)},e.subject.attributes=[],e.subject.hash=null,e.extensions=[],e.publicKey=null,e.md=null,e.setSubject=function(t,r){b(t),e.subject.attributes=t,delete e.subject.uniqueId,r&&(e.subject.uniqueId=r),e.subject.hash=null},e.setIssuer=function(t,r){b(t),e.issuer.attributes=t,delete e.issuer.uniqueId,r&&(e.issuer.uniqueId=r),e.issuer.hash=null},e.setExtensions=function(t){for(var r=0;r<t.length;++r)_(t[r],{cert:e});e.extensions=t},e.getExtension=function(t){"string"==typeof t&&(t={name:t});for(var r,n=null,i=0;null===n&&i<e.extensions.length;++i)r=e.extensions[i],(t.id&&r.id===t.id||t.name&&r.name===t.name)&&(n=r);return n},e.sign=function(t,r){e.md=r||n.md.sha1.create();var a=o[e.md.algorithm+"WithRSAEncryption"];if(!a){var c=new Error("Could not compute certificate digest. "+"Unknown message digest algorithm OID.");throw c.algorithm=e.md.algorithm,c}e.signatureOid=e.siginfo.algorithmOid=a,e.tbsCertificate=s.getTBSCertificate(e);var u=i.toDer(e.tbsCertificate);e.md.update(u.getBytes()),e.signature=t.sign(e.md)},e.verify=function(t){var r=!1;if(!e.issued(t)){var n=t.issuer,o=e.subject,a=new Error("The parent certificate did not issue the given child "+"certificate; the child certificate's issuer does not match the "+"parent's subject.");throw a.expectedIssuer=o.attributes,a.actualIssuer=n.attributes,a}var c=t.md;if(null===c){c=m({signatureOid:t.signatureOid,type:"certificate"});var u=t.tbsCertificate||s.getTBSCertificate(t),l=i.toDer(u);c.update(l.getBytes())}return null!==c&&(r=g({certificate:e,md:c,signature:t.signature})),r},e.isIssuer=function(t){var r=!1,n=e.issuer,i=t.subject;if(n.hash&&i.hash)r=n.hash===i.hash;else if(n.attributes.length===i.attributes.length){var s,o;r=!0;for(var a=0;r&&a<n.attributes.length;++a)s=n.attributes[a],o=i.attributes[a],s.type===o.type&&s.value===o.value||(r=!1)}return r},e.issued=function(t){return t.isIssuer(e)},e.generateSubjectKeyIdentifier=function(){return s.getPublicKeyFingerprint(e.publicKey,{type:"RSAPublicKey"})},e.verifySubjectKeyIdentifier=function(){for(var t=o.subjectKeyIdentifier,r=0;r<e.extensions.length;++r){var i=e.extensions[r];if(i.id===t){var s=e.generateSubjectKeyIdentifier().getBytes();return n.util.hexToBytes(i.subjectKeyIdentifier)===s}}return!1},e},s.certificateFromAsn1=function(e,t){var r={},o=[];if(!i.validate(e,u,r,o)){var a=new Error("Cannot read X.509 certificate. "+"ASN.1 object is not an X509v3 Certificate.");throw a.errors=o,a}if(i.derToOid(r.publicKeyOid)!==s.oids.rsaEncryption)throw new Error("Cannot read public key. OID is not RSA.");var c=s.createCertificate();c.version=r.certVersion?r.certVersion.charCodeAt(0):0;var l=n.util.createBuffer(r.certSerialNumber);c.serialNumber=l.toHex(),c.signatureOid=n.asn1.derToOid(r.certSignatureOid),c.signatureParameters=p(c.signatureOid,r.certSignatureParams,!0),c.siginfo.algorithmOid=n.asn1.derToOid(r.certinfoSignatureOid),c.siginfo.parameters=p(c.siginfo.algorithmOid,r.certinfoSignatureParams,!1),c.signature=r.certSignature;var d=[];if(r.certValidity1UTCTime!==undefined&&d.push(i.utcTimeToDate(r.certValidity1UTCTime)),r.certValidity2GeneralizedTime!==undefined&&d.push(i.generalizedTimeToDate(r.certValidity2GeneralizedTime)),r.certValidity3UTCTime!==undefined&&d.push(i.utcTimeToDate(r.certValidity3UTCTime)),r.certValidity4GeneralizedTime!==undefined&&d.push(i.generalizedTimeToDate(r.certValidity4GeneralizedTime)),d.length>2)throw new Error("Cannot read notBefore/notAfter validity times; more "+"than two times were provided in the certificate.");if(d.length<2)throw new Error("Cannot read notBefore/notAfter validity times; they "+"were not provided as either UTCTime or GeneralizedTime.");if(c.validity.notBefore=d[0],c.validity.notAfter=d[1],c.tbsCertificate=r.tbsCertificate,t){c.md=m({signatureOid:c.signatureOid,type:"certificate"});var f=i.toDer(c.tbsCertificate);c.md.update(f.getBytes())}var g=n.md.sha1.create(),y=i.toDer(r.certIssuer);g.update(y.getBytes()),c.issuer.getField=function(e){return h(c.issuer,e)},c.issuer.addField=function(e){b([e]),c.issuer.attributes.push(e)},c.issuer.attributes=s.RDNAttributesAsArray(r.certIssuer),r.certIssuerUniqueId&&(c.issuer.uniqueId=r.certIssuerUniqueId),c.issuer.hash=g.digest().toHex();var _=n.md.sha1.create(),w=i.toDer(r.certSubject);return _.update(w.getBytes()),c.subject.getField=function(e){return h(c.subject,e)},c.subject.addField=function(e){b([e]),c.subject.attributes.push(e)},c.subject.attributes=s.RDNAttributesAsArray(r.certSubject),r.certSubjectUniqueId&&(c.subject.uniqueId=r.certSubjectUniqueId),c.subject.hash=_.digest().toHex(),r.certExtensions?c.extensions=s.certificateExtensionsFromAsn1(r.certExtensions):c.extensions=[],c.publicKey=s.publicKeyFromAsn1(r.subjectPublicKeyInfo),c},s.certificateExtensionsFromAsn1=function(e){for(var t=[],r=0;r<e.value.length;++r)for(var n=e.value[r],i=0;i<n.value.length;++i)t.push(s.certificateExtensionFromAsn1(n.value[i]));return t},s.certificateExtensionFromAsn1=function(e){var t={};if(t.id=i.derToOid(e.value[0].value),t.critical=!1,e.value[1].type===i.Type.BOOLEAN?(t.critical=0!==e.value[1].value.charCodeAt(0),t.value=e.value[2].value):t.value=e.value[1].value,t.id in o)if(t.name=o[t.id],"keyUsage"===t.name){var r=0,s=0;(c=i.fromDer(t.value)).value.length>1&&(r=c.value.charCodeAt(1),s=c.value.length>2?c.value.charCodeAt(2):0),t.digitalSignature=128==(128&r),t.nonRepudiation=64==(64&r),t.keyEncipherment=32==(32&r),t.dataEncipherment=16==(16&r),t.keyAgreement=8==(8&r),t.keyCertSign=4==(4&r),t.cRLSign=2==(2&r),t.encipherOnly=1==(1&r),t.decipherOnly=128==(128&s)}else if("basicConstraints"===t.name){(c=i.fromDer(t.value)).value.length>0&&c.value[0].type===i.Type.BOOLEAN?t.cA=0!==c.value[0].value.charCodeAt(0):t.cA=!1;var a=null;c.value.length>0&&c.value[0].type===i.Type.INTEGER?a=c.value[0].value:c.value.length>1&&(a=c.value[1].value),null!==a&&(t.pathLenConstraint=i.derToInteger(a))}else if("extKeyUsage"===t.name)for(var c=i.fromDer(t.value),u=0;u<c.value.length;++u){var l=i.derToOid(c.value[u].value);l in o?t[o[l]]=!0:t[l]=!0}else if("nsCertType"===t.name){r=0;(c=i.fromDer(t.value)).value.length>1&&(r=c.value.charCodeAt(1)),t.client=128==(128&r),t.server=64==(64&r),t.email=32==(32&r),t.objsign=16==(16&r),t.reserved=8==(8&r),t.sslCA=4==(4&r),t.emailCA=2==(2&r),t.objCA=1==(1&r)}else if("subjectAltName"===t.name||"issuerAltName"===t.name){var d;t.altNames=[];c=i.fromDer(t.value);for(var f=0;f<c.value.length;++f){var h={type:(d=c.value[f]).type,value:d.value};switch(t.altNames.push(h),d.type){case 1:case 2:case 6:break;case 7:h.ip=n.util.bytesToIP(d.value);break;case 8:h.oid=i.derToOid(d.value)}}}else if("subjectKeyIdentifier"===t.name){c=i.fromDer(t.value);t.subjectKeyIdentifier=n.util.bytesToHex(c.value)}return t},s.certificationRequestFromAsn1=function(e,t){var r={},o=[];if(!i.validate(e,f,r,o)){var a=new Error("Cannot read PKCS#10 certificate request. "+"ASN.1 object is not a PKCS#10 CertificationRequest.");throw a.errors=o,a}if(i.derToOid(r.publicKeyOid)!==s.oids.rsaEncryption)throw new Error("Cannot read public key. OID is not RSA.");var c=s.createCertificationRequest();if(c.version=r.csrVersion?r.csrVersion.charCodeAt(0):0,c.signatureOid=n.asn1.derToOid(r.csrSignatureOid),c.signatureParameters=p(c.signatureOid,r.csrSignatureParams,!0),c.siginfo.algorithmOid=n.asn1.derToOid(r.csrSignatureOid),c.siginfo.parameters=p(c.siginfo.algorithmOid,r.csrSignatureParams,!1),c.signature=r.csrSignature,c.certificationRequestInfo=r.certificationRequestInfo,t){c.md=m({signatureOid:c.signatureOid,type:"certification request"});var u=i.toDer(c.certificationRequestInfo);c.md.update(u.getBytes())}var l=n.md.sha1.create();return c.subject.getField=function(e){return h(c.subject,e)},c.subject.addField=function(e){b([e]),c.subject.attributes.push(e)},c.subject.attributes=s.RDNAttributesAsArray(r.certificationRequestInfoSubject,l),c.subject.hash=l.digest().toHex(),c.publicKey=s.publicKeyFromAsn1(r.subjectPublicKeyInfo),c.getAttribute=function(e){return h(c,e)},c.addAttribute=function(e){b([e]),c.attributes.push(e)},c.attributes=s.CRIAttributesAsArray(r.certificationRequestInfoAttributes||[]),c},s.createCertificationRequest=function(){var e={version:0,signatureOid:null,signature:null,siginfo:{}};return e.siginfo.algorithmOid=null,e.subject={},e.subject.getField=function(t){return h(e.subject,t)},e.subject.addField=function(t){b([t]),e.subject.attributes.push(t)},e.subject.attributes=[],e.subject.hash=null,e.publicKey=null,e.attributes=[],e.getAttribute=function(t){return h(e,t)},e.addAttribute=function(t){b([t]),e.attributes.push(t)},e.md=null,e.setSubject=function(t){b(t),e.subject.attributes=t,e.subject.hash=null},e.setAttributes=function(t){b(t),e.attributes=t},e.sign=function(t,r){e.md=r||n.md.sha1.create();var a=o[e.md.algorithm+"WithRSAEncryption"];if(!a){var c=new Error("Could not compute certification request digest. "+"Unknown message digest algorithm OID.");throw c.algorithm=e.md.algorithm,c}e.signatureOid=e.siginfo.algorithmOid=a,e.certificationRequestInfo=s.getCertificationRequestInfo(e);var u=i.toDer(e.certificationRequestInfo);e.md.update(u.getBytes()),e.signature=t.sign(e.md)},e.verify=function(){var t=!1,r=e.md;if(null===r){r=m({signatureOid:e.signatureOid,type:"certification request"});var n=e.certificationRequestInfo||s.getCertificationRequestInfo(e),o=i.toDer(n);r.update(o.getBytes())}return null!==r&&(t=g({certificate:e,md:r,signature:e.signature})),t},e};var E=new Date("1950-01-01T00:00:00Z"),S=new Date("2050-01-01T00:00:00Z");function C(e){return e>=E&&e<S?i.create(i.Class.UNIVERSAL,i.Type.UTCTIME,!1,i.dateToUtcTime(e)):i.create(i.Class.UNIVERSAL,i.Type.GENERALIZEDTIME,!1,i.dateToGeneralizedTime(e))}s.getTBSCertificate=function(e){var t=C(e.validity.notBefore),r=C(e.validity.notAfter),o=i.create(i.Class.UNIVERSAL,i.Type.SEQUENCE,!0,[i.create(i.Class.CONTEXT_SPECIFIC,0,!0,[i.create(i.Class.UNIVERSAL,i.Type.INTEGER,!1,i.integerToDer(e.version).getBytes())]),i.create(i.Class.UNIVERSAL,i.Type.INTEGER,!1,n.util.hexToBytes(e.serialNumber)),i.create(i.Class.UNIVERSAL,i.Type.SEQUENCE,!0,[i.create(i.Class.UNIVERSAL,i.Type.OID,!1,i.oidToDer(e.siginfo.algorithmOid).getBytes()),w(e.siginfo.algorithmOid,e.siginfo.parameters)]),y(e.issuer),i.create(i.Class.UNIVERSAL,i.Type.SEQUENCE,!0,[t,r]),y(e.subject),s.publicKeyToAsn1(e.publicKey)]);return e.issuer.uniqueId&&o.value.push(i.create(i.Class.CONTEXT_SPECIFIC,1,!0,[i.create(i.Class.UNIVERSAL,i.Type.BITSTRING,!1,String.fromCharCode(0)+e.issuer.uniqueId)])),e.subject.uniqueId&&o.value.push(i.create(i.Class.CONTEXT_SPECIFIC,2,!0,[i.create(i.Class.UNIVERSAL,i.Type.BITSTRING,!1,String.fromCharCode(0)+e.subject.uniqueId)])),e.extensions.length>0&&o.value.push(s.certificateExtensionsToAsn1(e.extensions)),o},s.getCertificationRequestInfo=function(e){return i.create(i.Class.UNIVERSAL,i.Type.SEQUENCE,!0,[i.create(i.Class.UNIVERSAL,i.Type.INTEGER,!1,i.integerToDer(e.version).getBytes()),y(e.subject),s.publicKeyToAsn1(e.publicKey),v(e)])},s.distinguishedNameToAsn1=function(e){return y(e)},s.certificateToAsn1=function(e){var t=e.tbsCertificate||s.getTBSCertificate(e);return i.create(i.Class.UNIVERSAL,i.Type.SEQUENCE,!0,[t,i.create(i.Class.UNIVERSAL,i.Type.SEQUENCE,!0,[i.create(i.Class.UNIVERSAL,i.Type.OID,!1,i.oidToDer(e.signatureOid).getBytes()),w(e.signatureOid,e.signatureParameters)]),i.create(i.Class.UNIVERSAL,i.Type.BITSTRING,!1,String.fromCharCode(0)+e.signature)])},s.certificateExtensionsToAsn1=function(e){var t=i.create(i.Class.CONTEXT_SPECIFIC,3,!0,[]),r=i.create(i.Class.UNIVERSAL,i.Type.SEQUENCE,!0,[]);t.value.push(r);for(var n=0;n<e.length;++n)r.value.push(s.certificateExtensionToAsn1(e[n]));return t},s.certificateExtensionToAsn1=function(e){var t=i.create(i.Class.UNIVERSAL,i.Type.SEQUENCE,!0,[]);t.value.push(i.create(i.Class.UNIVERSAL,i.Type.OID,!1,i.oidToDer(e.id).getBytes())),e.critical&&t.value.push(i.create(i.Class.UNIVERSAL,i.Type.BOOLEAN,!1,String.fromCharCode(255)));var r=e.value;return"string"!=typeof e.value&&(r=i.toDer(r).getBytes()),t.value.push(i.create(i.Class.UNIVERSAL,i.Type.OCTETSTRING,!1,r)),t},s.certificationRequestToAsn1=function(e){var t=e.certificationRequestInfo||s.getCertificationRequestInfo(e);return i.create(i.Class.UNIVERSAL,i.Type.SEQUENCE,!0,[t,i.create(i.Class.UNIVERSAL,i.Type.SEQUENCE,!0,[i.create(i.Class.UNIVERSAL,i.Type.OID,!1,i.oidToDer(e.signatureOid).getBytes()),w(e.signatureOid,e.signatureParameters)]),i.create(i.Class.UNIVERSAL,i.Type.BITSTRING,!1,String.fromCharCode(0)+e.signature)])},s.createCaStore=function(e){var t={certs:{}};function r(e){return o(e),t.certs[e.hash]||null}function o(e){if(!e.hash){var t=n.md.sha1.create();e.attributes=s.RDNAttributesAsArray(y(e),t),e.hash=t.digest().toHex()}}if(t.getIssuer=function(e){return r(e.issuer)},t.addCertificate=function(e){if("string"==typeof e&&(e=n.pki.certificateFromPem(e)),o(e.subject),!t.hasCertificate(e))if(e.subject.hash in t.certs){var r=t.certs[e.subject.hash];n.util.isArray(r)||(r=[r]),r.push(e),t.certs[e.subject.hash]=r}else t.certs[e.subject.hash]=e},t.hasCertificate=function(e){"string"==typeof e&&(e=n.pki.certificateFromPem(e));var t=r(e.subject);if(!t)return!1;n.util.isArray(t)||(t=[t]);for(var o=i.toDer(s.certificateToAsn1(e)).getBytes(),a=0;a<t.length;++a){if(o===i.toDer(s.certificateToAsn1(t[a])).getBytes())return!0}return!1},t.listAllCertificates=function(){var e=[];for(var r in t.certs)if(t.certs.hasOwnProperty(r)){var i=t.certs[r];if(n.util.isArray(i))for(var s=0;s<i.length;++s)e.push(i[s]);else e.push(i)}return e},t.removeCertificate=function(e){var a;if("string"==typeof e&&(e=n.pki.certificateFromPem(e)),o(e.subject),!t.hasCertificate(e))return null;var c=r(e.subject);if(!n.util.isArray(c))return a=t.certs[e.subject.hash],delete t.certs[e.subject.hash],a;for(var u=i.toDer(s.certificateToAsn1(e)).getBytes(),l=0;l<c.length;++l){u===i.toDer(s.certificateToAsn1(c[l])).getBytes()&&(a=c[l],c.splice(l,1))}return 0===c.length&&delete t.certs[e.subject.hash],a},e)for(var a=0;a<e.length;++a){var c=e[a];t.addCertificate(c)}return t},s.certificateError={bad_certificate:"forge.pki.BadCertificate",unsupported_certificate:"forge.pki.UnsupportedCertificate",certificate_revoked:"forge.pki.CertificateRevoked",certificate_expired:"forge.pki.CertificateExpired",certificate_unknown:"forge.pki.CertificateUnknown",unknown_ca:"forge.pki.UnknownCertificateAuthority"},s.verifyCertificateChain=function(e,t,r){"function"==typeof r&&(r={verify:r}),r=r||{};var i=(t=t.slice(0)).slice(0),o=r.validityCheckDate;void 0===o&&(o=new Date);var a=!0,c=null,u=0;do{var l=t.shift(),d=null,f=!1;if(o&&(o<l.validity.notBefore||o>l.validity.notAfter)&&(c={message:"Certificate is not valid yet or has expired.",error:s.certificateError.certificate_expired,notBefore:l.validity.notBefore,notAfter:l.validity.notAfter,now:o}),null===c){if(null===(d=t[0]||e.getIssuer(l))&&l.isIssuer(l)&&(f=!0,d=l),d){var h=d;n.util.isArray(h)||(h=[h]);for(var p=!1;!p&&h.length>0;){d=h.shift();try{p=d.verify(l)}catch(e){}}p||(c={message:"Certificate signature is invalid.",error:s.certificateError.bad_certificate})}null!==c||d&&!f||e.hasCertificate(l)||(c={message:"Certificate is not trusted.",error:s.certificateError.unknown_ca})}if(null===c&&d&&!l.isIssuer(d)&&(c={message:"Certificate issuer is invalid.",error:s.certificateError.bad_certificate}),null===c)for(var m={keyUsage:!0,basicConstraints:!0},g=0;null===c&&g<l.extensions.length;++g){var y=l.extensions[g];y.critical&&!(y.name in m)&&(c={message:"Certificate has an unsupported critical extension.",error:s.certificateError.unsupported_certificate})}if(null===c&&(!a||0===t.length&&(!d||f))){var b=l.getExtension("basicConstraints"),_=l.getExtension("keyUsage");if(null!==_&&(_.keyCertSign&&null!==b||(c={message:"Certificate keyUsage or basicConstraints conflict "+"or indicate that the certificate is not a CA. "+"If the certificate is the only one in the chain or "+"isn't the first then the certificate must be a "+"valid CA.",error:s.certificateError.bad_certificate})),null!==c||null===b||b.cA||(c={message:"Certificate basicConstraints indicates the certificate "+"is not a CA.",error:s.certificateError.bad_certificate}),null===c&&null!==_&&"pathLenConstraint"in b)u-1>b.pathLenConstraint&&(c={message:"Certificate basicConstraints pathLenConstraint violated.",error:s.certificateError.bad_certificate})}var w=null===c||c.error,v=r.verify?r.verify(w,u,i):w;if(!0!==v)throw!0===w&&(c={message:"The application rejected the certificate.",error:s.certificateError.bad_certificate}),(v||0===v)&&("object"!=typeof v||n.util.isArray(v)?"string"==typeof v&&(c.error=v):(v.message&&(c.message=v.message),v.error&&(c.error=v.error))),c;c=null,a=!1,++u}while(t.length>0);return!0}}}},{package:"node-forge",file:"/home/circleci/project/node_modules/node-forge/lib/x509.js"}],[5158,{"./asn1":5141,"./forge":5146,"./util":5168},function(){with(this)return function(){"use strict";return function(e,t,r){var n=e("./forge");e("./asn1"),e("./util");var i=n.asn1,s=t.exports=n.pkcs7asn1=n.pkcs7asn1||{};n.pkcs7=n.pkcs7||{},n.pkcs7.asn1=s;var o={name:"ContentInfo",tagClass:i.Class.UNIVERSAL,type:i.Type.SEQUENCE,constructed:!0,value:[{name:"ContentInfo.ContentType",tagClass:i.Class.UNIVERSAL,type:i.Type.OID,constructed:!1,capture:"contentType"},{name:"ContentInfo.content",tagClass:i.Class.CONTEXT_SPECIFIC,type:0,constructed:!0,optional:!0,captureAsn1:"content"}]};s.contentInfoValidator=o;var a={name:"EncryptedContentInfo",tagClass:i.Class.UNIVERSAL,type:i.Type.SEQUENCE,constructed:!0,value:[{name:"EncryptedContentInfo.contentType",tagClass:i.Class.UNIVERSAL,type:i.Type.OID,constructed:!1,capture:"contentType"},{name:"EncryptedContentInfo.contentEncryptionAlgorithm",tagClass:i.Class.UNIVERSAL,type:i.Type.SEQUENCE,constructed:!0,value:[{name:"EncryptedContentInfo.contentEncryptionAlgorithm.algorithm",tagClass:i.Class.UNIVERSAL,type:i.Type.OID,constructed:!1,capture:"encAlgorithm"},{name:"EncryptedContentInfo.contentEncryptionAlgorithm.parameter",tagClass:i.Class.UNIVERSAL,captureAsn1:"encParameter"}]},{name:"EncryptedContentInfo.encryptedContent",tagClass:i.Class.CONTEXT_SPECIFIC,type:0,capture:"encryptedContent",captureAsn1:"encryptedContentAsn1"}]};s.envelopedDataValidator={name:"EnvelopedData",tagClass:i.Class.UNIVERSAL,type:i.Type.SEQUENCE,constructed:!0,value:[{name:"EnvelopedData.Version",tagClass:i.Class.UNIVERSAL,type:i.Type.INTEGER,constructed:!1,capture:"version"},{name:"EnvelopedData.RecipientInfos",tagClass:i.Class.UNIVERSAL,type:i.Type.SET,constructed:!0,captureAsn1:"recipientInfos"}].concat(a)},s.encryptedDataValidator={name:"EncryptedData",tagClass:i.Class.UNIVERSAL,type:i.Type.SEQUENCE,constructed:!0,value:[{name:"EncryptedData.Version",tagClass:i.Class.UNIVERSAL,type:i.Type.INTEGER,constructed:!1,capture:"version"}].concat(a)};var c={name:"SignerInfo",tagClass:i.Class.UNIVERSAL,type:i.Type.SEQUENCE,constructed:!0,value:[{name:"SignerInfo.version",tagClass:i.Class.UNIVERSAL,type:i.Type.INTEGER,constructed:!1},{name:"SignerInfo.issuerAndSerialNumber",tagClass:i.Class.UNIVERSAL,type:i.Type.SEQUENCE,constructed:!0,value:[{name:"SignerInfo.issuerAndSerialNumber.issuer",tagClass:i.Class.UNIVERSAL,type:i.Type.SEQUENCE,constructed:!0,captureAsn1:"issuer"},{name:"SignerInfo.issuerAndSerialNumber.serialNumber",tagClass:i.Class.UNIVERSAL,type:i.Type.INTEGER,constructed:!1,capture:"serial"}]},{name:"SignerInfo.digestAlgorithm",tagClass:i.Class.UNIVERSAL,type:i.Type.SEQUENCE,constructed:!0,value:[{name:"SignerInfo.digestAlgorithm.algorithm",tagClass:i.Class.UNIVERSAL,type:i.Type.OID,constructed:!1,capture:"digestAlgorithm"},{name:"SignerInfo.digestAlgorithm.parameter",tagClass:i.Class.UNIVERSAL,constructed:!1,captureAsn1:"digestParameter",optional:!0}]},{name:"SignerInfo.authenticatedAttributes",tagClass:i.Class.CONTEXT_SPECIFIC,type:0,constructed:!0,optional:!0,capture:"authenticatedAttributes"},{name:"SignerInfo.digestEncryptionAlgorithm",tagClass:i.Class.UNIVERSAL,type:i.Type.SEQUENCE,constructed:!0,capture:"signatureAlgorithm"},{name:"SignerInfo.encryptedDigest",tagClass:i.Class.UNIVERSAL,type:i.Type.OCTETSTRING,constructed:!1,capture:"signature"},{name:"SignerInfo.unauthenticatedAttributes",tagClass:i.Class.CONTEXT_SPECIFIC,type:1,constructed:!0,optional:!0,capture:"unauthenticatedAttributes"}]};s.signedDataValidator={name:"SignedData",tagClass:i.Class.UNIVERSAL,type:i.Type.SEQUENCE,constructed:!0,value:[{name:"SignedData.Version",tagClass:i.Class.UNIVERSAL,type:i.Type.INTEGER,constructed:!1,capture:"version"},{name:"SignedData.DigestAlgorithms",tagClass:i.Class.UNIVERSAL,type:i.Type.SET,constructed:!0,captureAsn1:"digestAlgorithms"},o,{name:"SignedData.Certificates",tagClass:i.Class.CONTEXT_SPECIFIC,type:0,optional:!0,captureAsn1:"certificates"},{name:"SignedData.CertificateRevocationLists",tagClass:i.Class.CONTEXT_SPECIFIC,type:1,optional:!0,captureAsn1:"crls"},{name:"SignedData.SignerInfos",tagClass:i.Class.UNIVERSAL,type:i.Type.SET,capture:"signerInfos",optional:!0,value:[c]}]},s.recipientInfoValidator={name:"RecipientInfo",tagClass:i.Class.UNIVERSAL,type:i.Type.SEQUENCE,constructed:!0,value:[{name:"RecipientInfo.version",tagClass:i.Class.UNIVERSAL,type:i.Type.INTEGER,constructed:!1,capture:"version"},{name:"RecipientInfo.issuerAndSerial",tagClass:i.Class.UNIVERSAL,type:i.Type.SEQUENCE,constructed:!0,value:[{name:"RecipientInfo.issuerAndSerial.issuer",tagClass:i.Class.UNIVERSAL,type:i.Type.SEQUENCE,constructed:!0,captureAsn1:"issuer"},{name:"RecipientInfo.issuerAndSerial.serialNumber",tagClass:i.Class.UNIVERSAL,type:i.Type.INTEGER,constructed:!1,capture:"serial"}]},{name:"RecipientInfo.keyEncryptionAlgorithm",tagClass:i.Class.UNIVERSAL,type:i.Type.SEQUENCE,constructed:!0,value:[{name:"RecipientInfo.keyEncryptionAlgorithm.algorithm",tagClass:i.Class.UNIVERSAL,type:i.Type.OID,constructed:!1,capture:"encAlgorithm"},{name:"RecipientInfo.keyEncryptionAlgorithm.parameter",tagClass:i.Class.UNIVERSAL,constructed:!1,captureAsn1:"encParameter",optional:!0}]},{name:"RecipientInfo.encryptedKey",tagClass:i.Class.UNIVERSAL,type:i.Type.OCTETSTRING,constructed:!1,capture:"encKey"}]}}}},{package:"node-forge",file:"/home/circleci/project/node_modules/node-forge/lib/pkcs7asn1.js"}],[4346,{"./blake":4344,"./crypto-sha1-2":4345,"./utils":4348,buffer:2028,"js-sha3":4642,murmurhash3js:5131},function(){with(this)return function(){"use strict";return function(e,t,r){(function(r){(function(){const n=e("js-sha3"),i=e("murmurhash3js"),s=e("./utils"),o=e("./crypto-sha1-2"),a=s.toCallback,c=s.toBuf,u=s.fromString,l=s.fromNumberTo32BitBuf;t.exports={sha1:o.sha1,sha2256:o.sha2256,sha2512:o.sha2512,sha3512:a(c(n.sha3_512)),sha3384:a(c(n.sha3_384)),sha3256:a(c(n.sha3_256)),sha3224:a(c(n.sha3_224)),shake128:a(c(n.shake_128,128)),shake256:a(c(n.shake_256,256)),keccak224:a(c(n.keccak_224)),keccak256:a(c(n.keccak_256)),keccak384:a(c(n.keccak_384)),keccak512:a(c(n.keccak_512)),murmur3128:a(c(u(i.x64.hash128))),murmur332:a(l(u(i.x86.hash32))),addBlake:e("./blake"),dblSha2256:(e,t)=>{o.sha2256(e,((e,n)=>{e&&t(e),o.sha2256(r.from(n),t)}))}}}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"multihashing-async",file:"/home/circleci/project/node_modules/ipfs-bitswap/node_modules/multihashing-async/src/crypto.js"}],[5346,{"./state":5347},function(){with(this)return function(){"use strict";return function(e,t,r){var n=e("./state");function i(e){return"function"==typeof e}function s(e,t){return t?function(r,n){var i=setTimeout((function(){e(new Error("pull-reader: read exceeded timeout"),n)}),t);e(r,(function(e,t){clearTimeout(i),n(e,t)}))}:e}t.exports=function(e){var t,r,o,a,c,u=[],l=!1,d=n();function f(){for(;u.length;)if(null==u[0].length&&d.has(1))u.shift().cb(null,d.get());else if(d.has(u[0].length)){var e=u.shift();e.cb(null,d.get(e.length))}else if(1==o&&u[0].length&&d.length<u[0].length){var t="stream ended with:"+d.length+" but wanted:"+u[0].length;u.shift().cb(new Error(t))}else{if(!o)return!!u.length;u.shift().cb(o)}return u.length||!d.has(1)||c}function h(){f()&&!l&&(!t||l||a||(l=!0,r(null,(function(e,t){if(l=!1,e)return o=e,f();d.add(t),h()}))))}function p(n){if(c){for(;u.length;)u.shift().cb(c);return cb&&cb(c)}r=s(n,e),t=n,h()}return p.abort=function(e,r){c=e||!0,t?(l=!0,t(c,(function(){for(;u.length;)u.shift().cb(c);r&&r(c)}))):r()},p.read=function(r,n,o){if(i(n)&&(o=n,n=e),!i(o))return a=!0,function(e,r){if(l||d.has(1)){if(e)return t(e,r);u.push({length:null,cb:r}),h()}else s(t,n)(e,(function(e,t){r(e,t)}))};var c;u.push({length:(c=r,Number.isFinite(c)?r:null),cb:o}),h()},p}}}},{package:"pull-reader",file:"/home/circleci/project/node_modules/pull-reader/index.js"}],[2038,{},function(){with(this)return function(){"use strict";return function(e,t,r){t.exports=function(e,t,r){for(var n=0,i=-1,s=r=r||0;s<e.length;++s)if(e[s]==t[n]){if(-1==i&&(i=s),++n==t.length)break}else i=-1,n=0;return i>-1&&e.length-i<t.length?-1:i}}}},{package:"buffer-indexof",file:"/home/circleci/project/node_modules/buffer-indexof/index.js"}],[4853,{},function(){with(this)return function(){"use strict";return function(e,t,r){t.exports=(e,t)=>0}}},{package:"libp2p-record",file:"/home/circleci/project/node_modules/libp2p-record/src/selectors/public-key.js"}],[4857,{"../../../is-buffer/index.js":4611,"async/setImmediate":1720,"multihashing-async":4846},function(){with(this)return function(){"use strict";return function(e,t,r){(function(r){(function(){const n=e("async/setImmediate"),i=e("multihashing-async");t.exports={func:(e,t,s)=>{const o=e=>n((()=>s(e)));if(!r.isBuffer(e))return o(new Error('"key" must be a Buffer'));if(e.length<3)return o(new Error("invalid public key record"));if("/pk/"!==e.slice(0,4).toString())return o(new Error("key was not prefixed with /pk/"));const a=e.slice(4);i(t,"sha2-256",((e,t)=>e?o(e):a.equals(t)?void o():o(new Error("public key does not match passed in key"))))},sign:!1}}).call(this)}).call(this,{isBuffer:e("../../../is-buffer/index.js")})}}},{package:"libp2p-record",file:"/home/circleci/project/node_modules/libp2p-record/src/validators/public-key.js"}],[5386,{"./client":5384,"./duplex":5385,"./server":2027,"./sink":5389,"./source":5390},function(){with(this)return function(){"use strict";return function(e,t,r){(r=t.exports=e("./duplex")).source=e("./source"),r.sink=e("./sink"),r.createServer=e("./server"),r.connect=e("./client")}}},{package:"pull-ws",file:"/home/circleci/project/node_modules/pull-ws/index.js"}],[5585,{url:5841},function(){with(this)return function(){"use strict";return function(e,t,r){var n=e("url");t.exports=function(e,t,r,i){var s;return r=r||{},s=(e=n.parse(e,!1,!0)).protocol?e.protocol:(r[s=t.protocol?t.protocol.replace(/:$/,""):"http"]||i||s)+":",e.host&&":"===e.host[0]&&(e.host=null),e.hostname?n.format({protocol:s,slashes:!0,hostname:e.hostname,port:e.port,pathname:e.pathname,search:e.search}):(e.host=t.host,e.port?n.format({protocol:s,slashes:!0,host:t.hostname+":"+e.port,port:e.port,pathname:e.pathname,search:e.search}):e.pathname?n.format({protocol:s,slashes:!0,host:e.host,pathname:e.pathname,search:e.search}):(e.pathname=t.pathname,e.search?n.format({protocol:s,slashes:!0,host:e.host,pathname:e.pathname,search:e.search}):(e.search=t.search,e.format(e))))}}}},{package:"relative-url",file:"/home/circleci/project/node_modules/relative-url/index.js"}],[5389,{"./ready":5387,_process:5294,timers:5772},function(){with(this)return function(){"use strict";return function(e,t,r){(function(r,n){(function(){var i=e("./ready"),s=void 0!==n?n:r.nextTick;t.exports=function(e,t){return function(r){var n=!1!==(t=t||{}).closeOnEnd,o="function"==typeof t?t:t.onClose;r(null,(function t(a,c){a?n&&e.readyState<=1&&(o&&e.addEventListener("close",(function(e){if(e.wasClean||1006===e.code)o();else{var t=new Error("ws error");t.event=e,o(t)}})),e.close()):i(e,(function(n){if(n)return r(n,(function(){}));e.send(c),s((function(){r(null,t)}))}))}))}}}).call(this)}).call(this,e("_process"),e("timers").setImmediate)}}},{package:"pull-ws",file:"/home/circleci/project/node_modules/pull-ws/sink.js"}],[5390,{"safe-buffer":5597},function(){with(this)return function(){"use strict";return function(e,t,r){var n=e("safe-buffer").Buffer;t.exports=function(e,t){var r,i,s=[],o=!1;return e.addEventListener("message",(function(e){var t,i=e.data;if(((t=i)instanceof ArrayBuffer||null!=t&&null!=t.constructor&&"ArrayBuffer"===t.constructor.name&&"number"==typeof t.byteLength)&&(i=n.from(i)),r)return r(null,i);s.push(i)})),e.addEventListener("close",(function(e){i||r&&r(i=!0)})),e.addEventListener("error",(function(e){i||(i=e,o||(o=!0,t&&t(e)),r&&r(i))})),e.addEventListener("open",(function(e){o||i||(o=!0)})),function(t,n){if(r=null,i)return n(i);t?(r=n,e.close()):s.length>0?n(null,s.shift()):r=n}}}}},{package:"pull-ws",file:"/home/circleci/project/node_modules/pull-ws/source.js"}],[4807,{},function(){with(this)return function(){"use strict";return function(e,t,r){t.exports=class{constructor(){this.list=[]}push(e){return!this.has(e)&&(this.list.push(e),!0)}has(e){const t=this.list.find((t=>t.id.isEqual(e.id)));return Boolean(t)}toArray(){return this.list.slice()}pop(){return this.list.pop()}get length(){return this.list.length}}}}},{package:"libp2p-kad-dht",file:"/home/circleci/project/node_modules/libp2p-kad-dht/src/peer-list.js"}],[4797,{"./blake":4795,"./crypto-sha1-2":4796,"./utils":4799,buffer:2028,"js-sha3":4642,murmurhash3js:5131},function(){with(this)return function(){"use strict";return function(e,t,r){(function(r){(function(){const n=e("js-sha3"),i=e("murmurhash3js"),s=e("./utils"),o=e("./crypto-sha1-2"),a=s.toCallback,c=s.toBuf,u=s.fromString,l=s.fromNumberTo32BitBuf;t.exports={sha1:o.sha1,sha2256:o.sha2256,sha2512:o.sha2512,sha3512:a(c(n.sha3_512)),sha3384:a(c(n.sha3_384)),sha3256:a(c(n.sha3_256)),sha3224:a(c(n.sha3_224)),shake128:a(c(n.shake_128,128)),shake256:a(c(n.shake_256,256)),keccak224:a(c(n.keccak_224)),keccak256:a(c(n.keccak_256)),keccak384:a(c(n.keccak_384)),keccak512:a(c(n.keccak_512)),murmur3128:a(c(u(i.x64.hash128))),murmur332:a(l(u(i.x86.hash32))),addBlake:e("./blake"),dblSha2256:(e,t)=>{o.sha2256(e,((e,n)=>{e&&t(e),o.sha2256(r.from(n),t)}))}}}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"multihashing-async",file:"/home/circleci/project/node_modules/libp2p-kad-dht/node_modules/multihashing-async/src/crypto.js"}],[2526,{},function(){with(this)return function(){"use strict";return function(e,t,r){var n=Object.prototype.hasOwnProperty,i="~";function s(){}function o(e,t,r){this.fn=e,this.context=t,this.once=r||!1}function a(e,t,r,n,s){if("function"!=typeof r)throw new TypeError("The listener must be a function");var a=new o(r,n||e,s),c=i?i+t:t;return e._events[c]?e._events[c].fn?e._events[c]=[e._events[c],a]:e._events[c].push(a):(e._events[c]=a,e._eventsCount++),e}function c(e,t){0==--e._eventsCount?e._events=new s:delete e._events[t]}function u(){this._events=new s,this._eventsCount=0}Object.create&&(s.prototype=Object.create(null),(new s).__proto__||(i=!1)),u.prototype.eventNames=function(){var e,t,r=[];if(0===this._eventsCount)return r;for(t in e=this._events)n.call(e,t)&&r.push(i?t.slice(1):t);return Object.getOwnPropertySymbols?r.concat(Object.getOwnPropertySymbols(e)):r},u.prototype.listeners=function(e){var t=i?i+e:e,r=this._events[t];if(!r)return[];if(r.fn)return[r.fn];for(var n=0,s=r.length,o=new Array(s);n<s;n++)o[n]=r[n].fn;return o},u.prototype.listenerCount=function(e){var t=i?i+e:e,r=this._events[t];return r?r.fn?1:r.length:0},u.prototype.emit=function(e,t,r,n,s,o){var a=i?i+e:e;if(!this._events[a])return!1;var c,u,l=this._events[a],d=arguments.length;if(l.fn){switch(l.once&&this.removeListener(e,l.fn,undefined,!0),d){case 1:return l.fn.call(l.context),!0;case 2:return l.fn.call(l.context,t),!0;case 3:return l.fn.call(l.context,t,r),!0;case 4:return l.fn.call(l.context,t,r,n),!0;case 5:return l.fn.call(l.context,t,r,n,s),!0;case 6:return l.fn.call(l.context,t,r,n,s,o),!0}for(u=1,c=new Array(d-1);u<d;u++)c[u-1]=arguments[u];l.fn.apply(l.context,c)}else{var f,h=l.length;for(u=0;u<h;u++)switch(l[u].once&&this.removeListener(e,l[u].fn,undefined,!0),d){case 1:l[u].fn.call(l[u].context);break;case 2:l[u].fn.call(l[u].context,t);break;case 3:l[u].fn.call(l[u].context,t,r);break;case 4:l[u].fn.call(l[u].context,t,r,n);break;default:if(!c)for(f=1,c=new Array(d-1);f<d;f++)c[f-1]=arguments[f];l[u].fn.apply(l[u].context,c)}}return!0},u.prototype.on=function(e,t,r){return a(this,e,t,r,!1)},u.prototype.once=function(e,t,r){return a(this,e,t,r,!0)},u.prototype.removeListener=function(e,t,r,n){var s=i?i+e:e;if(!this._events[s])return this;if(!t)return c(this,s),this;var o=this._events[s];if(o.fn)o.fn!==t||n&&!o.once||r&&o.context!==r||c(this,s);else{for(var a=0,u=[],l=o.length;a<l;a++)(o[a].fn!==t||n&&!o[a].once||r&&o[a].context!==r)&&u.push(o[a]);u.length?this._events[s]=1===u.length?u[0]:u:c(this,s)}return this},u.prototype.removeAllListeners=function(e){var t;return e?(t=i?i+e:e,this._events[t]&&c(this,t)):(this._events=new s,this._eventsCount=0),this},u.prototype.off=u.prototype.removeListener,u.prototype.addListener=u.prototype.on,u.prefixed=i,u.EventEmitter=u,void 0!==t&&(t.exports=u)}}},{package:"eventemitter3",file:"/home/circleci/project/node_modules/eventemitter3/index.js"}],[4806,{"./utils":4826,"async/map":1711,"xor-distance":6006},function(){with(this)return function(){"use strict";return function(e,t,r){const n=e("xor-distance"),i=e("./utils"),s=e("async/map");t.exports=class{constructor(e,t){this.originDhtKey=e,this.capacity=t,this.peerDistances=[]}get length(){return this.peerDistances.length}get peers(){return this.peerDistances.map((e=>e.peerId))}add(e,t){if(this.peerDistances.find((t=>t.peerId.id.equals(e.id))))return t();i.convertPeerId(e,((r,i)=>{if(r)return t(r);const s={peerId:e,distance:n(this.originDhtKey,i)};this.peerDistances.push(s),this.peerDistances.sort(((e,t)=>n.compare(e.distance,t.distance))),this.peerDistances=this.peerDistances.slice(0,this.capacity),t()}))}anyCloser(e,t){return e.length?this.length?void s(e,((e,t)=>i.convertPeerId(e,t)),((e,r)=>{if(e)return t(e);const i=this.peerDistances[this.peerDistances.length-1].distance;for(const e of r){const r=n(this.originDhtKey,e);if(n.compare(r,i)<0)return t(null,!0)}return t(null,!1)})):t(null,!0):t(null,!1)}}}}},{package:"libp2p-kad-dht",file:"/home/circleci/project/node_modules/libp2p-kad-dht/src/peer-distance-list.js"}],[4815,{"async/queue":1716,"promise-to-callback":5296,"promisify-es6":5298},function(){with(this)return function(){"use strict";return function(e,t,r){const n=e("async/queue"),i=e("promisify-es6"),s=e("promise-to-callback");t.exports=class{constructor(e,t,r,n){this.dht=e,this.run=t,this.path=r,this.log=n,this.concurrency=this.dht.concurrency,this.queue=this.setupQueue(),this.execution=null}setupQueue(){const e=n(((e,t)=>{s(this.processNext(e))(t)}),this.concurrency);return e.error=e=>{this.log.error("queue",e),this.stop(e)},e.drain=()=>{this.log("queue:drain"),this.stop()},e.unsaturated=()=>{this.running&&this.fill()},e.buffer=0,e}stop(e){this.running&&(this.running=!1,this.queue.kill(),this.log("worker:stop, %d workers still running",this.run.workers.filter((e=>e.running)).length),e?this.execution.reject(e):this.execution.resolve())}async execute(){this.running=!0,this.execution={};const e=new Promise(((e,t)=>Object.assign(this.execution,{resolve:e,reject:t})));this.fill(),await e}fill(){for(;this.queue.running()+this.queue.length()<this.concurrency&&this.path.peersToQuery.length>0;)this.queue.push(this.path.peersToQuery.dequeue())}async processNext(e){if(!this.running)return;if(this.run.peersSeen.has(e))return;let t,r,n,i;try{t=await this.run.continueQuerying(this)}catch(e){r=e}if(this.running){if(r)throw r;if(t){if(!this.run.peersSeen.has(e)){this.run.peersSeen.add(e),this.log("queue:work");try{n=await this.execQuery(e)}catch(e){i=e}if(this.running){if(this.log("queue:work:done",i,n),i)throw i;if(n&&n.queryComplete)return this.log("query:complete"),void this.run.stop();n&&n.pathComplete&&this.stop()}}}else this.stop()}}async execQuery(e){let t,r;try{t=await this.path.queryFunc(e)}catch(e){r=e}if(this.running)if(r)this.run.errors.push(r);else{if(await i((t=>this.run.peersQueried.add(e,t)))(),t.pathComplete||t.queryComplete)return this.path.res=t,{pathComplete:t.pathComplete,queryComplete:t.queryComplete};t.closerPeers&&t.closerPeers.length>0&&await Promise.all(t.closerPeers.map((async e=>{this.dht._isSelf(e.id)||(e=this.dht.peerBook.put(e),this.dht._peerDiscovered(e),await this.path.addPeerToQuery(e.id))})))}}}}}},{package:"libp2p-kad-dht",file:"/home/circleci/project/node_modules/libp2p-kad-dht/src/query/workerQueue.js"}],[4813,{"../peer-queue":4808,"../utils":4826},function(){with(this)return function(){"use strict";return function(e,t,r){const n=e("../peer-queue"),i=e("../utils");t.exports=class{constructor(e,t){if(this.run=e,this.queryFunc=i.withTimeout(t,3e4),!this.queryFunc)throw new Error("Path requires a `queryFn` to be specified");if("function"!=typeof this.queryFunc)throw new Error("Path expected `queryFn` to be a function. Got "+typeof this.queryFunc);this.initialPeers=[],this.peersToQuery=null}addInitialPeer(e){this.initialPeers.push(e)}async execute(){const e=await n.fromKey(this.run.query.key);this.peersToQuery=e,await Promise.all(this.initialPeers.map((e=>this.addPeerToQuery(e)))),await this.run.workerQueue(this)}async addPeerToQuery(e){this.run.query.dht._isSelf(e)||this.run.peersSeen.has(e)||await this.peersToQuery.enqueue(e)}}}}},{package:"libp2p-kad-dht",file:"/home/circleci/project/node_modules/libp2p-kad-dht/src/query/path.js"}],[4822,{"../../message":4804,"./add-provider":4818,"./find-node":4819,"./get-providers":4820,"./get-value":4821,"./ping":4823,"./put-value":4824},function(){with(this)return function(){"use strict";return function(e,t,r){const n=e("../../message").TYPES;t.exports=t=>{const r={[n.GET_VALUE]:e("./get-value")(t),[n.PUT_VALUE]:e("./put-value")(t),[n.FIND_NODE]:e("./find-node")(t),[n.ADD_PROVIDER]:e("./add-provider")(t),[n.GET_PROVIDERS]:e("./get-providers")(t),[n.PING]:e("./ping")(t)};return function(e){return r[e]}}}}},{package:"libp2p-kad-dht",file:"/home/circleci/project/node_modules/libp2p-kad-dht/src/rpc/handlers/index.js"}],[5344,{},function(){with(this)return function(){"use strict";return function(e,t,r){t.exports=function(){var e,t;return{source:function(r,n){e?e(r,n):t=[r,n]},sink:function(r){if("function"!=typeof r)throw new Error("read must be function");if(e)throw new Error("already piped");if(e=r,t){var n=t;t=null,e.apply(null,n)}}}}}}},{package:"pull-pair",file:"/home/circleci/project/node_modules/pull-pair/index.js"}],[4872,{"async/parallel":1715,buffer:2028,"libp2p-crypto":4773,"multihashing-async":4861,"pull-length-prefixed":5333,"pull-stream/pull":5352,"pull-stream/sinks/collect":5353,"pull-stream/sources/values":5368},function(){with(this)return function(){"use strict";return function(e,t,r){(function(t){(function(){const n=e("multihashing-async"),i=e("pull-length-prefixed"),s=e("pull-stream/pull"),o=e("pull-stream/sources/values"),a=e("pull-stream/sinks/collect"),c=e("libp2p-crypto"),u=e("async/parallel");r.exchanges=["P-256","P-384","P-521"],r.ciphers=["AES-256","AES-128"],r.hashes=["SHA256","SHA512"],r.theBest=(e,t,r)=>{let n,i;if(e<0)n=r,i=t;else{if(!(e>0))return t[0];n=t,i=r}for(let e of n)for(let t of i)if(e===t)return e;throw new Error("No algorithms in common!")},r.makeMacAndCipher=(e,t)=>{u([t=>function(e,t,r){c.hmac.create(e,t,r)}(e.hashT,e.keys.macKey,t),t=>function(e,t,r,n){if("AES-128"===e||"AES-256"===e)return c.aes.create(r,t,n);n(new Error(`unrecognized cipher type: ${e}`))}(e.cipherT,e.keys.iv,e.keys.cipherKey,t)],((r,n)=>{if(r)return t(r);e.mac=n[0],e.cipher=n[1],t()}))},r.selectBest=(e,n,i)=>{r.digest(t.concat([n.pubKeyBytes,e.nonce]),((s,o)=>{if(s)return i(s);r.digest(t.concat([e.pubKeyBytes,n.nonce]),((s,a)=>{if(s)return i(s);const c=t.compare(o,a);if(0===c)return i(new Error("you are trying to talk to yourself"));i(null,{curveT:r.theBest(c,e.exchanges,n.exchanges),cipherT:r.theBest(c,e.ciphers,n.ciphers),hashT:r.theBest(c,e.hashes,n.hashes),order:c})}))}))},r.digest=(e,t)=>{n.digest(e,"sha2-256",e.length,t)},r.write=function(e,t,r){r=r||(()=>{}),s(o([t]),i.encode({fixed:!0,bytes:4}),a(((t,n)=>{if(t)return r(t);e.shake.write(n[0]),r()})))},r.read=function(e,t){i.decodeFromReader(e,{fixed:!0,bytes:4},t)}}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"libp2p-secio",file:"/home/circleci/project/node_modules/libp2p-secio/src/support.js"}],[4864,{"../support":4872,"./secio.proto":4869,"async/parallel":1715,"async/waterfall":1726,buffer:2028,debug:2197,"libp2p-crypto":4773,"peer-id":5284,protons:5314},function(){with(this)return function(){"use strict";return function(e,t,r){(function(t){(function(){const n=e("protons"),i=e("peer-id"),s=e("libp2p-crypto"),o=e("async/parallel"),a=e("async/waterfall"),c=e("debug"),u=c("libp2p:secio");u.error=c("libp2p:secio:error");const l=n(e("./secio.proto")),d=e("../support");r.createProposal=e=>(e.proposal.out={rand:s.randomBytes(16),pubkey:e.key.local.public.bytes,exchanges:d.exchanges.join(","),ciphers:d.ciphers.join(","),hashes:d.hashes.join(",")},e.proposalEncoded.out=l.Propose.encode(e.proposal.out),e.proposalEncoded.out),r.createExchange=(e,r)=>{s.keys.generateEphemeralKeyPair(e.protocols.local.curveT,((n,i)=>{if(n)return r(n);e.ephemeralKey.local=i.key,e.shared.generate=i.genSharedKey;const s=t.concat([e.proposalEncoded.out,e.proposalEncoded.in,e.ephemeralKey.local]);e.key.local.sign(s,((t,n)=>{if(t)return r(t);e.exchange.out={epubkey:e.ephemeralKey.local,signature:n},r(null,l.Exchange.encode(e.exchange.out))}))}))},r.identify=(e,t,r)=>{u("1.1 identify"),e.proposalEncoded.in=t,e.proposal.in=l.Propose.decode(t);const n=e.proposal.in.pubkey;e.key.remote=s.keys.unmarshalPublicKey(n),i.createFromPubKey(n.toString("base64"),((t,n)=>{if(t)return r(t);if(e.id.remote){if(e.id.remote.toB58String()!==n.toB58String())return r(new Error("dialed to the wrong peer, Ids do not match"))}else e.id.remote=n;u("1.1 identify - %s - identified remote peer as %s",e.id.local.toB58String(),e.id.remote.toB58String()),r()}))},r.selectProtocols=(e,t)=>{u("1.2 selection");const r={pubKeyBytes:e.key.local.public.bytes,exchanges:d.exchanges,hashes:d.hashes,ciphers:d.ciphers,nonce:e.proposal.out.rand},n={pubKeyBytes:e.proposal.in.pubkey,exchanges:e.proposal.in.exchanges.split(","),hashes:e.proposal.in.hashes.split(","),ciphers:e.proposal.in.ciphers.split(","),nonce:e.proposal.in.rand};d.selectBest(r,n,((r,n)=>{if(r)return t(r);e.protocols.remote={order:n.order,curveT:n.curveT,cipherT:n.cipherT,hashT:n.hashT},e.protocols.local={order:n.order,curveT:n.curveT,cipherT:n.cipherT,hashT:n.hashT},t()}))},r.verify=(e,r,n)=>{u("2.1. verify"),e.exchange.in=l.Exchange.decode(r),e.ephemeralKey.remote=e.exchange.in.epubkey;const i=t.concat([e.proposalEncoded.in,e.proposalEncoded.out,e.ephemeralKey.remote]);e.key.remote.verify(i,e.exchange.in.signature,((e,t)=>e?n(e):t?(u("2.1. verify - signature verified"),void n()):n(new Error("Bad signature"))))},r.generateKeys=(e,t)=>{u("2.2. keys"),a([t=>e.shared.generate(e.exchange.in.epubkey,t),(t,r)=>{e.shared.secret=t,s.keys.keyStretcher(e.protocols.local.cipherT,e.protocols.local.hashT,e.shared.secret,r)},(t,r)=>{if(e.protocols.local.order>0)e.protocols.local.keys=t.k1,e.protocols.remote.keys=t.k2;else{if(!(e.protocols.local.order<0))return r(new Error("you are trying to talk to yourself"));e.protocols.local.keys=t.k2,e.protocols.remote.keys=t.k1}u("2.3. mac + cipher"),o([t=>d.makeMacAndCipher(e.protocols.local,t),t=>d.makeMacAndCipher(e.protocols.remote,t)],r)}],t)},r.verifyNonce=(e,t)=>{const r=e.proposal.out.rand;if(!r.equals(t))throw new Error(`Failed to read our encrypted nonce: ${r.toString("hex")} != ${t.toString("hex")}`)}}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"libp2p-secio",file:"/home/circleci/project/node_modules/libp2p-secio/src/handshake/crypto.js"}],[4863,{buffer:2028,"pull-length-prefixed":5333,"pull-stream/pull":5352,"pull-stream/throughs/async-map":5369,"pull-stream/throughs/map":5374},function(){with(this)return function(){"use strict";return function(e,t,r){(function(t){(function(){const n=e("pull-stream/pull"),i=e("pull-stream/throughs/map"),s=e("pull-stream/throughs/async-map"),o=e("pull-length-prefixed"),a={fixed:!0,bytes:4};function c(){return i((e=>"string"==typeof e?t.from(e,"utf-8"):e))}r.createBoxStream=(e,r)=>n(c(),s(((n,i)=>{e.encrypt(n,((e,n)=>{if(e)return i(e);r.digest(n,((e,r)=>{if(e)return i(e);i(null,t.concat([n,r]))}))}))})),o.encode(a)),r.createUnboxStream=(e,t)=>n(c(),o.decode(a),s(((r,n)=>{const i=r.length,s=t.length;if(i<s)return n(new Error(`buffer (${i}) shorter than MAC size (${s})`));const o=i-s,a=r.slice(0,o),c=r.slice(o);t.digest(a,((t,r)=>t?n(t):c.equals(r)?void e.decrypt(a,((e,t)=>{if(e)return n(e);n(null,t)})):n(new Error(`MAC Invalid: ${c.toString("hex")} != ${r.toString("hex")}`))))})))}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"libp2p-secio",file:"/home/circleci/project/node_modules/libp2p-secio/src/etm.js"}],[4900,{},function(){with(this)return function(){"use strict";return function(e,t,r){r.ERR_WS_STAR_WEBSOCKET_CONNECTION="ERR_WS_STAR_WEBSOCKET_CONNECTION"}}},{package:"libp2p-websocket-star",file:"/home/circleci/project/node_modules/libp2p-websocket-star/src/errors/index.js"}],[5718,{buffer:2028,"data-queue":2175,debug:5711,"pull-stream":5351,uuid:5713},function(){with(this)return function(){"use strict";return function(e,t,r){(function(r){(function(){const n=e("data-queue"),i=e("uuid"),s=e("pull-stream"),o=(e,t)=>"socket.io-pull-stream."+e+(t?"."+t:""),a=e("debug")("socket.io-pull-stream");function c(e,t){if(null==t)return t;try{return e(t)}catch(e){return console.error("Codec Error"),console.error(e),!1}}const u={hex:{encode:e=>e.toString("hex"),decode:e=>r.from(e,"hex")},plain:{encode:e=>e,decode:e=>e},buffer:{encode:e=>r.from(e),decode:e=>r.from(e)}};function l(e){if(e||(e="plain"),"object"==typeof e)return e;const t=u[e];if(!t)throw new Error("Invalid codec "+e);return t}t.exports=function(e,t){e.createSink||(e.sioplog=e.id?a.bind(a,"["+e.id+"]"):a,e.createSink=(r,s)=>{r||(r=i());const a=function(e,t,r){const i=n(),s=e.sioplog.bind(e.sioplog,"  sink("+t+")"),a=l(r.codec).encode;let u;function d(e){i.append({err:e}),u=e}return s("create sink"),e.once(o("accept",t),(()=>{s("start transmission"),function r(){i.get(((n,u)=>{let{data:l,err:d}=u||{};if(n&&(d=n),s("send",d&&!0===d?"finish":d?"error":l?"data":"<invalid>"),d&&!n&&i.error(d),d)return e.emit(o("error",t),d);l&&e.emit(o("queue",t),c(a,l)),r()}))}()})),e.once("disconnect",(()=>d(!0))),function(e){e(null,(function t(r,n){return r?d(r):u?e(u,t):(i.append({data:n}),void e(null,t))}))}}(e,r,t||s);return a.id=r,a},e.createSource=(r,i)=>{const s=function(e,t,r){const i=n(),s=e.sioplog.bind(e.sioplog,"source("+t+")"),a=l(r.codec).decode;function u(){e.removeAllListeners(o("error",t)),e.removeAllListeners(o("queue",t))}return s("create source"),e.emit(o("accept",t)),e.on(o("error",t),(e=>{s(!0===e?"finish":"error"),u(),i.append({end:e})})),e.on(o("queue",t),(e=>{s("queue data"),i.append({data:c(a,e)})})),e.once("disconnect",(()=>{u(),i.append({end:!0})})),function(e,t){if(s("reading"),e)return t(e);i.get(((e,r)=>e?t(e):r.end?(i.error(r.end),t(r.end)):t(null,r.data)))}}(e,r,t||i);return s.id=r,s},e.createProxy=(t,r,n)=>{s(e.createSource(t,n),r.createSink(t,n))})}}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"socket.io-pull-stream",file:"/home/circleci/project/node_modules/socket.io-pull-stream/src/index.js"}],[5688,{"../../../errors":5679},function(){with(this)return function(){"use strict";return function(e,t,r){var n=e("../../../errors").codes.ERR_STREAM_PREMATURE_CLOSE;function i(){}t.exports=function e(t,r,s){if("function"==typeof r)return e(t,null,r);r||(r={}),s=function(e){var t=!1;return function(){if(!t){t=!0;for(var r=arguments.length,n=new Array(r),i=0;i<r;i++)n[i]=arguments[i];e.apply(this,n)}}}(s||i);var o=r.readable||!1!==r.readable&&t.readable,a=r.writable||!1!==r.writable&&t.writable,c=function(){t.writable||l()},u=t._writableState&&t._writableState.finished,l=function(){a=!1,u=!0,o||s.call(t)},d=t._readableState&&t._readableState.endEmitted,f=function(){o=!1,d=!0,a||s.call(t)},h=function(e){s.call(t,e)},p=function(){var e;return o&&!d?(t._readableState&&t._readableState.ended||(e=new n),s.call(t,e)):a&&!u?(t._writableState&&t._writableState.ended||(e=new n),s.call(t,e)):void 0},m=function(){t.req.on("finish",l)};return!function(e){return e.setHeader&&"function"==typeof e.abort}(t)?a&&!t._writableState&&(t.on("end",c),t.on("close",c)):(t.on("complete",l),t.on("abort",p),t.req?m():t.on("request",m)),t.on("end",f),t.on("finish",l),!1!==r.error&&t.on("error",h),t.on("close",p),function(){t.removeListener("complete",l),t.removeListener("abort",p),t.removeListener("request",m),t.req&&t.req.removeListener("finish",l),t.removeListener("end",c),t.removeListener("close",c),t.removeListener("finish",l),t.removeListener("end",f),t.removeListener("error",h),t.removeListener("close",p)}}}}},{package:"readable-stream",file:"/home/circleci/project/node_modules/simple-peer/node_modules/readable-stream/lib/internal/streams/end-of-stream.js"}],[5690,{"../../../errors":5679,"./end-of-stream":5688},function(){with(this)return function(){"use strict";return function(e,t,r){var n;var i=e("../../../errors").codes,s=i.ERR_MISSING_ARGS,o=i.ERR_STREAM_DESTROYED;function a(e){if(e)throw e}function c(t,r,i,s){s=function(e){var t=!1;return function(){t||(t=!0,e.apply(void 0,arguments))}}(s);var a=!1;t.on("close",(function(){a=!0})),n===undefined&&(n=e("./end-of-stream")),n(t,{readable:r,writable:i},(function(e){if(e)return s(e);a=!0,s()}));var c=!1;return function(e){if(!a&&!c)return c=!0,function(e){return e.setHeader&&"function"==typeof e.abort}(t)?t.abort():"function"==typeof t.destroy?t.destroy():void s(e||new o("pipe"))}}function u(e){e()}function l(e,t){return e.pipe(t)}function d(e){return e.length?"function"!=typeof e[e.length-1]?a:e.pop():a}t.exports=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];var n,i=d(t);if(Array.isArray(t[0])&&(t=t[0]),t.length<2)throw new s("streams");var o=t.map((function(e,r){var s=r<t.length-1;return c(e,s,r>0,(function(e){n||(n=e),e&&o.forEach(u),s||(o.forEach(u),i(n))}))}));return t.reduce(l)}}}},{package:"readable-stream",file:"/home/circleci/project/node_modules/simple-peer/node_modules/readable-stream/lib/internal/streams/pipeline.js"}],[5680,{"./_stream_readable":5682,"./_stream_writable":5684,_process:5294,inherits:4329},function(){with(this)return function(){"use strict";return function(e,t,r){(function(r){(function(){var n=Object.keys||function(e){var t=[];for(var r in e)t.push(r);return t};t.exports=u;var i=e("./_stream_readable"),s=e("./_stream_writable");e("inherits")(u,i);for(var o=n(s.prototype),a=0;a<o.length;a++){var c=o[a];u.prototype[c]||(u.prototype[c]=s.prototype[c])}function u(e){if(!(this instanceof u))return new u(e);i.call(this,e),s.call(this,e),this.allowHalfOpen=!0,e&&(!1===e.readable&&(this.readable=!1),!1===e.writable&&(this.writable=!1),!1===e.allowHalfOpen&&(this.allowHalfOpen=!1,this.once("end",l)))}function l(){this._writableState.ended||r.nextTick(d,this)}function d(e){e.end()}Object.defineProperty(u.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(u.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(u.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(u.prototype,"destroyed",{enumerable:!1,get:function(){return this._readableState!==undefined&&this._writableState!==undefined&&(this._readableState.destroyed&&this._writableState.destroyed)},set:function(e){this._readableState!==undefined&&this._writableState!==undefined&&(this._readableState.destroyed=e,this._writableState.destroyed=e)}})}).call(this)}).call(this,e("_process"))}}},{package:"readable-stream",file:"/home/circleci/project/node_modules/simple-peer/node_modules/readable-stream/lib/_stream_duplex.js"}],[5684,{"../errors":5679,"./_stream_duplex":5680,"./internal/streams/destroy":5687,"./internal/streams/state":5691,"./internal/streams/stream":5692,_process:5294,buffer:2028,inherits:4329,"util-deprecate":5845},function(){with(this)return function(){"use strict";return function(e,t,r){(function(r){(function(){function n(e){var t=this;this.next=null,this.entry=null,this.finish=function(){!function(e,t,r){var n=e.entry;e.entry=null;for(;n;){var i=n.callback;t.pendingcb--,i(r),n=n.next}t.corkedRequestsFree.next=e}(t,e)}}var i;t.exports=C,C.WritableState=S;var s={deprecate:e("util-deprecate")},o=e("./internal/streams/stream"),a=e("buffer").Buffer,c=global.Uint8Array||function(){};var u,l=e("./internal/streams/destroy"),d=e("./internal/streams/state").getHighWaterMark,f=e("../errors").codes,h=f.ERR_INVALID_ARG_TYPE,p=f.ERR_METHOD_NOT_IMPLEMENTED,m=f.ERR_MULTIPLE_CALLBACK,g=f.ERR_STREAM_CANNOT_PIPE,y=f.ERR_STREAM_DESTROYED,b=f.ERR_STREAM_NULL_VALUES,_=f.ERR_STREAM_WRITE_AFTER_END,w=f.ERR_UNKNOWN_ENCODING,v=l.errorOrDestroy;function E(){}function S(t,s,o){i=i||e("./_stream_duplex"),t=t||{},"boolean"!=typeof o&&(o=s instanceof i),this.objectMode=!!t.objectMode,o&&(this.objectMode=this.objectMode||!!t.writableObjectMode),this.highWaterMark=d(this,t,"writableHighWaterMark",o),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var a=!1===t.decodeStrings;this.decodeStrings=!a,this.defaultEncoding=t.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(e){!function(e,t){var n=e._writableState,i=n.sync,s=n.writecb;if("function"!=typeof s)throw new m;if(function(e){e.writing=!1,e.writecb=null,e.length-=e.writelen,e.writelen=0}(n),t)!function(e,t,n,i,s){--t.pendingcb,n?(r.nextTick(s,i),r.nextTick(j,e,t),e._writableState.errorEmitted=!0,v(e,i)):(s(i),e._writableState.errorEmitted=!0,v(e,i),j(e,t))}(e,n,i,t,s);else{var o=A(n)||e.destroyed;o||n.corked||n.bufferProcessing||!n.bufferedRequest||T(e,n),i?r.nextTick(I,e,n,o,s):I(e,n,o,s)}}(s,e)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=!1!==t.emitClose,this.autoDestroy=!!t.autoDestroy,this.bufferedRequestCount=0,this.corkedRequestsFree=new n(this)}function C(t){var r=this instanceof(i=i||e("./_stream_duplex"));if(!r&&!u.call(C,this))return new C(t);this._writableState=new S(t,this,r),this.writable=!0,t&&("function"==typeof t.write&&(this._write=t.write),"function"==typeof t.writev&&(this._writev=t.writev),"function"==typeof t.destroy&&(this._destroy=t.destroy),"function"==typeof t.final&&(this._final=t.final)),o.call(this)}function k(e,t,r,n,i,s,o){t.writelen=n,t.writecb=o,t.writing=!0,t.sync=!0,t.destroyed?t.onwrite(new y("write")):r?e._writev(i,t.onwrite):e._write(i,s,t.onwrite),t.sync=!1}function I(e,t,r,n){r||function(e,t){0===t.length&&t.needDrain&&(t.needDrain=!1,e.emit("drain"))}(e,t),t.pendingcb--,n(),j(e,t)}function T(e,t){t.bufferProcessing=!0;var r=t.bufferedRequest;if(e._writev&&r&&r.next){var i=t.bufferedRequestCount,s=new Array(i),o=t.corkedRequestsFree;o.entry=r;for(var a=0,c=!0;r;)s[a]=r,r.isBuf||(c=!1),r=r.next,a+=1;s.allBuffers=c,k(e,t,!0,t.length,s,"",o.finish),t.pendingcb++,t.lastBufferedRequest=null,o.next?(t.corkedRequestsFree=o.next,o.next=null):t.corkedRequestsFree=new n(t),t.bufferedRequestCount=0}else{for(;r;){var u=r.chunk,l=r.encoding,d=r.callback;if(k(e,t,!1,t.objectMode?1:u.length,u,l,d),r=r.next,t.bufferedRequestCount--,t.writing)break}null===r&&(t.lastBufferedRequest=null)}t.bufferedRequest=r,t.bufferProcessing=!1}function A(e){return e.ending&&0===e.length&&null===e.bufferedRequest&&!e.finished&&!e.writing}function R(e,t){e._final((function(r){t.pendingcb--,r&&v(e,r),t.prefinished=!0,e.emit("prefinish"),j(e,t)}))}function j(e,t){var n=A(t);if(n&&(function(e,t){t.prefinished||t.finalCalled||("function"!=typeof e._final||t.destroyed?(t.prefinished=!0,e.emit("prefinish")):(t.pendingcb++,t.finalCalled=!0,r.nextTick(R,e,t)))}(e,t),0===t.pendingcb&&(t.finished=!0,e.emit("finish"),t.autoDestroy))){var i=e._readableState;(!i||i.autoDestroy&&i.endEmitted)&&e.destroy()}return n}e("inherits")(C,o),S.prototype.getBuffer=function(){for(var e=this.bufferedRequest,t=[];e;)t.push(e),e=e.next;return t},function(){try{Object.defineProperty(S.prototype,"buffer",{get:s.deprecate((function(){return this.getBuffer()}),"_writableState.buffer is deprecated. Use _writableState.getBuffer "+"instead.","DEP0003")})}catch(e){}}(),"function"==typeof Symbol&&Symbol.hasInstance&&"function"==typeof Function.prototype[Symbol.hasInstance]?(u=Function.prototype[Symbol.hasInstance],Object.defineProperty(C,Symbol.hasInstance,{value:function(e){return!!u.call(this,e)||this===C&&(e&&e._writableState instanceof S)}})):u=function(e){return e instanceof this},C.prototype.pipe=function(){v(this,new g)},C.prototype.write=function(e,t,n){var i,s=this._writableState,o=!1,u=!s.objectMode&&(i=e,a.isBuffer(i)||i instanceof c);return u&&!a.isBuffer(e)&&(e=function(e){return a.from(e)}(e)),"function"==typeof t&&(n=t,t=null),u?t="buffer":t||(t=s.defaultEncoding),"function"!=typeof n&&(n=E),s.ending?function(e,t){var n=new _;v(e,n),r.nextTick(t,n)}(this,n):(u||function(e,t,n,i){var s;return null===n?s=new b:"string"==typeof n||t.objectMode||(s=new h("chunk",["string","Buffer"],n)),!s||(v(e,s),r.nextTick(i,s),!1)}(this,s,e,n))&&(s.pendingcb++,o=function(e,t,r,n,i,s){if(!r){var o=function(e,t,r){e.objectMode||!1===e.decodeStrings||"string"!=typeof t||(t=a.from(t,r));return t}(t,n,i);n!==o&&(r=!0,i="buffer",n=o)}var c=t.objectMode?1:n.length;t.length+=c;var u=t.length<t.highWaterMark;u||(t.needDrain=!0);if(t.writing||t.corked){var l=t.lastBufferedRequest;t.lastBufferedRequest={chunk:n,encoding:i,isBuf:r,callback:s,next:null},l?l.next=t.lastBufferedRequest:t.bufferedRequest=t.lastBufferedRequest,t.bufferedRequestCount+=1}else k(e,t,!1,c,n,i,s);return u}(this,s,u,e,t,n)),o},C.prototype.cork=function(){this._writableState.corked++},C.prototype.uncork=function(){var e=this._writableState;e.corked&&(e.corked--,e.writing||e.corked||e.bufferProcessing||!e.bufferedRequest||T(this,e))},C.prototype.setDefaultEncoding=function(e){if("string"==typeof e&&(e=e.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((e+"").toLowerCase())>-1))throw new w(e);return this._writableState.defaultEncoding=e,this},Object.defineProperty(C.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(C.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),C.prototype._write=function(e,t,r){r(new p("_write()"))},C.prototype._writev=null,C.prototype.end=function(e,t,n){var i=this._writableState;return"function"==typeof e?(n=e,e=null,t=null):"function"==typeof t&&(n=t,t=null),null!==e&&e!==undefined&&this.write(e,t),i.corked&&(i.corked=1,this.uncork()),i.ending||function(e,t,n){t.ending=!0,j(e,t),n&&(t.finished?r.nextTick(n):e.once("finish",n));t.ended=!0,e.writable=!1}(this,i,n),this},Object.defineProperty(C.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(C.prototype,"destroyed",{enumerable:!1,get:function(){return this._writableState!==undefined&&this._writableState.destroyed},set:function(e){this._writableState&&(this._writableState.destroyed=e)}}),C.prototype.destroy=l.destroy,C.prototype._undestroy=l.undestroy,C.prototype._destroy=function(e,t){t(e)}}).call(this)}).call(this,e("_process"))}}},{package:"readable-stream",file:"/home/circleci/project/node_modules/simple-peer/node_modules/readable-stream/lib/_stream_writable.js"}],[5683,{"../errors":5679,"./_stream_duplex":5680,inherits:4329},function(){with(this)return function(){"use strict";return function(e,t,r){t.exports=l;var n=e("../errors").codes,i=n.ERR_METHOD_NOT_IMPLEMENTED,s=n.ERR_MULTIPLE_CALLBACK,o=n.ERR_TRANSFORM_ALREADY_TRANSFORMING,a=n.ERR_TRANSFORM_WITH_LENGTH_0,c=e("./_stream_duplex");function u(e,t){var r=this._transformState;r.transforming=!1;var n=r.writecb;if(null===n)return this.emit("error",new s);r.writechunk=null,r.writecb=null,null!=t&&this.push(t),n(e);var i=this._readableState;i.reading=!1,(i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}function l(e){if(!(this instanceof l))return new l(e);c.call(this,e),this._transformState={afterTransform:u.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,e&&("function"==typeof e.transform&&(this._transform=e.transform),"function"==typeof e.flush&&(this._flush=e.flush)),this.on("prefinish",d)}function d(){var e=this;"function"!=typeof this._flush||this._readableState.destroyed?f(this,null,null):this._flush((function(t,r){f(e,t,r)}))}function f(e,t,r){if(t)return e.emit("error",t);if(null!=r&&e.push(r),e._writableState.length)throw new a;if(e._transformState.transforming)throw new o;return e.push(null)}e("inherits")(l,c),l.prototype.push=function(e,t){return this._transformState.needTransform=!1,c.prototype.push.call(this,e,t)},l.prototype._transform=function(e,t,r){r(new i("_transform()"))},l.prototype._write=function(e,t,r){var n=this._transformState;if(n.writecb=r,n.writechunk=e,n.writeencoding=t,!n.transforming){var i=this._readableState;(n.needTransform||i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}},l.prototype._read=function(e){var t=this._transformState;null===t.writechunk||t.transforming?t.needTransform=!0:(t.transforming=!0,this._transform(t.writechunk,t.writeencoding,t.afterTransform))},l.prototype._destroy=function(e,t){c.prototype._destroy.call(this,e,(function(e){t(e)}))}}}},{package:"readable-stream",file:"/home/circleci/project/node_modules/simple-peer/node_modules/readable-stream/lib/_stream_transform.js"}],[5681,{"./_stream_transform":5683,inherits:4329},function(){with(this)return function(){"use strict";return function(e,t,r){t.exports=i;var n=e("./_stream_transform");function i(e){if(!(this instanceof i))return new i(e);n.call(this,e)}e("inherits")(i,n),i.prototype._transform=function(e,t,r){r(null,e)}}}},{package:"readable-stream",file:"/home/circleci/project/node_modules/simple-peer/node_modules/readable-stream/lib/_stream_passthrough.js"}],[5682,{"../errors":5679,"./_stream_duplex":5680,"./internal/streams/async_iterator":5685,"./internal/streams/buffer_list":5686,"./internal/streams/destroy":5687,"./internal/streams/from":5689,"./internal/streams/state":5691,"./internal/streams/stream":5692,_process:5294,buffer:2028,events:2029,inherits:4329,"string_decoder/":5755,util:2027},function(){with(this)return function(){"use strict";return function(e,t,r){(function(r){(function(){var n;t.exports=C,C.ReadableState=S;e("events").EventEmitter;var i=function(e,t){return e.listeners(t).length},s=e("./internal/streams/stream"),o=e("buffer").Buffer,a=global.Uint8Array||function(){};var c,u=e("util");c=u&&u.debuglog?u.debuglog("stream"):function(){};var l,d,f,h=e("./internal/streams/buffer_list"),p=e("./internal/streams/destroy"),m=e("./internal/streams/state").getHighWaterMark,g=e("../errors").codes,y=g.ERR_INVALID_ARG_TYPE,b=g.ERR_STREAM_PUSH_AFTER_EOF,_=g.ERR_METHOD_NOT_IMPLEMENTED,w=g.ERR_STREAM_UNSHIFT_AFTER_END_EVENT;e("inherits")(C,s);var v=p.errorOrDestroy,E=["error","close","destroy","pause","resume"];function S(t,r,i){n=n||e("./_stream_duplex"),t=t||{},"boolean"!=typeof i&&(i=r instanceof n),this.objectMode=!!t.objectMode,i&&(this.objectMode=this.objectMode||!!t.readableObjectMode),this.highWaterMark=m(this,t,"readableHighWaterMark",i),this.buffer=new h,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.paused=!0,this.emitClose=!1!==t.emitClose,this.autoDestroy=!!t.autoDestroy,this.destroyed=!1,this.defaultEncoding=t.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,t.encoding&&(l||(l=e("string_decoder/").StringDecoder),this.decoder=new l(t.encoding),this.encoding=t.encoding)}function C(t){if(n=n||e("./_stream_duplex"),!(this instanceof C))return new C(t);var r=this instanceof n;this._readableState=new S(t,this,r),this.readable=!0,t&&("function"==typeof t.read&&(this._read=t.read),"function"==typeof t.destroy&&(this._destroy=t.destroy)),s.call(this)}function k(e,t,r,n,i){c("readableAddChunk",t);var s,u=e._readableState;if(null===t)u.reading=!1,function(e,t){if(c("onEofChunk"),t.ended)return;if(t.decoder){var r=t.decoder.end();r&&r.length&&(t.buffer.push(r),t.length+=t.objectMode?1:r.length)}t.ended=!0,t.sync?R(e):(t.needReadable=!1,t.emittedReadable||(t.emittedReadable=!0,j(e)))}(e,u);else if(i||(s=function(e,t){var r;n=t,o.isBuffer(n)||n instanceof a||"string"==typeof t||t===undefined||e.objectMode||(r=new y("chunk",["string","Buffer","Uint8Array"],t));var n;return r}(u,t)),s)v(e,s);else if(u.objectMode||t&&t.length>0)if("string"==typeof t||u.objectMode||Object.getPrototypeOf(t)===o.prototype||(t=function(e){return o.from(e)}(t)),n)u.endEmitted?v(e,new w):I(e,u,t,!0);else if(u.ended)v(e,new b);else{if(u.destroyed)return!1;u.reading=!1,u.decoder&&!r?(t=u.decoder.write(t),u.objectMode||0!==t.length?I(e,u,t,!1):x(e,u)):I(e,u,t,!1)}else n||(u.reading=!1,x(e,u));return!u.ended&&(u.length<u.highWaterMark||0===u.length)}function I(e,t,r,n){t.flowing&&0===t.length&&!t.sync?(t.awaitDrain=0,e.emit("data",r)):(t.length+=t.objectMode?1:r.length,n?t.buffer.unshift(r):t.buffer.push(r),t.needReadable&&R(e)),x(e,t)}Object.defineProperty(C.prototype,"destroyed",{enumerable:!1,get:function(){return this._readableState!==undefined&&this._readableState.destroyed},set:function(e){this._readableState&&(this._readableState.destroyed=e)}}),C.prototype.destroy=p.destroy,C.prototype._undestroy=p.undestroy,C.prototype._destroy=function(e,t){t(e)},C.prototype.push=function(e,t){var r,n=this._readableState;return n.objectMode?r=!0:"string"==typeof e&&((t=t||n.defaultEncoding)!==n.encoding&&(e=o.from(e,t),t=""),r=!0),k(this,e,t,!1,r)},C.prototype.unshift=function(e){return k(this,e,null,!0,!1)},C.prototype.isPaused=function(){return!1===this._readableState.flowing},C.prototype.setEncoding=function(t){l||(l=e("string_decoder/").StringDecoder);var r=new l(t);this._readableState.decoder=r,this._readableState.encoding=this._readableState.decoder.encoding;for(var n=this._readableState.buffer.head,i="";null!==n;)i+=r.write(n.data),n=n.next;return this._readableState.buffer.clear(),""!==i&&this._readableState.buffer.push(i),this._readableState.length=i.length,this};var T=1073741824;function A(e,t){return e<=0||0===t.length&&t.ended?0:t.objectMode?1:e!=e?t.flowing&&t.length?t.buffer.head.data.length:t.length:(e>t.highWaterMark&&(t.highWaterMark=function(e){return e>=T?e=T:(e--,e|=e>>>1,e|=e>>>2,e|=e>>>4,e|=e>>>8,e|=e>>>16,e++),e}(e)),e<=t.length?e:t.ended?t.length:(t.needReadable=!0,0))}function R(e){var t=e._readableState;c("emitReadable",t.needReadable,t.emittedReadable),t.needReadable=!1,t.emittedReadable||(c("emitReadable",t.flowing),t.emittedReadable=!0,r.nextTick(j,e))}function j(e){var t=e._readableState;c("emitReadable_",t.destroyed,t.length,t.ended),t.destroyed||!t.length&&!t.ended||(e.emit("readable"),t.emittedReadable=!1),t.needReadable=!t.flowing&&!t.ended&&t.length<=t.highWaterMark,D(e)}function x(e,t){t.readingMore||(t.readingMore=!0,r.nextTick(N,e,t))}function N(e,t){for(;!t.reading&&!t.ended&&(t.length<t.highWaterMark||t.flowing&&0===t.length);){var r=t.length;if(c("maybeReadMore read 0"),e.read(0),r===t.length)break}t.readingMore=!1}function P(e){var t=e._readableState;t.readableListening=e.listenerCount("readable")>0,t.resumeScheduled&&!t.paused?t.flowing=!0:e.listenerCount("data")>0&&e.resume()}function L(e){c("readable nexttick read 0"),e.read(0)}function O(e,t){c("resume",t.reading),t.reading||e.read(0),t.resumeScheduled=!1,e.emit("resume"),D(e),t.flowing&&!t.reading&&e.read(0)}function D(e){var t=e._readableState;for(c("flow",t.flowing);t.flowing&&null!==e.read(););}function B(e,t){return 0===t.length?null:(t.objectMode?r=t.buffer.shift():!e||e>=t.length?(r=t.decoder?t.buffer.join(""):1===t.buffer.length?t.buffer.first():t.buffer.concat(t.length),t.buffer.clear()):r=t.buffer.consume(e,t.decoder),r);var r}function M(e){var t=e._readableState;c("endReadable",t.endEmitted),t.endEmitted||(t.ended=!0,r.nextTick(U,t,e))}function U(e,t){if(c("endReadableNT",e.endEmitted,e.length),!e.endEmitted&&0===e.length&&(e.endEmitted=!0,t.readable=!1,t.emit("end"),e.autoDestroy)){var r=t._writableState;(!r||r.autoDestroy&&r.finished)&&t.destroy()}}function F(e,t){for(var r=0,n=e.length;r<n;r++)if(e[r]===t)return r;return-1}C.prototype.read=function(e){c("read",e),e=parseInt(e,10);var t=this._readableState,r=e;if(0!==e&&(t.emittedReadable=!1),0===e&&t.needReadable&&((0!==t.highWaterMark?t.length>=t.highWaterMark:t.length>0)||t.ended))return c("read: emitReadable",t.length,t.ended),0===t.length&&t.ended?M(this):R(this),null;if(0===(e=A(e,t))&&t.ended)return 0===t.length&&M(this),null;var n,i=t.needReadable;return c("need readable",i),(0===t.length||t.length-e<t.highWaterMark)&&c("length less than watermark",i=!0),t.ended||t.reading?c("reading or ended",i=!1):i&&(c("do read"),t.reading=!0,t.sync=!0,0===t.length&&(t.needReadable=!0),this._read(t.highWaterMark),t.sync=!1,t.reading||(e=A(r,t))),null===(n=e>0?B(e,t):null)?(t.needReadable=t.length<=t.highWaterMark,e=0):(t.length-=e,t.awaitDrain=0),0===t.length&&(t.ended||(t.needReadable=!0),r!==e&&t.ended&&M(this)),null!==n&&this.emit("data",n),n},C.prototype._read=function(e){v(this,new _("_read()"))},C.prototype.pipe=function(e,t){var n=this,s=this._readableState;switch(s.pipesCount){case 0:s.pipes=e;break;case 1:s.pipes=[s.pipes,e];break;default:s.pipes.push(e)}s.pipesCount+=1,c("pipe count=%d opts=%j",s.pipesCount,t);var o=(!t||!1!==t.end)&&e!==r.stdout&&e!==r.stderr?u:g;function a(t,r){c("onunpipe"),t===n&&r&&!1===r.hasUnpiped&&(r.hasUnpiped=!0,c("cleanup"),e.removeListener("close",p),e.removeListener("finish",m),e.removeListener("drain",l),e.removeListener("error",h),e.removeListener("unpipe",a),n.removeListener("end",u),n.removeListener("end",g),n.removeListener("data",f),d=!0,!s.awaitDrain||e._writableState&&!e._writableState.needDrain||l())}function u(){c("onend"),e.end()}s.endEmitted?r.nextTick(o):n.once("end",o),e.on("unpipe",a);var l=function(e){return function(){var t=e._readableState;c("pipeOnDrain",t.awaitDrain),t.awaitDrain&&t.awaitDrain--,0===t.awaitDrain&&i(e,"data")&&(t.flowing=!0,D(e))}}(n);e.on("drain",l);var d=!1;function f(t){c("ondata");var r=e.write(t);c("dest.write",r),!1===r&&((1===s.pipesCount&&s.pipes===e||s.pipesCount>1&&-1!==F(s.pipes,e))&&!d&&(c("false write response, pause",s.awaitDrain),s.awaitDrain++),n.pause())}function h(t){c("onerror",t),g(),e.removeListener("error",h),0===i(e,"error")&&v(e,t)}function p(){e.removeListener("finish",m),g()}function m(){c("onfinish"),e.removeListener("close",p),g()}function g(){c("unpipe"),n.unpipe(e)}return n.on("data",f),function(e,t,r){if("function"==typeof e.prependListener)return e.prependListener(t,r);e._events&&e._events[t]?Array.isArray(e._events[t])?e._events[t].unshift(r):e._events[t]=[r,e._events[t]]:e.on(t,r)}(e,"error",h),e.once("close",p),e.once("finish",m),e.emit("pipe",n),s.flowing||(c("pipe resume"),n.resume()),e},C.prototype.unpipe=function(e){var t=this._readableState,r={hasUnpiped:!1};if(0===t.pipesCount)return this;if(1===t.pipesCount)return e&&e!==t.pipes||(e||(e=t.pipes),t.pipes=null,t.pipesCount=0,t.flowing=!1,e&&e.emit("unpipe",this,r)),this;if(!e){var n=t.pipes,i=t.pipesCount;t.pipes=null,t.pipesCount=0,t.flowing=!1;for(var s=0;s<i;s++)n[s].emit("unpipe",this,{hasUnpiped:!1});return this}var o=F(t.pipes,e);return-1===o||(t.pipes.splice(o,1),t.pipesCount-=1,1===t.pipesCount&&(t.pipes=t.pipes[0]),e.emit("unpipe",this,r)),this},C.prototype.on=function(e,t){var n=s.prototype.on.call(this,e,t),i=this._readableState;return"data"===e?(i.readableListening=this.listenerCount("readable")>0,!1!==i.flowing&&this.resume()):"readable"===e&&(i.endEmitted||i.readableListening||(i.readableListening=i.needReadable=!0,i.flowing=!1,i.emittedReadable=!1,c("on readable",i.length,i.reading),i.length?R(this):i.reading||r.nextTick(L,this))),n},C.prototype.addListener=C.prototype.on,C.prototype.removeListener=function(e,t){var n=s.prototype.removeListener.call(this,e,t);return"readable"===e&&r.nextTick(P,this),n},C.prototype.removeAllListeners=function(e){var t=s.prototype.removeAllListeners.apply(this,arguments);return"readable"!==e&&e!==undefined||r.nextTick(P,this),t},C.prototype.resume=function(){var e=this._readableState;return e.flowing||(c("resume"),e.flowing=!e.readableListening,function(e,t){t.resumeScheduled||(t.resumeScheduled=!0,r.nextTick(O,e,t))}(this,e)),e.paused=!1,this},C.prototype.pause=function(){return c("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(c("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState.paused=!0,this},C.prototype.wrap=function(e){var t=this,r=this._readableState,n=!1;for(var i in e.on("end",(function(){if(c("wrapped end"),r.decoder&&!r.ended){var e=r.decoder.end();e&&e.length&&t.push(e)}t.push(null)})),e.on("data",(function(i){(c("wrapped data"),r.decoder&&(i=r.decoder.write(i)),!r.objectMode||null!==i&&i!==undefined)&&((r.objectMode||i&&i.length)&&(t.push(i)||(n=!0,e.pause())))})),e)this[i]===undefined&&"function"==typeof e[i]&&(this[i]=function(t){return function(){return e[t].apply(e,arguments)}}(i));for(var s=0;s<E.length;s++)e.on(E[s],this.emit.bind(this,E[s]));return this._read=function(t){c("wrapped _read",t),n&&(n=!1,e.resume())},this},"function"==typeof Symbol&&(C.prototype[Symbol.asyncIterator]=function(){return d===undefined&&(d=e("./internal/streams/async_iterator")),d(this)}),Object.defineProperty(C.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),Object.defineProperty(C.prototype,"readableBuffer",{enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}}),Object.defineProperty(C.prototype,"readableFlowing",{enumerable:!1,get:function(){return this._readableState.flowing},set:function(e){this._readableState&&(this._readableState.flowing=e)}}),C._fromList=B,Object.defineProperty(C.prototype,"readableLength",{enumerable:!1,get:function(){return this._readableState.length}}),"function"==typeof Symbol&&(C.from=function(t,r){return f===undefined&&(f=e("./internal/streams/from")),f(C,t,r)})}).call(this)}).call(this,e("_process"))}}},{package:"readable-stream",file:"/home/circleci/project/node_modules/simple-peer/node_modules/readable-stream/lib/_stream_readable.js"}],[5271,{},function(){with(this)return function(){"use strict";return function(e,t,r){var n=/^(?:(?![^:@]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,i=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];t.exports=function(e){var t=e,r=e.indexOf("["),s=e.indexOf("]");-1!=r&&-1!=s&&(e=e.substring(0,r)+e.substring(r,s).replace(/:/g,";")+e.substring(s,e.length));for(var o,a,c=n.exec(e||""),u={},l=14;l--;)u[i[l]]=c[l]||"";return-1!=r&&-1!=s&&(u.source=t,u.host=u.host.substring(1,u.host.length-1).replace(/;/g,":"),u.authority=u.authority.replace("[","").replace("]","").replace(/;/g,":"),u.ipv6uri=!0),u.pathNames=function(e,t){var r=/\/{2,9}/g,n=t.replace(r,"/").split("/");"/"!=t.substr(0,1)&&0!==t.length||n.splice(0,1);"/"==t.substr(t.length-1,1)&&n.splice(n.length-1,1);return n}(0,u.path),u.queryKey=(o=u.query,a={},o.replace(/(?:^|&)([^&=]*)=?([^&]*)/g,(function(e,t,r){t&&(a[t]=r)})),a),u}}}},{package:"parseuri",file:"/home/circleci/project/node_modules/parseuri/index.js"}],[5698,{},function(){with(this)return function(){"use strict";return function(e,t,r){t.exports=function(e,t,r){return e.on(t,r),{destroy:function(){e.removeListener(t,r)}}}}}},{package:"socket.io-client",file:"/home/circleci/project/node_modules/socket.io-client/lib/on.js"}],[5777,{},function(){with(this)return function(){"use strict";return function(e,t,r){t.exports=function(e,t){for(var r=[],n=(t=t||0)||0;n<e.length;n++)r[n-t]=e[n];return r}}}},{package:"to-array",file:"/home/circleci/project/node_modules/to-array/index.js"}],[5270,{},function(){with(this)return function(){"use strict";return function(e,t,r){r.encode=function(e){var t="";for(var r in e)e.hasOwnProperty(r)&&(t.length&&(t+="&"),t+=encodeURIComponent(r)+"="+encodeURIComponent(e[r]));return t},r.decode=function(e){for(var t={},r=e.split("&"),n=0,i=r.length;n<i;n++){var s=r[n].split("=");t[decodeURIComponent(s[0])]=decodeURIComponent(s[1])}return t}}}},{package:"parseqs",file:"/home/circleci/project/node_modules/parseqs/index.js"}],[2092,{},function(){with(this)return function(){"use strict";return function(e,t,r){var n=[].slice;t.exports=function(e,t){if("string"==typeof t&&(t=e[t]),"function"!=typeof t)throw new Error("bind() requires a function");var r=n.call(arguments,2);return function(){return t.apply(e,r.concat(n.call(arguments)))}}}}},{package:"component-bind",file:"/home/circleci/project/node_modules/component-bind/index.js"}],[4280,{buffer:2028,isarray:4281},function(){with(this)return function(){"use strict";return function(e,t,r){(function(r){(function(){var n=e("isarray"),i=Object.prototype.toString,s="function"==typeof Blob||"undefined"!=typeof Blob&&"[object BlobConstructor]"===i.call(Blob),o="function"==typeof File||"undefined"!=typeof File&&"[object FileConstructor]"===i.call(File);t.exports=function e(t){if(!t||"object"!=typeof t)return!1;if(n(t)){for(var i=0,a=t.length;i<a;i++)if(e(t[i]))return!0;return!1}if("function"==typeof r&&r.isBuffer&&r.isBuffer(t)||"function"==typeof ArrayBuffer&&t instanceof ArrayBuffer||s&&t instanceof Blob||o&&t instanceof File)return!0;if(t.toJSON&&"function"==typeof t.toJSON&&1===arguments.length)return e(t.toJSON(),!0);for(var c in t)if(Object.prototype.hasOwnProperty.call(t,c)&&e(t[c]))return!0;return!1}}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"has-binary2",file:"/home/circleci/project/node_modules/has-binary2/index.js"}],[5702,{ms:5703},function(){with(this)return function(){"use strict";return function(e,t,r){function n(e){var t;function n(){if(n.enabled){var e=n,i=+new Date,s=i-(t||i);e.diff=s,e.prev=t,e.curr=i,t=i;for(var o=new Array(arguments.length),a=0;a<o.length;a++)o[a]=arguments[a];o[0]=r.coerce(o[0]),"string"!=typeof o[0]&&o.unshift("%O");var c=0;o[0]=o[0].replace(/%([a-zA-Z%])/g,(function(t,n){if("%%"===t)return t;c++;var i=r.formatters[n];if("function"==typeof i){var s=o[c];t=i.call(e,s),o.splice(c,1),c--}return t})),r.formatArgs.call(e,o);var u=n.log||r.log||console.log.bind(console);u.apply(e,o)}}return n.namespace=e,n.enabled=r.enabled(e),n.useColors=r.useColors(),n.color=function(e){var t,n=0;for(t in e)n=(n<<5)-n+e.charCodeAt(t),n|=0;return r.colors[Math.abs(n)%r.colors.length]}(e),n.destroy=i,"function"==typeof r.init&&r.init(n),r.instances.push(n),n}function i(){var e=r.instances.indexOf(this);return-1!==e&&(r.instances.splice(e,1),!0)}(r=t.exports=n.debug=n.default=n).coerce=function(e){return e instanceof Error?e.stack||e.message:e},r.disable=function(){r.enable("")},r.enable=function(e){var t;r.save(e),r.names=[],r.skips=[];var n=("string"==typeof e?e:"").split(/[\s,]+/),i=n.length;for(t=0;t<i;t++)n[t]&&("-"===(e=n[t].replace(/\*/g,".*?"))[0]?r.skips.push(new RegExp("^"+e.substr(1)+"$")):r.names.push(new RegExp("^"+e+"$")));for(t=0;t<r.instances.length;t++){var s=r.instances[t];s.enabled=r.enabled(s.namespace)}},r.enabled=function(e){if("*"===e[e.length-1])return!0;var t,n;for(t=0,n=r.skips.length;t<n;t++)if(r.skips[t].test(e))return!1;for(t=0,n=r.names.length;t<n;t++)if(r.names[t].test(e))return!0;return!1},r.humanize=e("ms"),r.instances=[],r.names=[],r.skips=[],r.formatters={}}}},{package:"debug",file:"/home/circleci/project/node_modules/socket.io-client/node_modules/debug/src/debug.js"}],[5709,{},function(){with(this)return function(){"use strict";return function(e,t,r){var n={}.toString;t.exports=Array.isArray||function(e){return"[object Array]"==n.call(e)}}}},{package:"isarray",file:"/home/circleci/project/node_modules/socket.io-parser/node_modules/isarray/index.js"}],[5706,{buffer:2028},function(){with(this)return function(){"use strict";return function(e,t,r){(function(e){(function(){t.exports=function(t){return r&&e.isBuffer(t)||n&&(t instanceof ArrayBuffer||function(e){return"function"==typeof ArrayBuffer.isView?ArrayBuffer.isView(e):e.buffer instanceof ArrayBuffer}(t))};var r="function"==typeof e&&"function"==typeof e.isBuffer,n="function"==typeof ArrayBuffer}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"socket.io-parser",file:"/home/circleci/project/node_modules/socket.io-parser/is-buffer.js"}],[5704,{"./is-buffer":5706,isarray:5709},function(){with(this)return function(){"use strict";return function(e,t,r){var n=e("isarray"),i=e("./is-buffer"),s=Object.prototype.toString,o="function"==typeof Blob||"undefined"!=typeof Blob&&"[object BlobConstructor]"===s.call(Blob),a="function"==typeof File||"undefined"!=typeof File&&"[object FileConstructor]"===s.call(File);function c(e,t){if(!e)return e;if(i(e)){var r={_placeholder:!0,num:t.length};return t.push(e),r}if(n(e)){for(var s=new Array(e.length),o=0;o<e.length;o++)s[o]=c(e[o],t);return s}if("object"==typeof e&&!(e instanceof Date)){s={};for(var a in e)s[a]=c(e[a],t);return s}return e}function u(e,t){if(!e)return e;if(e&&e._placeholder)return t[e.num];if(n(e))for(var r=0;r<e.length;r++)e[r]=u(e[r],t);else if("object"==typeof e)for(var i in e)e[i]=u(e[i],t);return e}r.deconstructPacket=function(e){var t=[],r=e.data,n=e;return n.data=c(r,t),n.attachments=t.length,{packet:n,buffers:t}},r.reconstructPacket=function(e,t){return e.data=u(e.data,t),e.attachments=undefined,e},r.removeBlobs=function(e,t){var r=0,s=e;!function e(c,u,l){if(!c)return c;if(o&&c instanceof Blob||a&&c instanceof File){r++;var d=new FileReader;d.onload=function(){l?l[u]=this.result:s=this.result,--r||t(s)},d.readAsArrayBuffer(c)}else if(n(c))for(var f=0;f<c.length;f++)e(c[f],f,c);else if("object"==typeof c&&!i(c))for(var h in c)e(c[h],h,c)}(s),r||t(s)}}}},{package:"socket.io-parser",file:"/home/circleci/project/node_modules/socket.io-parser/binary.js"}],[5707,{"./debug":5708,_process:5294},function(){with(this)return function(){"use strict";return function(e,t,r){(function(n){(function(){function i(){var e;try{e=r.storage.debug}catch(e){}return!e&&void 0!==n&&"env"in n&&(e=n.env.DEBUG),e}(r=t.exports=e("./debug")).log=function(){return"object"==typeof console&&console.log&&Function.prototype.apply.call(console.log,console,arguments)},r.formatArgs=function(e){var t=this.useColors;if(e[0]=(t?"%c":"")+this.namespace+(t?" %c":" ")+e[0]+(t?"%c ":" ")+"+"+r.humanize(this.diff),!t)return;var n="color: "+this.color;e.splice(1,0,n,"color: inherit");var i=0,s=0;e[0].replace(/%[a-zA-Z%]/g,(function(e){"%%"!==e&&(i++,"%c"===e&&(s=i))})),e.splice(s,0,n)},r.save=function(e){try{null==e?r.storage.removeItem("debug"):r.storage.debug=e}catch(e){}},r.load=i,r.useColors=function(){if("undefined"!=typeof window&&window.process&&"renderer"===window.process.type)return!0;if("undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))return!1;return"undefined"!=typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!=typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)},r.storage="undefined"!=typeof chrome&&void 0!==chrome.storage?chrome.storage.local:function(){try{return window.localStorage}catch(e){}}(),r.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],r.formatters.j=function(e){try{return JSON.stringify(e)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}},r.enable(i())}).call(this)}).call(this,e("_process"))}}},{package:"debug",file:"/home/circleci/project/node_modules/socket.io-parser/node_modules/debug/src/browser.js"}],[4328,{},function(){with(this)return function(){"use strict";return function(e,t,r){var n=[].indexOf;t.exports=function(e,t){if(n)return e.indexOf(t);for(var r=0;r<e.length;++r)if(e[r]===t)return r;return-1}}}},{package:"indexof",file:"/home/circleci/project/node_modules/indexof/index.js"}],[1890,{},function(){with(this)return function(){"use strict";return function(e,t,r){function n(e){e=e||{},this.ms=e.min||100,this.max=e.max||1e4,this.factor=e.factor||2,this.jitter=e.jitter>0&&e.jitter<=1?e.jitter:0,this.attempts=0}t.exports=n,n.prototype.duration=function(){var e=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var t=Math.random(),r=Math.floor(t*this.jitter*e);e=0==(1&Math.floor(10*t))?e-r:e+r}return 0|Math.min(e,this.max)},n.prototype.reset=function(){this.attempts=0},n.prototype.setMin=function(e){this.ms=e},n.prototype.setMax=function(e){this.max=e},n.prototype.setJitter=function(e){this.jitter=e}}}},{package:"backo2",file:"/home/circleci/project/node_modules/backo2/index.js"}],[2284,{"./socket":2285,"engine.io-parser":2296},function(){with(this)return function(){"use strict";return function(e,t,r){t.exports=e("./socket"),t.exports.parser=e("engine.io-parser")}}},{package:"engine.io-client",file:"/home/circleci/project/node_modules/engine.io-client/lib/index.js"}],[4831,{},function(){with(this)return function(){"use strict";return function(e,t,r){t.exports={PROTOCOL:"/ipfs/ping/1.0.0",PING_LENGTH:32}}}},{package:"libp2p-ping",file:"/home/circleci/project/node_modules/libp2p-ping/src/constants.js"}],[4835,{"./constants":4831,"libp2p-crypto":4773},function(){with(this)return function(){"use strict";return function(e,t,r){const n=e("libp2p-crypto"),i=e("./constants");t.exports.rnd=e=>(e||(e=i.PING_LENGTH),n.randomBytes(e))}}},{package:"libp2p-ping",file:"/home/circleci/project/node_modules/libp2p-ping/src/util.js"}],[4789,{debug:2197},function(){with(this)return function(){"use strict";return function(e,t,r){const n=e("debug"),i=n("libp2p:floodsub");i.err=n("libp2p:floodsub:error"),t.exports={log:i,multicodec:"/floodsub/1.0.0"}}}},{package:"libp2p-floodsub",file:"/home/circleci/project/node_modules/libp2p-floodsub/src/config.js"}],[4836,{"./message":4837,"./message/sign":4839,"./peer":4841,"./utils":4842,"async/each":1680,"async/nextTick":1714,debug:2197,"err-code":2299,events:2029,"pull-stream/pull":5352,"pull-stream/sources/empty":5362,"time-cache":5771},function(){with(this)return function(){"use strict";return function(e,t,r){const n=e("events"),i=e("pull-stream/pull"),s=e("pull-stream/sources/empty"),o=e("async/each"),a=e("time-cache"),c=e("debug"),u=e("err-code"),l=e("./peer"),d=e("./message"),{signMessage:f}=e("./message/sign"),h=e("./utils"),p=e("async/nextTick");t.exports=class extends n{constructor(e,t,r,n){super(),n={signMessages:!0,...n},this.log=c(e),this.log.err=c(`${e}:error`),this.multicodec=t,this.libp2p=r,this.started=!1,n.signMessages&&(this.peerId=this.libp2p.peerInfo.id),this.topics=new Map,this.seenCache=new a,this.peers=new Map,this._dials=new Set,this._onConnection=this._onConnection.bind(this),this._dialPeer=this._dialPeer.bind(this)}_addPeer(e){const t=e.info.id.toB58String();let r=this.peers.get(t);return r||(this.log("new peer",t),this.peers.set(t,e),r=e,e.once("close",(()=>this._removePeer(e)))),++r._references,r}_removePeer(e){const t=e.info.id.toB58String();return this.log("remove",t,e._references),0==--e._references&&(this.log("delete peer",t),this.peers.delete(t)),e}_dialPeer(e,t){t=t||function(){};const r=e.id.toB58String(),n=this.peers.get(r);return n&&n.isConnected?p((()=>t())):this._dials.has(r)?(this.log("already dialing %s, ignoring dial attempt",r),p((()=>t()))):(this._dials.add(r),this.log("dialing %s",r),void this.libp2p.dialProtocol(e,this.multicodec,((n,i)=>{this.log("dial to %s complete",r);const s=!this._dials.has(r);return this._dials.delete(r),n?(this.log.err(n),t()):s?(this.log("pubsub was stopped, not processing dial to %s",r),t()):void this._onDial(e,i,t)})))}_onDial(e,t,r){const n=e.id.toB58String();this.log("connected",n);this._addPeer(new l(e)).attachConnection(t),p((()=>r()))}_onConnection(e,t){t.getPeerInfo(((e,r)=>{if(e)return this.log.err("Failed to identify incomming conn",e),i(s(),t);const n=r.id.toB58String(),o=this._addPeer(new l(r));this._processConnection(n,t,o)}))}_processConnection(e,t,r){throw u("_processConnection must be implemented by the subclass","ERR_NOT_IMPLEMENTED")}_onConnectionEnd(e,t,r){r&&"socket hang up"!==r.message&&this.log.err(r),this.log("connection ended",e,r?r.message:""),this._removePeer(t)}_buildMessage(e,t){const r=h.normalizeOutRpcMessage(e);this.peerId?f(this.peerId,r,t):p(t,null,r)}publish(e,t,r){throw u("publish must be implemented by the subclass","ERR_NOT_IMPLEMENTED")}subscribe(e){throw u("subscribe must be implemented by the subclass","ERR_NOT_IMPLEMENTED")}unsubscribe(e){throw u("unsubscribe must be implemented by the subclass","ERR_NOT_IMPLEMENTED")}start(e){if(this.started)return p((()=>e(new Error("already started"))));this.log("starting"),this.libp2p.handle(this.multicodec,this._onConnection),this.libp2p.on("peer:connect",this._dialPeer);const t=Object.values(this.libp2p.peerBook.getAll());o(t,((e,t)=>this._dialPeer(e,t)),(t=>{p((()=>{this.log("started"),this.started=!0,e(t)}))}))}stop(e){if(!this.started)return p((()=>e(new Error("not started yet"))));this.libp2p.unhandle(this.multicodec),this.libp2p.removeListener("peer:connect",this._dialPeer),this._dials=new Set,this.log("stopping"),o(this.peers.values(),((e,t)=>e.close(t)),(t=>{if(t)return e(t);this.log("stopped"),this.peers=new Map,this.started=!1,e()}))}},t.exports.message=d,t.exports.utils=h}}},{package:"libp2p-pubsub",file:"/home/circleci/project/node_modules/libp2p-pubsub/src/index.js"}],[4894,{"bignumber.js":4873,events:2029,"moving-average":5080,retimer:5591},function(){with(this)return function(){"use strict";return function(e,t,r){const n=e("events"),i=e("bignumber.js"),s=e("moving-average"),o=e("retimer");t.exports=class extends n{constructor(e,t){super(),this._options=t,this._queue=[],this._stats={},this._frequencyLastTime=Date.now(),this._frequencyAccumulators={},this._movingAverages={},this._update=this._update.bind(this);const r=this._options.movingAverageIntervals;for(var n=0;n<e.length;n++){var o=e[n];this._stats[o]=i(0),this._movingAverages[o]={};for(var a=0;a<r.length;a++){var c=r[a];(this._movingAverages[o][c]=s(c)).push(this._frequencyLastTime,0)}}}start(){this._queue.length&&this._resetComputeTimeout()}stop(){this._timeout&&(this._timeout.clear(),this._timeout=null)}get snapshot(){return Object.assign({},this._stats)}get movingAverages(){return Object.assign({},this._movingAverages)}push(e,t){this._queue.push([e,t,Date.now()]),this._resetComputeTimeout()}_resetComputeTimeout(){this._timeout?this._timeout.reschedule(this._nextTimeout()):this._timeout=o(this._update,this._nextTimeout())}_nextTimeout(){const e=this._queue.length/this._options.computeThrottleMaxQueueSize;return Math.max(this._options.computeThrottleTimeout*(1-e),0)}_update(){if(this._timeout=null,this._queue.length){let e;for(;this._queue.length;){const t=e=this._queue.shift();this._applyOp(t)}this._updateFrequency(e[2]),this.emit("update",this._stats)}}_updateFrequency(e){const t=e-this._frequencyLastTime;Object.keys(this._stats).forEach((r=>{this._updateFrequencyFor(r,t,e)})),this._frequencyLastTime=e}_updateFrequencyFor(e,t,r){const n=this._frequencyAccumulators[e]||0;this._frequencyAccumulators[e]=0;const i=n/(t||1)*1e3;let o=this._movingAverages[e];o||(o=this._movingAverages[e]={});const a=this._options.movingAverageIntervals;for(var c=0;c<a.length;c++){var u=a[c],l=o[u];l||(l=o[u]=s(u)),l.push(r,i)}}_applyOp(e){const t=e[0],r=e[1];if("number"!=typeof r)throw new Error("invalid increment number:",r);let n;n=this._stats.hasOwnProperty(t)?this._stats[t]:this._stats[t]=i(0),this._stats[t]=n.plus(r),this._frequencyAccumulators[t]||(this._frequencyAccumulators[t]=0),this._frequencyAccumulators[t]+=r}}}}},{package:"libp2p-switch",file:"/home/circleci/project/node_modules/libp2p-switch/src/stats/stat.js"}],[4893,{hashlru:4299},function(){with(this)return function(){"use strict";return function(e,t,r){const n=e("hashlru");t.exports=e=>{const t=n(e);return t.delete=t.remove,t}}}},{package:"libp2p-switch",file:"/home/circleci/project/node_modules/libp2p-switch/src/stats/old-peers.js"}],[4888,{"interface-connection":4331,"pull-stream/pull":5352},function(){with(this)return function(){"use strict";return function(e,t,r){const n=e("interface-connection").Connection,i=e("pull-stream/pull");t.exports=(e,t,r,s)=>{const o=new Promise(((e,t)=>{r.getPeerInfo(((t,n)=>{if(!t&&n)return void e(n);const i=r.setPeerInfo;r.setPeerInfo=t=>{i.call(r,t),e(t)}}))})),a={source:i(r,s.incoming(e,t,o)),sink:i(s.outgoing(e,t,o),r)};return new n(a,r)}}}},{package:"libp2p-switch",file:"/home/circleci/project/node_modules/libp2p-switch/src/observe-connection.js"}],[4876,{"./base":4874,"class-is":2066,"fsm-event":4248,"multistream-select":5120},function(){with(this)return function(){"use strict";return function(e,t,r){const n=e("fsm-event"),i=e("multistream-select"),s=e("class-is"),o=e("./base");t.exports=s(class extends o{constructor({connection:e,_switch:t,transportKey:r,peerInfo:s}){super({_switch:t,name:`inc:${t._peerInfo.id.toB58String().slice(0,8)}`}),this.conn=e,this.theirPeerInfo=s||null,this.theirB58Id=this.theirPeerInfo?this.theirPeerInfo.id.toB58String():null,this.ourPeerInfo=this.switch._peerInfo,this.transportKey=r,this.protocolMuxer=this.switch.protocolMuxer(this.transportKey),this.msListener=new i.Listener,this._state=n("DIALED",{DISCONNECTED:{disconnect:"DISCONNECTED"},DIALED:{privatize:"PRIVATIZING",encrypt:"ENCRYPTING"},PRIVATIZING:{done:"PRIVATIZED",disconnect:"DISCONNECTING"},PRIVATIZED:{encrypt:"ENCRYPTING"},ENCRYPTING:{done:"ENCRYPTED",disconnect:"DISCONNECTING"},ENCRYPTED:{upgrade:"UPGRADING",disconnect:"DISCONNECTING"},UPGRADING:{done:"MUXED"},MUXED:{disconnect:"DISCONNECTING"},DISCONNECTING:{done:"DISCONNECTED"}}),this._state.on("DISCONNECTED",(()=>this._onDisconnected())),this._state.on("PRIVATIZING",(()=>this._onPrivatizing())),this._state.on("PRIVATIZED",(()=>this._onPrivatized())),this._state.on("ENCRYPTING",(()=>this._onEncrypting())),this._state.on("ENCRYPTED",(()=>{this.log("successfully encrypted connection to %s",this.theirB58Id||"unknown peer"),this.emit("encrypted",this.conn)})),this._state.on("UPGRADING",(()=>this._onUpgrading())),this._state.on("MUXED",(()=>{this.log("successfully muxed connection to %s",this.theirB58Id||"unknown peer"),this.emit("muxed",this.conn)})),this._state.on("DISCONNECTING",(()=>{this._state("done")}))}_onEncrypting(){this.log("encrypting connection via %s",this.switch.crypto.tag),this.msListener.addHandler(this.switch.crypto.tag,((e,t)=>{this.conn=this.switch.crypto.encrypt(this.ourPeerInfo.id,t,undefined,(e=>{if(e)return this.close(e);this.conn.getPeerInfo(((e,t)=>{this.theirPeerInfo=t,this._state("done")}))}))}),null),this.msListener.handle(this.conn,(e=>{e&&this.emit("crypto handshaking failed",e)}))}_onUpgrading(){this.log("adding the protocol muxer to the connection"),this.protocolMuxer(this.conn,this.msListener),this._state("done")}},{className:"IncomingConnectionFSM",symbolName:"libp2p-switch/IncomingConnectionFSM"})}}},{package:"libp2p-switch",file:"/home/circleci/project/node_modules/libp2p-switch/src/connection/incoming.js"}],[4879,{},function(){with(this)return function(){"use strict";return function(e,t,r){t.exports={BLACK_LIST_TTL:3e5,BLACK_LIST_ATTEMPTS:5,DIAL_TIMEOUT:3e4,MAX_COLD_CALLS:50,MAX_PARALLEL_DIALS:100,QUARTER_HOUR:9e5,PRIORITY_HIGH:10,PRIORITY_LOW:20}}}},{package:"libp2p-switch",file:"/home/circleci/project/node_modules/libp2p-switch/src/constants.js"}],[4882,{"../constants":4879,"../errors":4883,"./queue":4881,"async/nextTick":1714,debug:2197,once:5184,retimer:5591},function(){with(this)return function(){"use strict";return function(e,t,r){const n=e("once"),i=e("./queue"),{DIAL_ABORTED:s}=e("../errors"),o=e("async/nextTick"),a=e("retimer"),{QUARTER_HOUR:c,PRIORITY_HIGH:u}=e("../constants"),l=e("debug")("libp2p:switch:dial:manager"),d=()=>{};t.exports=class{constructor(e){this._queue=new Set,this._coldCallQueue=new Set,this._dialingQueues=new Set,this._queues={},this.switch=e,this._cleanInterval=a(this._clean.bind(this),c),this.start()}_clean(){Object.values(this._queues).forEach((e=>{if(e.blackListed===Infinity)return e.abort(),void delete this._queues[e.id];if(!e.blackListed&&!e.isRunning&&e.length<1){let t=!1;try{const r=this.switch._peerBook.get(e.id);t=Boolean(r.isConnected())}catch(e){}t||(e.abort(),delete this._queues[e.id])}})),this._cleanInterval.reschedule(c)}start(){this.isRunning=!0}stop(){this.isRunning=!1,this._queue.clear(),this._coldCallQueue.clear(),this._cleanInterval.clear();Object.values(this._queues).forEach((e=>{e.abort(),delete this._queues[e.id]}))}add({peerInfo:e,protocol:t,options:r,callback:i}){i=i?n(i):d;const a=this.getQueue(e);if(r.priority>u){if(this._coldCallQueue.size>=this.switch.dialer.MAX_COLD_CALLS)return o(i,s());if(this._queue.has(a.id))return o(i,s())}a.add(t,r.useFSM,i),e.isConnected()?a.start():a.isDialAllowed()&&(a.isRunning||(r.priority<=u?(this._queue.add(a.id),this._coldCallQueue.delete(a.id)):this._coldCallQueue.add(a.id)),this.run())}run(){if(this.isRunning&&this._dialingQueues.size<this.switch.dialer.MAX_PARALLEL_DIALS){let e={done:!0};if(this._queue.size>0?(e=this._queue.values().next(),this._queue.delete(e.value)):this._coldCallQueue.size>0&&(e=this._coldCallQueue.values().next(),this._coldCallQueue.delete(e.value)),e.done)return;let t=this._queues[e.value];if(!t)return void l("missing queue %s, maybe it was aborted?",e.value);this._dialingQueues.add(t.id),t.start()}}clearBlacklist(e){const t=this.getQueue(e);t.blackListed=null,t.blackListCount=0}_onQueueStopped(e){this._dialingQueues.delete(e),this.run()}getQueue(e){const t=e.id.toB58String();return this._queues[t]=this._queues[t]||new i(t,this.switch,this._onQueueStopped.bind(this)),this._queues[t]}}}}},{package:"libp2p-switch",file:"/home/circleci/project/node_modules/libp2p-switch/src/dialer/queueManager.js"}],[4896,{"libp2p-identify":4792},function(){with(this)return function(){"use strict";return function(e,t,r){const n=e("libp2p-identify");t.exports.msHandle=(e,t)=>new Promise(((r,n)=>{e.handle(t,(e=>{if(e)return n(e);r()}))})),t.exports.msSelect=(e,t)=>new Promise(((r,n)=>{e.select(t,((e,t)=>{if(e)return n(e);r(t)}))})),t.exports.identifyDialer=(e,t)=>new Promise(((r,i)=>{n.dialer(e,t,((e,t,n)=>{if(e)return i(e);r({peerInfo:t,observedAddrs:n})}))})),t.exports.uniqueBy=(e,t)=>[...new Map(e.map((e=>[t(e),e]))).values()]}}},{package:"libp2p-switch",file:"/home/circleci/project/node_modules/libp2p-switch/src/utils.js"}],[5120,{"./constants":5118,"./dialer":5119,"./listener":5121,"./listener/match-exact":5123,"./listener/match-semver":5124},function(){with(this)return function(){"use strict";return function(e,t,r){r.Listener=r.listener=e("./listener"),r.Dialer=r.dialer=e("./dialer"),r.matchSemver=e("./listener/match-semver"),r.matchExact=e("./listener/match-exact"),r.constants=e("./constants")}}},{package:"multistream-select",file:"/home/circleci/project/node_modules/multistream-select/src/index.js"}],[4877,{"../errors":4883,"../observe-connection":4888,"../utils":4896,"./base":4874,"async/nextTick":1714,"async/parallel":1715,"class-is":2066,"err-code":2299,"fsm-event":4248,"libp2p-circuit":4741,"libp2p-identify":4792,"multistream-select":5120},function(){with(this)return function(){"use strict";return function(e,t,r){const n=e("fsm-event"),i=e("libp2p-circuit"),s=e("multistream-select"),o=e("class-is"),a=e("./base"),c=e("async/parallel"),u=e("async/nextTick"),l=e("libp2p-identify"),d=e("err-code"),{msHandle:f,msSelect:h,identifyDialer:p}=e("../utils"),m=e("../observe-connection"),{CONNECTION_FAILED:g,DIAL_SELF:y,INVALID_STATE_TRANSITION:b,NO_TRANSPORTS_REGISTERED:_,maybeUnexpectedEnd:w}=e("../errors");t.exports=o(class extends a{constructor({_switch:e,peerInfo:t,muxer:r,conn:i,type:s="out"}){super({_switch:e,name:`${s}:${e._peerInfo.id.toB58String().slice(0,8)}`}),this.theirPeerInfo=t,this.theirB58Id=this.theirPeerInfo.id.toB58String(),this.conn=i,this.muxer=r;let o="DISCONNECTED";this.muxer&&(o="MUXED"),this._state=n(o,{DISCONNECTED:{dial:"DIALING",disconnect:"DISCONNECTED",done:"DISCONNECTED"},DIALING:{abort:"ABORTED",done:"DIALED",error:"ERRORED",disconnect:"DISCONNECTING"},DIALED:{encrypt:"ENCRYPTING",privatize:"PRIVATIZING"},PRIVATIZING:{done:"PRIVATIZED",abort:"ABORTED",disconnect:"DISCONNECTING"},PRIVATIZED:{encrypt:"ENCRYPTING"},ENCRYPTING:{done:"ENCRYPTED",error:"ERRORED",disconnect:"DISCONNECTING"},ENCRYPTED:{upgrade:"UPGRADING",disconnect:"DISCONNECTING"},UPGRADING:{stop:"CONNECTED",done:"MUXED",error:"ERRORED",disconnect:"DISCONNECTING"},MUXED:{disconnect:"DISCONNECTING"},CONNECTED:{disconnect:"DISCONNECTING"},DISCONNECTING:{done:"DISCONNECTED",disconnect:"DISCONNECTING"},ABORTED:{},ERRORED:{disconnect:"DISCONNECTING"}}),this._state.on("DISCONNECTED",(()=>this._onDisconnected())),this._state.on("DIALING",(()=>this._onDialing())),this._state.on("DIALED",(()=>this._onDialed())),this._state.on("PRIVATIZING",(()=>this._onPrivatizing())),this._state.on("PRIVATIZED",(()=>this._onPrivatized())),this._state.on("ENCRYPTING",(()=>this._onEncrypting())),this._state.on("ENCRYPTED",(()=>{this.log("successfully encrypted connection to %s",this.theirB58Id),this.emit("encrypted",this.conn)})),this._state.on("UPGRADING",(()=>this._onUpgrading())),this._state.on("MUXED",(()=>{this.log("successfully muxed connection to %s",this.theirB58Id),delete this.switch.conns[this.theirB58Id],this.emit("muxed",this.muxer)})),this._state.on("CONNECTED",(()=>{this.log("unmuxed connection opened to %s",this.theirB58Id),this.emit("unmuxed",this.conn)})),this._state.on("DISCONNECTING",(()=>this._onDisconnecting())),this._state.on("ABORTED",(()=>this._onAborted())),this._state.on("ERRORED",(()=>this._onErrored())),this._state.on("error",(e=>this._onStateError(e)))}dial(){return this.theirB58Id===this.ourPeerInfo.id.toB58String()?this.emit("error",y()):"DIALING"===this.getState()?this.log("attempted to dial while already dialing, ignoring"):void this._state("dial")}shake(e,t){return e?this.muxer&&this.muxer.newStream?this.muxer.newStream(((r,n)=>{if(r)return t(r,null);this.log("created new stream to %s",this.theirB58Id),this._protocolHandshake(e,n,t)})):void this._protocolHandshake(e,this.conn,t):t(null,null)}upgrade(){this._state("upgrade")}_onDialing(){if(this.log("dialing %s",this.theirB58Id),!this.switch.hasTransports())return this.close(_());const e=this.switch.availableTransports(this.theirPeerInfo),t=Boolean(this.switch.transports[i.tag]);t&&!e.includes(i.tag)&&e.push(i.tag);const r=n=>{let s=n;if(!s)return t?this.close(g(`No available transports to dial peer ${this.theirB58Id}!`)):this.close(g(`Circuit not enabled and all transports failed to dial peer ${this.theirB58Id}!`));s===i.tag&&this.theirPeerInfo.multiaddrs.add(`/p2p-circuit/p2p/${this.theirB58Id}`),this.log("dialing transport %s",s),this.switch.transport.dial(s,this.theirPeerInfo,((t,n)=>{if(t)return this.emit("error:connection_attempt_failed",t),this.log(t),r(e.shift());this.conn=m(s,null,n,this.switch.observer),this._state("done")}))};r(e.shift())}_onDialed(){this.log("successfully dialed %s",this.theirB58Id),this.emit("connected",this.conn)}_onDisconnecting(){this.log("disconnecting from %s",this.theirB58Id,Boolean(this.muxer)),delete this.switch.conns[this.theirB58Id];let e=[];if(this.muxer&&e.push((e=>{this.muxer.end((()=>{delete this.muxer,e()}))})),this.conn){try{this.conn.source.abort()}catch(e){}delete this.conn}c(e,(()=>{this._state("done")}))}_onEncrypting(){const e=new s.Dialer;e.handle(this.conn,(t=>{if(t)return this.close(w(t));this.log("selecting crypto %s to %s",this.switch.crypto.tag,this.theirB58Id),e.select(this.switch.crypto.tag,((e,t)=>{if(e)return this.close(w(e));const r=m(null,this.switch.crypto.tag,t,this.switch.observer),n=this.switch.crypto.encrypt(this.ourPeerInfo.id,r,this.theirPeerInfo.id,(e=>{if(e)return this.close(e);this.conn=n,this.conn.setPeerInfo(this.theirPeerInfo),this._state("done")}))}))}))}_onUpgrading(){const e=Object.keys(this.switch.muxers);if(this.log("upgrading connection to %s",this.theirB58Id),0===e.length)return this._state("stop");const t=new s.Dialer;t.handle(this.conn,(r=>{if(r)return this._didUpgrade(r);const n=r=>{this.log("selecting %s",r),t.select(r,((t,i)=>{if(t)return 0===e.length?this._didUpgrade(t):n(e.shift());const s=m(null,r,i,this.switch.observer);this.muxer=this.switch.muxers[r].dialer(s),this.muxer.once("close",(()=>{this.close()})),this.muxer.on("stream",(e=>{this.log("new stream created via muxer to %s",this.theirB58Id),e.setPeerInfo(this.theirPeerInfo),this.switch.protocolMuxer(null)(e)})),this._didUpgrade(null),this.switch.identify&&this._identify(((e,t)=>{if(e)return this.close(e);this.theirPeerInfo=this.switch._peerBook.put(t.peerInfo)}))}))};n(e.shift())}))}_identify(e){if(!this.muxer)return u(e,d("The connection was already closed","ERR_CONNECTION_CLOSED"));this.muxer.newStream((async(t,r)=>{if(t)return e(t);const n=new s.Dialer;let i;try{await f(n,r);const e=await h(n,l.multicodec);i=await p(e,this.theirPeerInfo)}catch(t){return e(t)}e(null,i)}))}_didUpgrade(e){if(e)return this.log("Error upgrading connection:",e),this.switch.conns[this.theirB58Id]=this,this.emit("error:upgrade_failed",e),this._state("stop");this._state("done")}_protocolHandshake(e,t,r){const n=new s.Dialer;n.handle(t,(t=>{if(t)return r(t,null);n.select(e,((t,n)=>{if(t)return this.log("could not perform protocol handshake:",t),r(t,null);const i=m(null,e,n,this.switch.observer);this.log("successfully performed handshake of %s to %s",e,this.theirB58Id),this.emit("connection",i),r(null,i)}))}))}_onStateError(e){this.emit("error",b(e)),this.log(e)}},{className:"ConnectionFSM",symbolName:"libp2p-switch/ConnectionFSM"})}}},{package:"libp2p-switch",file:"/home/circleci/project/node_modules/libp2p-switch/src/connection/index.js"}],[4792,{"./dialer":4791,"./listener":4793,"./message":4794},function(){with(this)return function(){"use strict";return function(e,t,r){(r=t.exports).multicodec="/ipfs/id/1.0.0",r.listener=e("./listener"),r.dialer=e("./dialer"),r.message=e("./message")}}},{package:"libp2p-identify",file:"/home/circleci/project/node_modules/libp2p-identify/src/index.js"}],[4886,{"./queue":4887,"async/tryEach":1725,debug:2197},function(){with(this)return function(){"use strict";return function(e,t,r){const n=e("async/tryEach"),i=e("debug")("libp2p:switch:dialer"),s=e("./queue");t.exports=class{constructor(e,t){i("create: %s peer limit, %s dial timeout",e,t),this.perPeerLimit=e,this.dialTimeout=t,this.queues=new Map}dialMany(e,t,r,s){i("dialMany:start");const o={cancel:!1};let a=[];const c=r.map((r=>n=>this.dialSingle(e,t,r,o,((e,t)=>e?(a.push(e),n(e)):n(null,t)))));n(c,((e,t)=>{if(t&&t.conn)return i("dialMany:success"),s(null,t);i("dialMany:error"),s(a)}))}dialSingle(e,t,r,n,o){const a=e.toB58String();let c;i("dialSingle: %s:%s",a,r.toString()),this.queues.has(a)?c=this.queues.get(a):(c=new s(this.perPeerLimit,this.dialTimeout),this.queues.set(a,c)),c.push(t,r,n,o)}}}}},{package:"libp2p-switch",file:"/home/circleci/project/node_modules/libp2p-switch/src/limit-dialer/index.js"}],[4735,{"./circuit/dialer":4736,"./circuit/utils":4740,"./listener":4742,debug:2197,mafmt:5067,multiaddr:5085},function(){with(this)return function(){"use strict";return function(e,t,r){const n=e("mafmt"),i=e("multiaddr"),s=e("./circuit/dialer"),o=e("./circuit/utils"),a=e("debug");a("libp2p:circuit:transportdialer").err=a("libp2p:circuit:error:transportdialer");const c=e("./listener");t.exports=class{static get tag(){return"Circuit"}constructor(e,t){this.options=t||{},this.swarm=e,this.dialer=null,this.utils=o(e),this.peerInfo=this.swarm._peerInfo,this.relays=this.filter(this.peerInfo.multiaddrs.toArray()),0===this.relays.length&&this.peerInfo.multiaddrs.add(`/p2p-circuit/ipfs/${this.peerInfo.id.toB58String()}`),this.dialer=new s(e,t),this.swarm.on("peer-mux-established",(e=>{this.dialer.canHop(e)})),this.swarm.on("peer-mux-closed",(e=>{this.dialer.relayPeers.delete(e.id.toB58String())}))}_dialSwarmRelays(){this.relays.forEach((e=>{e.toString().split("/p2p-circuit").filter((e=>e.length)).forEach((e=>{const t=this.utils.peerInfoFromMa(i(e));this.dialer._dialRelay(t)}))}))}dial(e,t,r){return this.dialer.dial(e,t,r)}createListener(e,t){"function"==typeof e&&(t=e,e=this.options||{});const r=c(this.swarm,e,t);return r.on("listen",this._dialSwarmRelays.bind(this)),r}filter(e){return Array.isArray(e)||(e=[e]),e.filter((e=>n.Circuit.matches(e)))}}}}},{package:"libp2p-circuit",file:"/home/circleci/project/node_modules/libp2p-circuit/src/circuit.js"}],[4700,{"./VisibilityChangeEmitter":4701,_process:5294,debug:4703,events:2029,"lodash/get":5034,"lodash/isFunction":5043},function(){with(this)return function(){"use strict";return function(e,t,r){(function(t){(function(){Object.defineProperty(r,"__esModule",{value:!0});var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),i=c(e("events")),s=c(e("lodash/get")),o=c(e("lodash/isFunction")),a=c(e("./VisibilityChangeEmitter"));function c(e){return e&&e.__esModule?e:{default:e}}function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var d=e("debug")("latency-monitor:LatencyMonitor"),f=function(e){function r(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{},n=e.latencyCheckIntervalMs,i=e.dataEmitIntervalMs,o=e.asyncTestFn,c=e.latencyRandomPercentage;u(this,r);var f=l(this,(r.__proto__||Object.getPrototypeOf(r)).call(this)),p=f;return p.latencyCheckIntervalMs=n||500,p.latencyRandomPercentage=c||10,p._latecyCheckMultiply=p.latencyRandomPercentage/100*2*p.latencyCheckIntervalMs,p._latecyCheckSubtract=p._latecyCheckMultiply/2,p.dataEmitIntervalMs=null===i||0===i?undefined:i||5e3,d("latencyCheckIntervalMs: %s dataEmitIntervalMs: %s",p.latencyCheckIntervalMs,p.dataEmitIntervalMs),p.dataEmitIntervalMs?d("Expecting ~%s events per summary",p.latencyCheckIntervalMs/p.dataEmitIntervalMs):d("Not emitting summaries"),p.asyncTestFn=o,t&&t.hrtime?(d("Using process.hrtime for timing"),p.now=t.hrtime,p.getDeltaMS=function(e){var t=p.now(e);return 1e3*t[0]+t[1]/1e6}):"undefined"!=typeof window&&(0,s.default)(window,"performance.now")?(d("Using performance.now for timing"),p.now=window.performance.now.bind(window.performance),p.getDeltaMS=function(e){return Math.round(p.now()-e)}):(d("Using Date.now for timing"),p.now=Date.now,p.getDeltaMS=function(e){return p.now()-e}),p._latencyData=p._initLatencyData(),h()&&(p._visibilityChangeEmitter=new a.default,p._visibilityChangeEmitter.on("visibilityChange",(function(e){e?p._startTimers():(p._emitSummary(),p._stopTimers())}))),p._visibilityChangeEmitter&&!p._visibilityChangeEmitter.isVisible()||p._startTimers(),f}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(r,e),n(r,[{key:"_startTimers",value:function(){var e=this;this._checkLatencyID||(this._checkLatency(),this.dataEmitIntervalMs&&(this._emitIntervalID=setInterval((function(){return e._emitSummary()}),this.dataEmitIntervalMs),(0,o.default)(this._emitIntervalID.unref)&&this._emitIntervalID.unref()))}},{key:"_stopTimers",value:function(){this._checkLatencyID&&(clearTimeout(this._checkLatencyID),this._checkLatencyID=undefined),this._emitIntervalID&&(clearInterval(this._emitIntervalID),this._emitIntervalID=undefined)}},{key:"_emitSummary",value:function(){var e=this.getSummary();e.events>0&&this.emit("data",e)}},{key:"getSummary",value:function(){var e={events:this._latencyData.events,minMs:this._latencyData.minMs,maxMs:this._latencyData.maxMs,avgMs:this._latencyData.events?this._latencyData.totalMs/this._latencyData.events:Number.POSITIVE_INFINITY,lengthMs:this.getDeltaMS(this._latencyData.startTime)};return this._latencyData=this._initLatencyData(),d("Summary: %O",e),e}},{key:"_checkLatency",value:function(){var e=this,t=this,r=Math.random()*t._latecyCheckMultiply-t._latecyCheckSubtract,n={deltaOffset:Math.ceil(t.latencyCheckIntervalMs+r),startTime:t.now()},i=function(){if(e._checkLatencyID){var r=t.getDeltaMS(n.startTime)-n.deltaOffset;t._checkLatency(),t._latencyData.events++,t._latencyData.minMs=Math.min(t._latencyData.minMs,r),t._latencyData.maxMs=Math.max(t._latencyData.maxMs,r),t._latencyData.totalMs+=r,d("MS: %s Data: %O",r,t._latencyData)}};d("localData: %O",n),this._checkLatencyID=setTimeout((function(){t.asyncTestFn?(n.deltaOffset=0,n.startTime=t.now(),t.asyncTestFn(i)):(n.deltaOffset-=1,i())}),n.deltaOffset),(0,o.default)(this._checkLatencyID.unref)&&this._checkLatencyID.unref()}},{key:"_initLatencyData",value:function(){return{startTime:this.now(),minMs:Number.POSITIVE_INFINITY,maxMs:Number.NEGATIVE_INFINITY,events:0,totalMs:0}}}]),r}(i.default);function h(){return"undefined"!=typeof window}r.default=f}).call(this)}).call(this,e("_process"))}}},{package:"latency-monitor",file:"/home/circleci/project/node_modules/latency-monitor/dist/LatencyMonitor.js"}],[4441,{buffer:2028},function(){with(this)return function(){"use strict";return function(e,t,r){(function(e){(function(){t.exports=function(t,r,n,i){const s=r+t.length;return n>=s||i<r?e.alloc(0):(i>=r&&i<s&&(t=t.slice(0,i-r)),n>=r&&n<s&&(t=t.slice(n-r)),t)}}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"ipfs-unixfs-exporter",file:"/home/circleci/project/node_modules/ipfs-unixfs-exporter/src/utils/extract-data-from-block.js"}]],[],{});